<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Popily API Documentation">
    <meta name="author" content="Popily">
    <link rel="icon" href="../favicon.ico">

    <title>Popily API Documentation</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../theme/css/bootstrap.css" />

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link rel="stylesheet" type="text/css" href="../theme/css/ie10-viewport-bug-workaround.css" />
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="../theme/css/style.css" />
    <link rel="stylesheet" type="text/css" href="../theme/css/popily.css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
    <script src="../theme/js/popily.js"></script>
    <script src="../theme/js/popily-geo.js"></script>
    <script>
    popily.api.setToken('d39c69f05c5fae5cbcbe6a3b6ebac693c6ffb807');
    </script>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700|Open+Sans+Condensed:300,700|Lato:400,700' rel='stylesheet' type='text/css'>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        

</head>

<body>
    <div class='bar'>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class='main-logo' href="http://popily.com/" title="Home"></a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="http://popily.com/about/"> About The Team </a></li>
                    <li><a href="http://developers.popily.com/"> API Docs </a></li>
                    <!-- <li><a href="http://blog.popily.com/"> Blog </a></li> -->
                    <li><a href="http://partiallyderivative.com"> Podcast </a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </nav>
        <div class="hero">
            <h1 class="post-title">Made For Developers With <span style='color:#e74c3c; font-size: 1.5em;position: relative; top: 8px;'>&hearts;</span></h1>
        </div>
    </div>
    <!-- end of header section -->
    <div class="container">
        <div class='row'>
            <div class='col-sm-3'>
<div class="sidebar panel-group">
    <h4>
        <a href="/">Get Started!</a>
    </h4>
    <h4>
        <a href="/introduction">Introduction</a>
    </h4>
    <h4>
        <a href="/bar-and-pie-charts">Bar And Pie Charts</a>
    </h4>
    <h4>
        <a href="/line-and-area-charts">Line And Area Charts</a>
    </h4>
    <h4>
        <a href="/data-analysis-101">Data Analysis 101</a>
    </h4>
    <h4>
        <a href="/authentication">Authentication</a>
    </h4>
    <h4>
        <a href="/time-series-charts">Time Series Charts</a>
    </h4>
    <h4>
        <a href="/adding-data">Adding Data</a>
    </h4>
    <h4>
        <a href="/scatterplots">Scatterplots</a>
    </h4>
    <h4>
        <a href="/getting-charts">Getting Charts</a>
    </h4>
    <h4>
        <a href="/maps-and-geo">Maps And Geo</a>
    </h4>
    <h4>
        <a href="/transforming-chart-data">Transforming Chart Data</a>
    </h4>
    <h4>
        <a href="/customizing-chart-presentation">Customizing Chart Presentation</a>
    </h4>
    <h4>
        <a href="/basic-chart-customization">Basic Chart Customization</a>
    </h4>

    <h4>
      <a data-toggle="collapse" href="#collapse1">Product Tour</a>
    </h4>
    <div id="collapse1" class="collapse">
    <ol class="list-group">
    <li class="list-group-item"><a href="http://demo.popily.com/">Dashboard</a></li>

</ol>
</div>
</div>            </div>
            <div class='col-sm-9'>
<section id="content" class="body">
  <header>
    <h1>
      Adding Data
    </h1>
  </header>
<p>In Popily, the data you put together for analysis is called a <strong>Data Source</strong>. This could be the result of a database query, a request to an API, or a CSV file. Sending data to Popily for analysis is a two-step process:</p>
<h2>Sending the data</h2>
<p>Popily does a lot of work behind the scenes to figure out what type of information is in your data, and the relationhips between variables in your data could be visualized. So you just need to tell Popily where the data can be accessed, and we'll do the rest. We can work with data from your database, or from flat files like CSVs -- whatever makes more sense in your application. Here's an example where Popily connects directly to a database.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">sourceOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">connection_string</span><span class="o">:</span> <span class="s1">&#39;mysql://username:password@host:port/database&#39;</span><span class="p">,</span>
    <span class="nx">query</span><span class="o">:</span> <span class="s1">&#39;SELECT * FROM my_table&#39;</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="nx">sourceOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>


<p>When adding a Data Source from a URL (either an API endpoint or the location of a CSV file), you use the <code>url</code> property. </p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">sourceOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">columns</span><span class="o">:</span><span class="nx">columns</span><span class="p">,</span> 
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://mysite.com/data/some-csv.csv&#39;</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="nx">sourceOptions</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>


<p>Lastly, when using the Python, Node.js or any other server-side clients, you can also upload files. In Python:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">popily</span>

<span class="n">popily_api</span> <span class="o">=</span> <span class="n">popily</span><span class="o">.</span><span class="n">Popily</span><span class="p">(</span><span class="s">&#39;YOUR API TOKEN&#39;</span><span class="p">)</span>

<span class="n">your_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;/path/to/your/file.csv&#39;</span><span class="p">)</span>
<span class="n">source</span> <span class="o">=</span> <span class="n">popily_api</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="n">file_obj</span><span class="o">=</span><span class="n">your_file</span><span class="p">)</span>
</pre></div>


<p>In Node.js:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">popily</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;popily&#39;</span><span class="p">)(</span><span class="s1">&#39;YOUR API TOKEN&#39;</span><span class="p">);</span>

<span class="nx">filePath</span> <span class="o">=</span> <span class="s1">&#39;/path/to/your/file.csv&#39;</span>
<span class="kd">var</span> <span class="nx">sourceData</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="nx">filePath</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">addSource</span><span class="p">(</span><span class="nx">sourceData</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the source</span>
<span class="p">});</span>
</pre></div>


<p><strong>Note</strong>: Data Sources are processed asynchronously. So you'll get an immediate response from the API, but it may take a few seconds to a few minutes (depending on the size and shape of your data) for Popily to start producing Insights. This is only true when creating a new Data Source. Updates to a Data Source are performed in seconds.</p>
<p>We'll get into more detail about how to retrieve data and render charts in the <a href="/getting-charts/">Getting Charts</a>, but just FYI, the easiest workaround for this is to poll for the Insight you want, like this:</p>
<div class="highlight"><pre><span class="c1">// Get the relationship between &#39;Sale Amount&#39; and &#39;Sale Date&#39;</span>
<span class="kd">var</span> <span class="nx">insightOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">source</span><span class="o">:</span> <span class="nx">source</span><span class="p">.</span><span class="nx">slug</span><span class="p">,</span> 
    <span class="nx">columns</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;Sale Amount&#39;</span><span class="p">,</span> <span class="s1">&#39;Sale Date&#39;</span><span class="p">],</span>
    <span class="nx">poll</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">};</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">chart</span><span class="p">.</span><span class="nx">getAndRender</span><span class="p">(</span><span class="s1">&#39;#my-chart&#39;</span><span class="p">,</span> <span class="nx">insightOptions</span><span class="p">);</span>
</pre></div>


<p>You can also check the <code>status</code> of a Data Source at any time using its slug or id. </p>
<div class="highlight"><pre><span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">getSource</span><span class="p">(</span><span class="s1">&#39;your-source-slug&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">status</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>


<p>These are the possible statuses of a Data Source. </p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>inspecting</td>
<td>Popily is looking for relationships in the data.</td>
</tr>
<tr>
<td>calculating</td>
<td>Popily is creating Insights, but still working.</td>
</tr>
<tr>
<td>supplementing</td>
<td>Reprocessing the Data Source after a change.</td>
</tr>
<tr>
<td>augmenting</td>
<td>Popily is adding additional columns for things like sentiment analysis</td>
</tr>
<tr>
<td>error</td>
<td>Something went wrong.</td>
</tr>
<tr>
<td>finished</td>
<td>All Insights have been created.</td>
</tr>
</tbody>
</table>
<p>If you ever need to access a list of Data Sources -- either for your account, or associated with a User you have created -- you can retrieve those from the <code>/sources/</code> API endpoint, which is exposed in each of our client libraries. </p>
<p>For example, in our browser client:</p>
<div class="highlight"><pre><span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">setToken</span><span class="p">(</span><span class="s1">&#39;YOUR API TOKEN || USER API TOKEN&#39;</span><span class="p">);</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">getSources</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">sources</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sources</span><span class="p">);</span> 
<span class="p">});</span>
</pre></div>
</section>
            </div>
        </div>

    </div>
    <!-- start of footer section -->
    <footer class="footer">
        <div class="container">
            <p class="text-muted">
                <center>
                    &copy; <time datetime="2016">2016</time> Popily, LLC All rights reserved.
                </center>
            </p>
        </div>
    </footer>

    <!-- Google Analytics Code Start -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-61764668-3', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- Google Analytics Code End -->

    <!-- Loading mathjax macro -->
    <!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to
        left justify single line equations in code cells. displayAlign: 'center', "HTML-CSS": { styles: {'.MathJax_Display': {"margin": 0}}, linebreaks: { automatic: true } } });
    </script>
    <!-- End of mathjax configuration -->

    <!-- Bootstrap core JavaScript
      ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="../theme/js/jquery.min.js"><\/script>')
    </script>
    <script src="../theme/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../theme/js/ie10-viewport-bug-workaround.js"></script>
</body>

</html>