!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function a(n){return n.length}function o(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function s(n){return(n+="")===xa||n[0]===ba?ba+n:n}function f(n){return(n+="")[0]===ba?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=_a.length;r>e;++e){var u=_a[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,u){var i,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,i=e.indexOf(a)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){oa.event.preventDefault()}function k(){for(var n,t=oa.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=oa.event;u.target=n,oa.event=u,t[u.type].apply(e,r)}finally{oa.event=i}}},t}function E(n){return Sa(n,Aa),n}function A(n){return"function"==typeof n?n:function(){return ka(n,this)}}function C(n){return"function"==typeof n?n:function(){return Na(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=oa.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?o:a:n.local?i:u}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+oa.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",L(u+" "+n))):e.setAttribute("class",L(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===Ca&&t.documentElement.namespaceURI===Ca?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=oa.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ea(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],a=0,o=i.length;o>a;a++)(u=i[a])&&t(u,a,e);return n}function Z(n){return Sa(n,La),n}function V(n){var t,e;return function(r,u,i){var a,o=n[i].update,l=o.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(a=o[t])&&++t<l;);return a}}function X(n,t,e){function r(){var t=this[a];t&&(this.removeEventListener(n,t,t.$),delete this[a])}function u(){var u=l(t,ca(arguments));r.call(this),this.addEventListener(n,this[a]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+oa.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var a="__on"+n,o=n.indexOf("."),l=$;o>0&&(n=n.slice(0,o));var c=qa.get(n);return c&&(n=c,l=B),o?t?u:r:t?b:i}function $(n,t){return function(e){var r=oa.event;oa.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{oa.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Ra,u="click"+r,i=oa.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ta&&(Ta="onselectstart"in e?!1:x(e.style,"userSelect")),Ta){var a=n(e).style,o=a[Ta];a[Ta]="none"}return function(n){if(i.on(r,null),Ta&&(a[Ta]=o),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Da){var i=t(n);if(i.scrollX||i.scrollY){r=oa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Da=!(a.f||a.e),r.remove()}}return Da?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}function G(){return oa.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:-1>n?ja:Math.acos(n)}function tn(n){return n>1?Oa:-1>n?-Oa:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function an(n){return(n=Math.sin(n/2))*n}function on(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(a-i)*n/60:180>n?a:240>n?i+(a-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,a;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,a=.5>=e?e*(1+t):e+t-e*t,i=2*e-a,new yn(u(n+120),u(n),u(n-120))}function sn(n,t,e){return this instanceof sn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof sn?new sn(n.h,n.c,n.l):n instanceof hn?pn(n.l,n.a,n.b):pn((n=Sn((n=oa.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new sn(n,t,e)}function fn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Ia)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof sn?fn(n.h,n.c,n.l):Sn((n=yn(n)).r,n.g,n.b):new hn(n,t,e)}function gn(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=vn(u)*Qa,r=vn(r)*no,i=vn(i)*to,new yn(mn(3.2404542*u-1.5371385*r-.4985314*i),mn(-.969266*u+1.8760108*r+.041556*i),mn(.0556434*u-.2040259*r+1.0572252*i))}function pn(n,t,e){return n>0?new sn(Math.atan2(e,t)*Ya,Math.sqrt(t*t+e*e),n):new sn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function mn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function yn(n,t,e){return this instanceof yn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof yn?new yn(n.r,n.g,n.b):_n(""+n,yn,cn):new yn(n,t,e)}function Mn(n){return new yn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,u,i,a=0,o=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Nn(u[0]),Nn(u[1]),Nn(u[2]))}return(i=uo.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(a=(3840&i)>>4,a=a>>4|a,o=240&i,o=o>>4|o,l=15&i,l=l<<4|l):7===n.length&&(a=(16711680&i)>>16,o=(65280&i)>>8,l=255&i)),t(a,o,l))}function wn(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),a=Math.max(n,t,e),o=a-i,l=(a+i)/2;return o?(u=.5>l?o/(a+i):o/(2-a-i),r=n==a?(t-e)/o+(e>t?6:0):t==a?(e-n)/o+2:(n-t)/o+4,r*=60):(r=NaN,u=l>0&&1>l?0:r),new ln(r,u,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/Qa),u=dn((.2126729*n+.7151522*t+.072175*e)/no),i=dn((.0193339*n+.119192*t+.9503041*e)/to);return hn(116*u-16,500*(r-u),200*(u-i))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function u(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&300>t||304===t){try{n=e.call(i,l)}catch(r){return void a.error.call(i,r)}a.load.call(i,n)}else a.error.call(i,l)}var i={},a=oa.dispatch("beforesend","progress","load","error"),o={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=u:l.onreadystatechange=function(){l.readyState>3&&u()},l.onprogress=function(n){var t=oa.event;oa.event=n;try{a.progress.call(i,l)}finally{oa.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?o[n]:(null==t?delete o[n]:o[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(c=n,i):c},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ca(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),l.open(e,n,!0),null==t||"accept"in o||(o.accept=t+",*/*"),l.setRequestHeader)for(var s in o)l.setRequestHeader(s,o[s]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},oa.rebind(i,a,"on"),null==r?i:i.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,n:null};return ao?ao.n=i:io=i,ao=i,oo||(lo=clearTimeout(lo),oo=1,co(Tn)),i}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(lo),lo=setTimeout(Tn,t)),oo=0):(oo=1,co(Tn))}function Rn(){for(var n=Date.now(),t=io;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=io,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:io=t.n;return ao=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*Ma(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],a=0,o=r[0],l=0;u>0&&o>0&&(l+o+1>t&&(o=Math.max(1,t-l)),i.push(n.substring(u-=o,u+o)),!((l+=o+1)>t));)o=r[a=(a+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=fo.exec(n),r=e[1]||" ",a=e[2]||">",o=e[3]||"-",l=e[4]||"",c=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===a)&&(c=r="0",a="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===l&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ho.get(g)||Fn;var M=c&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===o?"":o;if(0>p){var l=oa.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===a?u+n+k:">"===a?k+u+n:"^"===a?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new po(e-1)),1),e}function i(n,e){return t(n=new po(+n),e),n}function a(n,r,i){var a=u(n),o=[];if(i>1)for(;r>a;)e(a)%i||o.push(new Date(+a)),t(a,1);else for(;r>a;)o.push(new Date(+a)),t(a,1);return o}function o(n,t,e){try{po=Hn;var r=new Hn;return r._=n,a(r,t,e)}finally{po=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=a;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(u),l.offset=In(i),l.range=o,n}function In(n){return function(t,e){try{po=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{po=Date}}}function Yn(n){function t(n){function t(t){for(var e,u,i,a=[],o=-1,l=0;++o<r;)37===n.charCodeAt(o)&&(a.push(n.slice(l,o)),null!=(u=mo[e=n.charAt(++o)])&&(e=n.charAt(++o)),(i=A[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),a.push(e),l=o+1);return a.push(n.slice(l,o)),a.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&po!==Hn,a=new(i?Hn:po);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,a,o=0,l=t.length,c=e.length;l>o;){if(r>=c)return-1;if(u=t.charCodeAt(o++),37===u){if(a=t.charAt(o++),i=C[a in mo?t.charAt(o++):a],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{po=Hn;var t=new po;return t._=n,r(t)}finally{po=Date}}var r=t(n);return e.parse=function(n){try{po=Hn;var t=r.parse(n);return t&&t._}finally{po=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=oa.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(m),k=Xn(m),N=Vn(y),E=Xn(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+go.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(go.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(go.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},C={a:r,A:u,b:i,B:a,c:o,d:tt,e:tt,H:rt,I:rt,j:et,L:at,m:nt,M:ut,p:s,S:it,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Vn(n){return new RegExp("^(?:"+n.map(oa.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ut(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function it(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function at(n,t,e){yo.lastIndex=0;var r=yo.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ot(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=Ma(t)/60|0,u=Ma(t)%60;return e+Zn(r,"0",2)+Zn(u,"0",2)}function lt(n,t,e){Mo.lastIndex=0;var r=Mo.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function st(){}function ft(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function ht(n,t){n&&wo.hasOwnProperty(n.type)&&wo[n.type](n,t)}function gt(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)gt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Ia,t=t*Ia/2+ja/4;var e=n-r,a=e>=0?1:-1,o=a*e,l=Math.cos(t),c=Math.sin(t),s=i*c,f=u*l+s*Math.cos(o),h=s*a*Math.sin(o);ko.add(Math.atan2(h,f)),r=n,u=l,i=c}var t,e,r,u,i;No.point=function(a,o){No.point=n,r=(t=a)*Ia,u=Math.cos(o=(e=o)*Ia/2+ja/4),i=Math.sin(o)},No.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function mt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function yt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return Ma(n[0]-t[0])<Pa&&Ma(n[1]-t[1])<Pa}function St(n,t){n*=Ia;var e=Math.cos(t*=Ia);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Eo,Co+=(n-Co)/Eo,zo+=(t-zo)/Eo,Lo+=(e-Lo)/Eo}function Nt(){function n(n,u){n*=Ia;var i=Math.cos(u*=Ia),a=i*Math.cos(n),o=i*Math.sin(n),l=Math.sin(u),c=Math.atan2(Math.sqrt((c=e*l-r*o)*c+(c=r*a-t*l)*c+(c=t*o-e*a)*c),t*a+e*o+r*l);Ao+=c,qo+=c*(t+(t=a)),To+=c*(e+(e=o)),Ro+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;jo.point=function(u,i){u*=Ia;var a=Math.cos(i*=Ia);t=a*Math.cos(u),e=a*Math.sin(u),r=Math.sin(i),jo.point=n,kt(t,e,r)}}function Et(){jo.point=St}function At(){function n(n,t){n*=Ia;var e=Math.cos(t*=Ia),a=e*Math.cos(n),o=e*Math.sin(n),l=Math.sin(t),c=u*l-i*o,s=i*a-r*l,f=r*o-u*a,h=Math.sqrt(c*c+s*s+f*f),g=r*a+u*o+i*l,p=h&&-nn(g)/h,v=Math.atan2(h,g);Do+=p*c,Po+=p*s,Uo+=p*f,Ao+=v,qo+=v*(r+(r=a)),To+=v*(u+(u=o)),Ro+=v*(i+(i=l)),kt(r,u,i)}var t,e,r,u,i;jo.point=function(a,o){t=a,e=o,jo.point=n,a*=Ia;var l=Math.cos(o*=Ia);r=l*Math.cos(a),u=l*Math.sin(a),i=Math.sin(o),kt(r,u,i)},jo.lineEnd=function(){n(t,e),jo.lineEnd=Et,jo.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,u){var i=[],a=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){u.lineStart();for(var o=0;t>o;++o)u.point((e=n[o])[0],e[1]);return void u.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,i.push(l),a.push(c),l=new Tt(r,n,null,!1),c=new Tt(r,null,l,!0),l.o=c,i.push(l),a.push(c)}}),a.sort(t),qt(i),qt(a),i.length){for(var o=0,l=e,c=a.length;c>o;++o)a[o].e=l=!l;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var o=0,c=s.length;c>o;++o)u.point((f=s[o])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var o=s.length-1;o>=0;--o)u.point((f=s[o])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(u,i){function a(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function o(n,t){var e=u(n,t);d.point(e[0],e[1])}function l(){y.point=o,d.lineStart()}function c(){y.point=a,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,a=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++a<r;)i.point((u=n[a])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Dt))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:c,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=c,g=oa.merge(g);var n=Ot(m,p);g.length?(b||(i.polygonStart(),b=!0),Lt(g,Ut,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Pt(),x=t(M),b=!1;return y}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Oa-Pa:Oa-n[1])-((t=t.x)[0]<0?t[1]-Oa-Pa:Oa-t[1])}function jt(n){var t,e=NaN,r=NaN,u=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(i,a){var o=i>0?ja:-ja,l=Ma(i-e);Ma(l-ja)<Pa?(n.point(e,r=(r+a)/2>0?Oa:-Oa),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(i,r),t=0):u!==o&&l>=ja&&(Ma(e-u)<Pa&&(e-=u*Pa),Ma(i-o)<Pa&&(i-=o*Pa),r=Ft(e,r,i,a),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(o,r),t=0),n.point(e=i,r=a),u=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var u,i,a=Math.sin(n-e);return Ma(a)>Pa?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*a)):(t+r)/2}function Ht(n,t,e,r){var u;if(null==n)u=e*Oa,r.point(-ja,u),r.point(0,u),r.point(ja,u),r.point(ja,0),r.point(ja,-u),r.point(0,-u),r.point(-ja,-u),r.point(-ja,0),r.point(-ja,u);else if(Ma(n[0]-t[0])>Pa){var i=n[0]<t[0]?ja:-ja;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,a=0;ko.reset();for(var o=0,l=t.length;l>o;++o){var c=t[o],s=c.length;if(s)for(var f=c[0],h=f[0],g=f[1]/2+ja/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=c[d];var m=n[0],y=n[1]/2+ja/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>ja,k=p*M;if(ko.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*Fa:b,S^h>=e^m>=e){var N=yt(dt(f),dt(n));bt(N);var E=yt(u,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(a+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Pa>i||Pa>i&&0>ko)^1&a}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=a?v?0:u(f,h):v?u(f+(0>f?ja:-ja),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(g=r(e,p),(wt(e,g)||wt(p,g))&&(p[0]+=Pa,p[1]+=Pa,v=t(p[0],p[1]))),v!==l)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(o&&e&&a^v){var m;d&i||!(m=r(p,e,!0))||(s=0,a?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&wt(e,p)||n.point(p[0],p[1]),e=p,l=v,i=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return s|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),u=dt(t),a=[1,0,0],o=yt(r,u),l=mt(o,o),c=o[0],s=l-c*c;if(!s)return!e&&n;var f=i*l/s,h=-i*c/s,g=yt(a,o),p=xt(a,f),v=xt(o,h);Mt(p,v);var d=g,m=mt(p,d),y=mt(d,d),M=m*m-y*(mt(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=xt(d,(-m-x)/y);if(Mt(b,p),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];w>S&&(_=w,w=S,S=_);var E=S-w,A=Ma(E-ja)<Pa,C=A||Pa>E;if(!A&&k>N&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(Ma(b[0]-w)<Pa?k:N):k<=b[1]&&b[1]<=N:E>ja^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-m+x)/y);return Mt(z,p),[b,_t(z)]}}}function u(t,e){var r=a?n:ja-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),a=i>0,o=Ma(i)>Pa,l=ve(n,6*Ia);return Rt(t,e,l,a?[0,-n]:[-ja,n-ja])}function Yt(n,t,e,r){return function(u){var i,a=u.a,o=u.b,l=a.x,c=a.y,s=o.x,f=o.y,h=0,g=1,p=s-l,v=f-c;if(i=n-l,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-l,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-c,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-c,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:l+h*p,y:c+h*v}),1>g&&(u.b={x:l+g*p,y:c+g*v}),u}}}}}}function Zt(n,t,e,r){function u(r,u){return Ma(r[0]-n)<Pa?u>0?0:3:Ma(r[0]-e)<Pa?u>0?2:1:Ma(r[1]-t)<Pa?u>0?1:0:u>0?3:2}function i(n,t){return a(n.x,t.x)}function a(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(o){function l(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,a=1,o=d[u],l=o.length,c=o[0];l>a;++a)i=o[a],c[1]<=r?i[1]>r&&Q(c,i,n)>0&&++t:i[1]<=r&&Q(c,i,n)<0&&--t,c=i;return 0!==t}function c(i,o,l,c){var s=0,f=0;if(null==i||(s=u(i,l))!==(f=u(o,l))||a(i,o)<0^l>0){do c.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+l+4)%4)!==f)}else c.point(o[0],o[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&o.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=NaN}function g(){v&&(p(y,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=f,w&&o.lineEnd()}function p(n,t){n=Math.max(-Ho,Math.min(Ho,n)),t=Math.max(-Ho,Math.min(Ho,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(o.lineStart(),o.point(n,t));else if(e&&w)o.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(o.lineStart(),o.point(r.a.x,r.a.y)),o.point(r.b.x,r.b.y),e||o.lineEnd(),k=!1):e&&(o.lineStart(),o.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,N=o,E=Pt(),A=Yt(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){o=E,v=[],d=[],k=!0},polygonEnd:function(){o=N,v=oa.merge(v);var t=l([n,r]),e=k&&t,u=v.length;(e||u)&&(o.polygonStart(),e&&(o.lineStart(),c(null,null,1,o),o.lineEnd()),u&&Lt(v,i,t,c,o),o.polygonEnd()),v=d=m=null}};return C}}function Vt(n){var t=0,e=ja/3,r=oe(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*ja/180,e=n[1]*ja/180):[t/ja*180,e/ja*180]},u}function Xt(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),a-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),a=Math.sqrt(i)/u;return e.invert=function(n,t){var e=a-t;return[Math.atan2(n,e)/u,tn((i-(n*n+e*e)*u*u)/(2*u))]},e}function $t(){function n(n,t){Io+=u*n-r*t,r=n,u=t}var t,e,r,u;$o.point=function(i,a){$o.point=n,t=r=i,e=u=a},$o.lineEnd=function(){n(t,e)}}function Bt(n,t){Yo>n&&(Yo=n),n>Vo&&(Vo=n),Zo>t&&(Zo=t),t>Xo&&(Xo=t)}function Wt(){function n(n,t){a.push("M",n,",",t,i)}function t(n,t){a.push("M",n,",",t),o.point=e}function e(n,t){a.push("L",n,",",t)}function r(){o.point=n}function u(){a.push("Z")}var i=Jt(4.5),a=[],o={point:n,lineStart:function(){o.point=t},lineEnd:r,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=r,o.point=n},pointRadius:function(n){return i=Jt(n),o},result:function(){if(a.length){var n=a.join("");return a=[],n}}};return o}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Co+=n,zo+=t,++Lo}function Kt(){function n(n,r){var u=n-t,i=r-e,a=Math.sqrt(u*u+i*i);qo+=a*(t+n)/2,To+=a*(e+r)/2,Ro+=a,Gt(t=n,e=r)}var t,e;Wo.point=function(r,u){Wo.point=n,Gt(t=r,e=u)}}function Qt(){Wo.point=Gt}function ne(){function n(n,t){var e=n-r,i=t-u,a=Math.sqrt(e*e+i*i);qo+=a*(r+n)/2,To+=a*(u+t)/2,Ro+=a,a=u*n-r*t,Do+=a*(r+n),Po+=a*(u+t),Uo+=3*a,Gt(r=n,u=t)}var t,e,r,u;Wo.point=function(i,a){Wo.point=n,Gt(t=r=i,e=u=a)},Wo.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,Fa)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function u(){o.point=t}function i(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:u,polygonStart:function(){o.lineEnd=i},polygonEnd:function(){o.lineEnd=u,o.point=t},pointRadius:function(n){return a=n,o},result:b};return o}function ee(n){function t(n){return(o?r:e)(n)}function e(t){return ie(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=i,t.lineStart()}function i(e,r){var i=dt([e,r]),a=n(e,r);u(M,x,y,b,_,w,M=a[0],x=a[1],y=e,b=i[0],_=i[1],w=i[2],o,t),t.point(M,x)}function a(){S.point=e,t.lineEnd()}function l(){
r(),S.point=c,S.lineEnd=s}function c(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,o,t),S.lineEnd=a,a()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,o,l,c,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=o+g,_=l+p,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=Ma(Ma(w)-1)<Pa||Ma(r-h)<Pa?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-y*L;(q*q/x>i||Ma((y*z+M*L)/x-.5)>.3||a>o*g+l*p+c*v)&&(u(t,e,r,o,l,c,A,C,N,b/=S,_/=S,w,d,m),m.point(A,C),u(A,C,N,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,a=Math.cos(30*Ia),o=16;return t.precision=function(n){return arguments.length?(o=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function re(n){var t=ee(function(t,e){return n([t*Ya,e*Ya])});return function(n){return le(t(n))}}function ue(n){this.stream=n}function ie(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ae(n){return oe(function(){return n})()}function oe(n){function t(n){return n=o(n[0]*Ia,n[1]*Ia),[n[0]*h+l,c-n[1]*h]}function e(n){return n=o.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Ya,n[1]*Ya]}function r(){o=Ct(a=fe(m,M,x),i);var n=i(v,d);return l=g-n[0]*h,c=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,a,o,l,c,s,f=ee(function(n,t){return n=i(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Fo,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=le(b(a,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fo):It((w=+n)*Ia),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Ia,d=n[1]%360*Ia,r()):[v*Ya,d*Ya]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Ia,M=n[1]%360*Ia,x=n.length>2?n[2]%360*Ia:0,r()):[m*Ya,M*Ya,x*Ya]},oa.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function le(n){return ie(n,function(t,e){n.point(t*Ia,e*Ia)})}function ce(n,t){return[n,t]}function se(n,t){return[n>ja?n-Fa:-ja>n?n+Fa:n,t]}function fe(n,t,e){return n?t||e?Ct(ge(n),pe(t,e)):ge(n):t||e?pe(t,e):se}function he(n){return function(t,e){return t+=n,[t>ja?t-Fa:-ja>t?t+Fa:t,e]}}function ge(n){var t=he(n);return t.invert=he(-n),t}function pe(n,t){function e(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*r+o*u;return[Math.atan2(l*i-s*a,o*r-c*u),tn(s*i+l*a)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),a=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),o=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),s=c*i-l*a;return[Math.atan2(l*i+c*a,o*r+s*u),tn(s*r-o*u)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,a,o){var l=a*t;null!=u?(u=de(e,u),i=de(e,i),(a>0?i>u:u>i)&&(u+=a*Fa)):(u=n+a*Fa,i=n-.5*l);for(var c,s=u;a>0?s>i:i>s;s-=l)o.point((c=_t([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Pa)%(2*Math.PI)}function me(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ye(n,t,e){var r=oa.range(n,t-Pa,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),a=Math.cos(r),o=Math.sin(r),l=u*Math.cos(n),c=u*Math.sin(n),s=a*Math.cos(e),f=a*Math.sin(e),h=2*Math.asin(Math.sqrt(an(r-t)+u*a*an(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*l+t*s,u=e*c+t*f,a=e*i+t*o;return[Math.atan2(u,r)*Ya,Math.atan2(a,Math.sqrt(r*r+u*u))*Ya]}:function(){return[n*Ya,t*Ya]};return p.distance=h,p}function _e(){function n(n,u){var i=Math.sin(u*=Ia),a=Math.cos(u),o=Ma((n*=Ia)-t),l=Math.cos(o);Jo+=Math.atan2(Math.sqrt((o=a*Math.sin(o))*o+(o=r*i-e*a*l)*o),e*i+r*a*l),t=n,e=i,r=a}var t,e,r;Go.point=function(u,i){t=u*Ia,e=Math.sin(i*=Ia),r=Math.cos(i),Go.point=n},Go.lineEnd=function(){Go.point=Go.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),a=Math.cos(u);return[Math.atan2(n*i,r*a),Math.asin(r&&e*i/r)]},e}function Se(n,t){function e(n,t){a>0?-Oa+Pa>t&&(t=-Oa+Pa):t>Oa-Pa&&(t=Oa-Pa);var e=a/Math.pow(u(t),i);return[e*Math.sin(i*n),a-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(ja/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),a=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=a-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(a/r,1/i))-Oa]},e):Ne}function ke(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return Ma(u)<Pa?ce:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(ja/4+t/2))]}function Ee(n){var t,e=ae(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var a=i.apply(e,arguments);if(a===e){if(t=null==n){var o=ja*r(),l=u();i([[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]])}}else t&&(a=null);return a},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(ja/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var u=n[0],i=e[0],a=t[0]-u,o=r[0]-i,l=n[1],c=e[1],s=t[1]-l,f=r[1]-c,h=(o*(l-c)-f*(u-i))/(f*a-o*s);return[u+h*a,l+h*s]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),al.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,a=n.N,o=[n];je(n);for(var l=i;l.circle&&Ma(e-l.circle.x)<Pa&&Ma(r-l.circle.cy)<Pa;)i=l.P,o.unshift(l),je(l),l=i;o.unshift(l),Be(l);for(var c=a;c.circle&&Ma(e-c.circle.x)<Pa&&Ma(r-c.circle.cy)<Pa;)a=c.N,o.push(c),je(c),c=a;o.push(c),Be(c);var s,f=o.length;for(s=1;f>s;++s)c=o[s],l=o[s-1],nr(c.edge,l.site,c.site,u);l=o[0],c=o[f-1],c.edge=Ke(l.site,c.site,null,u),$e(l),$e(c)}function He(n){for(var t,e,r,u,i=n.x,a=n.y,o=al._;o;)if(r=Oe(o,a)-i,r>Pa)o=o.L;else{if(u=i-Ie(o,a),!(u>Pa)){r>-Pa?(t=o.P,e=o):u>-Pa?(t=o,e=o.N):t=e=o;break}if(!o.R){t=o;break}o=o.R}var l=Ue(n);if(al.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),al.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,s=c.x,f=c.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};nr(e.edge,c,p,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,p,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var a=n.P;if(!a)return-(1/0);e=a.site;var o=e.x,l=e.y,c=l-t;if(!c)return o;var s=o-r,f=1/i-1/c,h=s/c;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*c)-l+c/2+u-i/2)))/f+r:(r+o)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,u,i,a,o,l,c,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=il,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(o=i.edges,l=o.length,a=0;l>a;)s=o[a].end(),r=s.x,u=s.y,c=o[++a%l].start(),t=c.x,e=c.y,(Ma(r-t)>Pa||Ma(u-e)>Pa)&&(o.splice(a,0,new tr(Qe(i.site,s,Ma(r-f)<Pa&&p-u>Pa?{x:f,y:Ma(t-f)<Pa?e:p}:Ma(u-p)<Pa&&h-r>Pa?{x:Ma(e-p)<Pa?t:h,y:p}:Ma(r-h)<Pa&&u-g>Pa?{x:h,y:Ma(t-h)<Pa?e:g}:Ma(u-g)<Pa&&r-f>Pa?{x:Ma(e-g)<Pa?t:f,y:g}:null),i.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var a=u.x,o=u.y,l=r.x-a,c=r.y-o,s=i.x-a,f=i.y-o,h=2*(l*f-c*s);if(!(h>=-Ua)){var g=l*l+c*c,p=s*s+f*f,v=(f*g-c*p)/h,d=(l*p-s*g)/h,f=d+o,m=sl.pop()||new Xe;m.arc=n,m.site=u,m.x=v+a,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=ll._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}ll.insert(y,m),y||(ol=m)}}}}function Be(n){var t=n.circle;t&&(t.P||(ol=t.N),ll.remove(t),sl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=ul,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Je(t,n)||!r(t)||Ma(t.a.x-t.b.x)<Pa&&Ma(t.a.y-t.b.y)<Pa)&&(t.a=t.b=null,e.splice(u,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,a=t[0][0],o=t[1][0],l=t[0][1],c=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(a>d||d>=o)return;if(h>p){if(i){if(i.y>=c)return}else i={x:d,y:l};e={x:d,y:c}}else{if(i){if(i.y<l)return}else i={x:d,y:c};e={x:d,y:l}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else{if(i){if(i.y<l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else if(v>g){if(i){if(i.x>=o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}else{if(i){if(i.x<a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}return n.a=i,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var u=new Ge(n,t);return ul.push(u),e&&nr(u,n,t,e),r&&nr(u,t,n,r),il[n.i].edges.push(new tr(u,n,t)),il[t.i].edges.push(new tr(u,t,n)),u}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,ul.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ur(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ir(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function ar(n){for(;n.L;)n=n.L;return n}function or(n,t){var e,r,u,i=n.sort(lr).pop();for(ul=[],il=new Array(n.length),al=new er,ll=new er;;)if(u=ol,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(il[i.i]=new Ye(i),He(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Fe(u.arc)}t&&(We(t),Ze(t));var a={cells:il,edges:ul};return al=ll=ul=il=null,a}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function sr(n){return n.x}function fr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gr(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var a=.5*(e+u),o=.5*(r+i),l=t.nodes;l[0]&&gr(n,l[0],e,r,a,o),l[1]&&gr(n,l[1],a,r,u,o),l[2]&&gr(n,l[2],e,o,a,i),l[3]&&gr(n,l[3],a,o,u,i)}}function pr(n,t,e,r,u,i,a){var o,l=1/0;return function c(n,s,f,h,g){if(!(s>i||f>a||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(l>m){var y=Math.sqrt(l=m);r=t-y,u=e-y,i=t+y,a=e+y,o=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:c(n,s,f,x,b);break;case 1:c(n,x,f,h,b);break;case 2:c(n,s,b,x,g);break;case 3:c(n,x,b,h,g)}}}(n,r,u,i,a),o}function vr(n,t){n=oa.rgb(n),t=oa.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,a=t.g-r,o=t.b-u;return function(n){return"#"+bn(Math.round(e+i*n))+bn(Math.round(r+a*n))+bn(Math.round(u+o*n))}}function dr(n,t){var e,r={},u={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function mr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function yr(n,t){var e,r,u,i=hl.lastIndex=gl.lastIndex=0,a=-1,o=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=gl.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),o[a]?o[a]+=u:o[++a]=u),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:mr(e,r)})),i=gl.lastIndex;return i<t.length&&(u=t.slice(i),o[a]?o[a]+=u:o[++a]=u),o.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;t>r;++r)o[(e=l[r]).i]=e.x(n);return o.join("")})}function Mr(n,t){for(var e,r=oa.interpolators.length;--r>=0&&!(e=oa.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],u=[],i=n.length,a=t.length,o=Math.min(n.length,t.length);for(e=0;o>e;++e)r.push(Mr(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;a>e;++e)u[e]=t[e];return function(n){for(e=0;o>e;++e)u[e]=r[e](n);return u}}function br(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Oa)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Fa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Fa/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=oa.hcl(n),t=oa.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,a=t.c-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return fn(e+i*n,r+a*n,u+o*n)+""}}function Dr(n,t){n=oa.hsl(n),t=oa.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,a=t.s-r,o=t.l-u;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return cn(e+i*n,r+a*n,u+o*n)+""}}function Pr(n,t){n=oa.lab(n),t=oa.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,a=t.a-r,o=t.b-u;return function(n){return gn(e+i*n,r+a*n,u+o*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),u=Fr(t,e),i=Hr(Or(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ya,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ya:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push("translate(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:mr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:mr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var u=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:u-4,x:mr(n[0],t[0])},{i:u-2,x:mr(n[1],t[1])})}else(1!==t[0]||1!==t[1])&&e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=oa.transform(n),t=oa.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,u=-1,i=r.length;++u<i;)e[(t=r[u]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),u=e.pop(),i=r.pop(),a=null;u===i;)a=u,u=e.pop(),i=r.pop();return a}function Qr(n){n.fixed|=2}function nu(n){n.fixed&=-7}function tu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function eu(n){n.fixed&=-5}function ru(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,a=n.nodes,o=a.length,l=-1;++l<o;)i=a[l],null!=i&&(ru(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,u+=c*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function uu(n,t){return oa.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=su,n}function iu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function au(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,a=-1;++a<u;)e.push(i[a]);for(;null!=(n=r.pop());)t(n)}function ou(n){return n.children}function lu(n){return n.value}function cu(n,t){return t.value-n.value}function su(n){return oa.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function fu(n){return n.x}function hu(n){return n.y}function gu(n,t,e){n.y0=t,n.y=e}function pu(n){return oa.range(n.length)}function vu(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function du(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function mu(n){return n.reduce(yu,0)}function yu(n,t){return n+t[1]}function Mu(n,t){return xu(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xu(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function bu(n){return[oa.min(n),oa.max(n)]}function _u(n,t){return n.value-t.value}function wu(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Su(n,t){n._pack_next=t,t._pack_prev=n}function ku(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Nu(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(c=e.length)){var e,r,u,i,a,o,l,c,s=1/0,f=-(1/0),h=1/0,g=-(1/0);if(e.forEach(Eu),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(u=e[1],u.x=u.r,u.y=0,t(u),c>2))for(i=e[2],zu(r,u,i),t(i),wu(r,i),r._pack_prev=i,wu(i,u),u=r._pack_next,a=3;c>a;a++){zu(r,u,i=e[a]);var p=0,v=1,d=1;for(o=u._pack_next;o!==u;o=o._pack_next,v++)if(ku(o,i)){p=1;break}if(1==p)for(l=r._pack_prev;l!==o._pack_prev&&!ku(l,i);l=l._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?Su(r,u=o):Su(r=l,u),a--):(wu(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(a=0;c>a;a++)i=e[a],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(Au)}}function Eu(n){n._pack_next=n._pack_prev=n}function Au(n){delete n._pack_next,delete n._pack_prev}function Cu(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,a=u.length;++i<a;)Cu(u[i],t,e,r)}function zu(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var a=t.r+e.r,o=u*u+i*i;a*=a,r*=r;var l=.5+(r-a)/(2*o),c=Math.sqrt(Math.max(0,2*a*(r+o)-(r-=o)*r-a*a))/(2*o);e.x=n.x+l*u+c*i,e.y=n.y+l*i-c*u}else e.x=n.x+r,e.y=n.y}function Lu(n,t){return n.parent==t.parent?1:2}function qu(n){var t=n.children;return t.length?t[0]:n.t}function Tu(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ru(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Du(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pu(n,t,e){return n.a.parent===t.parent?n.a:e}function Uu(n){return 1+oa.max(n,function(n){return n.y})}function ju(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fu(n){var t=n.children;return t&&t.length?Fu(t[0]):n}function Hu(n){var t,e=n.children;return e&&(t=e.length)?Hu(e[t-1]):n}function Ou(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Iu(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Yu(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Zu(n){return n.rangeExtent?n.rangeExtent():Yu(n.range())}function Vu(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Xu(n,t){var e,r=0,u=n.length-1,i=n[r],a=n[u];return i>a&&(e=r,r=u,u=e,e=i,i=a,a=e),n[r]=t.floor(i),n[u]=t.ceil(a),n}function $u(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bu(n,t,e,r){var u=[],i=[],a=0,o=Math.min(n.length,t.length)-1;for(n[o]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<=o;)u.push(e(n[a-1],n[a])),i.push(r(t[a-1],t[a]));return function(t){var e=oa.bisect(n,t,1,o)-1;return i[e](u[e](t))}}function Wu(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Bu:Vu,l=r?Wr:Br;return a=u(n,t,l,e),o=u(t,n,l,Mr),i}function i(n){return a(n)}var a,o;return i.invert=function(n){return o(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ur)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Qu(n,t)},i.tickFormat=function(t,e){return ni(n,t,e)},i.nice=function(t){return Gu(n,t),u()},i.copy=function(){return Wu(n,t,e,r)},u()}function Ju(n,t){return oa.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gu(n,t){return Xu(n,$u(Ku(n,t)[2])),Xu(n,$u(Ku(n,t)[2])),n}function Ku(n,t){null==t&&(t=10);var e=Yu(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Qu(n,t){return oa.range.apply(oa,Ku(n,t))}function ni(n,t,e){var r=Ku(n,t);if(e){var u=fo.exec(e);if(u.shift(),"s"===u[8]){var i=oa.formatPrefix(Math.max(Ma(r[0]),Ma(r[1])));return u[7]||(u[7]="."+ti(i.scale(r[2]))),u[8]="f",e=oa.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+ei(u[8],r)),e=u.join("")}else e=",."+ti(r[2])+"f";return oa.format(e)}function ti(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function ei(n,t){var e=ti(t[2]);return n in kl?Math.abs(e-ti(Math.max(Ma(t[0]),Ma(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ri(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function a(t){return n(u(t))}return a.invert=function(t){return i(n.invert(t))},a.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),a):r},a.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),a):t},a.nice=function(){var t=Xu(r.map(u),e?Math:El);return n.domain(t),r=t.map(i),a},a.ticks=function(){var n=Yu(r),a=[],o=n[0],l=n[1],c=Math.floor(u(o)),s=Math.ceil(u(l)),f=t%1?2:t;if(isFinite(s-c)){if(e){for(;s>c;c++)for(var h=1;f>h;h++)a.push(i(c)*h);a.push(i(c))}else for(a.push(i(c));c++<s;)for(var h=f-1;h>0;h--)a.push(i(c)*h);for(c=0;a[c]<o;c++);for(s=a.length;a[s-1]>l;s--);a=a.slice(c,s)}return a},a.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=oa.format(e));var r=Math.max(1,t*n/a.ticks().length);return function(n){var a=n/i(Math.round(u(n)));return t-.5>a*t&&(a*=t),r>=a?e(n):""}},a.copy=function(){return ri(n.copy(),t,e,r)},Ju(a,n)}function ui(n,t,e){function r(t){return n(u(t))}var u=ii(t),i=ii(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Qu(e,n)},r.tickFormat=function(n,t){return ni(e,n,t)},r.nice=function(n){return r.domain(Gu(e,n))},r.exponent=function(a){return arguments.length?(u=ii(t=a),i=ii(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return ui(n.copy(),t,e)},Ju(r,n)}function ii(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ai(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):NaN))-1)%i.length]}function r(t,e){return oa.range(n.length).map(function(n){return t+e*n})}var u,i,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new c;for(var i,a=-1,o=r.length;++a<o;)u.has(i=r[a])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,a=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+o);return i=r(l+s*o/2,s),a=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,o){arguments.length<2&&(o=0);var l=u[0],c=u[1],s=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+o)|0;return i=r(l+Math.round(s*o/2+(c-l-(n.length-1+o)*s)/2),s),a=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=(f-s)/(n.length-o+2*l);return i=r(s+h*l,h),c&&i.reverse(),a=h*(1-o),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var c=u[1]<u[0],s=u[c-0],f=u[1-c],h=Math.floor((f-s)/(n.length-o+2*l));return i=r(s+Math.round((f-s-(n.length-o)*h)/2),h),c&&i.reverse(),a=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return Yu(t.a[0])},e.copy=function(){return ai(n,t)},e.domain(n)}function oi(n,t){function i(){var e=0,r=t.length;for(o=[];++e<r;)o[e-1]=oa.quantile(n,e/r);return a}function a(n){return isNaN(n=+n)?void 0:t[oa.bisect(o,n)]}var o;return a.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},a.range=function(n){return arguments.length?(t=n,i()):t},a.quantiles=function(){return o},a.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},a.copy=function(){return oi(n,t)},i()}function li(n,t,e){function r(t){return e[Math.max(0,Math.min(a,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),a=e.length-1,r}var i,a;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return li(n,t,e)},u()}function ci(n,t){function e(e){return e>=e?t[oa.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return ci(n,t)},e}function si(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qu(n,t)},t.tickFormat=function(t,e){return ni(n,t,e)},t.copy=function(){return si(n)},t}function fi(){return 0}function hi(n){return n.innerRadius}function gi(n){return n.outerRadius}function pi(n){return n.startAngle}function vi(n){return n.endAngle}function di(n){return n&&n.padAngle}function mi(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function yi(n,t,e,r,u){var i=n[0]-t[0],a=n[1]-t[1],o=(u?r:-r)/Math.sqrt(i*i+a*a),l=o*a,c=-o*i,s=n[0]+l,f=n[1]+c,h=t[0]+l,g=t[1]+c,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(Math.max(0,M*M*y-x*x)),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,N=_-p,E=w-v,A=S-p,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mi(n){function t(t){function a(){c.push("M",i(n(s),o))}for(var l,c=[],s=[],f=-1,h=t.length,g=En(e),p=En(r);++f<h;)u.call(this,l=t[f],f)?s.push([+g.call(this,l,f),+p.call(this,l,f)]):s.length&&(a(),s=[]);return s.length&&a(),c.length?c.join(""):null}var e=Ce,r=ze,u=zt,i=xi,a=i.key,o=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(a="function"==typeof n?i=n:(i=Tl.get(n)||xi).key,t):a},t.tension=function(n){return arguments.length?(o=n,t):o},t}function xi(n){return n.length>1?n.join("L"):n+"Z"}function bi(n){return n.join("L")+"Z"}function _i(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function wi(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function Si(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function ki(n,t){return n.length<4?xi(n):n[1]+Ai(n.slice(1,-1),Ci(n,t))}function Ni(n,t){return n.length<3?bi(n):n[0]+Ai((n.push(n[0]),n),Ci([n[n.length-2]].concat(n,[n[1]]),t))}function Ei(n,t){return n.length<3?xi(n):n[0]+Ai(n,Ci(n,t))}function Ai(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xi(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],a=t[0],o=a,l=1;if(e&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],u=n[1],l=2),t.length>1){o=t[1],i=n[l],l++,r+="C"+(u[0]+a[0])+","+(u[1]+a[1])+","+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1];for(var c=2;c<t.length;c++,l++)i=n[l],o=t[c],r+="S"+(i[0]-o[0])+","+(i[1]-o[1])+","+i[0]+","+i[1]}if(e){var s=n[l];r+="Q"+(i[0]+2*o[0]/3)+","+(i[1]+2*o[1]/3)+","+s[0]+","+s[1]}return r}function Ci(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],a=n[1],o=1,l=n.length;++o<l;)e=i,i=a,a=n[o],r.push([u*(a[0]-e[0]),u*(a[1]-e[1])]);return r}function zi(n){if(n.length<3)return xi(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],a=[u,u,u,(r=n[1])[0]],o=[i,i,i,r[1]],l=[u,",",i,"L",Ri(Pl,a),",",Ri(Pl,o)];for(n.push(n[e-1]);++t<=e;)r=n[t],a.shift(),a.push(r[0]),o.shift(),o.push(r[1]),Di(l,a,o);return n.pop(),l.push("L",r),l.join("")}function Li(n){if(n.length<4)return xi(n);for(var t,e=[],r=-1,u=n.length,i=[0],a=[0];++r<3;)t=n[r],i.push(t[0]),a.push(t[1]);for(e.push(Ri(Pl,i)+","+Ri(Pl,a)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Di(e,i,a);return e.join("")}function qi(n){for(var t,e,r=-1,u=n.length,i=u+4,a=[],o=[];++r<4;)e=n[r%u],a.push(e[0]),o.push(e[1]);for(t=[Ri(Pl,a),",",Ri(Pl,o)],--r;++r<i;)e=n[r%u],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Di(t,a,o);return t.join("")}function Ti(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],a=n[0][1],o=n[e][0]-i,l=n[e][1]-a,c=-1;++c<=e;)r=n[c],u=c/e,r[0]=t*r[0]+(1-t)*(i+u*o),r[1]=t*r[1]+(1-t)*(a+u*l);return zi(n)}function Ri(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Di(n,t,e){n.push("C",Ri(Rl,t),",",Ri(Rl,e),",",Ri(Dl,t),",",Ri(Dl,e),",",Ri(Pl,t),",",Ri(Pl,e))}function Pi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Ui(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],a=r[0]=Pi(u,i);++t<e;)r[t]=(a+(a=Pi(u=i,i=n[t+1])))/2;return r[t]=a,r}function ji(n){for(var t,e,r,u,i=[],a=Ui(n),o=-1,l=n.length-1;++o<l;)t=Pi(n[o],n[o+1]),Ma(t)<Pa?a[o]=a[o+1]=0:(e=a[o]/t,r=a[o+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),a[o]=u*e,a[o+1]=u*r));for(o=-1;++o<=l;)u=(n[Math.min(l,o+1)][0]-n[Math.max(0,o-1)][0])/(6*(1+a[o]*a[o])),i.push([u||0,a[o]*u||0]);return i}function Fi(n){return n.length<3?xi(n):n[0]+Ai(n,ji(n))}function Hi(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Oa,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Oi(n){function t(t){function l(){v.push("M",o(n(m),f),s,c(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=En(e),b=En(u),_=e===r?function(){
return g}:En(r),w=u===i?function(){return p}:En(i);++y<M;)a.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(l(),d=[],m=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,u=0,i=ze,a=zt,o=xi,l=o.key,c=o,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(a=n,t):a},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?o=n:(o=Tl.get(n)||xi).key,c=o.reverse||o,s=o.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Ii(n){return n.radius}function Yi(n){return[n.x,n.y]}function Zi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Oa;return[e*Math.cos(r),e*Math.sin(r)]}}function Vi(){return 64}function Xi(){return"circle"}function $i(n){var t=Math.sqrt(n/ja);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bi(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wi(n,t,e){return Sa(n,Yl),n.namespace=t,n.id=e,n}function Ji(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,a,o){n[i][u].tween.set(t,r(e.call(n,n.__data__,a,o)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Gi(n){return null==n&&(n=""),function(){this.textContent=n}}function Ki(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qi(n,t,e,r,u){function i(n){var t=v.delay;return s.t=t+l,n>=t?a(n-t):void(s.c=a)}function a(e){var u=p.active,i=p[u];i&&(i.timer.c=null,i.timer.t=NaN,--p.count,delete p[u],i.event&&i.event.interrupt.call(n,n.__data__,i.index));for(var a in p)if(r>+a){var c=p[a];c.timer.c=null,c.timer.t=NaN,--p.count,delete p[a]}s.c=o,qn(function(){return s.c&&o(e||1)&&(s.c=null,s.t=NaN),1},0,l),p.active=r,v.event&&v.event.start.call(n,n.__data__,t),g=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&g.push(r)}),h=v.ease,f=v.duration}function o(u){for(var i=u/f,a=h(i),o=g.length;o>0;)g[--o].call(n,a);return i>=1?(v.event&&v.event.end.call(n,n.__data__,t),--p.count?delete p[r]:delete n[e],1):void 0}var l,s,f,h,g,p=n[e]||(n[e]={active:0,count:0}),v=p[r];v||(l=u.time,s=qn(i,0,l),v=p[r]={tween:new c,time:l,timer:s,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++p.count)}function na(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function ta(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function ea(n){return n.toISOString()}function ra(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=oa.bisect(Kl,u);return i==Kl.length?[t.year,Ku(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Kl[i-1]<Kl[i]/u?i-1:i]:[tc,Ku(n,e)[2]]}return r.invert=function(t){return ua(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(ua)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,ua(+e+1),t).length}var i=r.domain(),a=Yu(i),o=null==n?u(a,10):"number"==typeof n&&u(a,n);return o&&(n=o[0],t=o[1]),r.domain(Xu(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=ua(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=ua(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yu(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],ua(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ra(n.copy(),t,e)},Ju(r,n)}function ua(n){return new Date(n)}function ia(n){return JSON.parse(n.responseText)}function aa(n){var t=sa.createRange();return t.selectNode(sa.body),t.createContextualFragment(n.responseText)}var oa={version:"3.5.16"},la=[].slice,ca=function(n){return la.call(n)},sa=this.document;if(sa)try{ca(sa.documentElement.childNodes)[0].nodeType}catch(fa){ca=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),sa)try{sa.createElement("DIV").style.setProperty("opacity",0,"")}catch(ha){var ga=this.Element.prototype,pa=ga.setAttribute,va=ga.setAttributeNS,da=this.CSSStyleDeclaration.prototype,ma=da.setProperty;ga.setAttribute=function(n,t){pa.call(this,n,t+"")},ga.setAttributeNS=function(n,t,e){va.call(this,n,t,e+"")},da.setProperty=function(n,t,e){ma.call(this,n,t+"",e)}}oa.ascending=e,oa.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},oa.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},oa.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},oa.extent=function(n,t){var e,r,u,i=-1,a=n.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<a;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<a;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},oa.sum=function(n,t){var e,r=0,i=n.length,a=-1;if(1===arguments.length)for(;++a<i;)u(e=+n[a])&&(r+=e);else for(;++a<i;)u(e=+t.call(n,n[a],a))&&(r+=e);return r},oa.mean=function(n,t){var e,i=0,a=n.length,o=-1,l=a;if(1===arguments.length)for(;++o<a;)u(e=r(n[o]))?i+=e:--l;else for(;++o<a;)u(e=r(t.call(n,n[o],o)))?i+=e:--l;return l?i/l:void 0},oa.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},oa.median=function(n,t){var i,a=[],o=n.length,l=-1;if(1===arguments.length)for(;++l<o;)u(i=r(n[l]))&&a.push(i);else for(;++l<o;)u(i=r(t.call(n,n[l],l)))&&a.push(i);return a.length?oa.quantile(a.sort(e),.5):void 0},oa.variance=function(n,t){var e,i,a=n.length,o=0,l=0,c=-1,s=0;if(1===arguments.length)for(;++c<a;)u(e=r(n[c]))&&(i=e-o,o+=i/++s,l+=i*(e-o));else for(;++c<a;)u(e=r(t.call(n,n[c],c)))&&(i=e-o,o+=i/++s,l+=i*(e-o));return s>1?l/(s-1):void 0},oa.deviation=function(){var n=oa.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ya=i(e);oa.bisectLeft=ya.left,oa.bisect=oa.bisectRight=ya.right,oa.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},oa.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},oa.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},oa.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},oa.transpose=function(n){if(!(u=n.length))return[];for(var t=-1,e=oa.min(n,a),r=new Array(e);++t<e;)for(var u,i=-1,o=r[t]=new Array(u);++i<u;)o[i]=n[i][t];return r},oa.zip=function(){return oa.transpose(arguments)},oa.keys=function(n){var t=[];for(var e in n)t.push(e);return t},oa.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},oa.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},oa.merge=function(n){for(var t,e,r,u=n.length,i=-1,a=0;++i<u;)a+=n[i].length;for(e=new Array(a);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--a]=r[t];return e};var Ma=Math.abs;oa.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=o(Ma(e)),a=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++a)>t;)u.push(r/i);else for(;(r=n+e*++a)<t;)u.push(r/i);return u},oa.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var a in n)e.set(a,n[a]);return e};var xa="__proto__",ba="\x00";l(c,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),oa.nest=function(){function n(t,a,o){if(o>=i.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,s,f,h,g=-1,p=a.length,v=i[o++],d=new c;++g<p;)(h=d.get(l=v(s=a[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,o))}):(s={},f=function(e,r){s[e]=n(t,r,o)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=a[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(oa.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return a[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},oa.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},l(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),oa.behavior={},oa.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var _a=["webkit","ms","moz","Moz","o","O"];oa.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},oa.event=null,oa.requote=function(n){return n.replace(wa,"\\$&")};var wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sa={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},ka=function(n,t){return t.querySelector(n)},Na=function(n,t){return t.querySelectorAll(n)},Ea=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ea=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(ka=function(n,t){return Sizzle(n,t)[0]||null},Na=Sizzle,Ea=Sizzle.matchesSelector),oa.selection=function(){return oa.select(sa.documentElement)};var Aa=oa.selection.prototype=[];Aa.select=function(n){var t,e,r,u,i=[];n=A(n);for(var a=-1,o=this.length;++a<o;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,c=r.length;++l<c;)(u=r[l])?(t.push(e=n.call(u,u.__data__,l,a)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return E(i)},Aa.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var a=this[u],o=-1,l=a.length;++o<l;)(e=a[o])&&(r.push(t=ca(n.call(e,e.__data__,o,u))),t.parentNode=e);return E(r)};var Ca="http://www.w3.org/1999/xhtml",za={svg:"http://www.w3.org/2000/svg",xhtml:Ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};oa.ns={prefix:za,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),za.hasOwnProperty(e)?{space:za[e],local:n}:n}},Aa.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=oa.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Aa.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!q(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Aa.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Aa.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Aa.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Aa.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Aa.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Aa.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Aa.remove=function(){return this.each(F)},Aa.data=function(n,t){function e(n,e){var r,u,i,a=n.length,f=e.length,h=Math.min(a,f),g=new Array(f),p=new Array(f),v=new Array(a);if(t){var d,m=new c,y=new Array(a);for(r=-1;++r<a;)(u=n[r])&&(m.has(d=t.call(u,u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d);for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;a>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,o.push(p),l.push(g),s.push(v)}var r,u,i=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++i<a;)(u=r[i])&&(n[i]=u.__data__);return n}var o=Z([]),l=E([]),s=E([]);if("function"==typeof n)for(;++i<a;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<a;)e(r=this[i],n);return l.enter=function(){return o},l.exit=function(){return s},l},Aa.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Aa.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return E(u)},Aa.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},Aa.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Aa.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Aa.call=function(n){var t=ca(arguments);return n.apply(t[0]=this,t),this},Aa.empty=function(){return!this.node()},Aa.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},Aa.size=function(){var n=0;return Y(this,function(){++n}),n};var La=[];oa.selection.enter=Z,oa.selection.enter.prototype=La,La.append=Aa.append,La.empty=Aa.empty,La.node=Aa.node,La.call=Aa.call,La.size=Aa.size,La.select=function(n){for(var t,e,r,u,i,a=[],o=-1,l=this.length;++o<l;){r=(u=this[o]).update,a.push(t=[]),t.parentNode=u.parentNode;for(var c=-1,s=u.length;++c<s;)(i=u[c])?(t.push(r[c]=e=n.call(u.parentNode,i.__data__,c,o)),e.__data__=i.__data__):t.push(null)}return E(a)},La.insert=function(n,t){return arguments.length<2&&(t=V(this)),Aa.insert.call(this,n,t)},oa.select=function(t){var e;return"string"==typeof t?(e=[ka(t,sa)],e.parentNode=sa.documentElement):(e=[t],e.parentNode=n(t)),E([e])},oa.selectAll=function(n){var t;return"string"==typeof n?(t=ca(Na(n,sa)),t.parentNode=sa.documentElement):(t=ca(n),t.parentNode=null),E([t])},Aa.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var qa=oa.map({mouseenter:"mouseover",mouseleave:"mouseout"});sa&&qa.forEach(function(n){"on"+n in sa&&qa.remove(n)});var Ta,Ra=0;oa.mouse=function(n){return J(n,k())};var Da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;oa.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},oa.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function e(n,t,e,i,a){return function(){function o(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(m.on(i+d,null).on(a+d,null),y(p),g({type:"dragend"}))}var c,s=this,f=oa.event.target.correspondingElement||oa.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=oa.select(e(f)).on(i+d,o).on(a+d,l),y=W(f),M=t(h,v);u?(c=u.apply(s,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],g({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),u=null,i=e(b,oa.mouse,t,"mousemove","mouseup"),a=e(G,oa.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},oa.rebind(n,r,"on")},oa.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ca(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Pa=1e-6,Ua=Pa*Pa,ja=Math.PI,Fa=2*ja,Ha=Fa-Pa,Oa=ja/2,Ia=ja/180,Ya=180/ja,Za=Math.SQRT2,Va=2,Xa=4;oa.interpolateZoom=function(n,t){var e,r,u=n[0],i=n[1],a=n[2],o=t[0],l=t[1],c=t[2],s=o-u,f=l-i,h=s*s+f*f;if(Ua>h)r=Math.log(c/a)/Za,e=function(n){return[u+n*s,i+n*f,a*Math.exp(Za*n*r)]};else{var g=Math.sqrt(h),p=(c*c-a*a+Xa*h)/(2*a*Va*g),v=(c*c-a*a-Xa*h)/(2*c*Va*g),d=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-d)/Za,e=function(n){var t=n*r,e=rn(d),o=a/(Va*g)*(e*un(Za*t+d)-en(d));return[u+o*s,i+o*f,a*e/rn(Za*t+d)]}}return e.duration=1e3*r,e},oa.behavior.zoom=function(){function n(n){n.on(L,f).on(Ba+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(A[0],Math.min(A[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function a(t,e,r,a){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,a)),i(d=e,r),t=oa.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function o(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){o(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||(n({type:"zoomend"}),d=null)}function f(){function n(){o=1,i(oa.mouse(u),h),c(a)}function r(){f.on(q,null).on(T,null),g(o),s(a)}var u=this,a=D.of(u,arguments),o=0,f=oa.select(t(u)).on(q,n).on(T,r),h=e(oa.mouse(u)),g=W(u);Il.call(u),l(a)}function h(){function n(){var n=oa.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=oa.event.target;oa.select(t).on(x,r).on(b,o),_.push(t);for(var e=oa.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(500>c-M){var s=l[0];a(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var s=l[0],f=l[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,a=oa.touches(p);Il.call(p);for(var o=0,l=a.length;l>o;++o,r=null)if(e=a[o],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),c(v)}function o(){if(oa.event.touches.length){for(var t=oa.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}oa.selectAll(_).on(y,null),w.on(L,f).on(R,h),N(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+oa.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=oa.select(p),N=W(p);t(),l(v),w.on(L,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(Il.call(this),v=e(d=m||oa.mouse(this)),l(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*$a())*k.k),i(d,v),c(n)}function p(){var n=oa.mouse(this),t=Math.log(k.k)/Math.LN2;a(this,n,e(n),oa.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Wa,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in sa?($a=function(){return-oa.event.deltaY*(oa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sa?($a=function(){return oa.event.wheelDelta},"mousewheel"):($a=function(){return-oa.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?oa.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],u=d?d[0]:e/2,i=d?d[1]:r/2,a=oa.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=a(t),o=e/r[2];this.__chart__=k={x:u-r[0]*o,y:i-r[1]*o,k:o},c(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,l(n),c(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},o(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},u(+t),o(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Wa:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},oa.rebind(n,D,"on")};var $a,Ba,Wa=[0,1/0];oa.color=on,on.prototype.toString=function(){return this.rgb()+""},oa.hsl=ln;var Ja=ln.prototype=new on;Ja.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Ja.rgb=function(){return cn(this.h,this.s,this.l)},oa.hcl=sn;var Ga=sn.prototype=new on;Ga.brighter=function(n){return new sn(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?n:1)))},Ga.darker=function(n){return new sn(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?n:1)))},Ga.rgb=function(){return fn(this.h,this.c,this.l).rgb()},oa.lab=hn;var Ka=18,Qa=.95047,no=1,to=1.08883,eo=hn.prototype=new on;eo.brighter=function(n){return new hn(Math.min(100,this.l+Ka*(arguments.length?n:1)),this.a,this.b)},eo.darker=function(n){return new hn(Math.max(0,this.l-Ka*(arguments.length?n:1)),this.a,this.b)},eo.rgb=function(){return gn(this.l,this.a,this.b)},oa.rgb=yn;var ro=yn.prototype=new on;ro.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new yn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new yn(u,u,u)},ro.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new yn(n*this.r,n*this.g,n*this.b)},ro.hsl=function(){return wn(this.r,this.g,this.b)},ro.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var uo=oa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});uo.forEach(function(n,t){uo.set(n,Mn(t))}),oa.functor=En,oa.xhr=An(y),oa.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var a=Cn(n,t,null==e?r:u(e),i);return a.row=function(n){return arguments.length?a.response(null==(e=n)?r:u(n)):e},a}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(a).join(n)}function a(n){return o.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var o=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=c)return a;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;c>s;){var r=n.charCodeAt(s++),o=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++o);else if(r!==l)continue;return n.slice(t,s-o)}return n.slice(t)}for(var r,u,i={},a={},o=[],c=n.length,s=0,f=0;(r=e())!==a;){for(var h=[];r!==i&&r!==a;)h.push(r),r=e();t&&null==(h=t(h,f++))||o.push(h)}return o},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(a).join(n)].concat(t.map(function(t){return u.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},oa.csv=oa.dsv(",","text/csv"),oa.tsv=oa.dsv("    ","text/tab-separated-values");var io,ao,oo,lo,co=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};oa.timer=function(){qn.apply(this,arguments)},oa.timer.flush=function(){Rn(),Dn()},oa.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var so=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Un);oa.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=oa.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),so[8+e/3]};var fo=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ho=oa.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=oa.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),go=oa.time={},po=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){vo.setUTCDate.apply(this._,arguments)},setDay:function(){vo.setUTCDay.apply(this._,arguments)},setFullYear:function(){vo.setUTCFullYear.apply(this._,arguments)},setHours:function(){vo.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){vo.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){vo.setUTCMinutes.apply(this._,arguments)},setMonth:function(){vo.setUTCMonth.apply(this._,arguments)},setSeconds:function(){vo.setUTCSeconds.apply(this._,arguments)},setTime:function(){vo.setTime.apply(this._,arguments)}};var vo=Date.prototype;go.year=On(function(n){return n=go.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),go.years=go.year.range,go.years.utc=go.year.utc.range,go.day=On(function(n){var t=new po(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),go.days=go.day.range,go.days.utc=go.day.utc.range,go.dayOfYear=function(n){var t=go.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=go[n]=On(function(n){return(n=go.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});go[n+"s"]=e.range,go[n+"s"].utc=e.utc.range,go[n+"OfYear"]=function(n){var e=go.year(n).getDay();return Math.floor((go.dayOfYear(n)+(e+t)%7)/7)}}),go.week=go.sunday,go.weeks=go.sunday.range,go.weeks.utc=go.sunday.utc.range,go.weekOfYear=go.sundayOfYear;var mo={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,Mo=/^%/;oa.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xo=oa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});oa.format=xo.numberFormat,oa.geo={},st.prototype={s:0,t:0,add:function(n){ft(n,this.t,bo),ft(bo.s,this.s,this),this.s?this.t+=bo.t:this.s=bo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bo=new st;oa.geo.stream=function(n,t){n&&_o.hasOwnProperty(n.type)?_o[n.type](n,t):ht(n,t)};var _o={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)ht(e[r].geometry,t)}},wo={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){gt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)gt(e[r],t,0)},Polygon:function(n,t){pt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)pt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)ht(e[r],t)}};oa.geo.area=function(n){return So=0,oa.geo.stream(n,No),So};var So,ko=new st,No={sphere:function(){So+=4*ja},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ko.reset(),No.lineStart=vt},polygonEnd:function(){var n=2*ko;So+=0>n?4*ja+n:n,No.lineStart=No.lineEnd=No.point=b}};oa.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=dt([t*Ia,e*Ia]);if(m){var u=yt(m,r),i=[u[1],-u[0],0],a=yt(i,u);bt(a),a=_t(a);var l=t-p,c=l>0?1:-1,v=a[0]*Ya*c,d=Ma(l)>180;if(d^(v>c*p&&c*t>v)){var y=a[1]*Ya;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>c*p&&c*t>v)){var y=-a[1]*Ya;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?o(s,t)>o(s,h)&&(h=t):o(t,h)>o(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=Ma(r)>180?r+(r>0?360:-360):r}else v=n,d=e;No.point(n,e),t(n,e)}function i(){No.lineStart()}function a(){u(v,d),No.lineEnd(),Ma(y)>Pa&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function o(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=a,y=0,No.polygonStart()},polygonEnd:function(){No.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>ko?(s=-(h=180),f=-(g=90)):y>Pa?g=90:-Pa>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],oa.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],c(e[0],u)||c(e[1],u)?(o(u[0],e[1])>o(u[0],u[1])&&(u[1]=e[1]),o(e[0],u[1])>o(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var a,e,p=-(1/0),t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(a=o(u[1],e[0]))>p&&(p=a,s=e[0],h=u[1])}return M=x=null,s===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[s,f],[h,g]]}}(),oa.geo.centroid=function(n){Eo=Ao=Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,jo);var t=Do,e=Po,r=Uo,u=t*t+e*e+r*r;return Ua>u&&(t=qo,e=To,r=Ro,Pa>Ao&&(t=Co,e=zo,r=Lo),u=t*t+e*e+r*r,Ua>u)?[NaN,NaN]:[Math.atan2(e,t)*Ya,tn(r/Math.sqrt(u))*Ya]};var Eo,Ao,Co,zo,Lo,qo,To,Ro,Do,Po,Uo,jo={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){jo.lineStart=At},polygonEnd:function(){jo.lineStart=Nt}},Fo=Rt(zt,jt,Ht,[-ja,-ja/2]),Ho=1e9;oa.geo.clipExtent=function(){var n,t,e,r,u,i,a={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(o){return arguments.length?(i=Zt(n=+o[0][0],t=+o[0][1],e=+o[1][0],r=+o[1][1]),u&&(u.valid=!1,u=null),a):[[n,t],[e,r]]}};return a.extent([[0,0],[960,500]])},(oa.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,oa.geo.albers=function(){return oa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},oa.geo.albersUsa=function(){function n(n){var i=n[0],a=n[1];return t=null,e(i,a),t||(r(i,a),t)||u(i,a),t}var t,e,r,u,i=oa.geo.albers(),a=oa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o=oa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?a:u>=.166&&.234>u&&r>=-.214&&-.115>r?o:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=a.stream(n),r=o.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),o.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),o.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var c=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*c,f-.238*c],[s+.455*c,f+.238*c]]).stream(l).point,r=a.translate([s-.307*c,f+.201*c]).clipExtent([[s-.425*c+Pa,f+.12*c+Pa],[s-.214*c-Pa,f+.234*c-Pa]]).stream(l).point,u=o.translate([s-.205*c,f+.212*c]).clipExtent([[s-.214*c+Pa,f+.166*c+Pa],[s-.115*c-Pa,f+.234*c-Pa]]).stream(l).point,n},n.scale(1070)};var Oo,Io,Yo,Zo,Vo,Xo,$o={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Io=0,$o.lineStart=$t},polygonEnd:function(){$o.lineStart=$o.lineEnd=$o.point=b,Oo+=Ma(Io/2)}},Bo={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wo={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wo.lineStart=ne},polygonEnd:function(){Wo.point=Gt,Wo.lineStart=Kt,Wo.lineEnd=Qt}};oa.geo.path=function(){function n(n){return n&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),a&&a.valid||(a=u(i)),oa.geo.stream(n,a)),i.result()}function t(){return a=null,n}var e,r,u,i,a,o=4.5;return n.area=function(n){return Oo=0,oa.geo.stream(n,u($o)),Oo},n.centroid=function(n){return Co=zo=Lo=qo=To=Ro=Do=Po=Uo=0,oa.geo.stream(n,u(Wo)),Uo?[Do/Uo,Po/Uo]:Ro?[qo/Ro,To/Ro]:Lo?[Co/Lo,zo/Lo]:[NaN,NaN]},n.bounds=function(n){return Vo=Xo=-(Yo=Zo=1/0),oa.geo.stream(n,u(Bo)),[[Yo,Zo],[Vo,Xo]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||re(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new Wt:new te(n),"function"!=typeof o&&i.pointRadius(o),t()):r},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(oa.geo.albersUsa()).context(null)},oa.geo.transform=function(n){return{stream:function(t){var e=new ue(t);for(var r in n)e[r]=n[r];return e}}},ue.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},oa.geo.projection=ae,oa.geo.projectionMutator=oe,(oa.geo.equirectangular=function(){return ae(ce)}).raw=ce.invert=ce,oa.geo.rotation=function(n){function t(t){return t=n(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t}return n=fe(n[0]%360*Ia,n[1]*Ia,n.length>2?n[2]*Ia:0),t.invert=function(t){return t=n.invert(t[0]*Ia,t[1]*Ia),t[0]*=Ya,t[1]*=Ya,t},t},se.invert=ce,oa.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=fe(-n[0]*Ia,-n[1]*Ia,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ya,n[1]*=Ya}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Ia,u*Ia),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Ia,(u=+r)*Ia),n):u},n.angle(90)},oa.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ia,u=n[1]*Ia,i=t[1]*Ia,a=Math.sin(r),o=Math.cos(r),l=Math.sin(u),c=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*a)*e+(e=c*s-l*f*o)*e),l*s+c*f*o)},oa.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return oa.range(Math.ceil(i/d)*d,u,d).map(h).concat(oa.range(Math.ceil(c/m)*m,l,m).map(g)).concat(oa.range(Math.ceil(r/p)*p,e,p).filter(function(n){return Ma(n%d)>Pa}).map(s)).concat(oa.range(Math.ceil(o/v)*v,a,v).filter(function(n){return Ma(n%m)>Pa}).map(f))}var e,r,u,i,a,o,l,c,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(l).slice(1),h(u).reverse().slice(1),g(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],c=+t[0][1],l=+t[1][1],i>u&&(t=i,i=u,u=t),c>l&&(t=c,c=l,l=t),n.precision(y)):[[i,c],[u,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),o>a&&(t=o,o=a,a=t),n.precision(y)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=me(o,a,90),f=ye(r,e,y),h=me(c,l,90),g=ye(i,u,y),n):y},n.majorExtent([[-180,-90+Pa],[180,90-Pa]]).minorExtent([[-180,-80-Pa],[180,80+Pa]])},oa.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=Me,u=xe;return n.distance=function(){return oa.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},oa.geo.interpolate=function(n,t){return be(n[0]*Ia,n[1]*Ia,t[0]*Ia,t[1]*Ia)},oa.geo.length=function(n){return Jo=0,oa.geo.stream(n,Go),Jo};var Jo,Go={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ko=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(oa.geo.azimuthalEqualArea=function(){return ae(Ko)}).raw=Ko;var Qo=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(oa.geo.azimuthalEquidistant=function(){return ae(Qo)}).raw=Qo,(oa.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(oa.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(oa.geo.gnomonic=function(){return ae(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Oa]},(oa.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(oa.geo.orthographic=function(){return ae(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(oa.geo.stereographic=function(){return ae(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Oa]},(oa.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,oa.geom={},oa.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=En(e),i=En(r),a=n.length,o=[],l=[];for(t=0;a>t;t++)o.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(o.sort(qe),t=0;a>t;t++)l.push([o[t][0],-o[t][1]]);var c=Le(o),s=Le(l),f=s[0]===c[0],h=s[s.length-1]===c[c.length-1],g=[];for(t=c.length-1;t>=0;--t)g.push(n[o[c[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[o[s[t]][2]]);return g}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},oa.geom.polygon=function(n){return Sa(n,rl),n};var rl=oa.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},rl.centroid=function(n){var t,e,r=-1,u=this.length,i=0,a=0,o=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=o,o=this[r],e=t[0]*o[1]-o[0]*t[1],i+=(t[0]+o[0])*e,a+=(t[1]+o[1])*e;return[i*n,a*n]},rl.clip=function(n){for(var t,e,r,u,i,a,o=De(n),l=-1,c=this.length-De(this),s=this[c-1];++l<c;){for(t=n.slice(),n.length=0,u=this[l],i=t[(r=t.length-o)-1],e=-1;++e<r;)a=t[e],Te(a,s,u)?(Te(i,s,u)||n.push(Re(i,a,s,u)),n.push(a)):Te(i,s,u)&&n.push(Re(i,a,s,u)),i=a;o&&n.push(n[0]),s=u}return n};var ul,il,al,ol,ll,cl=[],sl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=ar(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,a=n.R;if(e=i?a?ar(a):i:a,u?u.L===n?u.L=e:u.R=e:this._=e,i&&a?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==a?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=a,a.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,ur(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ir(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,ur(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ir(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ur(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ir(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},oa.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=o[0][0],u=o[0][1],i=o[1][0],a=o[1][1];return or(e(n),o).cells.forEach(function(e,o){var l=e.edges,c=e.site,s=t[o]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=i&&c.y>=u&&c.y<=a?[[r,a],[i,a],[i,u],[r,u]]:[];s.point=n[o]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Pa)*Pa,y:Math.round(a(n,t)/Pa)*Pa,i:t}})}var r=Ce,u=ze,i=r,a=u,o=fl;return n?t(n):(t.links=function(n){return or(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return or(e(n)).cells.forEach(function(e,r){for(var u,i,a=e.site,o=e.edges.sort(Ve),l=-1,c=o.length,s=o[c-1].edge,f=s.l===a?s.r:s.l;++l<c;)u=s,i=f,s=o[l].edge,f=s.l===a?s.r:s.l,r<i.i&&r<f.i&&cr(a,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=En(r=n),t):r},t.y=function(n){return arguments.length?(a=En(u=n),t):u},t.clipExtent=function(n){return arguments.length?(o=null==n?fl:n,t):o===fl?null:o},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):o===fl?null:o&&o[1]},t)};var fl=[[-1e6,-1e6],[1e6,1e6]];oa.geom.delaunay=function(n){return oa.geom.voronoi().triangles(n)},oa.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,a,o){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,s=n.y;if(null!=l)if(Ma(l-e)+Ma(s-r)<.01)c(n,t,e,r,u,i,a,o);else{var f=n.point;n.x=n.y=n.point=null,c(n,f,l,s,u,i,a,o),c(n,t,e,r,u,i,a,o)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,u,i,a,o)}function c(n,t,e,r,u,a,o,l){var c=.5*(u+o),s=.5*(a+l),f=e>=c,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=hr()),f?u=c:o=c,h?a=s:l=s,i(n,t,e,r,u,a,o,l)}var s,f,h,g,p,v,d,m,y,M=En(o),x=En(l);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,a)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=hr();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){gr(n,k,v,d,m,y)},k.find=function(n){return pr(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var a,o=Ce,l=ze;return(a=arguments.length)?(o=sr,l=fr,3===a&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(o=n,i):o},i.y=function(n){return arguments.length?(l=n,i):l},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},oa.interpolateRgb=vr,oa.interpolateObject=dr,oa.interpolateNumber=mr,oa.interpolateString=yr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gl=new RegExp(hl.source,"g");oa.interpolate=Mr,oa.interpolators=[function(n,t){var e=typeof t;return("string"===e?uo.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:yr:t instanceof on?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:mr)(n,t)}],oa.interpolateArray=xr;var pl=function(){return y},vl=oa.map({linear:pl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=oa.map({"in":y,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});oa.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||pl,r=dl.get(r)||y,br(r(e.apply(null,la.call(arguments,1))))},oa.interpolateHcl=Rr,oa.interpolateHsl=Dr,oa.interpolateLab=Pr,oa.interpolateRound=Ur,oa.transform=function(n){var t=sa.createElementNS(oa.ns.prefix.svg,"g");return(oa.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:ml)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ml={a:1,b:0,c:0,d:1,e:0,f:0};oa.interpolateTransform=$r,oa.layout={},oa.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},oa.layout.chord=function(){function n(){var n,c,f,h,g,p={},v=[],d=oa.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(c=0,g=-1;++g<i;)c+=u[h][g];v.push(c),m.push(oa.range(i)),n+=c}for(a&&d.sort(function(n,t){return a(v[n],v[t])}),o&&m.forEach(function(n,t){n.sort(function(n,e){return o(u[t][n],u[t][e])})}),n=(Fa-s*i)/n,c=0,h=-1;++h<i;){for(f=c,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=c,_=c+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:c,value:v[y]},c+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,a,o,l,c={},s=0;return c.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,c):u},c.padding=function(n){return arguments.length?(s=n,e=r=null,c):s},c.sortGroups=function(n){return arguments.length?(a=n,e=r=null,c):a},c.sortSubgroups=function(n){return arguments.length?(o=n,e=null,c):o},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},oa.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,a=t.cy-n.y,o=u-e,l=i*i+a*a;if(l>o*o/m){if(v>l){var c=t.charge/l;n.px-=i*c,n.py-=a*c}return!0}if(t.point&&l&&v>l){var c=t.pointCharge/l;n.px-=i*c,n.py-=a*c}}return!t.charge}}function t(n){n.px=oa.event.x,n.py=oa.event.y,l.resume()}var e,r,u,i,a,o,l={},c=oa.dispatch("start","tick","end"),s=[1,1],f=.9,h=yl,g=Ml,p=-30,v=xl,d=.1,m=.64,M=[],x=[];return l.tick=function(){if((u*=.99)<.005)return e=null,c.end({type:"end",alpha:u=0}),!0;var t,r,l,h,g,v,m,y,b,_=M.length,w=x.length;for(r=0;w>r;++r)l=x[r],h=l.source,g=l.target,y=g.x-h.x,b=g.y-h.y,(v=y*y+b*b)&&(v=u*a[r]*((v=Math.sqrt(v))-i[r])/v,y*=v,b*=v,g.x-=y*(m=h.weight+g.weight?h.weight/(h.weight+g.weight):.5),g.y-=b*m,h.x+=y*(m=1-m),h.y+=b*m);if((m=u*d)&&(y=s[0]/2,b=s[1]/2,r=-1,m))for(;++r<_;)l=M[r],l.x+=(y-l.x)*m,l.y+=(b-l.y)*m;if(p)for(ru(t=oa.geom.quadtree(M),u,o),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);c.tick({type:"tick",alpha:u})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(s=n,l):s},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.friction=function(n){return arguments.length?(f=+n,l):f},l.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(m=n*n,l):Math.sqrt(m)},l.alpha=function(n){return arguments.length?(n=+n,u?n>0?u=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:u=0})):n>0&&(c.start({type:"start",alpha:u=n}),e=qn(l.tick)),l):u},l.start=function(){function n(n,r){if(!e){for(e=new Array(u),l=0;u>l;++l)e[l]=[];for(l=0;c>l;++l){var i=x[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var a,o=e[t],l=-1,s=o.length;++l<s;)if(!isNaN(a=o[l][n]))return a;return Math.random()*r}var t,e,r,u=M.length,c=x.length,f=s[0],v=s[1];for(t=0;u>t;++t)(r=M[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;u>t;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",f)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof h)for(t=0;c>t;++t)i[t]=+h.call(this,x[t],t);else for(t=0;c>t;++t)i[t]=h;if(a=[],"function"==typeof g)for(t=0;c>t;++t)a[t]=+g.call(this,x[t],t);else for(t=0;c>t;++t)a[t]=g;if(o=[],"function"==typeof p)for(t=0;u>t;++t)o[t]=+p.call(this,M[t],t);else for(t=0;u>t;++t)o[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=oa.behavior.drag().origin(y).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",nu)),arguments.length?void this.on("mouseover.force",tu).on("mouseout.force",eu).call(r):r},oa.rebind(l,c,"on")};var yl=20,Ml=1,xl=1/0;oa.layout.hierarchy=function(){function n(u){var i,a=[u],o=[];for(u.depth=0;null!=(i=a.pop());)if(o.push(i),(c=e.call(n,i,i.depth))&&(l=c.length)){for(var l,c,s;--l>=0;)a.push(s=c[l]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=c}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return au(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),o}var t=cu,e=ou,r=lu;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(iu(t,function(n){n.children&&(n.value=0)}),au(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},oa.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(a=i.length)){var a,o,l,c=-1;for(r=t.value?r/t.value:0;++c<a;)n(o=i[c],e,l=o.value*r,u),e+=l}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var a=r.call(this,e,i);return n(a[0],0,u[0],u[1]/t(a[0])),a}var r=oa.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},uu(e,r)},oa.layout.pie=function(){function n(a){var o,l=a.length,c=a.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=oa.sum(c),v=p?(f-l*g)/p:0,d=oa.range(l),m=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(a[n],a[t])}),d.forEach(function(n){m[n]={data:a[n],value:o=c[n],startAngle:s,endAngle:s+=o*v+g,padAngle:h}}),m}var t=Number,e=bl,r=0,u=Fa,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var bl={};oa.layout.stack=function(){function n(o,l){if(!(h=o.length))return o;var c=o.map(function(e,r){return t.call(n,e,r)}),s=c.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),a.call(n,t,e)]})}),f=e.call(n,s,l);c=oa.permute(c,f),s=oa.permute(s,f);var h,g,p,v,d=r.call(n,s,l),m=c[0].length;for(p=0;m>p;++p)for(u.call(n,c[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,c[g][p],v+=s[g-1][p][1],s[g][p][1]);return o}var t=y,e=pu,r=vu,u=gu,i=fu,a=hu;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||pu,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vu,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(a=t,n):a},n.out=function(t){return arguments.length?(u=t,n):u},n};var _l=oa.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(du),i=n.map(mu),a=oa.range(r).sort(function(n,t){return u[n]-u[t]}),o=0,l=0,c=[],s=[];for(t=0;r>t;++t)e=a[t],l>o?(o+=i[e],c.push(e)):(l+=i[e],s.push(e));return s.reverse().concat(c)},reverse:function(n){return oa.range(n.length).reverse()},"default":pu}),wl=oa.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,a=[],o=0,l=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>o&&(o=r),a.push(r)}for(e=0;i>e;++e)l[e]=(o-a[e])/2;return l},wiggle:function(n){var t,e,r,u,i,a,o,l,c,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=l=c=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,o=f[e][0]-f[e-1][0];s>t;++t){for(r=0,a=(n[t][e][1]-n[t][e-1][1])/(2*o);t>r;++r)a+=(n[r][e][1]-n[r][e-1][1])/o;i+=a*n[t][e][1]}g[e]=l-=u?i/u*o:0,c>l&&(c=l)}for(e=0;h>e;++e)g[e]-=c;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,a=1/u,o=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=a}for(e=0;i>e;++e)o[e]=0;return o},zero:vu});oa.layout.histogram=function(){function n(n,i){for(var a,o,l=[],c=n.map(e,this),s=r.call(this,c,i),f=u.call(this,s,c,i),i=-1,h=c.length,g=f.length-1,p=t?1:1/h;++i<g;)a=l[i]=[],a.dx=f[i+1]-(a.x=f[i]),a.y=0;if(g>0)for(i=-1;++i<h;)o=c[i],o>=s[0]&&o<=s[1]&&(a=l[oa.bisect(f,o,1,g)-1],a.y+=p,a.push(n[i]));return l}var t=!0,e=Number,r=bu,u=Mu;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return xu(n,t)}:En(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},oa.layout.pack=function(){function n(n,i){var a=e.call(this,n,i),o=a[0],l=u[0],c=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(o.x=o.y=0,au(o,function(n){n.r=+s(n.value)}),au(o,Nu),r){var f=r*(t?1:Math.max(2*o.r/l,2*o.r/c))/2;au(o,function(n){n.r+=f}),au(o,Nu),au(o,function(n){n.r-=f})}return Cu(o,l/2,c/2,t?1:1/Math.max(2*o.r/l,2*o.r/c)),a}var t,e=oa.layout.hierarchy().sort(_u),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},uu(n,e)},oa.layout.tree=function(){function n(n,u){var s=a.call(this,n,u),f=s[0],h=t(f);if(au(h,e),h.parent.m=-h.z,iu(h,r),c)iu(f,i);else{var g=f,p=f,v=f;iu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=o(g,p)/2-g.x,m=l[0]/(p.x+o(p,g)/2+d),y=l[1]/(v.depth||1);iu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,a=0,o=i.length;o>a;++a)r.push((i[a]=u={_:i[a],parent:t,children:(u=i[a].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Du(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+o(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+o(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,a=t,l=u.parent.children[0],c=u.m,s=i.m,f=a.m,h=l.m;a=Tu(a),u=qu(u),a&&u;)l=qu(l),i=Tu(i),i.a=n,r=a.z+f-u.z-c+o(a._,u._),r>0&&(Ru(Pu(a,n,e),n,r),c+=r,s+=r),f+=a.m,c+=u.m,h+=l.m,s+=i.m;a&&!Tu(i)&&(i.t=a,i.m+=f-s),u&&!qu(l)&&(l.t=u,l.m+=c-h,e=n)}return e}function i(n){n.x*=l[0],n.y=n.depth*l[1]}var a=oa.layout.hierarchy().sort(null).value(null),o=Lu,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(o=t,n):o},n.size=function(t){return arguments.length?(c=null==(l=t)?i:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:i,n):c?l:null},uu(n,a)},oa.layout.cluster=function(){function n(n,i){var a,o=t.call(this,n,i),l=o[0],c=0;au(l,function(n){var t=n.children;t&&t.length?(n.x=ju(t),n.y=Uu(t)):(n.x=a?c+=e(n,a):0,n.y=0,a=n)});var s=Fu(l),f=Hu(l),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return au(l,u?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),o}var t=oa.layout.hierarchy().sort(null).value(null),e=Lu,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},uu(n,t)},oa.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var a,o,l,c=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?c.dx:"dice"===g?c.dy:"slice-dice"===g?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),s.area=0;(l=h.length)>0;)s.push(a=h[l-1]),s.area+=a.area,"squarify"!==g||(o=r(s,v))<=p?(h.pop(),p=o):(s.area-=s.pop().area,u(s,v,c,!1),v=Math.min(c.dx,c.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,c,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,a=f(t),o=r.slice(),l=[];for(n(o,a.dx*a.dy/t.value),l.area=0;i=o.pop();)l.push(i),l.area+=i.area,null!=i.z&&(u(l,i.z?a.dx:a.dy,a,!o.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,a=-1,o=n.length;++a<o;)(e=n[a].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,a=n.length,o=e.x,c=e.y,s=t?l(n.area/t):0;
if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<a;)u=n[i],u.x=o,u.y=c,u.dy=s,o+=u.dx=Math.min(e.x+e.dx-o,s?l(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-o,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<a;)u=n[i],u.x=o,u.y=c,u.dx=s,c+=u.dy=Math.min(e.y+e.dy-c,s?l(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-c,e.x+=s,e.dx-=s}}function i(r){var u=a||o(r),i=u[0];return i.x=i.y=0,i.value?(i.dx=c[0],i.dy=c[1]):i.dx=i.dy=0,a&&o.revalue(i),n([i],i.dx*i.dy/i.value),(a?e:t)(i),h&&(a=u),u}var a,o=oa.layout.hierarchy(),l=Math.round,c=[1,1],s=null,f=Ou,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(c=n,i):c},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ou(t):Iu(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Iu(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ou:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(l=n?Math.round:Number,i):l!=Number},i.sticky=function(n){return arguments.length?(h=n,a=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},uu(i,o)},oa.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=oa.random.normal.apply(oa,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=oa.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},oa.scale={};var Sl={floor:y,ceil:y};oa.scale.linear=function(){return Wu([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};oa.scale.log=function(){return ri(oa.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=oa.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};oa.scale.pow=function(){return ui(oa.scale.linear(),1,[0,1])},oa.scale.sqrt=function(){return oa.scale.pow().exponent(.5)},oa.scale.ordinal=function(){return ai([],{t:"range",a:[[]]})},oa.scale.category10=function(){return oa.scale.ordinal().range(Al)},oa.scale.category20=function(){return oa.scale.ordinal().range(Cl)},oa.scale.category20b=function(){return oa.scale.ordinal().range(zl)},oa.scale.category20c=function(){return oa.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);oa.scale.quantile=function(){return oi([],[])},oa.scale.quantize=function(){return li(0,1,[0,1])},oa.scale.threshold=function(){return ci([.5],[0,1])},oa.scale.identity=function(){return si([0,1])},oa.svg={},oa.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),s=a.apply(this,arguments)-Oa,f=o.apply(this,arguments)-Oa,h=Math.abs(f-s),g=s>f?0:1;if(n>c&&(p=c,c=n,n=p),h>=Ha)return t(c,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,N=0,E=0,A=[];if((m=(+l.apply(this,arguments)||0)/2)&&(d=i===ql?Math.sqrt(n*n+c*c):+i.apply(this,arguments),g||(E*=-1),c&&(E=tn(d/c*Math.sin(m))),n&&(N=tn(d/n*Math.sin(m)))),c){y=c*Math.cos(s+E),M=c*Math.sin(s+E),x=c*Math.cos(f-E),b=c*Math.sin(f-E);var C=Math.abs(f-s-2*E)<=ja?0:1;if(E&&mi(y,M,x,b)===g^C){var z=(s+f)/2;y=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-N),w=n*Math.sin(f-N),S=n*Math.cos(s+N),k=n*Math.sin(s+N);var L=Math.abs(s-f+2*N)<=ja?0:1;if(N&&mi(_,w,S,k)===1-g^L){var q=(s+f)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Pa&&(p=Math.min(Math.abs(c-n)/2,+u.apply(this,arguments)))>.001){v=c>n^g?0:1;var T=p,R=p;if(ja>h){var D=null==S?[_,w]:null==x?[y,M]:Re([y,M],[S,k],[x,b],[_,w]),P=y-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(p,(n-O)/(H-1)),T=Math.min(p,(c-O)/(H+1))}if(null!=x){var I=yi(null==S?[_,w]:[S,k],[y,M],c,T,g),Y=yi([x,b],[_,w],c,T,g);p===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-g^mi(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",g," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",y,",",M);if(null!=S){var Z=yi([y,M],[S,k],n,-R,g),V=yi([_,w],null==x?[y,M]:[x,b],n,-R,g);p===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^mi(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",y,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",g," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-g," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hi,r=gi,u=fi,i=ql,a=pi,o=vi,l=di;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=En(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==ql?ql:En(t),n):i},n.startAngle=function(t){return arguments.length?(a=En(t),n):a},n.endAngle=function(t){return arguments.length?(o=En(t),n):o},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-Oa;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";oa.svg.line=function(){return Mi(y)};var Tl=oa.map({linear:xi,"linear-closed":bi,step:_i,"step-before":wi,"step-after":Si,basis:zi,"basis-open":Li,"basis-closed":qi,bundle:Ti,cardinal:Ei,"cardinal-open":ki,"cardinal-closed":Ni,monotone:Fi});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];oa.svg.line.radial=function(){var n=Mi(Hi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wi.reverse=Si,Si.reverse=wi,oa.svg.area=function(){return Oi(y)},oa.svg.area.radial=function(){var n=Oi(Hi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},oa.svg.chord=function(){function n(n,o){var l=t(this,i,n,o),c=t(this,a,n,o);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=o.call(n,u,r),a=l.call(n,u,r)-Oa,s=c.call(n,u,r)-Oa;return{r:i,a0:a,a1:s,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>ja)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=Me,a=xe,o=Ii,l=pi,c=vi;return n.radius=function(t){return arguments.length?(o=En(t),n):o},n.source=function(t){return arguments.length?(i=En(t),n):i},n.target=function(t){return arguments.length?(a=En(t),n):a},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},oa.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),a=e.call(this,n,u),o=(i.y+a.y)/2,l=[i,{x:i.x,y:o},{x:a.x,y:o},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yi;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},oa.svg.diagonal.radial=function(){var n=oa.svg.diagonal(),t=Yi,e=n.projection;return n.projection=function(n){return arguments.length?e(Zi(t=n)):t},n},oa.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$i)(e.call(this,n,r))}var t=Xi,e=Vi;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=oa.map({circle:$i,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});oa.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Ia);Aa.transition=function(n){for(var t,e,r=Hl||++Zl,u=Ki(n),i=[],a=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},o=-1,l=this.length;++o<l;){i.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(e=c[s])&&Qi(e,s,u,r,a),t.push(e)}return Wi(i,u,r)},Aa.interrupt=function(n){return this.each(null==n?Il:Bi(Ki(n)))};var Hl,Ol,Il=Bi(Ki()),Yl=[],Zl=0;Yl.call=Aa.call,Yl.empty=Aa.empty,Yl.node=Aa.node,Yl.size=Aa.size,oa.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:oa.selection().transition(n)},oa.transition.prototype=Yl,Yl.select=function(n){var t,e,r,u=this.id,i=this.namespace,a=[];n=A(n);for(var o=-1,l=this.length;++o<l;){a.push(t=[]);for(var c=this[o],s=-1,f=c.length;++s<f;)(r=c[s])&&(e=n.call(r,r.__data__,s,o))?("__data__"in r&&(e.__data__=r.__data__),Qi(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Wi(a,i,u)},Yl.selectAll=function(n){var t,e,r,u,i,a=this.id,o=this.namespace,l=[];n=C(n);for(var c=-1,s=this.length;++c<s;)for(var f=this[c],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[o][a],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&Qi(u,p,o,a,i),t.push(u)}return Wi(l,o,a)},Yl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,a=this.length;a>i;i++){u.push(t=[]);for(var e=this[i],o=0,l=e.length;l>o;o++)(r=e[o])&&n.call(r,r.__data__,o,i)&&t.push(r)}return Wi(u,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(o)}function r(){this.removeAttributeNS(o.space,o.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(o);return e!==n&&(t=a(e,n),function(n){this.setAttribute(o,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(o.space,o.local);return e!==n&&(t=a(e,n),function(n){this.setAttributeNS(o.space,o.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var a="transform"==n?$r:Mr,o=oa.ns.qualify(n);return Ji(this,"attr."+n,t,o.local?i:u)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=oa.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Yl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=Mr(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof n){2>a&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ji(this,"style."+n,e,i)},Yl.styleTween=function(n,e,r){function u(u,i){var a=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return a&&function(t){this.style.setProperty(n,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Yl.text=function(n){return Ji(this,"text",n,Gi)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=oa.ease.apply(oa,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Ol,i=Hl;try{Hl=e,Y(this,function(t,u,i){Ol=t[r][e],n.call(t,t.__data__,u,i)})}finally{Ol=u,Hl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=oa.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,u=this.id,i=++Zl,a=this.namespace,o=[],l=0,c=this.length;c>l;l++){o.push(n=[]);for(var t=this[l],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[a][u],Qi(e,s,a,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wi(o,a,i)},oa.svg.axis=function(){function n(n){n.each(function(){var n,c=oa.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==l?f.ticks?f.ticks.apply(f,o):f.domain():l,g=null==t?f.tickFormat?f.tickFormat.apply(f,o):y:t,p=c.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Pa),d=oa.transition(p.exit()).style("opacity",Pa).remove(),m=oa.transition(p.order()).style("opacity",1),M=Math.max(u,0)+a,x=Zu(f),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),oa.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),z=v.select("text"),L=m.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=na,w="x",k="y",S="x2",N="y2",C.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*i+"V0H"+x[1]+"V"+q*i)):(n=ta,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),_.attr("d","M"+q*i+","+x[0]+"H0V"+x[1]+"H"+q*i)),E.attr(N,q*u),z.attr(k,q*M),A.attr(S,0).attr(N,q*u),L.attr(w,0).attr(k,q*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=oa.scale.linear(),r=Vl,u=6,i=6,a=3,o=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(o=ca(arguments),n):o},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(a=+t,n):a},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};oa.svg.brush=function(){function n(t){t.each(function(){var t=oa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var o=t.selectAll(".resize").data(v,y);o.exit().remove(),o.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),o.style("display",n.empty()?"none":null);var l,f=oa.transition(t),h=oa.transition(a);c&&(l=Zu(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),s&&(l=Zu(s),h.attr("y",l[0]).attr("height",l[1]-l[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==oa.event.keyCode&&(C||(M=null,L[0]-=f[1],L[1]-=h[1],C=2),S())}function v(){32==oa.event.keyCode&&2==C&&(L[0]+=f[1],L[1]+=h[1],C=0,S())}function d(){var n=oa.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(oa.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&m(n,c,0)&&(r(k),t=!0),A&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Zu(t),l=i[0],c=i[1],s=L[e],v=e?h:f,d=v[1]-v[0];return C&&(l-=s,c-=d+s),r=(e?p:g)?Math.max(l,Math.min(c,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(l,Math.min(c,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?o=null:a=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),oa.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=oa.select(oa.event.target),w=l.of(b,arguments),k=oa.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&s,C=_.classed("extent"),z=W(b),L=oa.mouse(b),q=oa.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(oa.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",y):q.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[f[1-T]-L[0],h[1-R]-L[1]],L[0]=f[T],L[1]=h[R]}else oa.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),oa.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var a,o,l=N(n,"brushstart","brush","brushend"),c=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:f,y:h,i:a,j:o},e=this.__chart__||t;this.__chart__=t,Hl?oa.select(this).transition().each("start.brush",function(){a=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(f,t.x),r=xr(h,t.y);return a=o=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!s],n):c},n.y=function(t){return arguments.length?(s=t,v=Bl[!c<<1|!s],n):s},n.clamp=function(t){return arguments.length?(c&&s?(g=!!t[0],p=!!t[1]):c?g=!!t:s&&(p=!!t),n):c&&s?[g,p]:c?g:s?p:null},n.extent=function(t){var e,r,u,i,l;return arguments.length?(c&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),a=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(l=e,e=r,r=l),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],c&&(u=u[1],i=i[1]),o=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(l=u,u=i,i=l),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(c&&(a?(e=a[0],r=a[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(l=e,e=r,r=l))),s&&(o?(u=o[0],i=o[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(l=u,u=i,i=l))),c&&s?[[e,u],[r,i]]:c?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],a=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!s&&h[0]==h[1]},oa.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=go.format=xo.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ea:Gl,ea.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ea.toString=Gl.toString,go.second=On(function(n){return new po(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),go.seconds=go.second.range,go.seconds.utc=go.second.utc.range,go.minute=On(function(n){return new po(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),go.minutes=go.minute.range,go.minutes.utc=go.minute.utc.range,go.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new po(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),go.hours=go.hour.range,go.hours.utc=go.hour.utc.range,go.month=On(function(n){return n=go.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),go.months=go.month.range,go.months.utc=go.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[go.second,1],[go.second,5],[go.second,15],[go.second,30],[go.minute,1],[go.minute,5],[go.minute,15],[go.minute,30],[go.hour,1],[go.hour,3],[go.hour,6],[go.hour,12],[go.day,1],[go.day,2],[go.week,1],[go.month,1],[go.month,3],[go.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return oa.range(Math.ceil(n/e)*e,+t,e).map(ua)},floor:y,ceil:y};Ql.year=go.year,go.scale=function(){return ra(oa.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=go.year.utc,go.scale.utc=function(){return ra(oa.scale.linear(),ec,rc)},oa.text=An(function(n){return n.responseText}),oa.json=function(n,t){return Cn(n,"application/json",ia,t)},oa.html=function(n,t){return Cn(n,"text/html",aa,t)},oa.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=oa,define(oa)):"object"==typeof module&&module.exports?module.exports=oa:this.d3=oa}();
// d3.tip
// Copyright (c) 2013 Justin Palmer
//
// Tooltips for d3.js SVG visualizations

(function (root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module with d3 as a dependency.
    define(['d3'], factory)
  } else if (typeof module === 'object' && module.exports) {
    // CommonJS
    module.exports = function(d3) {
      d3.tip = factory(d3)
      return d3.tip
    }
  } else {
    // Browser global.
    root.d3.tip = factory(root.d3)
  }
}(this, function (d3) {

  // Public - contructs a new tooltip
  //
  // Returns a tip
  return function() {
    var direction = d3_tip_direction,
        offset    = d3_tip_offset,
        html      = d3_tip_html,
        node      = initNode(),
        svg       = null,
        point     = null,
        target    = null

    function tip(vis) {
      svg = getSVGNode(vis)
      point = svg.createSVGPoint()
      document.body.appendChild(node)
    }

    // Public - show the tooltip on the screen
    //
    // Returns a tip
    tip.show = function() {
      var args = Array.prototype.slice.call(arguments)
      if(args[args.length - 1] instanceof SVGElement) target = args.pop()

      var content = html.apply(this, args),
          poffset = offset.apply(this, args),
          dir     = direction.apply(this, args),
          nodel   = getNodeEl(),
          i       = directions.length,
          coords,
          scrollTop  = document.documentElement.scrollTop || document.body.scrollTop,
          scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft

      nodel.html(content)
        .style({ opacity: 1, 'pointer-events': 'all' })

      while(i--) nodel.classed(directions[i], false)
      coords = direction_callbacks.get(dir).apply(this)
      nodel.classed(dir, true).style({
        top: (coords.top +  poffset[0]) + scrollTop + 'px',
        left: (coords.left + poffset[1]) + scrollLeft + 'px'
      })

      return tip
    }

    // Public - hide the tooltip
    //
    // Returns a tip
    tip.hide = function() {
      var nodel = getNodeEl()
      nodel.style({ opacity: 0, 'pointer-events': 'none' })
      return tip
    }

    // Public: Proxy attr calls to the d3 tip container.  Sets or gets attribute value.
    //
    // n - name of the attribute
    // v - value of the attribute
    //
    // Returns tip or attribute value
    tip.attr = function(n, v) {
      if (arguments.length < 2 && typeof n === 'string') {
        return getNodeEl().attr(n)
      } else {
        var args =  Array.prototype.slice.call(arguments)
        d3.selection.prototype.attr.apply(getNodeEl(), args)
      }

      return tip
    }

    // Public: Proxy style calls to the d3 tip container.  Sets or gets a style value.
    //
    // n - name of the property
    // v - value of the property
    //
    // Returns tip or style property value
    tip.style = function(n, v) {
      if (arguments.length < 2 && typeof n === 'string') {
        return getNodeEl().style(n)
      } else {
        var args =  Array.prototype.slice.call(arguments)
        d3.selection.prototype.style.apply(getNodeEl(), args)
      }

      return tip
    }

    // Public: Set or get the direction of the tooltip
    //
    // v - One of n(north), s(south), e(east), or w(west), nw(northwest),
    //     sw(southwest), ne(northeast) or se(southeast)
    //
    // Returns tip or direction
    tip.direction = function(v) {
      if (!arguments.length) return direction
      direction = v == null ? v : d3.functor(v)

      return tip
    }

    // Public: Sets or gets the offset of the tip
    //
    // v - Array of [x, y] offset
    //
    // Returns offset or
    tip.offset = function(v) {
      if (!arguments.length) return offset
      offset = v == null ? v : d3.functor(v)

      return tip
    }

    // Public: sets or gets the html value of the tooltip
    //
    // v - String value of the tip
    //
    // Returns html value or tip
    tip.html = function(v) {
      if (!arguments.length) return html
      html = v == null ? v : d3.functor(v)

      return tip
    }

    // Public: destroys the tooltip and removes it from the DOM
    //
    // Returns a tip
    tip.destroy = function() {
      if(node) {
        getNodeEl().remove();
        node = null;
      }
      return tip;
    }

    function d3_tip_direction() { return 'n' }
    function d3_tip_offset() { return [0, 0] }
    function d3_tip_html() { return ' ' }

    var direction_callbacks = d3.map({
      n:  direction_n,
      s:  direction_s,
      e:  direction_e,
      w:  direction_w,
      nw: direction_nw,
      ne: direction_ne,
      sw: direction_sw,
      se: direction_se
    }),

    directions = direction_callbacks.keys()

    function direction_n() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.n.y - node.offsetHeight,
        left: bbox.n.x - node.offsetWidth / 2
      }
    }

    function direction_s() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.s.y,
        left: bbox.s.x - node.offsetWidth / 2
      }
    }

    function direction_e() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.e.y - node.offsetHeight / 2,
        left: bbox.e.x
      }
    }

    function direction_w() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.w.y - node.offsetHeight / 2,
        left: bbox.w.x - node.offsetWidth
      }
    }

    function direction_nw() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.nw.y - node.offsetHeight,
        left: bbox.nw.x - node.offsetWidth
      }
    }

    function direction_ne() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.ne.y - node.offsetHeight,
        left: bbox.ne.x
      }
    }

    function direction_sw() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.sw.y,
        left: bbox.sw.x - node.offsetWidth
      }
    }

    function direction_se() {
      var bbox = getScreenBBox()
      return {
        top:  bbox.se.y,
        left: bbox.e.x
      }
    }

    function initNode() {
      var node = d3.select(document.createElement('div'))
      node.style({
        position: 'absolute',
        top: 0,
        opacity: 0,
        'pointer-events': 'none',
        'box-sizing': 'border-box'
      })

      return node.node()
    }

    function getSVGNode(el) {
      el = el.node()
      if(el.tagName.toLowerCase() === 'svg')
        return el

      return el.ownerSVGElement
    }

    function getNodeEl() {
      if(node === null) {
        node = initNode();
        // re-add node to DOM
        document.body.appendChild(node);
      };
      return d3.select(node);
    }

    // Private - gets the screen coordinates of a shape
    //
    // Given a shape on the screen, will return an SVGPoint for the directions
    // n(north), s(south), e(east), w(west), ne(northeast), se(southeast), nw(northwest),
    // sw(southwest).
    //
    //    +-+-+
    //    |   |
    //    +   +
    //    |   |
    //    +-+-+
    //
    // Returns an Object {n, s, e, w, nw, sw, ne, se}
    function getScreenBBox() {
      var targetel   = target || d3.event.target;

      while ('undefined' === typeof targetel.getScreenCTM && 'undefined' === targetel.parentNode) {
          targetel = targetel.parentNode;
      }

      var bbox       = {},
          matrix     = targetel.getScreenCTM(),
          tbbox      = targetel.getBBox(),
          width      = tbbox.width,
          height     = tbbox.height,
          x          = tbbox.x,
          y          = tbbox.y

      point.x = x
      point.y = y
      bbox.nw = point.matrixTransform(matrix)
      point.x += width
      bbox.ne = point.matrixTransform(matrix)
      point.y += height
      bbox.se = point.matrixTransform(matrix)
      point.x -= width
      bbox.sw = point.matrixTransform(matrix)
      point.y -= height / 2
      bbox.w  = point.matrixTransform(matrix)
      point.x += width
      bbox.e = point.matrixTransform(matrix)
      point.x -= width / 2
      point.y -= height / 2
      bbox.n = point.matrixTransform(matrix)
      point.y += height
      bbox.s = point.matrixTransform(matrix)

      return bbox
    }

    return tip
  };

}));
// SVGPathSeg API polyfill
// https://github.com/progers/pathseg
//
// This is a drop-in replacement for the SVGPathSeg and SVGPathSegList APIs that were removed from
// SVG2 (https://lists.w3.org/Archives/Public/www-svg/2015Jun/0044.html), including the latest spec
// changes which were implemented in Firefox 43 and Chrome 46.

(function() { "use strict";
    if (!("SVGPathSeg" in window)) {
        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg
        window.SVGPathSeg = function(type, typeAsLetter, owningPathSegList) {
            this.pathSegType = type;
            this.pathSegTypeAsLetter = typeAsLetter;
            this._owningPathSegList = owningPathSegList;
        }

        SVGPathSeg.prototype.classname = "SVGPathSeg";

        SVGPathSeg.PATHSEG_UNKNOWN = 0;
        SVGPathSeg.PATHSEG_CLOSEPATH = 1;
        SVGPathSeg.PATHSEG_MOVETO_ABS = 2;
        SVGPathSeg.PATHSEG_MOVETO_REL = 3;
        SVGPathSeg.PATHSEG_LINETO_ABS = 4;
        SVGPathSeg.PATHSEG_LINETO_REL = 5;
        SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;
        SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;
        SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;
        SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;
        SVGPathSeg.PATHSEG_ARC_ABS = 10;
        SVGPathSeg.PATHSEG_ARC_REL = 11;
        SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;
        SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;
        SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;
        SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;
        SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;
        SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;
        SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;
        SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;

        // Notify owning PathSegList on any changes so they can be synchronized back to the path element.
        SVGPathSeg.prototype._segmentChanged = function() {
            if (this._owningPathSegList)
                this._owningPathSegList.segmentChanged(this);
        }

        window.SVGPathSegClosePath = function(owningPathSegList) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CLOSEPATH, "z", owningPathSegList);
        }
        SVGPathSegClosePath.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegClosePath.prototype.toString = function() { return "[object SVGPathSegClosePath]"; }
        SVGPathSegClosePath.prototype._asPathString = function() { return this.pathSegTypeAsLetter; }
        SVGPathSegClosePath.prototype.clone = function() { return new SVGPathSegClosePath(undefined); }

        window.SVGPathSegMovetoAbs = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_MOVETO_ABS, "M", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegMovetoAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegMovetoAbs.prototype.toString = function() { return "[object SVGPathSegMovetoAbs]"; }
        SVGPathSegMovetoAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegMovetoAbs.prototype.clone = function() { return new SVGPathSegMovetoAbs(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegMovetoAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegMovetoAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegMovetoRel = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_MOVETO_REL, "m", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegMovetoRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegMovetoRel.prototype.toString = function() { return "[object SVGPathSegMovetoRel]"; }
        SVGPathSegMovetoRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegMovetoRel.prototype.clone = function() { return new SVGPathSegMovetoRel(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegMovetoRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegMovetoRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoAbs = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_ABS, "L", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegLinetoAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoAbs.prototype.toString = function() { return "[object SVGPathSegLinetoAbs]"; }
        SVGPathSegLinetoAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegLinetoAbs.prototype.clone = function() { return new SVGPathSegLinetoAbs(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegLinetoAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegLinetoAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoRel = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_REL, "l", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegLinetoRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoRel.prototype.toString = function() { return "[object SVGPathSegLinetoRel]"; }
        SVGPathSegLinetoRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegLinetoRel.prototype.clone = function() { return new SVGPathSegLinetoRel(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegLinetoRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegLinetoRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoCubicAbs = function(owningPathSegList, x, y, x1, y1, x2, y2) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, "C", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x1 = x1;
            this._y1 = y1;
            this._x2 = x2;
            this._y2 = y2;
        }
        SVGPathSegCurvetoCubicAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoCubicAbs.prototype.toString = function() { return "[object SVGPathSegCurvetoCubicAbs]"; }
        SVGPathSegCurvetoCubicAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoCubicAbs.prototype.clone = function() { return new SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2); }
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "x1", { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "y1", { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "x2", { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicAbs.prototype, "y2", { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoCubicRel = function(owningPathSegList, x, y, x1, y1, x2, y2) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, "c", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x1 = x1;
            this._y1 = y1;
            this._x2 = x2;
            this._y2 = y2;
        }
        SVGPathSegCurvetoCubicRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoCubicRel.prototype.toString = function() { return "[object SVGPathSegCurvetoCubicRel]"; }
        SVGPathSegCurvetoCubicRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoCubicRel.prototype.clone = function() { return new SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2); }
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "x1", { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "y1", { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "x2", { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicRel.prototype, "y2", { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoQuadraticAbs = function(owningPathSegList, x, y, x1, y1) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, "Q", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x1 = x1;
            this._y1 = y1;
        }
        SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoQuadraticAbs.prototype.toString = function() { return "[object SVGPathSegCurvetoQuadraticAbs]"; }
        SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoQuadraticAbs.prototype.clone = function() { return new SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1); }
        Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype, "x1", { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticAbs.prototype, "y1", { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoQuadraticRel = function(owningPathSegList, x, y, x1, y1) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, "q", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x1 = x1;
            this._y1 = y1;
        }
        SVGPathSegCurvetoQuadraticRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoQuadraticRel.prototype.toString = function() { return "[object SVGPathSegCurvetoQuadraticRel]"; }
        SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x1 + " " + this._y1 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoQuadraticRel.prototype.clone = function() { return new SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1); }
        Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype, "x1", { get: function() { return this._x1; }, set: function(x1) { this._x1 = x1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticRel.prototype, "y1", { get: function() { return this._y1; }, set: function(y1) { this._y1 = y1; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegArcAbs = function(owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_ARC_ABS, "A", owningPathSegList);
            this._x = x;
            this._y = y;
            this._r1 = r1;
            this._r2 = r2;
            this._angle = angle;
            this._largeArcFlag = largeArcFlag;
            this._sweepFlag = sweepFlag;
        }
        SVGPathSegArcAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegArcAbs.prototype.toString = function() { return "[object SVGPathSegArcAbs]"; }
        SVGPathSegArcAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y; }
        SVGPathSegArcAbs.prototype.clone = function() { return new SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag); }
        Object.defineProperty(SVGPathSegArcAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "r1", { get: function() { return this._r1; }, set: function(r1) { this._r1 = r1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "r2", { get: function() { return this._r2; }, set: function(r2) { this._r2 = r2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "angle", { get: function() { return this._angle; }, set: function(angle) { this._angle = angle; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "largeArcFlag", { get: function() { return this._largeArcFlag; }, set: function(largeArcFlag) { this._largeArcFlag = largeArcFlag; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcAbs.prototype, "sweepFlag", { get: function() { return this._sweepFlag; }, set: function(sweepFlag) { this._sweepFlag = sweepFlag; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegArcRel = function(owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_ARC_REL, "a", owningPathSegList);
            this._x = x;
            this._y = y;
            this._r1 = r1;
            this._r2 = r2;
            this._angle = angle;
            this._largeArcFlag = largeArcFlag;
            this._sweepFlag = sweepFlag;
        }
        SVGPathSegArcRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegArcRel.prototype.toString = function() { return "[object SVGPathSegArcRel]"; }
        SVGPathSegArcRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._r1 + " " + this._r2 + " " + this._angle + " " + (this._largeArcFlag ? "1" : "0") + " " + (this._sweepFlag ? "1" : "0") + " " + this._x + " " + this._y; }
        SVGPathSegArcRel.prototype.clone = function() { return new SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag); }
        Object.defineProperty(SVGPathSegArcRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "r1", { get: function() { return this._r1; }, set: function(r1) { this._r1 = r1; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "r2", { get: function() { return this._r2; }, set: function(r2) { this._r2 = r2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "angle", { get: function() { return this._angle; }, set: function(angle) { this._angle = angle; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "largeArcFlag", { get: function() { return this._largeArcFlag; }, set: function(largeArcFlag) { this._largeArcFlag = largeArcFlag; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegArcRel.prototype, "sweepFlag", { get: function() { return this._sweepFlag; }, set: function(sweepFlag) { this._sweepFlag = sweepFlag; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoHorizontalAbs = function(owningPathSegList, x) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, "H", owningPathSegList);
            this._x = x;
        }
        SVGPathSegLinetoHorizontalAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoHorizontalAbs.prototype.toString = function() { return "[object SVGPathSegLinetoHorizontalAbs]"; }
        SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x; }
        SVGPathSegLinetoHorizontalAbs.prototype.clone = function() { return new SVGPathSegLinetoHorizontalAbs(undefined, this._x); }
        Object.defineProperty(SVGPathSegLinetoHorizontalAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoHorizontalRel = function(owningPathSegList, x) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, "h", owningPathSegList);
            this._x = x;
        }
        SVGPathSegLinetoHorizontalRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoHorizontalRel.prototype.toString = function() { return "[object SVGPathSegLinetoHorizontalRel]"; }
        SVGPathSegLinetoHorizontalRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x; }
        SVGPathSegLinetoHorizontalRel.prototype.clone = function() { return new SVGPathSegLinetoHorizontalRel(undefined, this._x); }
        Object.defineProperty(SVGPathSegLinetoHorizontalRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoVerticalAbs = function(owningPathSegList, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, "V", owningPathSegList);
            this._y = y;
        }
        SVGPathSegLinetoVerticalAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoVerticalAbs.prototype.toString = function() { return "[object SVGPathSegLinetoVerticalAbs]"; }
        SVGPathSegLinetoVerticalAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._y; }
        SVGPathSegLinetoVerticalAbs.prototype.clone = function() { return new SVGPathSegLinetoVerticalAbs(undefined, this._y); }
        Object.defineProperty(SVGPathSegLinetoVerticalAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegLinetoVerticalRel = function(owningPathSegList, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, "v", owningPathSegList);
            this._y = y;
        }
        SVGPathSegLinetoVerticalRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegLinetoVerticalRel.prototype.toString = function() { return "[object SVGPathSegLinetoVerticalRel]"; }
        SVGPathSegLinetoVerticalRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._y; }
        SVGPathSegLinetoVerticalRel.prototype.clone = function() { return new SVGPathSegLinetoVerticalRel(undefined, this._y); }
        Object.defineProperty(SVGPathSegLinetoVerticalRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoCubicSmoothAbs = function(owningPathSegList, x, y, x2, y2) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, "S", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x2 = x2;
            this._y2 = y2;
        }
        SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function() { return "[object SVGPathSegCurvetoCubicSmoothAbs]"; }
        SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function() { return new SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2); }
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype, "x2", { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothAbs.prototype, "y2", { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoCubicSmoothRel = function(owningPathSegList, x, y, x2, y2) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, "s", owningPathSegList);
            this._x = x;
            this._y = y;
            this._x2 = x2;
            this._y2 = y2;
        }
        SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function() { return "[object SVGPathSegCurvetoCubicSmoothRel]"; }
        SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x2 + " " + this._y2 + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function() { return new SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2); }
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype, "x2", { get: function() { return this._x2; }, set: function(x2) { this._x2 = x2; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoCubicSmoothRel.prototype, "y2", { get: function() { return this._y2; }, set: function(y2) { this._y2 = y2; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoQuadraticSmoothAbs = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, "T", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function() { return "[object SVGPathSegCurvetoQuadraticSmoothAbs]"; }
        SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function() { return new SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothAbs.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        window.SVGPathSegCurvetoQuadraticSmoothRel = function(owningPathSegList, x, y) {
            SVGPathSeg.call(this, SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, "t", owningPathSegList);
            this._x = x;
            this._y = y;
        }
        SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(SVGPathSeg.prototype);
        SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function() { return "[object SVGPathSegCurvetoQuadraticSmoothRel]"; }
        SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function() { return this.pathSegTypeAsLetter + " " + this._x + " " + this._y; }
        SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function() { return new SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y); }
        Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype, "x", { get: function() { return this._x; }, set: function(x) { this._x = x; this._segmentChanged(); }, enumerable: true });
        Object.defineProperty(SVGPathSegCurvetoQuadraticSmoothRel.prototype, "y", { get: function() { return this._y; }, set: function(y) { this._y = y; this._segmentChanged(); }, enumerable: true });

        // Add createSVGPathSeg* functions to SVGPathElement.
        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathElement.
        SVGPathElement.prototype.createSVGPathSegClosePath = function() { return new SVGPathSegClosePath(undefined); }
        SVGPathElement.prototype.createSVGPathSegMovetoAbs = function(x, y) { return new SVGPathSegMovetoAbs(undefined, x, y); }
        SVGPathElement.prototype.createSVGPathSegMovetoRel = function(x, y) { return new SVGPathSegMovetoRel(undefined, x, y); }
        SVGPathElement.prototype.createSVGPathSegLinetoAbs = function(x, y) { return new SVGPathSegLinetoAbs(undefined, x, y); }
        SVGPathElement.prototype.createSVGPathSegLinetoRel = function(x, y) { return new SVGPathSegLinetoRel(undefined, x, y); }
        SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function(x, y, x1, y1, x2, y2) { return new SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2); }
        SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function(x, y, x1, y1, x2, y2) { return new SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2); }
        SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function(x, y, x1, y1) { return new SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1); }
        SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function(x, y, x1, y1) { return new SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1); }
        SVGPathElement.prototype.createSVGPathSegArcAbs = function(x, y, r1, r2, angle, largeArcFlag, sweepFlag) { return new SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag); }
        SVGPathElement.prototype.createSVGPathSegArcRel = function(x, y, r1, r2, angle, largeArcFlag, sweepFlag) { return new SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag); }
        SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function(x) { return new SVGPathSegLinetoHorizontalAbs(undefined, x); }
        SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function(x) { return new SVGPathSegLinetoHorizontalRel(undefined, x); }
        SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function(y) { return new SVGPathSegLinetoVerticalAbs(undefined, y); }
        SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function(y) { return new SVGPathSegLinetoVerticalRel(undefined, y); }
        SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function(x, y, x2, y2) { return new SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2); }
        SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function(x, y, x2, y2) { return new SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2); }
        SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function(x, y) { return new SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y); }
        SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function(x, y) { return new SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y); }
    }

    if (!("SVGPathSegList" in window)) {
        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList
        window.SVGPathSegList = function(pathElement) {
            this._pathElement = pathElement;
            this._list = this._parsePath(this._pathElement.getAttribute("d"));

            // Use a MutationObserver to catch changes to the path's "d" attribute.
            this._mutationObserverConfig = { "attributes": true, "attributeFilter": ["d"] };
            this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));
            this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
        }

        SVGPathSegList.prototype.classname = "SVGPathSegList";

        Object.defineProperty(SVGPathSegList.prototype, "numberOfItems", {
            get: function() {
                this._checkPathSynchronizedToList();
                return this._list.length;
            },
            enumerable: true
        });

        // Add the pathSegList accessors to SVGPathElement.
        // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData
        Object.defineProperty(SVGPathElement.prototype, "pathSegList", {
            get: function() {
                if (!this._pathSegList)
                    this._pathSegList = new SVGPathSegList(this);
                return this._pathSegList;
            },
            enumerable: true
        });
        // FIXME: The following are not implemented and simply return SVGPathElement.pathSegList.
        Object.defineProperty(SVGPathElement.prototype, "normalizedPathSegList", { get: function() { return this.pathSegList; }, enumerable: true });
        Object.defineProperty(SVGPathElement.prototype, "animatedPathSegList", { get: function() { return this.pathSegList; }, enumerable: true });
        Object.defineProperty(SVGPathElement.prototype, "animatedNormalizedPathSegList", { get: function() { return this.pathSegList; }, enumerable: true });

        // Process any pending mutations to the path element and update the list as needed.
        // This should be the first call of all public functions and is needed because
        // MutationObservers are not synchronous so we can have pending asynchronous mutations.
        SVGPathSegList.prototype._checkPathSynchronizedToList = function() {
            this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());
        }

        SVGPathSegList.prototype._updateListFromPathMutations = function(mutationRecords) {
            if (!this._pathElement)
                return;
            var hasPathMutations = false;
            mutationRecords.forEach(function(record) {
                if (record.attributeName == "d")
                    hasPathMutations = true;
            });
            if (hasPathMutations)
                this._list = this._parsePath(this._pathElement.getAttribute("d"));
        }

        // Serialize the list and update the path's 'd' attribute.
        SVGPathSegList.prototype._writeListToPath = function() {
            this._pathElementMutationObserver.disconnect();
            this._pathElement.setAttribute("d", SVGPathSegList._pathSegArrayAsString(this._list));
            this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);
        }

        // When a path segment changes the list needs to be synchronized back to the path element.
        SVGPathSegList.prototype.segmentChanged = function(pathSeg) {
            this._writeListToPath();
        }

        SVGPathSegList.prototype.clear = function() {
            this._checkPathSynchronizedToList();

            this._list.forEach(function(pathSeg) {
                pathSeg._owningPathSegList = null;
            });
            this._list = [];
            this._writeListToPath();
        }

        SVGPathSegList.prototype.initialize = function(newItem) {
            this._checkPathSynchronizedToList();

            this._list = [newItem];
            newItem._owningPathSegList = this;
            this._writeListToPath();
            return newItem;
        }

        SVGPathSegList.prototype._checkValidIndex = function(index) {
            if (isNaN(index) || index < 0 || index >= this.numberOfItems)
                throw "INDEX_SIZE_ERR";
        }

        SVGPathSegList.prototype.getItem = function(index) {
            this._checkPathSynchronizedToList();

            this._checkValidIndex(index);
            return this._list[index];
        }

        SVGPathSegList.prototype.insertItemBefore = function(newItem, index) {
            this._checkPathSynchronizedToList();

            // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.
            if (index > this.numberOfItems)
                index = this.numberOfItems;
            if (newItem._owningPathSegList) {
                // SVG2 spec says to make a copy.
                newItem = newItem.clone();
            }
            this._list.splice(index, 0, newItem);
            newItem._owningPathSegList = this;
            this._writeListToPath();
            return newItem;
        }

        SVGPathSegList.prototype.replaceItem = function(newItem, index) {
            this._checkPathSynchronizedToList();

            if (newItem._owningPathSegList) {
                // SVG2 spec says to make a copy.
                newItem = newItem.clone();
            }
            this._checkValidIndex(index);
            this._list[index] = newItem;
            newItem._owningPathSegList = this;
            this._writeListToPath();
            return newItem;
        }

        SVGPathSegList.prototype.removeItem = function(index) {
            this._checkPathSynchronizedToList();

            this._checkValidIndex(index);
            var item = this._list[index];
            this._list.splice(index, 1);
            this._writeListToPath();
            return item;
        }

        SVGPathSegList.prototype.appendItem = function(newItem) {
            this._checkPathSynchronizedToList();

            if (newItem._owningPathSegList) {
                // SVG2 spec says to make a copy.
                newItem = newItem.clone();
            }
            this._list.push(newItem);
            newItem._owningPathSegList = this;
            // TODO: Optimize this to just append to the existing attribute.
            this._writeListToPath();
            return newItem;
        }

        SVGPathSegList._pathSegArrayAsString = function(pathSegArray) {
            var string = "";
            var first = true;
            pathSegArray.forEach(function(pathSeg) {
                if (first) {
                    first = false;
                    string += pathSeg._asPathString();
                } else {
                    string += " " + pathSeg._asPathString();
                }
            });
            return string;
        }

        // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.
        SVGPathSegList.prototype._parsePath = function(string) {
            if (!string || string.length == 0)
                return [];

            var owningPathSegList = this;

            var Builder = function() {
                this.pathSegList = [];
            }

            Builder.prototype.appendSegment = function(pathSeg) {
                this.pathSegList.push(pathSeg);
            }

            var Source = function(string) {
                this._string = string;
                this._currentIndex = 0;
                this._endIndex = this._string.length;
                this._previousCommand = SVGPathSeg.PATHSEG_UNKNOWN;

                this._skipOptionalSpaces();
            }

            Source.prototype._isCurrentSpace = function() {
                var character = this._string[this._currentIndex];
                return character <= " " && (character == " " || character == "\n" || character == "\t" || character == "\r" || character == "\f");
            }

            Source.prototype._skipOptionalSpaces = function() {
                while (this._currentIndex < this._endIndex && this._isCurrentSpace())
                    this._currentIndex++;
                return this._currentIndex < this._endIndex;
            }

            Source.prototype._skipOptionalSpacesOrDelimiter = function() {
                if (this._currentIndex < this._endIndex && !this._isCurrentSpace() && this._string.charAt(this._currentIndex) != ",")
                    return false;
                if (this._skipOptionalSpaces()) {
                    if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ",") {
                        this._currentIndex++;
                        this._skipOptionalSpaces();
                    }
                }
                return this._currentIndex < this._endIndex;
            }

            Source.prototype.hasMoreData = function() {
                return this._currentIndex < this._endIndex;
            }

            Source.prototype.peekSegmentType = function() {
                var lookahead = this._string[this._currentIndex];
                return this._pathSegTypeFromChar(lookahead);
            }

            Source.prototype._pathSegTypeFromChar = function(lookahead) {
                switch (lookahead) {
                case "Z":
                case "z":
                    return SVGPathSeg.PATHSEG_CLOSEPATH;
                case "M":
                    return SVGPathSeg.PATHSEG_MOVETO_ABS;
                case "m":
                    return SVGPathSeg.PATHSEG_MOVETO_REL;
                case "L":
                    return SVGPathSeg.PATHSEG_LINETO_ABS;
                case "l":
                    return SVGPathSeg.PATHSEG_LINETO_REL;
                case "C":
                    return SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;
                case "c":
                    return SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;
                case "Q":
                    return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;
                case "q":
                    return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;
                case "A":
                    return SVGPathSeg.PATHSEG_ARC_ABS;
                case "a":
                    return SVGPathSeg.PATHSEG_ARC_REL;
                case "H":
                    return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;
                case "h":
                    return SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;
                case "V":
                    return SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;
                case "v":
                    return SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;
                case "S":
                    return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;
                case "s":
                    return SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;
                case "T":
                    return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;
                case "t":
                    return SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;
                default:
                    return SVGPathSeg.PATHSEG_UNKNOWN;
                }
            }

            Source.prototype._nextCommandHelper = function(lookahead, previousCommand) {
                // Check for remaining coordinates in the current command.
                if ((lookahead == "+" || lookahead == "-" || lookahead == "." || (lookahead >= "0" && lookahead <= "9")) && previousCommand != SVGPathSeg.PATHSEG_CLOSEPATH) {
                    if (previousCommand == SVGPathSeg.PATHSEG_MOVETO_ABS)
                        return SVGPathSeg.PATHSEG_LINETO_ABS;
                    if (previousCommand == SVGPathSeg.PATHSEG_MOVETO_REL)
                        return SVGPathSeg.PATHSEG_LINETO_REL;
                    return previousCommand;
                }
                return SVGPathSeg.PATHSEG_UNKNOWN;
            }

            Source.prototype.initialCommandIsMoveTo = function() {
                // If the path is empty it is still valid, so return true.
                if (!this.hasMoreData())
                    return true;
                var command = this.peekSegmentType();
                // Path must start with moveTo.
                return command == SVGPathSeg.PATHSEG_MOVETO_ABS || command == SVGPathSeg.PATHSEG_MOVETO_REL;
            }

            // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.
            // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF
            Source.prototype._parseNumber = function() {
                var exponent = 0;
                var integer = 0;
                var frac = 1;
                var decimal = 0;
                var sign = 1;
                var expsign = 1;

                var startIndex = this._currentIndex;

                this._skipOptionalSpaces();

                // Read the sign.
                if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == "+")
                    this._currentIndex++;
                else if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == "-") {
                    this._currentIndex++;
                    sign = -1;
                }

                if (this._currentIndex == this._endIndex || ((this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9") && this._string.charAt(this._currentIndex) != "."))
                    // The first character of a number must be one of [0-9+-.].
                    return undefined;

                // Read the integer part, build right-to-left.
                var startIntPartIndex = this._currentIndex;
                while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9")
                    this._currentIndex++; // Advance to first non-digit.

                if (this._currentIndex != startIntPartIndex) {
                    var scanIntPartIndex = this._currentIndex - 1;
                    var multiplier = 1;
                    while (scanIntPartIndex >= startIntPartIndex) {
                        integer += multiplier * (this._string.charAt(scanIntPartIndex--) - "0");
                        multiplier *= 10;
                    }
                }

                // Read the decimals.
                if (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) == ".") {
                    this._currentIndex++;

                    // There must be a least one digit following the .
                    if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9")
                        return undefined;
                    while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9")
                        decimal += (this._string.charAt(this._currentIndex++) - "0") * (frac *= 0.1);
                }

                // Read the exponent part.
                if (this._currentIndex != startIndex && this._currentIndex + 1 < this._endIndex && (this._string.charAt(this._currentIndex) == "e" || this._string.charAt(this._currentIndex) == "E") && (this._string.charAt(this._currentIndex + 1) != "x" && this._string.charAt(this._currentIndex + 1) != "m")) {
                    this._currentIndex++;

                    // Read the sign of the exponent.
                    if (this._string.charAt(this._currentIndex) == "+") {
                        this._currentIndex++;
                    } else if (this._string.charAt(this._currentIndex) == "-") {
                        this._currentIndex++;
                        expsign = -1;
                    }

                    // There must be an exponent.
                    if (this._currentIndex >= this._endIndex || this._string.charAt(this._currentIndex) < "0" || this._string.charAt(this._currentIndex) > "9")
                        return undefined;

                    while (this._currentIndex < this._endIndex && this._string.charAt(this._currentIndex) >= "0" && this._string.charAt(this._currentIndex) <= "9") {
                        exponent *= 10;
                        exponent += (this._string.charAt(this._currentIndex) - "0");
                        this._currentIndex++;
                    }
                }

                var number = integer + decimal;
                number *= sign;

                if (exponent)
                    number *= Math.pow(10, expsign * exponent);

                if (startIndex == this._currentIndex)
                    return undefined;

                this._skipOptionalSpacesOrDelimiter();

                return number;
            }

            Source.prototype._parseArcFlag = function() {
                if (this._currentIndex >= this._endIndex)
                    return undefined;
                var flag = false;
                var flagChar = this._string.charAt(this._currentIndex++);
                if (flagChar == "0")
                    flag = false;
                else if (flagChar == "1")
                    flag = true;
                else
                    return undefined;

                this._skipOptionalSpacesOrDelimiter();
                return flag;
            }

            Source.prototype.parseSegment = function() {
                var lookahead = this._string[this._currentIndex];
                var command = this._pathSegTypeFromChar(lookahead);
                if (command == SVGPathSeg.PATHSEG_UNKNOWN) {
                    // Possibly an implicit command. Not allowed if this is the first command.
                    if (this._previousCommand == SVGPathSeg.PATHSEG_UNKNOWN)
                        return null;
                    command = this._nextCommandHelper(lookahead, this._previousCommand);
                    if (command == SVGPathSeg.PATHSEG_UNKNOWN)
                        return null;
                } else {
                    this._currentIndex++;
                }

                this._previousCommand = command;

                switch (command) {
                case SVGPathSeg.PATHSEG_MOVETO_REL:
                    return new SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_MOVETO_ABS:
                    return new SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_REL:
                    return new SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_ABS:
                    return new SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:
                    return new SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:
                    return new SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:
                    return new SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());
                case SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:
                    return new SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());
                case SVGPathSeg.PATHSEG_CLOSEPATH:
                    this._skipOptionalSpaces();
                    return new SVGPathSegClosePath(owningPathSegList);
                case SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);
                case SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);
                case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:
                    var points = {x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);
                case SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:
                    var points = {x2: this._parseNumber(), y2: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);
                case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);
                case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);
                case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:
                    return new SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:
                    return new SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());
                case SVGPathSeg.PATHSEG_ARC_REL:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);
                case SVGPathSeg.PATHSEG_ARC_ABS:
                    var points = {x1: this._parseNumber(), y1: this._parseNumber(), arcAngle: this._parseNumber(), arcLarge: this._parseArcFlag(), arcSweep: this._parseArcFlag(), x: this._parseNumber(), y: this._parseNumber()};
                    return new SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);
                default:
                    throw "Unknown path seg type."
                }
            }

            var builder = new Builder();
            var source = new Source(string);

            if (!source.initialCommandIsMoveTo())
                return [];
            while (source.hasMoreData()) {
                var pathSeg = source.parseSegment();
                if (!pathSeg)
                    return [];
                builder.appendSegment(pathSeg);
            }

            return builder.pathSegList;
        }
    }
}());
!function(a){"use strict";function b(a){this.owner=a}function c(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function d(a){var b=this.internal=new e(this);b.loadConfig(a),b.init(),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),Object.keys(a[e]).length>0&&c(a[e],b[e],d)})}(h,this,this)}function e(b){var c=this;c.d3=a.d3?a.d3:"undefined"!=typeof require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function f(a){b.call(this,a)}function g(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(z)return z;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),z=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,g>c)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||0>=c)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),1/0===a?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var h,i,j,k={version:"0.4.10"};k.generate=function(a){return new d(a)},k.chart={fn:d.prototype,internal:{fn:e.prototype,axis:{fn:f.prototype}}},h=k.chart.fn,i=k.chart.internal.fn,j=k.chart.internal.axis.fn,i.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},i.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},i.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},i.initWithData=function(b){var c,d,e=this,g=e.d3,h=e.config,i=!0;e.axis=new f(e),e.initPie&&e.initPie(),e.initBrush&&e.initBrush(),e.initZoom&&e.initZoom(),e.selectChart=h.bindto?"function"==typeof h.bindto.node?h.bindto:g.select(h.bindto):g.selectAll([]),e.selectChart.empty()&&(e.selectChart=g.select(document.createElement("div")).style("opacity",0),e.observeInserted(e.selectChart),i=!1),e.selectChart.html("").classed("c3",!0),e.data.xs={},e.data.targets=e.convertDataToTargets(b),h.data_filter&&(e.data.targets=e.data.targets.filter(h.data_filter)),h.data_hide&&e.addHiddenTargetIds(h.data_hide===!0?e.mapToIds(e.data.targets):h.data_hide),h.legend_hide&&e.addHiddenLegendIds(h.legend_hide===!0?e.mapToIds(e.data.targets):h.legend_hide),e.hasType("gauge")&&(h.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain(g.extent(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.brush&&e.brush.scale(e.subX),h.zoom_enabled&&e.zoom.scale(e.x),e.svg=e.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return h.onmouseover.call(e)}).on("mouseleave",function(){return h.onmouseout.call(e)}),c=e.svg.append("defs"),e.clipChart=e.appendClip(c,e.clipId),e.clipXAxis=e.appendClip(c,e.clipIdForXAxis),e.clipYAxis=e.appendClip(c,e.clipIdForYAxis),e.clipGrid=e.appendClip(c,e.clipIdForGrid),e.clipSubchart=e.appendClip(c,e.clipIdForSubchart),e.updateSvgSize(),d=e.main=e.svg.append("g").attr("transform",e.getTranslate("main")),e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),d.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initRegion(),e.initGrid(),d.append("g").attr("clip-path",e.clipPath).attr("class",l.chart),h.grid_lines_front&&e.initGridLines(),e.initEventRect(),e.initChartElements(),d.insert("rect",h.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity",0).on("dblclick.zoom",null),h.axis_x_extent&&e.brush.extent(e.getDefaultExtent()),e.axis.init(),e.updateTargets(e.data.targets),i&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),null==a.onresize&&(a.onresize=e.generateResize()),a.onresize.add&&(a.onresize.add(function(){h.onresize.call(e)}),a.onresize.add(function(){e.api.flush()}),a.onresize.add(function(){h.onresized.call(e)})),e.api.element=e.selectChart.node()},i.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},i.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:0/0,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:0/0,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:0/0,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},i.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},i.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},i.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=w(a,"withY",!0),d=w(a,"withSubchart",!0),e=w(a,"withTransition",!0),h=w(a,"withTransform",!1),i=w(a,"withUpdateXDomain",!1),j=w(a,"withUpdateOrgXDomain",!1),k=w(a,"withTrimXDomain",!0),p=w(a,"withUpdateXAxis",i),m=w(a,"withLegend",!1),n=w(a,"withEventRect",!0),o=w(a,"withDimension",!0),f=w(a,"withTransitionForExit",e),g=w(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,x=f?v:0,y=g?v:0,b=b||H.axis.generateTransitions(y),m&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):o&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+l.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+l.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.tooltip.style("display","none"),H.updateXgridFocus(),I.select("text."+l.text+"."+l.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(x),H.updateLine(x),H.updateArea(x),H.updateCircle(),H.hasDataLabel()&&H.updateText(x),H.redrawArc&&H.redrawArc(v,x,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,x,L,M,N),I.selectAll("."+l.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&n&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),z=H.generateWait(),b.forEach(function(a){z.add(a)})}).call(z,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},i.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=w(a,"withTransition",!0),a.withTransform=w(a,"withTransform",!1),a.withLegend=w(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=w(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},i.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},i.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},i.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},i.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||v(b.data_xs))},i.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},i.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=s(d.margin.left),c=s(d.margin.top)):"context"===a?(b=s(d.margin2.left),c=s(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},i.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},i.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},i.opacityForCircle=function(a){var b=this.config.point_show?1:0;return m(a.value)?this.isScatterType(a)?.5:b:0},i.opacityForText=function(){return this.hasDataLabel()?1:0},i.xx=function(a){return a?this.x(a.x):null},i.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},i.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},i.subxx=function(a){return a?this.subX(a.x):null},i.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+l.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+l.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+l.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+l.chartArcs).attr("transform",f.getTranslate("arc"))},i.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},i.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+l.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},i.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},i.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void c.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},i.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a},i.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},i.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},i.parseDate=function(b){var c,d=this;return b instanceof Date?c=b:"string"==typeof b?c=d.dataTimeFormat(d.config.data_xFormat).parse(b):"number"!=typeof b&&isNaN(b)||(c=new Date(+b)),(!c||isNaN(+c))&&a.console.error("Failed to parse x '"+b+"' to Date object"),c},i.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),document[a]?!1:!0},i.getDefaultConfig=function(){var a={bindto:"#chart",size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},i.additionalConfig={},i.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),q(e)&&(f[g]=e)})},i.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},i.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},i.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},i.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},i.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},i.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},i.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},i.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},i.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,n,o,p=this,q=p.config,r=a.filter(function(a){return p.axis.getId(a.id)===b}),s=c?p.filterByXDomain(r,c):r,u="y2"===b?q.axis_y2_min:q.axis_y_min,w="y2"===b?q.axis_y2_max:q.axis_y_max,x=p.getYDomainMin(s),y=p.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=p.hasType("bar",s)&&q.bar_zerobased||p.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=p.hasDataLabel()&&q.axis_rotated,D=p.hasDataLabel()&&!q.axis_rotated;return x=m(u)?u:m(w)?w>x?x:w-10:x,y=m(w)?w:m(u)?y>u?y:u+10:y,0===s.length?"y2"===b?p.y2.domain():p.y.domain():(isNaN(x)&&(x=0),isNaN(y)&&(y=x),x===y&&(0>x?y=0:x=0),n=x>=0&&y>=0,o=0>=x&&0>=y,(m(u)&&n||m(w)&&o)&&(A=!1),A&&(n&&(x=0),o&&(y=0)),e=Math.abs(y-x),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(x),Math.abs(y)),y=z+i,x=z-i),C?(j=p.getDataLabelLength(x,y,"width"),k=t(p.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=p.getDataLabelLength(x,y,"height"),g+=p.axis.convertPixelsToAxisPadding(j[1],e),h+=p.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&v(q.axis_y_padding)&&(g=p.axis.getPadding(q.axis_y_padding,"top",g,e),h=p.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&v(q.axis_y2_padding)&&(g=p.axis.getPadding(q.axis_y2_padding,"top",g,e),h=p.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(n&&(h=x),o&&(g=-y)),d=[x-h,y+g],B?d.reverse():d)},i.getXDomainMin=function(a){var b=this,c=b.config;return q(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},i.getXDomainMax=function(a){var b=this,c=b.config;return q(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},i.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&v(g.axis_x_padding)?(d=m(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=m(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},i.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;
return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},i.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},i.trimXDomain=function(a){var b=this;return a[0]<=b.orgXDomain[0]&&(a[1]=+a[1]+(b.orgXDomain[0]-a[0]),a[0]=b.orgXDomain[0]),b.orgXDomain[1]<=a[1]&&(a[0]=+a[0]-(a[1]-b.orgXDomain[1]),a[1]=b.orgXDomain[1]),a},i.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||v(c.data_xs)&&x(c.data_xs,a)},i.isNotX=function(a){return!this.isX(a)},i.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:v(c.data_xs)?c.data_xs[a]:null},i.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&v(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},i.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},i.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&m(c.data.xs[a][b])?c.data.xs[a][b]:b},i.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},i.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},i.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},i.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},i.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},i.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=b?b:a.id),a},i.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},i.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},i.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},i.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?e.parseDate(a?a:e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?m(a)?+a:e.getXValue(b,c):c},i.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},i.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},i.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},i.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},i.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},i.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},i.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},i.mapToIds=function(a){return a.map(function(a){return a.id})},i.mapToTargetIds=function(a){var b=this;return a?o(a)?[a]:a:b.mapToIds(b.data.targets)},i.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},i.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},i.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},i.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},i.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c.map(b.isTimeSeries()?function(a){return new Date(+a)}:function(a){return+a})},i.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},i.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},i.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},i.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},i.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},i.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},i.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},i.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},i.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},i.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},i.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):n(c.data_order)&&a.sort(c.data_order),a},i.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},i.filterRemoveNull=function(a){return a.filter(function(a){return m(a.value)})},i.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},i.hasDataLabel=function(){var a=this.config;return"boolean"==typeof a.data_labels&&a.data_labels?!0:"object"==typeof a.data_labels&&v(a.data_labels)?!0:!1},i.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},i.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},i.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},i.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},i.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},i.findClosest=function(a,b){var c,d=this,e=100;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+l.bars+d.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);e>f&&(e=f,c=a)}),c},i.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.pow(h-b[e],2)+Math.pow(g-b[f],2)},i.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},i.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},i.convertUrlToData=function(a,b,c,d){var e=this,f=b?b:"csv";e.d3.xhr(a,function(a,b){var g;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");g="json"===f?e.convertJsonToData(JSON.parse(b.response),c):"tsv"===f?e.convertTsvToData(b.response):e.convertCsvToData(b.response),d.call(e,g)})},i.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},i.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},i.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},i.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=p(a[c])?null:a[c];b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},i.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},i.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(p(e[c-1])&&(e[c-1]={}),p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},i.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(m).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():v(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h=d.getXKey(b),i=a[h],j=d.generateTargetX(i,b,g);return d.isCustomX()&&d.isCategorized()&&0===c&&i&&(0===g&&(e.axis_x_categories=[]),e.axis_x_categories.push(i)),(p(a[b])||d.data.xs[b].length<=g)&&(j=void 0),{x:j,value:null===a[b]||isNaN(a[b])?null:+a[b],id:f}}).filter(function(a){return q(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},i.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},i.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},i.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+l.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},i.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},i.initEventRect=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},i.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+l.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,e).classed(l.eventRectsSingle,!e);f.selectAll("."+l.eventRect).remove(),c.eventRect=f.selectAll("."+l.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+l.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},i.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},i.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+l.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+f).each(function(){c.select(this).classed(l.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+l.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},i.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<100)&&(c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<100)&&c.main.selectAll("."+l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},i.dispatchEvent=function(b,c,d){var e=this,f="."+l.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},i.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},i.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")?2:1)},i.getCurrentPaddingTop=function(){var a=this.config;return m(a.padding_top)?a.padding_top:0},i.getCurrentPaddingBottom=function(){var a=this.config;return m(a.padding_bottom)?a.padding_bottom:0},i.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return m(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(r(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:r(b.getAxisWidthByAxisId("y",a))},i.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return m(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+d},i.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},i.getParentWidth=function(){return this.getParentRectValue("width")},i.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},i.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?l.axisX:l.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},i.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},i.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},i.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},i.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}p(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},i.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},i.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},i.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i)}),j}},i.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(l.bar)?d.isWithinBar(a):!0):c=!1,c},i.getInterpolate=function(a){var b=this;return b.isSplineType(a)?"cardinal":b.isStepType(a)?b.config.line_step_type:"linear"},i.initLine=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartLines)},i.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(l.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+l.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},i.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLine=function(a,b){return[(b?this.mainLine.transition():this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},i.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},i.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},i.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,r,s,t,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(q(d))for(g=0;g<d.length;g++)z[g]={},z[g].start=p(d[g].start)?a[0].x:u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,z[g].end=p(d[g].end)?a[a.length-1].x:u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(s=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},t=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(p(z)||!e(a[g].x,z))x+=" "+s(a[g])+" "+t(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,r=2*o,h=o;1>=h;h+=r)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},i.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawArea=function(a,b){return[(b?this.mainArea.transition():this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},i.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},i.getAreaBaseValue=function(){return 0},i.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},i.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+l.circles).selectAll("."+l.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},i.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition():this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition():d).attr("cx",a).attr("cy",b)]},i.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},i.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},i.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+l.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.circle+(m(a)?"-"+a:""))},i.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(l.EXPANDED,!0).attr("r",e)},i.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)},i.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:n(c.point_r)?c.point_r(a):c.point_r},i.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},i.pointSelectR=function(a){var b=this,c=b.config;return c.point_select_r?c.point_select_r:4*b.pointR(a)},i.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},i.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},i.initBar=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartBars)},i.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},i.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBar=function(a,b){return[(b?this.mainBar.transition():this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},i.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},i.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+l.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.bar+(m(a)?"-"+a:""))},i.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(l.EXPANDED,!0)},i.unexpandBars=function(a){var b=this;b.getBars(a).classed(l.EXPANDED,!1)},i.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},i.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;
return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&d>l||a.value<0&&l>d)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},i.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},i.initText=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartTexts),a.mainText=a.d3.selectAll([])},i.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},i.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},i.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},i.getTextRect=function(a,b){var c,d=this.d3.select("body").append("div").classed("c3",!0),e=d.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0);return e.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).text(a).each(function(){c=this.getBoundingClientRect()}),d.remove(),c},i.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},i.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},i.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},i.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},i.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},i.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},i.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},i.isStepType=function(a){var b=o(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},i.isSplineType=function(a){var b=o(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},i.isAreaType=function(a){var b=o(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},i.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},i.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},i.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},i.isGaugeType=function(a){var b=o(a)?a:a.id;return"gauge"===this.config.data_types[b]},i.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},i.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},i.lineData=function(a){return this.isLineType(a)?[a]:[]},i.arcData=function(a){return this.isArcType(a.data)?[a]:[]},i.barData=function(a){return this.isBarType(a)?a.values:[]},i.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},i.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},i.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid),b.grid_x_show&&a.grid.append("g").attr("class",l.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",l.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},i.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),a.gridLines.append("g").attr("class",l.xgridLines),a.gridLines.append("g").attr("class",l.ygridLines),a.xgridLines=b.selectAll([])},i.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(e),b.xgrid.enter().append("line").attr("class",l.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},i.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(c),a.ygrid.enter().append("line").attr("class",l.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},i.gridTextAnchor=function(a){return a.position?a.position:"end"},i.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},i.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},i.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},i.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+l.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a["class"]?" "+a["class"]:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a["class"]?" "+a["class"]:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},i.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},i.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&m(a.value)}),e=b.main.selectAll("line."+l.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},i.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},i.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+l.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},i.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;e>=f;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},i.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},i.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?l.xgridLines:l.ygridLines,h=b?l.xgridLine:l.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},i.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},i.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,m=k.config,n=m.tooltip_format_title||b,o=m.tooltip_format_name||function(a){return a},p=m.tooltip_format_value||c;for(f=0;f<a.length;f++)a[f]&&(a[f].value||0===a[f].value)&&(e||(g=n?n(a[f].x):a[f].x,e="<table class='"+l.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=p(a[f].value,a[f].ratio,a[f].id,a[f].index),void 0!==h&&(i=o(a[f].name,a[f].ratio,a[f].id,a[f].index),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+l.tooltipName+"-"+a[f].id+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"));return e+"</table>"},i.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},i.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),j=a.filter(function(a){return a&&m(a.value)}),k=g.tooltip_position||i.tooltipPosition;0!==j.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=k.call(this,j,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},i.hideTooltip=function(){this.tooltip.style("display","none")},i.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},i.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},i.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:0/0,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},i.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},i.updateLegendStep=function(a){this.legendStep=a},i.updateLegendItemWidth=function(a){this.legendItemWidth=a},i.updateLegendItemHeight=function(a){this.legendItemHeight=a},i.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},i.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},i.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1},i.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3},i.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+l.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},i.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},i.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},i.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&u(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},i.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},i.updateLegend=function(a,b,c){function d(a,b){return u.legendItemTextBox[b]||(u.legendItemTextBox[b]=u.getTextRect(a.textContent,l.legendItem)),u.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-D-n)/2,B>g&&(g=(o-n)/2,D=0,J++)),I[a]=J,H[J]=u.isLegendInset?10:g,E[a]=D,D+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+C+(!j||u.isLegendRight||u.isLegendInset?y:0),m=k.height+x,n=u.isLegendRight||u.isLegendInset?m:l,o=u.isLegendRight||u.isLegendInset?u.getLegendHeight():u.getLegendWidth();return i&&(D=0,J=0,z=0,A=0),v.legend_show&&!u.isLegendToShow(c)?void(F[c]=G[c]=I[c]=E[c]=0):(F[c]=l,G[c]=m,(!z||l>=z)&&(z=l),(!A||m>=A)&&(A=m),h=u.isLegendRight||u.isLegendInset?A:z,void(v.legend_equally?(Object.keys(F).forEach(function(a){F[a]=z}),Object.keys(G).forEach(function(a){G[a]=A}),g=(o-h*a.length)/2,B>g?(D=0,J=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,m,n,o,p,r,s,t,u=this,v=u.config,x=4,y=10,z=0,A=0,B=10,C=15,D=0,E={},F={},G={},H=[0],I={},J=0;b=b||{},n=w(b,"withTransition",!0),o=w(b,"withTransitionForTransform",!0),u.isLegendInset&&(J=v.legend_inset_step?v.legend_inset_step:a.length,u.updateLegendStep(J)),u.isLegendRight?(f=function(a){return z*I[a]},i=function(a){return H[I[a]]+E[a]}):u.isLegendInset?(f=function(a){return z*I[a]+10},i=function(a){return H[I[a]]+E[a]}):(f=function(a){return H[I[a]]+E[a]},i=function(a){return A*I[a]}),g=function(a,b){return f(a,b)+14},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},m=u.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return u.generateClass(l.legendItem,a)}).style("visibility",function(a){return u.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){v.legend_item_onclick?v.legend_item_onclick.call(u,a):u.d3.event.altKey?(u.api.hide(),u.api.show(a)):(u.api.toggle(a),u.isTargetToShow(a)?u.api.focus(a):u.api.revert())}).on("mouseover",function(a){u.d3.select(this).classed(l.legendItemFocused,!0),!u.transiting&&u.isTargetToShow(a)&&u.api.focus(a),v.legend_item_onmouseover&&v.legend_item_onmouseover.call(u,a)}).on("mouseout",function(a){u.d3.select(this).classed(l.legendItemFocused,!1),u.api.revert(),v.legend_item_onmouseout&&v.legend_item_onmouseout.call(u,a)}),m.append("text").text(function(a){return q(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:j),m.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",u.isLegendRight||u.isLegendInset?h:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:k),m.append("rect").attr("class",l.legendItemTile).style("pointer-events","none").style("fill",u.color).attr("x",u.isLegendRight||u.isLegendInset?g:-200).attr("y",u.isLegendRight||u.isLegendInset?-200:i).attr("width",10).attr("height",10),t=u.legend.select("."+l.legendBackground+" rect"),u.isLegendInset&&z>0&&0===t.size()&&(t=u.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),p=u.legend.selectAll("text").data(a).text(function(a){return q(v.data_names[a])?v.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(n?p.transition():p).attr("x",g).attr("y",j),r=u.legend.selectAll("rect."+l.legendItemEvent).data(a),(n?r.transition():r).attr("width",function(a){return F[a]}).attr("height",function(a){return G[a]}).attr("x",h).attr("y",k),s=u.legend.selectAll("rect."+l.legendItemTile).data(a),(n?s.transition():s).style("fill",u.color).attr("x",f).attr("y",i),t&&(n?t.transition():t).attr("height",u.getLegendHeight()-12).attr("width",z*(J+1)+10),u.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(a){return!u.isTargetToShow(a)}),u.updateLegendItemWidth(z),u.updateLegendItemHeight(A),u.updateLegendStep(J),u.updateSizes(),u.updateScales(),u.updateSvgSize(),u.transformAll(o,c),u.legendHasRendered=!0},c(b,f),f.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:e,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:f},l=g(i.d3,k).scale(a).orient(b);return i.isTimeSeries()&&d&&(d=d.map(function(a){return i.parseDate(a)})),l.tickFormat(c).tickValues(d),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),u(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},f.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},f.prototype.getYAxis=function(a,b,c,d,e,f){var h={withOuterTick:e,withoutTransition:f},i=this.owner,j=i.d3,k=i.config,l=g(j,h).scale(a).orient(b).tickFormat(c);return i.isTimeSeriesY()?l.ticks(j.time[k.axis_y_tick_time_value],k.axis_y_tick_time_interval):l.tickValues(d),l},f.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},f.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),n(c)?function(b){return c.call(a,b)}:c},f.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},f.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},f.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);o(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},f.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},f.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=0>=j?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},f.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel),e=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(a,b,c,d){return m(a[b])?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(a[b],d):c},f.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},f.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=n(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},f.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},f.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},i.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},i.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},i.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},i.getAxisClipY=function(a){return a?-20:-this.margin.top},i.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},i.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},i.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},i.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},i.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},i.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},i.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},i.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},i.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},i.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},i.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},i.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},i.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},i.updateAngle=function(a){var b,c,d=this,e=d.config,f=!1,g=0,h=e.gauge_min,i=e.gauge_max;
return d.pie(d.filterTargetsToShow(d.data.targets)).forEach(function(b){f||b.data.id!==a.data.id||(f=!0,a=b,a.index=g),g++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),d.isGaugeType(a.data)&&(b=Math.PI/(i-h),c=a.value<h?0:a.value<i?a.value-h:i-h,a.startAngle=-1*(Math.PI/2),a.endAngle=a.startAngle+b*c),f?a:null},i.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},i.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},i.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},i.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.updateAngle(a),i="";return h&&!g.hasType("gauge")&&(b=this.svgArc.centroid(h),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,i="translate("+c*f+","+d*f+")"),i},i.getArcRatio=function(a){var b=this,c=b.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/c:null},i.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},i.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},i.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),d.legend.selectAll(".c3-legend-item-focused").size()>0&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+l.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(50).attr("d",d.svgArcExpanded).transition().duration(100).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},i.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(50).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))},i.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},i.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},i.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},i.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},i.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},i.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+l.chartArcs).selectAll("."+l.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},i.initArc=function(){var a=this;a.arcs=a.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},i.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=-1*(Math.PI/2)),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this))}:null).on("mousemove",g.interaction_enabled?function(a){var b=e.updateAngle(a),c=e.convertToArcData(b),d=[c];e.showTooltip(d,this)}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this))}:null).on("click",g.interaction_enabled?function(a,b){var c=e.updateAngle(a),d=e.convertToArcData(c);e.toggleShape&&e.toggleShape(this,d,b),e.config.data_onclick.call(e.api,d,this)}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return e.getArc(a,!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},i.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},i.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},i.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",l.regions)},i.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+l.regions).selectAll("."+l.region).data(c.regions),b.mainRegion.enter().append("g").attr("class",b.classRegion.bind(b)).append("rect").style("fill-opacity",0),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},i.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect"),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return m(a.opacity)?a.opacity:.1})]},i.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,e>b?0:b-e},i.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,e>b?0:b-e},i.isRegionOnX=function(a){return!a.axis||"x"===a.axis},i.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,m=j.main,n=j.d3;j.hasArcType()||k.data_selection_enabled&&(!k.zoom_enabled||j.zoom.altDomain)&&k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),m.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),m.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,m,o,p=n.select(this),q=p.classed(l.SELECTED),r=p.classed(l.INCLUDED),s=!1;if(p.classed(l.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),m=j.togglePoint,s=c>f&&g>c&&d>h&&i>d;else{if(!p.classed(l.bar))return;o=y(this),c=o.x,d=o.y,e=o.width,k=o.height,m=j.togglePath,s=!(c>g||f>c+e||d>i||h>d+k)}s^r&&(p.classed(l.INCLUDED,!r),p.classed(l.SELECTED,!q),m.call(j,!q,p,a,b))}))},i.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),b.dragging=!0)},i.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),a.dragging=!1)},i.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},i.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected(b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},i.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},i.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},i.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.color(b)})},i.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},i.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},i.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(l.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+l.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&i(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!h),i(!h,g,b,c))},i.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+l.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},i.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context"));c.style("visibility",b.subchart_show?"visible":"hidden"),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",l.chart),c.select("."+l.chart).append("g").attr("class",l.chartBars),c.select("."+l.chart).append("g").attr("class",l.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",l.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",l.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis)},i.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),m=f.classLines.bind(f),n=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",m),b.append("g").attr("class",n),g.selectAll("."+l.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},i.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+l.bars).selectAll("."+l.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition().duration(c):this.contextBar).attr("d",a).style("opacity",1)},i.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition().duration(c):this.contextLine).attr("d",a).style("opacity",1)},i.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition().duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},i.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},i.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},i.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+l.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},i.getDefaultExtent=function(){var a=this,b=a.config,c=n(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},i.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=t(b.x.orgDomain())/t(b.orgXDomain),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},i.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+l.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+l.eventRect).call(b).on("dblclick.zoom",null)},i.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},i.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=v(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},i.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return v(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},i.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},i.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},i.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},i.defaultValueFormat=function(a){return m(a)?+a:""},i.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},i.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return m(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},i.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},i.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},i.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var l=i.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};i.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},i.classText=function(a){return this.generateClass(l.text,a.index)},i.classTexts=function(a){return this.generateClass(l.texts,a.id)},i.classShape=function(a){return this.generateClass(l.shape,a.index)},i.classShapes=function(a){return this.generateClass(l.shapes,a.id)},i.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)},i.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)},i.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)},i.classCircles=function(a){return this.classShapes(a)+this.generateClass(l.circles,a.id)},i.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)},i.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)},i.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)},i.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)},i.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)},i.classAreas=function(a){return this.classShapes(a)+this.generateClass(l.areas,a.id)},i.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a["class"]:"")},i.classEvent=function(a){return this.generateClass(l.eventRect,a.index)},i.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+l.target+"-"+c),b.generateClass(l.target,a)+d},i.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},i.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?l.focused:"")},i.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?l.defocused:"")},i.classChartText=function(a){return l.chartText+this.classTarget(a.id)},i.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)},i.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)},i.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)},i.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},i.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)},i.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},i.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)},i.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var m=i.isValue=function(a){return a||0===a},n=i.isFunction=function(a){return"function"==typeof a},o=i.isString=function(a){return"string"==typeof a},p=i.isUndefined=function(a){return"undefined"==typeof a},q=i.isDefined=function(a){return"undefined"!=typeof a},r=i.ceil10=function(a){return 10*Math.ceil(a/10)},s=i.asHalfPixel=function(a){return Math.ceil(a)+.5},t=i.diffDomain=function(a){return a[1]-a[0]},u=i.isEmpty=function(a){return!a||o(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},v=i.notEmpty=function(a){return Object.keys(a).length>0},w=i.getOption=function(a,b,c){return q(a[b])?a[b]:c},x=i.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},y=i.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};h.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(l.focused,!0).classed(l.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},h.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(l.focused,!1).classed(l.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},h.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(l.focused,!1).classed(l.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},h.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},h.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},h.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},h.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},h.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},h.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},h.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),n=0,o=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(o=a.values[a.values.length-1].index+1),n=b[c].values.length,d=0;n>d;d++)b[c].values[d].index=o+d,j.isTimeSeries()||(b[c].values[d].x=o+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(o=a.values[a.values.length-1].index+1,c=0;n>c;c++)a.values.push({id:a.id,index:o+c,x:j.isTimeSeries()?j.getOtherTargetX(o+c):o+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;o>b;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=o,j.isTimeSeries()||(a.x+=o)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],q(a.to)?(n=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&n++})):q(a.length)&&(n=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:n,duration:m(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},i.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,m=a.drawArea,n=a.cx,o=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,u=1,v=i.index,w=i.length,x=b.getValueOnIndex(b.data.targets[0].values,v),y=b.getValueOnIndex(b.data.targets[0].values,v+w),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,w)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||x.x===y.x?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=t(g)/2,u=t(z)/t(g),f="translate("+e+",0) scale("+u+",1)",b.hideXGridFocus(),b.hideTooltip(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))
}).call(C,function(){var a,d=[],e=[],f=[];if(w){for(a=0;w>a;a++)d.push("."+l.shape+"-"+(v+a)),e.push("."+l.text+"-"+(v+a)),f.push("."+l.eventRect+"-"+(v+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove(),b.svg.selectAll("."+l.texts).selectAll(e).remove(),b.svg.selectAll("."+l.eventRects).selectAll(f).remove(),b.svg.select("."+l.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",m),K.attr("transform",null).attr("cx",n).attr("cy",o),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},h.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},h.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),m=f.data_selection_grouped||!a||a.indexOf(j)>=0,n=!b||b.indexOf(h)>=0,o=i.classed(l.SELECTED);i.classed(l.line)||i.classed(l.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&k(!0,i.classed(l.SELECTED,!0),g,h):q(c)&&c&&o&&k(!1,i.classed(l.SELECTED,!1),g,h))})},h.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,m=!b||b.indexOf(g)>=0,n=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(l.SELECTED,!1),f,g)})},h.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},i.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},h.groups=function(a){var b=this.internal,c=b.config;return p(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},h.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},h.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},h.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},h.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},h.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},h.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},h.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},h.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},h.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[l.region]),d=e.main.select("."+l.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return a["class"]?(a["class"].split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b):!0}),f.regions},h.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},h.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},h.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},h.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},h.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},h.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},h.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},h.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},h.color=function(a){var b=this.internal;return b.color(a)},h.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.axis=function(){},h.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},h.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_max=a.x),m(a.y)&&(c.axis_y_max=a.y),m(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},h.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_min=a.x),m(a.y)&&(c.axis_y_min=a.y),m(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},h.axis.range=function(a){return arguments.length?(q(a.max)&&this.axis.max(a.max),void(q(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},h.legend=function(){},h.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},h.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},h.destroy=function(){var b=this.internal;return a.clearInterval(b.intervalForObserveInserted),a.onresize=null,b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},h.tooltip=function(){},h.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=m(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c)},h.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var z;i.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},i.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"==typeof define&&define.amd?define("c3",["d3"],k):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=k:a.c3=k}(window);
//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1/0,o=-1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1/0===u&&1/0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);
//# sourceMappingURL=underscore-min.map
// numeral.js
// version : 1.4.5
// author : Adam Draper
// license : MIT
// http://adamwdraper.github.com/Numeral-js/
(function(){function o(e){this._n=e}function u(e,t,n){var r=Math.pow(10,t),i;i=(Math.round(e*r)/r).toFixed(t);if(n){var s=new RegExp("0{1,"+n+"}$");i=i.replace(s,"")}return i}function a(e,t){var n;t.indexOf("$")>-1?n=l(e,t):t.indexOf("%")>-1?n=c(e,t):t.indexOf(":")>-1?n=h(e,t):n=d(e,t);return n}function f(e,t){if(t.indexOf(":")>-1)e._n=p(t);else if(t===i)e._n=0;else{var s=t;n[r].delimiters.decimal!=="."&&(t=t.replace(/\./g,"").replace(n[r].delimiters.decimal,"."));var o=new RegExp(n[r].abbreviations.thousand+"(?:\\)|(\\"+n[r].currency.symbol+")?(?:\\))?)?$"),u=new RegExp(n[r].abbreviations.million+"(?:\\)|(\\"+n[r].currency.symbol+")?(?:\\))?)?$"),a=new RegExp(n[r].abbreviations.billion+"(?:\\)|(\\"+n[r].currency.symbol+")?(?:\\))?)?$"),f=new RegExp(n[r].abbreviations.trillion+"(?:\\)|(\\"+n[r].currency.symbol+")?(?:\\))?)?$"),l=["KB","MB","GB","TB","PB","EB","ZB","YB"],c=!1;for(var h=0;h<=l.length;h++){c=t.indexOf(l[h])>-1?Math.pow(1024,h+1):!1;if(c)break}e._n=(c?c:1)*(s.match(o)?Math.pow(10,3):1)*(s.match(u)?Math.pow(10,6):1)*(s.match(a)?Math.pow(10,9):1)*(s.match(f)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*Number((t.indexOf("(")>-1?"-":"")+t.replace(/[^0-9\.'-]+/g,""));e._n=c?Math.ceil(e._n):e._n}return e._n}function l(e,t){var i=t.indexOf("$")<=1?!0:!1,s="";if(t.indexOf(" $")>-1){s=" ";t=t.replace(" $","")}else if(t.indexOf("$ ")>-1){s=" ";t=t.replace("$ ","")}else t=t.replace("$","");var o=a(e,t);if(i)if(o.indexOf("(")>-1||o.indexOf("-")>-1){o=o.split("");o.splice(1,0,n[r].currency.symbol+s);o=o.join("")}else o=n[r].currency.symbol+s+o;else if(o.indexOf(")")>-1){o=o.split("");o.splice(-1,0,s+n[r].currency.symbol);o=o.join("")}else o=o+s+n[r].currency.symbol;return o}function c(e,t){var n="";if(t.indexOf(" %")>-1){n=" ";t=t.replace(" %","")}else t=t.replace("%","");e._n=e._n*100;var r=a(e,t);if(r.indexOf(")")>-1){r=r.split("");r.splice(-1,0,n+"%");r=r.join("")}else r=r+n+"%";return r}function h(e,t){var n=Math.floor(e._n/60/60),r=Math.floor((e._n-n*60*60)/60),i=Math.round(e._n-n*60*60-r*60);return n+":"+(r<10?"0"+r:r)+":"+(i<10?"0"+i:i)}function p(e){var t=e.split(":"),n=0;if(t.length===3){n+=Number(t[0])*60*60;n+=Number(t[1])*60;n+=Number(t[2])}else if(t.lenght===2){n+=Number(t[0])*60;n+=Number(t[1])}return Number(n)}function d(e,t){var s=!1,o=!1,a="",f="",l="",c=Math.abs(e._n);if(e._n===0&&i!==null)return i;if(t.indexOf("(")>-1){s=!0;t=t.slice(1,-1)}if(t.indexOf("a")>-1){if(t.indexOf(" a")>-1){a=" ";t=t.replace(" a","")}else t=t.replace("a","");if(c>=Math.pow(10,12)){a+=n[r].abbreviations.tillion;e._n=e._n/Math.pow(10,12)}else if(c<Math.pow(10,12)&&c>=Math.pow(10,9)){a+=n[r].abbreviations.billion;e._n=e._n/Math.pow(10,9)}else if(c<Math.pow(10,9)&&c>=Math.pow(10,6)){a+=n[r].abbreviations.million;e._n=e._n/Math.pow(10,6)}else if(c<Math.pow(10,6)&&c>=Math.pow(10,3)){a+=n[r].abbreviations.thousand;e._n=e._n/Math.pow(10,3)}}if(t.indexOf("b")>-1){if(t.indexOf(" b")>-1){f=" ";t=t.replace(" b","")}else t=t.replace("b","");var h=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],p,d;for(var v=0;v<=h.length;v++){p=Math.pow(1024,v);d=Math.pow(1024,v+1);if(e._n>=p&&e._n<d){f+=h[v];p>0&&(e._n=e._n/p);break}}}if(t.indexOf("o")>-1){if(t.indexOf(" o")>-1){l=" ";t=t.replace(" o","")}else t=t.replace("o","");l+=n[r].ordinal(e._n)}if(t.indexOf("[.]")>-1){o=!0;t=t.replace("[.]",".")}var m=e._n.toString().split(".")[0],g=t.split(".")[1],y=t.indexOf(","),b="",w=!1;if(g){if(g.indexOf("[")>-1){g=g.replace("]","");g=g.split("[");b=u(e._n,g[0].length+g[1].length,g[1].length)}else b=u(e._n,g.length);m=b.split(".")[0];b.split(".")[1].length?b=n[r].delimiters.decimal+b.split(".")[1]:b="";o&&Number(b)===0&&(b="")}else m=u(e._n,null);if(m.indexOf("-")>-1){m=m.slice(1);w=!0}y>-1&&(m=m.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n[r].delimiters.thousands));t.indexOf(".")===0&&(m="");return(s&&w?"(":"")+(!s&&w?"-":"")+m+b+(l?l:"")+(a?a:"")+(f?f:"")+(s&&w?")":"")}function v(e,t){n[e]=t}var e,t="1.4.5",n={},r="en",i=null,s=typeof module!="undefined"&&module.exports;e=function(t){e.isNumeral(t)?t=t.value():Number(t)||(t=0);return new o(Number(t))};e.version=t;e.isNumeral=function(e){return e instanceof o};e.language=function(t,i){if(!t)return r;t&&!i&&(r=t);(i||!n[t])&&v(t,i);return e};e.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"},currency:{symbol:"$"}});e.zeroFormat=function(e){typeof e=="string"?i=e:i=null};e.fn=o.prototype={clone:function(){return e(this)},format:function(t){return a(this,t?t:e.defaultFormat)},unformat:function(t){return f(this,t?t:e.defaultFormat)},value:function(){return this._n},valueOf:function(){return this._n},set:function(e){this._n=Number(e);return this},add:function(e){this._n=this._n+Number(e);return this},subtract:function(e){this._n=this._n-Number(e);return this},multiply:function(e){this._n=this._n*Number(e);return this},divide:function(e){this._n=this._n/Number(e);return this},difference:function(e){var t=this._n-Number(e);t<0&&(t=-t);return t}};s&&(module.exports=e);typeof ender=="undefined"&&(this.numeral=e);typeof define=="function"&&define.amd&&define([],function(){return e})}).call(this);
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Browser Request
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// UMD HEADER START 
(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define([], factory);
    } else if (typeof exports === 'object') {
        // Node. Does not work with strict CommonJS, but
        // only CommonJS-like enviroments that support module.exports,
        // like Node.
        module.exports = factory();
    } else {
        // Browser globals (root is window)
        root.returnExports = factory();
  }
}(this, function () {
// UMD HEADER END

var XHR = XMLHttpRequest
if (!XHR) throw new Error('missing XMLHttpRequest')
request.log = {
  'trace': noop, 'debug': noop, 'info': noop, 'warn': noop, 'error': noop
}

var DEFAULT_TIMEOUT = 3 * 60 * 1000 // 3 minutes

//
// request
//

function request(options, callback) {
  // The entry-point to the API: prep the options object and pass the real work to run_xhr.
  if(typeof callback !== 'function')
    throw new Error('Bad callback given: ' + callback)

  if(!options)
    throw new Error('No options given')

  var options_onResponse = options.onResponse; // Save this for later.

  if(typeof options === 'string')
    options = {'uri':options};
  else
    options = JSON.parse(JSON.stringify(options)); // Use a duplicate for mutating.

  options.onResponse = options_onResponse // And put it back.

  if (options.verbose) request.log = getLogger();

  if(options.url) {
    options.uri = options.url;
    delete options.url;
  }

  if(!options.uri && options.uri !== "")
    throw new Error("options.uri is a required argument");

  if(typeof options.uri != "string")
    throw new Error("options.uri must be a string");

  var unsupported_options = ['proxy', '_redirectsFollowed', 'maxRedirects', 'followRedirect']
  for (var i = 0; i < unsupported_options.length; i++)
    if(options[ unsupported_options[i] ])
      throw new Error("options." + unsupported_options[i] + " is not supported")

  options.callback = callback
  options.method = options.method || 'GET';
  options.headers = options.headers || {};
  options.body    = options.body || null
  options.timeout = options.timeout || request.DEFAULT_TIMEOUT

  if(options.headers.host)
    throw new Error("Options.headers.host is not supported");

  if(options.json) {
    options.headers.accept = options.headers.accept || 'application/json'
    if(options.method !== 'GET')
      options.headers['content-type'] = 'application/json'

    if(typeof options.json !== 'boolean')
      options.body = JSON.stringify(options.json)
    else if(typeof options.body !== 'string')
      options.body = JSON.stringify(options.body)
  }
  
  //BEGIN QS Hack
  var serialize = function(obj) {
    var str = [];
    for(var p in obj)
      if (obj.hasOwnProperty(p)) {
        str.push(encodeURIComponent(p) + "=" + encodeURIComponent(obj[p]));
      }
    return str.join("&");
  }
  
  if(options.qs){
    var qs = (typeof options.qs == 'string')? options.qs : serialize(options.qs);
    if(options.uri.indexOf('?') !== -1){ //no get params
        options.uri = options.uri+'&'+qs;
    }else{ //existing get params
        options.uri = options.uri+'?'+qs;
    }
  }
  //END QS Hack
  
  //BEGIN FORM Hack
  var multipart = function(obj) {
    //todo: support file type (useful?)
    var result = {};
    result.boundry = '-------------------------------'+Math.floor(Math.random()*1000000000);
    var lines = [];
    for(var p in obj){
        if (obj.hasOwnProperty(p)) {
            lines.push(
                '--'+result.boundry+"\n"+
                'Content-Disposition: form-data; name="'+p+'"'+"\n"+
                "\n"+
                obj[p]+"\n"
            );
        }
    }
    lines.push( '--'+result.boundry+'--' );
    result.body = lines.join('');
    result.length = result.body.length;
    result.type = 'multipart/form-data; boundary='+result.boundry;
    return result;
  }
  
  if(options.form){
    if(typeof options.form == 'string') throw('form name unsupported');
    if(options.method === 'POST'){
        var encoding = (options.encoding || 'application/x-www-form-urlencoded').toLowerCase();
        options.headers['content-type'] = encoding;
        switch(encoding){
            case 'application/x-www-form-urlencoded':
                options.body = serialize(options.form).replace(/%20/g, "+");
                break;
            case 'multipart/form-data':
                var multi = multipart(options.form);
                //options.headers['content-length'] = multi.length;
                options.body = multi.body;
                options.headers['content-type'] = multi.type;
                break;
            default : throw new Error('unsupported encoding:'+encoding);
        }
    }
  }
  //END FORM Hack

  // If onResponse is boolean true, call back immediately when the response is known,
  // not when the full request is complete.
  options.onResponse = options.onResponse || noop
  if(options.onResponse === true) {
    options.onResponse = callback
    options.callback = noop
  }

  // XXX Browsers do not like this.
  //if(options.body)
  //  options.headers['content-length'] = options.body.length;

  // HTTP basic authentication
  if(!options.headers.authorization && options.auth)
    options.headers.authorization = 'Basic ' + b64_enc(options.auth.username + ':' + options.auth.password);

  return run_xhr(options)
}

var req_seq = 0
function run_xhr(options) {
  var xhr = new XHR
    , timed_out = false
    , is_cors = is_crossDomain(options.uri)
    , supports_cors = ('withCredentials' in xhr)

  req_seq += 1
  xhr.seq_id = req_seq
  xhr.id = req_seq + ': ' + options.method + ' ' + options.uri
  xhr._id = xhr.id // I know I will type "_id" from habit all the time.

  if(is_cors && !supports_cors) {
    var cors_err = new Error('Browser does not support cross-origin request: ' + options.uri)
    cors_err.cors = 'unsupported'
    return options.callback(cors_err, xhr)
  }

  xhr.timeoutTimer = setTimeout(too_late, options.timeout)
  function too_late() {
    timed_out = true
    var er = new Error('ETIMEDOUT')
    er.code = 'ETIMEDOUT'
    er.duration = options.timeout

    request.log.error('Timeout', { 'id':xhr._id, 'milliseconds':options.timeout })
    return options.callback(er, xhr)
  }

  // Some states can be skipped over, so remember what is still incomplete.
  var did = {'response':false, 'loading':false, 'end':false}

  xhr.onreadystatechange = on_state_change
  xhr.open(options.method, options.uri, true) // asynchronous
  if(is_cors)
    xhr.withCredentials = !! options.withCredentials
  xhr.send(options.body)
  return xhr

  function on_state_change(event) {
    if(timed_out)
      return request.log.debug('Ignoring timed out state change', {'state':xhr.readyState, 'id':xhr.id})

    request.log.debug('State change', {'state':xhr.readyState, 'id':xhr.id, 'timed_out':timed_out})

    if(xhr.readyState === XHR.OPENED) {
      request.log.debug('Request started', {'id':xhr.id})
      for (var key in options.headers)
        xhr.setRequestHeader(key, options.headers[key])
    }

    else if(xhr.readyState === XHR.HEADERS_RECEIVED)
      on_response()

    else if(xhr.readyState === XHR.LOADING) {
      on_response()
      on_loading()
    }

    else if(xhr.readyState === XHR.DONE) {
      on_response()
      on_loading()
      on_end()
    }
  }

  function on_response() {
    if(did.response)
      return

    did.response = true
    request.log.debug('Got response', {'id':xhr.id, 'status':xhr.status})
    clearTimeout(xhr.timeoutTimer)
    xhr.statusCode = xhr.status // Node request compatibility

    // Detect failed CORS requests.
    if(is_cors && xhr.statusCode == 0) {
      var cors_err = new Error('CORS request rejected: ' + options.uri)
      cors_err.cors = 'rejected'

      // Do not process this request further.
      did.loading = true
      did.end = true

      return options.callback(cors_err, xhr)
    }

    options.onResponse(null, xhr)
  }

  function on_loading() {
    if(did.loading)
      return

    did.loading = true
    request.log.debug('Response body loading', {'id':xhr.id})
    // TODO: Maybe simulate "data" events by watching xhr.responseText
  }

  function on_end() {
    if(did.end)
      return

    did.end = true
    request.log.debug('Request done', {'id':xhr.id})

    xhr.body = xhr.responseText
    if(options.json) {
      try        { xhr.body = JSON.parse(xhr.responseText) }
      catch (er) { return options.callback(er, xhr)        }
    }

    options.callback(null, xhr, xhr.body)
  }

} // request

request.withCredentials = false;
request.DEFAULT_TIMEOUT = DEFAULT_TIMEOUT;

//
// defaults
//

request.defaults = function(options, requester) {
  var def = function (method) {
    var d = function (params, callback) {
      if(typeof params === 'string')
        params = {'uri': params};
      else {
        params = JSON.parse(JSON.stringify(params));
      }
      for (var i in options) {
        if (params[i] === undefined) params[i] = options[i]
      }
      return method(params, callback)
    }
    return d
  }
  var de = def(request)
  de.get = def(request.get)
  de.post = def(request.post)
  de.put = def(request.put)
  de.head = def(request.head)
  return de
}

//
// HTTP method shortcuts
//

var shortcuts = [ 'get', 'put', 'post', 'head' ];
shortcuts.forEach(function(shortcut) {
  var method = shortcut.toUpperCase();
  var func   = shortcut.toLowerCase();

  request[func] = function(opts) {
    if(typeof opts === 'string')
      opts = {'method':method, 'uri':opts};
    else {
      opts = JSON.parse(JSON.stringify(opts));
      opts.method = method;
    }

    var args = [opts].concat(Array.prototype.slice.apply(arguments, [1]));
    return request.apply(this, args);
  }
})

//
// CouchDB shortcut
//

request.couch = function(options, callback) {
  if(typeof options === 'string')
    options = {'uri':options}

  // Just use the request API to do JSON.
  options.json = true
  if(options.body)
    options.json = options.body
  delete options.body

  callback = callback || noop

  var xhr = request(options, couch_handler)
  return xhr

  function couch_handler(er, resp, body) {
    if(er)
      return callback(er, resp, body)

    if((resp.statusCode < 200 || resp.statusCode > 299) && body.error) {
      // The body is a Couch JSON object indicating the error.
      er = new Error('CouchDB error: ' + (body.error.reason || body.error.error))
      for (var key in body)
        er[key] = body[key]
      return callback(er, resp, body);
    }

    return callback(er, resp, body);
  }
}

//
// Utility
//

function noop() {}

function getLogger() {
  var logger = {}
    , levels = ['trace', 'debug', 'info', 'warn', 'error']
    , level, i

  for(i = 0; i < levels.length; i++) {
    level = levels[i]

    logger[level] = noop
    if(typeof console !== 'undefined' && console && console[level])
      logger[level] = formatted(console, level)
  }

  return logger
}

function formatted(obj, method) {
  return formatted_logger

  function formatted_logger(str, context) {
    if(typeof context === 'object')
      str += ' ' + JSON.stringify(context)

    return obj[method].call(obj, str)
  }
}

// Return whether a URL is a cross-domain request.
function is_crossDomain(url) {
  var rurl = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/

  // jQuery #8138, IE may throw an exception when accessing
  // a field from window.location if document.domain has been set
  var ajaxLocation
  try { ajaxLocation = location.href }
  catch (e) {
    // Use the href attribute of an A element since IE will modify it given document.location
    ajaxLocation = document.createElement( "a" );
    ajaxLocation.href = "";
    ajaxLocation = ajaxLocation.href;
  }

  var ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || []
    , parts = rurl.exec(url.toLowerCase() )

  var result = !!(
    parts &&
    (  parts[1] != ajaxLocParts[1]
    || parts[2] != ajaxLocParts[2]
    || (parts[3] || (parts[1] === "http:" ? 80 : 443)) != (ajaxLocParts[3] || (ajaxLocParts[1] === "http:" ? 80 : 443))
    )
  )

  //console.debug('is_crossDomain('+url+') -> ' + result)
  return result
}

// MIT License from http://phpjs.org/functions/base64_encode:358
function b64_enc (data) {
    // Encodes string using MIME base64 algorithm
    var b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0, ac = 0, enc="", tmp_arr = [];

    if (!data) {
        return data;
    }

    // assume utf8 data
    // data = this.utf8_encode(data+'');

    do { // pack three octets into four hexets
        o1 = data.charCodeAt(i++);
        o2 = data.charCodeAt(i++);
        o3 = data.charCodeAt(i++);

        bits = o1<<16 | o2<<8 | o3;

        h1 = bits>>18 & 0x3f;
        h2 = bits>>12 & 0x3f;
        h3 = bits>>6 & 0x3f;
        h4 = bits & 0x3f;

        // use hexets to index into b64, and append result to encoded string
        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    switch (data.length % 3) {
        case 1:
            enc = enc.slice(0, -2) + '==';
        break;
        case 2:
            enc = enc.slice(0, -1) + '=';
        break;
    }

    return enc;
}
    return request;
//UMD FOOTER START
}));
//UMD FOOTER END

},{}],2:[function(require,module,exports){
'use strict';


var request = require('browser-request');

var popily = window.popily || {};

var _error = function(msg, error) {
  return {msg: msg, error: error};
};
  
var _request = function(method, path, data, callback) {
  var DEFAULT_URL = 'https://popily.com';
  var DEFAULT_BASE_PATH = '/api';

  var apiUrl = popily.api.apiUrl;
  if(!popily.api.apiUrl) {
    apiUrl = DEFAULT_URL;
  } 
  apiUrl = apiUrl + DEFAULT_BASE_PATH;

  var params = {
    method: method,
    headers: { 
      'Authorization': 'Token ' + popily.api.token,
      'Accept': 'application/json',
    },
    url: apiUrl + path// + '?format=api'
  };
      
  if('qs' in data) {
    params['qs'] = data['qs'];
    params['json'] = true;
  }
  if('json' in data) {
    params['body'] = data['json'];
    params['json'] = true;
  }
  if('form' in data) {
    params['formData'] = data['form'];
  }
  
  request(params, function(err, httpResponse, body) {
    if(err)
      return callback(_error('Request error', err));
      
    if(httpResponse.statusCode === 401)
      return callback(_error('Invalid API token'));

    if(httpResponse.statusCode === 400)
      return callback(_error('Bad request', body));
      
    try {
      var response = body;
      if(typeof body === 'string')
        response = JSON.parse(body);
    } catch(e) {
      return callback(_error('Error: '+e, e) )
    }

    callback(null, response);

  });
};

var packCalculations = function(calculations) {
  var packedStr = '';
  calculations.forEach(function(f, i) {
    var filterStr = '';
    if(i > 0)
      filterStr += '__';

    filterStr += f['column'] + '!' + f['calculation'];
    packedStr += filterStr
  });
  return packedStr;
};       
        
popily.api = {
  addSource: function(sourceData, cb) {
    
    var data = {};
    ['columns', 'title', 'description'].forEach(function(key) {
      if(key in sourceData)
        data[key] = sourceData[key];
    })

    if('url' in sourceData) {
      data['url'] = sourceData['url']
      _request('POST', '/sources/', {json: data}, cb);
    }

    else if('connection_string' in sourceData ) {
      data['connection_string'] = sourceData['connection_string']
      data['query'] = sourceData['query']
      _request('POST', '/sources/', {json: data}, cb);
    }
    
    else
      cb('url or connection_string is required');
  },


  getSources: function(cb) {
    _request('GET', '/sources/', {}, cb);
  },


  getSource: function(sourceId, cb) {
    _request('GET', '/sources/'+sourceId+'/', {}, cb);
  },


  getInsights: function(sourceId, params, cb) {
    params = params || {};
    var payload = {'source': sourceId};

    ['columns', 'insight_types', 'insight_actions'].forEach(function(key) {
      if(key in params)
        payload[key] = params[key].join(',')
    });

    if('single' in params) {
      payload['single'] = params['single'];
    }

    if('calculations' in params) {
      payload['calculations'] = packCalculations(params['calculations']);
    }

    _request('GET', '/insights/', {qs: payload}, cb);
  },

  getInsight: function(insightId, params, cb) {
    var payload = {};    
    _request('GET', '/insights/' + insightId + '/', {qs: payload}, cb);
  },

  setToken: function(token) {
    this.token = token;
  },

  setURL: function(apiUrl) {
    this.apiUrl = apiUrl;
  }
}

window.popily = popily;
module.exports = popily;

},{"browser-request":1}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvd3d3L3BvcGlseS9wb3BpbHktanMvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL3Zhci93d3cvcG9waWx5L3BvcGlseS1qcy9ub2RlX21vZHVsZXMvYnJvd3Nlci1yZXF1ZXN0L2luZGV4LmpzIiwiL3Zhci93d3cvcG9waWx5L3BvcGlseS1qcy9zcmMvZmFrZV81NGUxNmVkNS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5ZUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIEJyb3dzZXIgUmVxdWVzdFxuLy9cbi8vIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4vLyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4vLyBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbi8vXG4vLyAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4vL1xuLy8gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuLy8gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuLy8gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4vLyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4vLyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cblxuLy8gVU1EIEhFQURFUiBTVEFSVCBcbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgICAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbWVudHMgdGhhdCBzdXBwb3J0IG1vZHVsZS5leHBvcnRzLFxuICAgICAgICAvLyBsaWtlIE5vZGUuXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QucmV0dXJuRXhwb3J0cyA9IGZhY3RvcnkoKTtcbiAgfVxufSh0aGlzLCBmdW5jdGlvbiAoKSB7XG4vLyBVTUQgSEVBREVSIEVORFxuXG52YXIgWEhSID0gWE1MSHR0cFJlcXVlc3RcbmlmICghWEhSKSB0aHJvdyBuZXcgRXJyb3IoJ21pc3NpbmcgWE1MSHR0cFJlcXVlc3QnKVxucmVxdWVzdC5sb2cgPSB7XG4gICd0cmFjZSc6IG5vb3AsICdkZWJ1Zyc6IG5vb3AsICdpbmZvJzogbm9vcCwgJ3dhcm4nOiBub29wLCAnZXJyb3InOiBub29wXG59XG5cbnZhciBERUZBVUxUX1RJTUVPVVQgPSAzICogNjAgKiAxMDAwIC8vIDMgbWludXRlc1xuXG4vL1xuLy8gcmVxdWVzdFxuLy9cblxuZnVuY3Rpb24gcmVxdWVzdChvcHRpb25zLCBjYWxsYmFjaykge1xuICAvLyBUaGUgZW50cnktcG9pbnQgdG8gdGhlIEFQSTogcHJlcCB0aGUgb3B0aW9ucyBvYmplY3QgYW5kIHBhc3MgdGhlIHJlYWwgd29yayB0byBydW5feGhyLlxuICBpZih0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgY2FsbGJhY2sgZ2l2ZW46ICcgKyBjYWxsYmFjaylcblxuICBpZighb3B0aW9ucylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbnMgZ2l2ZW4nKVxuXG4gIHZhciBvcHRpb25zX29uUmVzcG9uc2UgPSBvcHRpb25zLm9uUmVzcG9uc2U7IC8vIFNhdmUgdGhpcyBmb3IgbGF0ZXIuXG5cbiAgaWYodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKVxuICAgIG9wdGlvbnMgPSB7J3VyaSc6b3B0aW9uc307XG4gIGVsc2VcbiAgICBvcHRpb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcHRpb25zKSk7IC8vIFVzZSBhIGR1cGxpY2F0ZSBmb3IgbXV0YXRpbmcuXG5cbiAgb3B0aW9ucy5vblJlc3BvbnNlID0gb3B0aW9uc19vblJlc3BvbnNlIC8vIEFuZCBwdXQgaXQgYmFjay5cblxuICBpZiAob3B0aW9ucy52ZXJib3NlKSByZXF1ZXN0LmxvZyA9IGdldExvZ2dlcigpO1xuXG4gIGlmKG9wdGlvbnMudXJsKSB7XG4gICAgb3B0aW9ucy51cmkgPSBvcHRpb25zLnVybDtcbiAgICBkZWxldGUgb3B0aW9ucy51cmw7XG4gIH1cblxuICBpZighb3B0aW9ucy51cmkgJiYgb3B0aW9ucy51cmkgIT09IFwiXCIpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwib3B0aW9ucy51cmkgaXMgYSByZXF1aXJlZCBhcmd1bWVudFwiKTtcblxuICBpZih0eXBlb2Ygb3B0aW9ucy51cmkgIT0gXCJzdHJpbmdcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLnVyaSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuXG4gIHZhciB1bnN1cHBvcnRlZF9vcHRpb25zID0gWydwcm94eScsICdfcmVkaXJlY3RzRm9sbG93ZWQnLCAnbWF4UmVkaXJlY3RzJywgJ2ZvbGxvd1JlZGlyZWN0J11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnN1cHBvcnRlZF9vcHRpb25zLmxlbmd0aDsgaSsrKVxuICAgIGlmKG9wdGlvbnNbIHVuc3VwcG9ydGVkX29wdGlvbnNbaV0gXSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIm9wdGlvbnMuXCIgKyB1bnN1cHBvcnRlZF9vcHRpb25zW2ldICsgXCIgaXMgbm90IHN1cHBvcnRlZFwiKVxuXG4gIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFja1xuICBvcHRpb25zLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnO1xuICBvcHRpb25zLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XG4gIG9wdGlvbnMuYm9keSAgICA9IG9wdGlvbnMuYm9keSB8fCBudWxsXG4gIG9wdGlvbnMudGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCByZXF1ZXN0LkRFRkFVTFRfVElNRU9VVFxuXG4gIGlmKG9wdGlvbnMuaGVhZGVycy5ob3N0KVxuICAgIHRocm93IG5ldyBFcnJvcihcIk9wdGlvbnMuaGVhZGVycy5ob3N0IGlzIG5vdCBzdXBwb3J0ZWRcIik7XG5cbiAgaWYob3B0aW9ucy5qc29uKSB7XG4gICAgb3B0aW9ucy5oZWFkZXJzLmFjY2VwdCA9IG9wdGlvbnMuaGVhZGVycy5hY2NlcHQgfHwgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgaWYob3B0aW9ucy5tZXRob2QgIT09ICdHRVQnKVxuICAgICAgb3B0aW9ucy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJ1xuXG4gICAgaWYodHlwZW9mIG9wdGlvbnMuanNvbiAhPT0gJ2Jvb2xlYW4nKVxuICAgICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5qc29uKVxuICAgIGVsc2UgaWYodHlwZW9mIG9wdGlvbnMuYm9keSAhPT0gJ3N0cmluZycpXG4gICAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHkpXG4gIH1cbiAgXG4gIC8vQkVHSU4gUVMgSGFja1xuICB2YXIgc2VyaWFsaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHN0ciA9IFtdO1xuICAgIGZvcih2YXIgcCBpbiBvYmopXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIHN0ci5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtwXSkpO1xuICAgICAgfVxuICAgIHJldHVybiBzdHIuam9pbihcIiZcIik7XG4gIH1cbiAgXG4gIGlmKG9wdGlvbnMucXMpe1xuICAgIHZhciBxcyA9ICh0eXBlb2Ygb3B0aW9ucy5xcyA9PSAnc3RyaW5nJyk/IG9wdGlvbnMucXMgOiBzZXJpYWxpemUob3B0aW9ucy5xcyk7XG4gICAgaWYob3B0aW9ucy51cmkuaW5kZXhPZignPycpICE9PSAtMSl7IC8vbm8gZ2V0IHBhcmFtc1xuICAgICAgICBvcHRpb25zLnVyaSA9IG9wdGlvbnMudXJpKycmJytxcztcbiAgICB9ZWxzZXsgLy9leGlzdGluZyBnZXQgcGFyYW1zXG4gICAgICAgIG9wdGlvbnMudXJpID0gb3B0aW9ucy51cmkrJz8nK3FzO1xuICAgIH1cbiAgfVxuICAvL0VORCBRUyBIYWNrXG4gIFxuICAvL0JFR0lOIEZPUk0gSGFja1xuICB2YXIgbXVsdGlwYXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgLy90b2RvOiBzdXBwb3J0IGZpbGUgdHlwZSAodXNlZnVsPylcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgcmVzdWx0LmJvdW5kcnkgPSAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMDAwMDAwMDApO1xuICAgIHZhciBsaW5lcyA9IFtdO1xuICAgIGZvcih2YXIgcCBpbiBvYmope1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFxuICAgICAgICAgICAgICAgICctLScrcmVzdWx0LmJvdW5kcnkrXCJcXG5cIitcbiAgICAgICAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbjogZm9ybS1kYXRhOyBuYW1lPVwiJytwKydcIicrXCJcXG5cIitcbiAgICAgICAgICAgICAgICBcIlxcblwiK1xuICAgICAgICAgICAgICAgIG9ialtwXStcIlxcblwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxpbmVzLnB1c2goICctLScrcmVzdWx0LmJvdW5kcnkrJy0tJyApO1xuICAgIHJlc3VsdC5ib2R5ID0gbGluZXMuam9pbignJyk7XG4gICAgcmVzdWx0Lmxlbmd0aCA9IHJlc3VsdC5ib2R5Lmxlbmd0aDtcbiAgICByZXN1bHQudHlwZSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT0nK3Jlc3VsdC5ib3VuZHJ5O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgXG4gIGlmKG9wdGlvbnMuZm9ybSl7XG4gICAgaWYodHlwZW9mIG9wdGlvbnMuZm9ybSA9PSAnc3RyaW5nJykgdGhyb3coJ2Zvcm0gbmFtZSB1bnN1cHBvcnRlZCcpO1xuICAgIGlmKG9wdGlvbnMubWV0aG9kID09PSAnUE9TVCcpe1xuICAgICAgICB2YXIgZW5jb2RpbmcgPSAob3B0aW9ucy5lbmNvZGluZyB8fCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGVuY29kaW5nO1xuICAgICAgICBzd2l0Y2goZW5jb2Rpbmcpe1xuICAgICAgICAgICAgY2FzZSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJzpcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBzZXJpYWxpemUob3B0aW9ucy5mb3JtKS5yZXBsYWNlKC8lMjAvZywgXCIrXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSc6XG4gICAgICAgICAgICAgICAgdmFyIG11bHRpID0gbXVsdGlwYXJ0KG9wdGlvbnMuZm9ybSk7XG4gICAgICAgICAgICAgICAgLy9vcHRpb25zLmhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10gPSBtdWx0aS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ib2R5ID0gbXVsdGkuYm9keTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gbXVsdGkudHlwZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQgOiB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIGVuY29kaW5nOicrZW5jb2RpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICB9XG4gIC8vRU5EIEZPUk0gSGFja1xuXG4gIC8vIElmIG9uUmVzcG9uc2UgaXMgYm9vbGVhbiB0cnVlLCBjYWxsIGJhY2sgaW1tZWRpYXRlbHkgd2hlbiB0aGUgcmVzcG9uc2UgaXMga25vd24sXG4gIC8vIG5vdCB3aGVuIHRoZSBmdWxsIHJlcXVlc3QgaXMgY29tcGxldGUuXG4gIG9wdGlvbnMub25SZXNwb25zZSA9IG9wdGlvbnMub25SZXNwb25zZSB8fCBub29wXG4gIGlmKG9wdGlvbnMub25SZXNwb25zZSA9PT0gdHJ1ZSkge1xuICAgIG9wdGlvbnMub25SZXNwb25zZSA9IGNhbGxiYWNrXG4gICAgb3B0aW9ucy5jYWxsYmFjayA9IG5vb3BcbiAgfVxuXG4gIC8vIFhYWCBCcm93c2VycyBkbyBub3QgbGlrZSB0aGlzLlxuICAvL2lmKG9wdGlvbnMuYm9keSlcbiAgLy8gIG9wdGlvbnMuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9IG9wdGlvbnMuYm9keS5sZW5ndGg7XG5cbiAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICBpZighb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb24gJiYgb3B0aW9ucy5hdXRoKVxuICAgIG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBiNjRfZW5jKG9wdGlvbnMuYXV0aC51c2VybmFtZSArICc6JyArIG9wdGlvbnMuYXV0aC5wYXNzd29yZCk7XG5cbiAgcmV0dXJuIHJ1bl94aHIob3B0aW9ucylcbn1cblxudmFyIHJlcV9zZXEgPSAwXG5mdW5jdGlvbiBydW5feGhyKG9wdGlvbnMpIHtcbiAgdmFyIHhociA9IG5ldyBYSFJcbiAgICAsIHRpbWVkX291dCA9IGZhbHNlXG4gICAgLCBpc19jb3JzID0gaXNfY3Jvc3NEb21haW4ob3B0aW9ucy51cmkpXG4gICAgLCBzdXBwb3J0c19jb3JzID0gKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocilcblxuICByZXFfc2VxICs9IDFcbiAgeGhyLnNlcV9pZCA9IHJlcV9zZXFcbiAgeGhyLmlkID0gcmVxX3NlcSArICc6ICcgKyBvcHRpb25zLm1ldGhvZCArICcgJyArIG9wdGlvbnMudXJpXG4gIHhoci5faWQgPSB4aHIuaWQgLy8gSSBrbm93IEkgd2lsbCB0eXBlIFwiX2lkXCIgZnJvbSBoYWJpdCBhbGwgdGhlIHRpbWUuXG5cbiAgaWYoaXNfY29ycyAmJiAhc3VwcG9ydHNfY29ycykge1xuICAgIHZhciBjb3JzX2VyciA9IG5ldyBFcnJvcignQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGNyb3NzLW9yaWdpbiByZXF1ZXN0OiAnICsgb3B0aW9ucy51cmkpXG4gICAgY29yc19lcnIuY29ycyA9ICd1bnN1cHBvcnRlZCdcbiAgICByZXR1cm4gb3B0aW9ucy5jYWxsYmFjayhjb3JzX2VyciwgeGhyKVxuICB9XG5cbiAgeGhyLnRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQodG9vX2xhdGUsIG9wdGlvbnMudGltZW91dClcbiAgZnVuY3Rpb24gdG9vX2xhdGUoKSB7XG4gICAgdGltZWRfb3V0ID0gdHJ1ZVxuICAgIHZhciBlciA9IG5ldyBFcnJvcignRVRJTUVET1VUJylcbiAgICBlci5jb2RlID0gJ0VUSU1FRE9VVCdcbiAgICBlci5kdXJhdGlvbiA9IG9wdGlvbnMudGltZW91dFxuXG4gICAgcmVxdWVzdC5sb2cuZXJyb3IoJ1RpbWVvdXQnLCB7ICdpZCc6eGhyLl9pZCwgJ21pbGxpc2Vjb25kcyc6b3B0aW9ucy50aW1lb3V0IH0pXG4gICAgcmV0dXJuIG9wdGlvbnMuY2FsbGJhY2soZXIsIHhocilcbiAgfVxuXG4gIC8vIFNvbWUgc3RhdGVzIGNhbiBiZSBza2lwcGVkIG92ZXIsIHNvIHJlbWVtYmVyIHdoYXQgaXMgc3RpbGwgaW5jb21wbGV0ZS5cbiAgdmFyIGRpZCA9IHsncmVzcG9uc2UnOmZhbHNlLCAnbG9hZGluZyc6ZmFsc2UsICdlbmQnOmZhbHNlfVxuXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBvbl9zdGF0ZV9jaGFuZ2VcbiAgeGhyLm9wZW4ob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJpLCB0cnVlKSAvLyBhc3luY2hyb25vdXNcbiAgaWYoaXNfY29ycylcbiAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gISEgb3B0aW9ucy53aXRoQ3JlZGVudGlhbHNcbiAgeGhyLnNlbmQob3B0aW9ucy5ib2R5KVxuICByZXR1cm4geGhyXG5cbiAgZnVuY3Rpb24gb25fc3RhdGVfY2hhbmdlKGV2ZW50KSB7XG4gICAgaWYodGltZWRfb3V0KVxuICAgICAgcmV0dXJuIHJlcXVlc3QubG9nLmRlYnVnKCdJZ25vcmluZyB0aW1lZCBvdXQgc3RhdGUgY2hhbmdlJywgeydzdGF0ZSc6eGhyLnJlYWR5U3RhdGUsICdpZCc6eGhyLmlkfSlcblxuICAgIHJlcXVlc3QubG9nLmRlYnVnKCdTdGF0ZSBjaGFuZ2UnLCB7J3N0YXRlJzp4aHIucmVhZHlTdGF0ZSwgJ2lkJzp4aHIuaWQsICd0aW1lZF9vdXQnOnRpbWVkX291dH0pXG5cbiAgICBpZih4aHIucmVhZHlTdGF0ZSA9PT0gWEhSLk9QRU5FRCkge1xuICAgICAgcmVxdWVzdC5sb2cuZGVidWcoJ1JlcXVlc3Qgc3RhcnRlZCcsIHsnaWQnOnhoci5pZH0pXG4gICAgICBmb3IgKHZhciBrZXkgaW4gb3B0aW9ucy5oZWFkZXJzKVxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIG9wdGlvbnMuaGVhZGVyc1trZXldKVxuICAgIH1cblxuICAgIGVsc2UgaWYoeGhyLnJlYWR5U3RhdGUgPT09IFhIUi5IRUFERVJTX1JFQ0VJVkVEKVxuICAgICAgb25fcmVzcG9uc2UoKVxuXG4gICAgZWxzZSBpZih4aHIucmVhZHlTdGF0ZSA9PT0gWEhSLkxPQURJTkcpIHtcbiAgICAgIG9uX3Jlc3BvbnNlKClcbiAgICAgIG9uX2xvYWRpbmcoKVxuICAgIH1cblxuICAgIGVsc2UgaWYoeGhyLnJlYWR5U3RhdGUgPT09IFhIUi5ET05FKSB7XG4gICAgICBvbl9yZXNwb25zZSgpXG4gICAgICBvbl9sb2FkaW5nKClcbiAgICAgIG9uX2VuZCgpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25fcmVzcG9uc2UoKSB7XG4gICAgaWYoZGlkLnJlc3BvbnNlKVxuICAgICAgcmV0dXJuXG5cbiAgICBkaWQucmVzcG9uc2UgPSB0cnVlXG4gICAgcmVxdWVzdC5sb2cuZGVidWcoJ0dvdCByZXNwb25zZScsIHsnaWQnOnhoci5pZCwgJ3N0YXR1cyc6eGhyLnN0YXR1c30pXG4gICAgY2xlYXJUaW1lb3V0KHhoci50aW1lb3V0VGltZXIpXG4gICAgeGhyLnN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzIC8vIE5vZGUgcmVxdWVzdCBjb21wYXRpYmlsaXR5XG5cbiAgICAvLyBEZXRlY3QgZmFpbGVkIENPUlMgcmVxdWVzdHMuXG4gICAgaWYoaXNfY29ycyAmJiB4aHIuc3RhdHVzQ29kZSA9PSAwKSB7XG4gICAgICB2YXIgY29yc19lcnIgPSBuZXcgRXJyb3IoJ0NPUlMgcmVxdWVzdCByZWplY3RlZDogJyArIG9wdGlvbnMudXJpKVxuICAgICAgY29yc19lcnIuY29ycyA9ICdyZWplY3RlZCdcblxuICAgICAgLy8gRG8gbm90IHByb2Nlc3MgdGhpcyByZXF1ZXN0IGZ1cnRoZXIuXG4gICAgICBkaWQubG9hZGluZyA9IHRydWVcbiAgICAgIGRpZC5lbmQgPSB0cnVlXG5cbiAgICAgIHJldHVybiBvcHRpb25zLmNhbGxiYWNrKGNvcnNfZXJyLCB4aHIpXG4gICAgfVxuXG4gICAgb3B0aW9ucy5vblJlc3BvbnNlKG51bGwsIHhocilcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uX2xvYWRpbmcoKSB7XG4gICAgaWYoZGlkLmxvYWRpbmcpXG4gICAgICByZXR1cm5cblxuICAgIGRpZC5sb2FkaW5nID0gdHJ1ZVxuICAgIHJlcXVlc3QubG9nLmRlYnVnKCdSZXNwb25zZSBib2R5IGxvYWRpbmcnLCB7J2lkJzp4aHIuaWR9KVxuICAgIC8vIFRPRE86IE1heWJlIHNpbXVsYXRlIFwiZGF0YVwiIGV2ZW50cyBieSB3YXRjaGluZyB4aHIucmVzcG9uc2VUZXh0XG4gIH1cblxuICBmdW5jdGlvbiBvbl9lbmQoKSB7XG4gICAgaWYoZGlkLmVuZClcbiAgICAgIHJldHVyblxuXG4gICAgZGlkLmVuZCA9IHRydWVcbiAgICByZXF1ZXN0LmxvZy5kZWJ1ZygnUmVxdWVzdCBkb25lJywgeydpZCc6eGhyLmlkfSlcblxuICAgIHhoci5ib2R5ID0geGhyLnJlc3BvbnNlVGV4dFxuICAgIGlmKG9wdGlvbnMuanNvbikge1xuICAgICAgdHJ5ICAgICAgICB7IHhoci5ib2R5ID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSB9XG4gICAgICBjYXRjaCAoZXIpIHsgcmV0dXJuIG9wdGlvbnMuY2FsbGJhY2soZXIsIHhocikgICAgICAgIH1cbiAgICB9XG5cbiAgICBvcHRpb25zLmNhbGxiYWNrKG51bGwsIHhociwgeGhyLmJvZHkpXG4gIH1cblxufSAvLyByZXF1ZXN0XG5cbnJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG5yZXF1ZXN0LkRFRkFVTFRfVElNRU9VVCA9IERFRkFVTFRfVElNRU9VVDtcblxuLy9cbi8vIGRlZmF1bHRzXG4vL1xuXG5yZXF1ZXN0LmRlZmF1bHRzID0gZnVuY3Rpb24ob3B0aW9ucywgcmVxdWVzdGVyKSB7XG4gIHZhciBkZWYgPSBmdW5jdGlvbiAobWV0aG9kKSB7XG4gICAgdmFyIGQgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgaWYodHlwZW9mIHBhcmFtcyA9PT0gJ3N0cmluZycpXG4gICAgICAgIHBhcmFtcyA9IHsndXJpJzogcGFyYW1zfTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBwYXJhbXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChwYXJhbXNbaV0gPT09IHVuZGVmaW5lZCkgcGFyYW1zW2ldID0gb3B0aW9uc1tpXVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1ldGhvZChwYXJhbXMsIGNhbGxiYWNrKVxuICAgIH1cbiAgICByZXR1cm4gZFxuICB9XG4gIHZhciBkZSA9IGRlZihyZXF1ZXN0KVxuICBkZS5nZXQgPSBkZWYocmVxdWVzdC5nZXQpXG4gIGRlLnBvc3QgPSBkZWYocmVxdWVzdC5wb3N0KVxuICBkZS5wdXQgPSBkZWYocmVxdWVzdC5wdXQpXG4gIGRlLmhlYWQgPSBkZWYocmVxdWVzdC5oZWFkKVxuICByZXR1cm4gZGVcbn1cblxuLy9cbi8vIEhUVFAgbWV0aG9kIHNob3J0Y3V0c1xuLy9cblxudmFyIHNob3J0Y3V0cyA9IFsgJ2dldCcsICdwdXQnLCAncG9zdCcsICdoZWFkJyBdO1xuc2hvcnRjdXRzLmZvckVhY2goZnVuY3Rpb24oc2hvcnRjdXQpIHtcbiAgdmFyIG1ldGhvZCA9IHNob3J0Y3V0LnRvVXBwZXJDYXNlKCk7XG4gIHZhciBmdW5jICAgPSBzaG9ydGN1dC50b0xvd2VyQ2FzZSgpO1xuXG4gIHJlcXVlc3RbZnVuY10gPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYodHlwZW9mIG9wdHMgPT09ICdzdHJpbmcnKVxuICAgICAgb3B0cyA9IHsnbWV0aG9kJzptZXRob2QsICd1cmknOm9wdHN9O1xuICAgIGVsc2Uge1xuICAgICAgb3B0cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob3B0cykpO1xuICAgICAgb3B0cy5tZXRob2QgPSBtZXRob2Q7XG4gICAgfVxuXG4gICAgdmFyIGFyZ3MgPSBbb3B0c10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMsIFsxXSkpO1xuICAgIHJldHVybiByZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG59KVxuXG4vL1xuLy8gQ291Y2hEQiBzaG9ydGN1dFxuLy9cblxucmVxdWVzdC5jb3VjaCA9IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJylcbiAgICBvcHRpb25zID0geyd1cmknOm9wdGlvbnN9XG5cbiAgLy8gSnVzdCB1c2UgdGhlIHJlcXVlc3QgQVBJIHRvIGRvIEpTT04uXG4gIG9wdGlvbnMuanNvbiA9IHRydWVcbiAgaWYob3B0aW9ucy5ib2R5KVxuICAgIG9wdGlvbnMuanNvbiA9IG9wdGlvbnMuYm9keVxuICBkZWxldGUgb3B0aW9ucy5ib2R5XG5cbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wXG5cbiAgdmFyIHhociA9IHJlcXVlc3Qob3B0aW9ucywgY291Y2hfaGFuZGxlcilcbiAgcmV0dXJuIHhoclxuXG4gIGZ1bmN0aW9uIGNvdWNoX2hhbmRsZXIoZXIsIHJlc3AsIGJvZHkpIHtcbiAgICBpZihlcilcbiAgICAgIHJldHVybiBjYWxsYmFjayhlciwgcmVzcCwgYm9keSlcblxuICAgIGlmKChyZXNwLnN0YXR1c0NvZGUgPCAyMDAgfHwgcmVzcC5zdGF0dXNDb2RlID4gMjk5KSAmJiBib2R5LmVycm9yKSB7XG4gICAgICAvLyBUaGUgYm9keSBpcyBhIENvdWNoIEpTT04gb2JqZWN0IGluZGljYXRpbmcgdGhlIGVycm9yLlxuICAgICAgZXIgPSBuZXcgRXJyb3IoJ0NvdWNoREIgZXJyb3I6ICcgKyAoYm9keS5lcnJvci5yZWFzb24gfHwgYm9keS5lcnJvci5lcnJvcikpXG4gICAgICBmb3IgKHZhciBrZXkgaW4gYm9keSlcbiAgICAgICAgZXJba2V5XSA9IGJvZHlba2V5XVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyLCByZXNwLCBib2R5KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2soZXIsIHJlc3AsIGJvZHkpO1xuICB9XG59XG5cbi8vXG4vLyBVdGlsaXR5XG4vL1xuXG5mdW5jdGlvbiBub29wKCkge31cblxuZnVuY3Rpb24gZ2V0TG9nZ2VyKCkge1xuICB2YXIgbG9nZ2VyID0ge31cbiAgICAsIGxldmVscyA9IFsndHJhY2UnLCAnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ11cbiAgICAsIGxldmVsLCBpXG5cbiAgZm9yKGkgPSAwOyBpIDwgbGV2ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV2ZWwgPSBsZXZlbHNbaV1cblxuICAgIGxvZ2dlcltsZXZlbF0gPSBub29wXG4gICAgaWYodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0pXG4gICAgICBsb2dnZXJbbGV2ZWxdID0gZm9ybWF0dGVkKGNvbnNvbGUsIGxldmVsKVxuICB9XG5cbiAgcmV0dXJuIGxvZ2dlclxufVxuXG5mdW5jdGlvbiBmb3JtYXR0ZWQob2JqLCBtZXRob2QpIHtcbiAgcmV0dXJuIGZvcm1hdHRlZF9sb2dnZXJcblxuICBmdW5jdGlvbiBmb3JtYXR0ZWRfbG9nZ2VyKHN0ciwgY29udGV4dCkge1xuICAgIGlmKHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0JylcbiAgICAgIHN0ciArPSAnICcgKyBKU09OLnN0cmluZ2lmeShjb250ZXh0KVxuXG4gICAgcmV0dXJuIG9ialttZXRob2RdLmNhbGwob2JqLCBzdHIpXG4gIH1cbn1cblxuLy8gUmV0dXJuIHdoZXRoZXIgYSBVUkwgaXMgYSBjcm9zcy1kb21haW4gcmVxdWVzdC5cbmZ1bmN0aW9uIGlzX2Nyb3NzRG9tYWluKHVybCkge1xuICB2YXIgcnVybCA9IC9eKFtcXHdcXCtcXC5cXC1dKzopKD86XFwvXFwvKFteXFwvPyM6XSopKD86OihcXGQrKSk/KT8vXG5cbiAgLy8galF1ZXJ5ICM4MTM4LCBJRSBtYXkgdGhyb3cgYW4gZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nXG4gIC8vIGEgZmllbGQgZnJvbSB3aW5kb3cubG9jYXRpb24gaWYgZG9jdW1lbnQuZG9tYWluIGhhcyBiZWVuIHNldFxuICB2YXIgYWpheExvY2F0aW9uXG4gIHRyeSB7IGFqYXhMb2NhdGlvbiA9IGxvY2F0aW9uLmhyZWYgfVxuICBjYXRjaCAoZSkge1xuICAgIC8vIFVzZSB0aGUgaHJlZiBhdHRyaWJ1dGUgb2YgYW4gQSBlbGVtZW50IHNpbmNlIElFIHdpbGwgbW9kaWZ5IGl0IGdpdmVuIGRvY3VtZW50LmxvY2F0aW9uXG4gICAgYWpheExvY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcbiAgICBhamF4TG9jYXRpb24uaHJlZiA9IFwiXCI7XG4gICAgYWpheExvY2F0aW9uID0gYWpheExvY2F0aW9uLmhyZWY7XG4gIH1cblxuICB2YXIgYWpheExvY1BhcnRzID0gcnVybC5leGVjKGFqYXhMb2NhdGlvbi50b0xvd2VyQ2FzZSgpKSB8fCBbXVxuICAgICwgcGFydHMgPSBydXJsLmV4ZWModXJsLnRvTG93ZXJDYXNlKCkgKVxuXG4gIHZhciByZXN1bHQgPSAhIShcbiAgICBwYXJ0cyAmJlxuICAgICggIHBhcnRzWzFdICE9IGFqYXhMb2NQYXJ0c1sxXVxuICAgIHx8IHBhcnRzWzJdICE9IGFqYXhMb2NQYXJ0c1syXVxuICAgIHx8IChwYXJ0c1szXSB8fCAocGFydHNbMV0gPT09IFwiaHR0cDpcIiA/IDgwIDogNDQzKSkgIT0gKGFqYXhMb2NQYXJ0c1szXSB8fCAoYWpheExvY1BhcnRzWzFdID09PSBcImh0dHA6XCIgPyA4MCA6IDQ0MykpXG4gICAgKVxuICApXG5cbiAgLy9jb25zb2xlLmRlYnVnKCdpc19jcm9zc0RvbWFpbignK3VybCsnKSAtPiAnICsgcmVzdWx0KVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIE1JVCBMaWNlbnNlIGZyb20gaHR0cDovL3BocGpzLm9yZy9mdW5jdGlvbnMvYmFzZTY0X2VuY29kZTozNThcbmZ1bmN0aW9uIGI2NF9lbmMgKGRhdGEpIHtcbiAgICAvLyBFbmNvZGVzIHN0cmluZyB1c2luZyBNSU1FIGJhc2U2NCBhbGdvcml0aG1cbiAgICB2YXIgYjY0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiO1xuICAgIHZhciBvMSwgbzIsIG8zLCBoMSwgaDIsIGgzLCBoNCwgYml0cywgaSA9IDAsIGFjID0gMCwgZW5jPVwiXCIsIHRtcF9hcnIgPSBbXTtcblxuICAgIGlmICghZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvLyBhc3N1bWUgdXRmOCBkYXRhXG4gICAgLy8gZGF0YSA9IHRoaXMudXRmOF9lbmNvZGUoZGF0YSsnJyk7XG5cbiAgICBkbyB7IC8vIHBhY2sgdGhyZWUgb2N0ZXRzIGludG8gZm91ciBoZXhldHNcbiAgICAgICAgbzEgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgbzIgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgbzMgPSBkYXRhLmNoYXJDb2RlQXQoaSsrKTtcblxuICAgICAgICBiaXRzID0gbzE8PDE2IHwgbzI8PDggfCBvMztcblxuICAgICAgICBoMSA9IGJpdHM+PjE4ICYgMHgzZjtcbiAgICAgICAgaDIgPSBiaXRzPj4xMiAmIDB4M2Y7XG4gICAgICAgIGgzID0gYml0cz4+NiAmIDB4M2Y7XG4gICAgICAgIGg0ID0gYml0cyAmIDB4M2Y7XG5cbiAgICAgICAgLy8gdXNlIGhleGV0cyB0byBpbmRleCBpbnRvIGI2NCwgYW5kIGFwcGVuZCByZXN1bHQgdG8gZW5jb2RlZCBzdHJpbmdcbiAgICAgICAgdG1wX2FyclthYysrXSA9IGI2NC5jaGFyQXQoaDEpICsgYjY0LmNoYXJBdChoMikgKyBiNjQuY2hhckF0KGgzKSArIGI2NC5jaGFyQXQoaDQpO1xuICAgIH0gd2hpbGUgKGkgPCBkYXRhLmxlbmd0aCk7XG5cbiAgICBlbmMgPSB0bXBfYXJyLmpvaW4oJycpO1xuXG4gICAgc3dpdGNoIChkYXRhLmxlbmd0aCAlIDMpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgZW5jID0gZW5jLnNsaWNlKDAsIC0yKSArICc9PSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBlbmMgPSBlbmMuc2xpY2UoMCwgLTEpICsgJz0nO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gZW5jO1xufVxuICAgIHJldHVybiByZXF1ZXN0O1xuLy9VTUQgRk9PVEVSIFNUQVJUXG59KSk7XG4vL1VNRCBGT09URVIgRU5EXG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHJlcXVlc3QgPSByZXF1aXJlKCdicm93c2VyLXJlcXVlc3QnKTtcblxudmFyIHBvcGlseSA9IHdpbmRvdy5wb3BpbHkgfHwge307XG5cbnZhciBfZXJyb3IgPSBmdW5jdGlvbihtc2csIGVycm9yKSB7XG4gIHJldHVybiB7bXNnOiBtc2csIGVycm9yOiBlcnJvcn07XG59O1xuICBcbnZhciBfcmVxdWVzdCA9IGZ1bmN0aW9uKG1ldGhvZCwgcGF0aCwgZGF0YSwgY2FsbGJhY2spIHtcbiAgdmFyIERFRkFVTFRfVVJMID0gJ2h0dHBzOi8vcG9waWx5LmNvbSc7XG4gIHZhciBERUZBVUxUX0JBU0VfUEFUSCA9ICcvYXBpJztcblxuICB2YXIgYXBpVXJsID0gcG9waWx5LmFwaS5hcGlVcmw7XG4gIGlmKCFwb3BpbHkuYXBpLmFwaVVybCkge1xuICAgIGFwaVVybCA9IERFRkFVTFRfVVJMO1xuICB9IFxuICBhcGlVcmwgPSBhcGlVcmwgKyBERUZBVUxUX0JBU0VfUEFUSDtcblxuICB2YXIgcGFyYW1zID0ge1xuICAgIG1ldGhvZDogbWV0aG9kLFxuICAgIGhlYWRlcnM6IHsgXG4gICAgICAnQXV0aG9yaXphdGlvbic6ICdUb2tlbiAnICsgcG9waWx5LmFwaS50b2tlbixcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICB1cmw6IGFwaVVybCArIHBhdGgvLyArICc/Zm9ybWF0PWFwaSdcbiAgfTtcbiAgICAgIFxuICBpZigncXMnIGluIGRhdGEpIHtcbiAgICBwYXJhbXNbJ3FzJ10gPSBkYXRhWydxcyddO1xuICAgIHBhcmFtc1snanNvbiddID0gdHJ1ZTtcbiAgfVxuICBpZignanNvbicgaW4gZGF0YSkge1xuICAgIHBhcmFtc1snYm9keSddID0gZGF0YVsnanNvbiddO1xuICAgIHBhcmFtc1snanNvbiddID0gdHJ1ZTtcbiAgfVxuICBpZignZm9ybScgaW4gZGF0YSkge1xuICAgIHBhcmFtc1snZm9ybURhdGEnXSA9IGRhdGFbJ2Zvcm0nXTtcbiAgfVxuICBcbiAgcmVxdWVzdChwYXJhbXMsIGZ1bmN0aW9uKGVyciwgaHR0cFJlc3BvbnNlLCBib2R5KSB7XG4gICAgaWYoZXJyKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKF9lcnJvcignUmVxdWVzdCBlcnJvcicsIGVycikpO1xuICAgICAgXG4gICAgaWYoaHR0cFJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMSlcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0ludmFsaWQgQVBJIHRva2VuJykpO1xuXG4gICAgaWYoaHR0cFJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMClcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0JhZCByZXF1ZXN0JywgYm9keSkpO1xuICAgICAgXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXNwb25zZSA9IGJvZHk7XG4gICAgICBpZih0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0Vycm9yOiAnK2UsIGUpIClcbiAgICB9XG5cbiAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG5cbiAgfSk7XG59O1xuXG52YXIgcGFja0NhbGN1bGF0aW9ucyA9IGZ1bmN0aW9uKGNhbGN1bGF0aW9ucykge1xuICB2YXIgcGFja2VkU3RyID0gJyc7XG4gIGNhbGN1bGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGYsIGkpIHtcbiAgICB2YXIgZmlsdGVyU3RyID0gJyc7XG4gICAgaWYoaSA+IDApXG4gICAgICBmaWx0ZXJTdHIgKz0gJ19fJztcblxuICAgIGZpbHRlclN0ciArPSBmWydjb2x1bW4nXSArICchJyArIGZbJ2NhbGN1bGF0aW9uJ107XG4gICAgcGFja2VkU3RyICs9IGZpbHRlclN0clxuICB9KTtcbiAgcmV0dXJuIHBhY2tlZFN0cjtcbn07ICAgICAgIFxuICAgICAgICBcbnBvcGlseS5hcGkgPSB7XG4gIGFkZFNvdXJjZTogZnVuY3Rpb24oc291cmNlRGF0YSwgY2IpIHtcbiAgICBcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFsnY29sdW1ucycsICd0aXRsZScsICdkZXNjcmlwdGlvbiddLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZihrZXkgaW4gc291cmNlRGF0YSlcbiAgICAgICAgZGF0YVtrZXldID0gc291cmNlRGF0YVtrZXldO1xuICAgIH0pXG5cbiAgICBpZigndXJsJyBpbiBzb3VyY2VEYXRhKSB7XG4gICAgICBkYXRhWyd1cmwnXSA9IHNvdXJjZURhdGFbJ3VybCddXG4gICAgICBfcmVxdWVzdCgnUE9TVCcsICcvc291cmNlcy8nLCB7anNvbjogZGF0YX0sIGNiKTtcbiAgICB9XG5cbiAgICBlbHNlIGlmKCdjb25uZWN0aW9uX3N0cmluZycgaW4gc291cmNlRGF0YSApIHtcbiAgICAgIGRhdGFbJ2Nvbm5lY3Rpb25fc3RyaW5nJ10gPSBzb3VyY2VEYXRhWydjb25uZWN0aW9uX3N0cmluZyddXG4gICAgICBkYXRhWydxdWVyeSddID0gc291cmNlRGF0YVsncXVlcnknXVxuICAgICAgX3JlcXVlc3QoJ1BPU1QnLCAnL3NvdXJjZXMvJywge2pzb246IGRhdGF9LCBjYik7XG4gICAgfVxuICAgIFxuICAgIGVsc2VcbiAgICAgIGNiKCd1cmwgb3IgY29ubmVjdGlvbl9zdHJpbmcgaXMgcmVxdWlyZWQnKTtcbiAgfSxcblxuXG4gIGdldFNvdXJjZXM6IGZ1bmN0aW9uKGNiKSB7XG4gICAgX3JlcXVlc3QoJ0dFVCcsICcvc291cmNlcy8nLCB7fSwgY2IpO1xuICB9LFxuXG5cbiAgZ2V0U291cmNlOiBmdW5jdGlvbihzb3VyY2VJZCwgY2IpIHtcbiAgICBfcmVxdWVzdCgnR0VUJywgJy9zb3VyY2VzLycrc291cmNlSWQrJy8nLCB7fSwgY2IpO1xuICB9LFxuXG5cbiAgZ2V0SW5zaWdodHM6IGZ1bmN0aW9uKHNvdXJjZUlkLCBwYXJhbXMsIGNiKSB7XG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuICAgIHZhciBwYXlsb2FkID0geydzb3VyY2UnOiBzb3VyY2VJZH07XG5cbiAgICBbJ2NvbHVtbnMnLCAnaW5zaWdodF90eXBlcycsICdpbnNpZ2h0X2FjdGlvbnMnXS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgaWYoa2V5IGluIHBhcmFtcylcbiAgICAgICAgcGF5bG9hZFtrZXldID0gcGFyYW1zW2tleV0uam9pbignLCcpXG4gICAgfSk7XG5cbiAgICBpZignc2luZ2xlJyBpbiBwYXJhbXMpIHtcbiAgICAgIHBheWxvYWRbJ3NpbmdsZSddID0gcGFyYW1zWydzaW5nbGUnXTtcbiAgICB9XG5cbiAgICBpZignY2FsY3VsYXRpb25zJyBpbiBwYXJhbXMpIHtcbiAgICAgIHBheWxvYWRbJ2NhbGN1bGF0aW9ucyddID0gcGFja0NhbGN1bGF0aW9ucyhwYXJhbXNbJ2NhbGN1bGF0aW9ucyddKTtcbiAgICB9XG5cbiAgICBfcmVxdWVzdCgnR0VUJywgJy9pbnNpZ2h0cy8nLCB7cXM6IHBheWxvYWR9LCBjYik7XG4gIH0sXG5cbiAgZ2V0SW5zaWdodDogZnVuY3Rpb24oaW5zaWdodElkLCBwYXJhbXMsIGNiKSB7XG4gICAgdmFyIHBheWxvYWQgPSB7fTsgICAgXG4gICAgX3JlcXVlc3QoJ0dFVCcsICcvaW5zaWdodHMvJyArIGluc2lnaHRJZCArICcvJywge3FzOiBwYXlsb2FkfSwgY2IpO1xuICB9LFxuXG4gIHNldFRva2VuOiBmdW5jdGlvbih0b2tlbikge1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgfSxcblxuICBzZXRVUkw6IGZ1bmN0aW9uKGFwaVVybCkge1xuICAgIHRoaXMuYXBpVXJsID0gYXBpVXJsO1xuICB9XG59XG5cbndpbmRvdy5wb3BpbHkgPSBwb3BpbHk7XG5tb2R1bGUuZXhwb3J0cyA9IHBvcGlseTtcbiJdfQ==

'use strict';
    
(function(window) {
  var popily = window.popily || {};
  popily.chart = {};
  popily.chart.chartTypes = {};
  popily.chart.baseChart = {
    defaults: {
      options: {
          width: '100%',
          height: '100%',
          style: 'detail',
          rotated: false,
          redrawOnResize: true,
          colors: [
            '#54C88A', '#BBD442', '#85C4ED', '#FFC59C', '#4FB27A', '#741699', '#FF7364',
            '#F1C40F', '#DC8345', '#E74C3C', '#096C34', '#4D1567', '#98460C', '#DAF16B',
            '#F9D543', '#947700', '#188849', '#CC3A7F', '#A01507', '#F9D543', '#DB5C98',
            '#3499DB', '#FF988E', '#319D60', '#BC9805', '#E9F998', '#628E0B', '#1E4C7C',
            '#7ECEA1', '#4F78A3', '#C01465', '#F1C40F', '#0F85D1', '#9A51B7', '#7DA0C4',
            '#BB7FD2', '#34618F', '#947700', '#FFE26C', '#92094A', '#BF6322', '#58ADE3',
            '#9FB921', '#0665A2', '#8333A2', '#0F3863', '#BC9805', '#FFE26C', '#E989B6',
            '#C92918', '#FAA96F'
          ],
          background: false,
          xAxis: true,
          yAxis: true,
          formatters: []
      },
      categoryLimit: 500,
      barBubbleCutoff: 30,
      chartPadding: function() { return {lefright: 0, top: 0 }; }
    },
    resize: function(chartObj, width, height) {
      //console.log(1);
      chartObj.resize(width, height);
    },
    formatChartData: function(axisAssignments, apiResponse, chartableColumns) {
      var newData = {};
      var possibleAxis = ['x','y','z'];

      newData.chartData = {};
      newData.chartData.metadata = {};
      newData.chartData.defaultVariation = apiResponse.default_variation;
      newData.chartData.calculation = apiResponse.calculation;

      _.each(possibleAxis, function(axis) {
        if(axisAssignments.hasOwnProperty(axis)) {
          var values = axisAssignments[axis].values;
          if(axisAssignments[axis].data_type === 'coordinate') {
            values = _.map(values, JSON.parse);
          }

          newData.chartData[axis] = {
            values: values,
            label: axisAssignments[axis].column_header,
            dataType: axisAssignments[axis].data_type,
            possibleDataTypes: axisAssignments[axis].possible_data_types
          }
        }
      });

      newData.chartData.columns = _.map(chartableColumns, function(column) {
        return {
          values: column.values,
          label: column.column_header,
          dataType: column.data_type,
          possibleDataTypes: column.possible_data_types
        }
      });

      if(apiResponse.insight_metadata) {
        newData.chartData.metadata = apiResponse.insight_metadata;
      }

      return newData;
    },
    chartableColumns: function(columns,valueFilters,hideColumns) {
      var filtered = _.keys(valueFilters);
      var chartables = _.filter(columns, function(column) {
          
          if(_.contains(hideColumns,column.column_header)) {
            return false;
          }
          
          if(!_.contains(filtered,column.column_header)) {
            return true;
          }
          else if(_.isArray(valueFilters[column.column_header]) && valueFilters[column.column_header].length > 1) {
            return true;
          }
          return false;
      });

      return chartables;
    },
    valueFilters: function(transformations) {
      if(_.isUndefined(transformations)) {
        return {};
      }

      var filters = {};
      _.each(transformations,function(transformation) {
        if(_.isUndefined(transformation.op) || _(['eq','in']).contains(transformation.op)) {
          filters[transformation.column] = transformation.value;
        }
      });

      return filters;
    }
  };

  popily.chart.create = function(apiResponse) {
    window.apiResponse = apiResponse;
    var ds = popily.dataset(apiResponse);

    return {
      dataset : function() {
        return ds;
      },
      
      draw: function(element, options) {
        
        var that = this;
        var calculation = apiResponse.calculation;

        // Determine the chart type based on the data
        var valueFilters = popily.chart.baseChart.valueFilters(options.transformations);
        var chartableColumns = popily.chart.baseChart.chartableColumns(ds.getColumns(),valueFilters,options.hideColumns||[]);
        var chartType = popily.chart.analyze.chartTypeForData(chartableColumns, calculation, options);
        var chartClass = popily.chart.chartTypes[chartType];
        
        // Assign the data to axis (potentially modifying its structure) 
        // and manipulate the format expected by charting functions
        var axisAssignments = chartClass.assignAxis(chartableColumns, calculation, options);
        var formattedData = popily.chart.baseChart.formatChartData(axisAssignments, apiResponse, chartableColumns);

        // Build a title
        var labels = popily.chart.generateLabels(calculation, formattedData.chartData.columns, options.transformations || []);
        
        // Add custom CSS if requested by user
        var extraCss = '';
        
        _.each(_.keys(popily.chart.baseChart.defaults.options), function(key) {
          if(!(key in options)) {
            options[key] = popily.chart.baseChart.defaults.options[key];
          }
        });
        options.uniqueClassName = _.uniqueId('popily-id-');

        if(typeof element === "string") {
          element = document.querySelector(element);
        }
        
        element.classList.add('popily');
        element.classList.add(options.uniqueClassName);
        element.innerHTML = '';
        if(options.title) {
          var titleElement = document.createElement("div");
          titleElement.classList.add('popily-title');
          if(options.title === true)
            titleElement.innerHTML = labels.title;
          else
            titleElement.innerHTML = options.title;
            
          element.appendChild(titleElement);
          
          var titleCss = '';
          if(options.titleFontSize)
            titleCss += 'font-size: '+options.titleFontSize+';';
          if(options.titleFontFamily)
            titleCss += 'font-family: '+options.titleFontFamily+';';
          if(options.titleFontColor)
            titleCss += 'color: '+options.titleFontColor+';';
          if(titleCss)
            extraCss += '.'+options.uniqueClassName+ ' .popily-title {'+titleCss+'}';
        }
        
        var chartTextCss = '';
        if(options.chartFontSize)
          chartTextCss += 'font-size: '+options.chartFontSize+';';
        if(options.chartFontFamily)
          chartTextCss += 'font-family: '+options.chartFontFamily+';';
        if(options.chartFontColor)
          chartTextCss += 'fill: '+options.chartFontColor+';';
        if(chartTextCss)
          extraCss += '.'+options.uniqueClassName+ ' text {'+chartTextCss+'}';

        if(options.cardBackgroundColor) {
          extraCss += '.'+options.uniqueClassName+ '.popily {background-color: '+options.cardBackgroundColor+'}';
        }
          
        if(extraCss) {
          var style = popily.chart.utils.createStyleElement(extraCss);
          element.appendChild(style);
        }
  
        var chartElement = document.createElement("div");
        chartElement.classList.add('popily-chartarea');
        element.appendChild(chartElement);
        
        // Render the chart
        var chart = chartClass.render(chartElement, options, formattedData);
        return chart;
        
      },
      
    }
  
  } 

  popily.chart.render = function(element, apiResponse, options) {
    var that = this;
    options = options || {};
    
    if(options.filters && !options.transformations) {
      console.log('filters proprtty is deprecated, please rename it to transformations')
      options.transformations = options.filters;
    }      
    var chart = popily.chart.create(apiResponse);
    var ds = chart.dataset();

    if(options.variation) {
      console.log(options.variation);
      ds.assignVariation(options.variation);
    }
    
    if(options.transformations) {
      popily.chart.applyTransformations(ds, options);
    }
    
    return chart.draw(element, options);
    
  };

  popily.chart.loadingMessage = function(element, options) {
    if(typeof element === "string") {
      element = document.querySelector(element);
    }
    var height = (options.height || 320);

    var loaderBox = document.createElement("div");
    loaderBox.classList.add('popily-loading');
    loaderBox.style.cssText = 'height: '+height+'px; line-height: '+height+'px';


    var innerElement = document.createElement("div");
    innerElement.classList.add('popily-loading-inner');
    
    var svgElement = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    svgElement.classList.add('popily-spinner');
    svgElement.setAttribute('width', '65px');
    svgElement.setAttribute('height', '65px');
    svgElement.setAttribute('viewBox', '0 0 66 66');
    
    var circleElement = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    circleElement.setAttribute('class', 'popily-spinner-path');
    circleElement.setAttribute('fill', 'none');
    circleElement.setAttribute('stroke-width', '6');
    circleElement.setAttribute('stroke-linecap', 'round');
    circleElement.setAttribute('cx', '33');
    circleElement.setAttribute('cy', '33');
    circleElement.setAttribute('r', '30');
    svgElement.appendChild(circleElement);
    innerElement.appendChild(svgElement);
    
    if(options.poll) {
      var textElement = document.createElement("div");
      textElement.setAttribute('class', 'popily-loading-text');
      textElement.innerHTML = 'Were doing some calculations to make this chart possible. One moment...';
      innerElement.appendChild(textElement);
    }
      
    loaderBox.appendChild(innerElement);
    element.innerHTML = '';
    element.appendChild(loaderBox);
  };

  var getThen = function(method, slug, serverOptions, poll, element, callback) {
      popily.api[method](slug, serverOptions, function(err, apiResponse) {
        if(apiResponse.hasOwnProperty('insight') && apiResponse.insight === 'not found') {
          
          if(poll && apiResponse.hasOwnProperty('source_status') && apiResponse.source_status !== 'finished') {
            // add waiting text to element

            setTimeout(function() {
              //getThen(method, slug, serverOptions, poll, element, callback);
            },1000);
          }
          else {
            console.warn('No insight found for params ' + JSON.stringify(serverOptions));
          }
        }
        else {
          callback(err, apiResponse);
        }
      });
  };

  popily.chart.getAndRender = function(element, options) {
    var chartOptions = {};
    var serverOptions = {};

    var availableChartOptions = {
      'chartType': 'chartType',
      'colors': 'colors',
      'transformations': 'transformations',
      'filters': 'transformations',
      'xLabel': 'xLabel',
      'yLabel': 'yLabel',
      'xColumn': 'xColumn',
      'groupByColumn': 'groupByColumn',
      'height': 'height',
      'width': 'width',
      'rotated': 'rotated',
      'title': 'title',
      //'xOrder': 'order',
      'barSize': 'barSize',
      'lineSize': 'lineSize',
      'pointSize': 'pointSize',
      'titleFontFamily': 'titleFontFamily',
      'titleFontSize': 'titleFontSize',
      'titleFontColor': 'titleFontColor',
      'chartFontFamily': 'chartFontFamily',
      'chartFontSize': 'chartFontSize',
      'chartFontColor': 'chartFontColor',
      'chartBackgroundColor': 'background',
      'cardBackgroundColor': 'cardBackgroundColor',
      'xGrid': 'xGrid',
      'yGrid': 'yGrid',
      'timeInterval': 'variation',
      'time_interval': 'variation',
      'skipAnimation': 'skipAnimation',
      'legend': 'legend',
      'xRotation': 'xRotation',
      'yRotation': 'yRotation',
      'xAxis': 'xAxis',
      'yAxis': 'yAxis',
      'formatters': 'formatters',
      'hideColumns': 'hideColumns',
    };

    var availableServerOptions = {
      'columns': 'columns',
      'calculation': 'insight_actions',
      'timeInterval': 'time_interval',
      'time_interval': 'time_interval',
      'insight_action': 'insight_actions',
      'analysisType': 'insight_types',
      'calculations': 'calculations'
    };
    
    if(options.hasOwnProperty('xOrder')) {
      console.log('xOrder property is not valid any more, please use transformation with op "order"');
    }

    _.each(_.keys(availableChartOptions), function(option) {
      if(options.hasOwnProperty(option)) {
        chartOptions[availableChartOptions[option]] = options[option];
      }
    });

    _.each(_.keys(availableServerOptions), function(option) {
      if(options.hasOwnProperty(option)) {
        if(['calculation', 'insight_action', 'analysisType'].indexOf(option)!==-1)
          serverOptions[availableServerOptions[option]] = [options[option]];
        else
          serverOptions[availableServerOptions[option]] = options[option];
      }
    });

    serverOptions.full = true;
    var slug, method;

    if(options.hasOwnProperty('insight')) {
      slug = options.insight;
      method = 'getInsight';
    }
    else {
      if(!options.hasOwnProperty('source')) {
        console.warn('Either the insight or source property is required');
        return false;
      }
      serverOptions.single = true;

      slug = options.source;
      method = 'getInsights';
    }

    popily.chart.loadingMessage(element, options);
    
    getThen(method, slug, serverOptions, options.poll, element, function(err, apiResponse) {
        popily.chart.render(element, apiResponse, chartOptions);
    });
  };

  popily.chart.applyTransformations = function(ds, options) {
    options.transformations.forEach(function(transformation) {
      if(['count', 'countUnique'].indexOf(transformation.op) !== -1) {
        popily.chart.applyGroupData(ds, transformation);
      }
      else if('replace' == transformation.op) {
        ds.replaceValues(transformation.column, transformation.replacements);
      }
      else if('normalize' == transformation.op) {
        ds.normalize(transformation.column, transformation.columnNormalized);
        if(!options.formatters.find(function(f) { return f.column==transformation.columnNormalized}) )
          options.formatters.push({
            column: transformation.columnNormalized,
            op: 'sufix',
            value: '%'
          });
      }
      else if('order' == transformation.op) {
        var value = transformation.value || transformation.values;
        var type = value;
        
        if(type && type != 'asc' && type != 'desc')
          type = function(e, idx) { var i = value.indexOf(e[idx]); return i>=0 ? i : 9999; }
        ds.orderBy(transformation.column, type);
      }
      else {
        popily.chart.applyFilter(ds, transformation);
      }
    });
  };

  /*
    filter = [{
      column: <column-name>,
      op: none|eq|noteq,
      values: [<array-of-values]>
    }, .. ]
  */
  popily.chart.applyFilter = function(ds, filter) {
    
    // I think this countUnique should not be here!
    if(filter.op == 'distinct' || filter.op == 'countUnique') {
      console.log('filter countUnique is deprecated please dont use it, use "groupData" instead!');
      ds.countUnique();
    } else {
      ds.filter(filter.column, filter.op || 'eq', filter.value || filter.values);
    }
    
    return ds;
  };
  
  popily.chart.applyGroupData = function(ds, groupData) {
    
    if(groupData.customFunction) {
      var groupFunc = customFunction;
    }
    else if(['count', 'countUnique'].indexOf(groupData.op) !== -1) {
      var groupFunc = popily.dataset[groupData.op]
    }
    else {
      console.error('Unrecognized grouping function');
      return ds;
    }
    
    ds.groupBy(groupData.column, groupFunc, groupData.customDataType || groupFunc.dataType, groupData.groupInto || groupFunc.columnLabel);
    
    return ds;
  };


  if (typeof define === 'function' && define.amd) {
      define("popily", [], function () { return c3; });
  } else if ('undefined' !== typeof exports && 'undefined' !== typeof module) {
      module.exports = popily;
  } else {
      window.popily = popily;
  }
    
})(window);

/**
Analyze data from the Popily API and prepare for rendering
*/

(function(window) {

    var _hasOne = function(columns, dataType) {
        return _.where(columns,{data_type:dataType}).length === 1;
    };

    var _hasOnly = function(columns,dataTypes) {
        return _.every(columns, function(column) { 
                return _(dataTypes).contains(column.data_type); 
            });
    };

    var _hasPossible = function(columns, dataType, possibleType) {
        return _.some(columns, function(column) {
                if(column.data_type != dataType) {
                    return false;
                } 
                return _.contains(column.possible_data_types,possibleType);
            });
    };

    var getColumnForType = function(columns, dataType) {
        return _.findWhere(columns, {data_type: dataType});
    };

    var getTypePattern = function(columns) {
        var dataTypes = _.map(columns, function(column) { return column.data_type });
        dataTypes.sort();
        return dataTypes.toString();
    };

    var _bestForTwo = function(columns,calculation) {
        var bestType;
        var typePattern = getTypePattern(columns);

        // Anything with coordinates needs to be viewed on a map
        if(_hasOne(columns,'coordinate')) {
            bestType = 'interactiveMap';
        }

        // Everything is numeric
        else if(typePattern === 'numeric,numeric') {
            // All the columns have one value. This is like average 
            // of column 1 and average of column 2. Not a great way to 
            // visualize this, but we'll choose bar.
            if(_.every(columns,function(column) { return column.values.length === 1 })) {
                bestType = 'bar';
            }
            else {
                bestType = 'scatterplot';
            }
        }

        // Dates are shown as time series by default
        else if(typePattern === 'datetime,numeric') {
            bestType = 'line';
        }
        
        // Category + number
        else if(typePattern === 'category,numeric') {
            var hasState = _hasPossible(columns,'category','state');
            var hasCountry = _hasPossible(columns,'category','country');
            
            var hasNegative = (function() {
                var numColumn = getColumnForType(columns,'numeric');
                return _.some(numColumn.values, function(value) {
                    return parseFloat(value) < 0;
                })
            })();

            // Default to choropleth maps because those are nice
            if(hasState || hasCountry) {
                bestType = 'choropleth';
            }
            else if(columns[0].values.length > 35 && !hasNegative) {
                bestType = 'bubble';
            }
            else {
                bestType = 'bar';
            }
        }

        return bestType;
    };

    var _bestForThree = function(columns, calculation) {
        var bestType;
        var typePattern = getTypePattern(columns);

        // if datetime and category and number
        if(typePattern === 'category,datetime,numeric') {
            // if calculation is total
            if(calculation === 'sum') {
                bestType = 'stackedArea';
            }
            else {
                bestType = 'multiLine';
            }
        }
        else if(typePattern === 'datetime,numeric,numeric') {
            bestType = 'multiLine';
        }
        else if(typePattern === 'category,category,numeric') {
            if(calculation === 'average') {
                bestType = 'barGrouped';
            }
            else {
                bestType = 'barStacked';
            }
        }
        else if(typePattern === 'category,numeric,numeric') {
            // For example value/range counts (histogram) for multiple
            // number columns
            if(calculation === 'count') {
                bestType = 'barGrouped';
            }
            else {
                bestType = 'scatterplotCategory';
            }
        }
        else if(typePattern === 'category,coordinate,numeric') {
            bestType = 'interactiveMap';
        }
        else if(_hasOnly(columns,['numeric'])) {
            if(_.every(columns,function(column) {return column.values.length === 1})) {
                bestType = 'bubble';
            }
        }

        return bestType;
    };

    var chartTypeForData = function(columns, calculation, options) {
        // The data_type for any column will be one of the four Popily
        // basic data types: category, numeric, datetime, coordinate. 
        // The column will also have a possible_data_types property that may 
        // provide additional context. For example a data_type of category 
        // may also have possible_data_types like state or country.

        var bestType;
        var typePattern = getTypePattern(columns);
        options = options || {};

        var possibleTypes = {
            'bar': ['pie','bubble','bubble2','line'],
            'scatterplotCategory': ['barGrouped'],
            'barGrouped': ['barStacked'],
            'barStacked': ['barGrouped'],
            'bubble': ['bar', 'bubble2'],
            'bubble2': ['bar', 'bubble'],
            'multiLine': ['stackedArea','barGrouped','barStacked', 'radar'],
            'stackedArea': ['multiLine','barGrouped','barStacked', 'radar'],
            'choropleth': ['bar','bubble','bubble2'],
            'line': ['bar']
        };

        if(columns.length === 1) {
            bestType = 'sentence';
        }
        if(columns.length === 2) {
            bestType = _bestForTwo(columns,calculation);
        }
        else if(columns.length === 3) {
            bestType = _bestForThree(columns,calculation);
        }
        else {
            if(_hasOne(columns,'datetime') && _hasOnly(columns,['datetime','numeric'])) {
                bestType = 'multiLine';
            }
            else if(_hasOne(columns,'category') && _hasOnly(columns,['category','numeric'])) {
                if(calculation === 'sum') {
                    bestType = 'barStacked';
                } 
                else {
                    bestType = 'barGrouped';
                }
            }
            else if(_hasOnly(columns,['numeric'])) {
                if(_.every(columns,function(column) {return column.values.length === 1})) {
                    bestType = 'bubble';
                }
            }
        }
        
        if(_.isUndefined(bestType)) {
            bestType = 'table';
        }

        if(options.hasOwnProperty('chartType')) {
            if(options.chartType === 'table') {
                bestType = 'table';
            }

            if(possibleTypes.hasOwnProperty(bestType)) {
                if(_.contains(possibleTypes[bestType], options.chartType)) {
                    bestType = options.chartType;
                }
            }
        }

        return bestType;

    };

    window.popily.chart.analyze = {
        chartTypeForData: chartTypeForData,
        getTypePattern: getTypePattern,
        getColumnForType: getColumnForType
    }
})(window);

(function(window) {

  var c3ify = function(xValues,yValues,zValues) {
      var groupings = [];
      var columns = [];
      var xyz = _.zip(xValues,zValues,yValues);

      //console.log(yValues);

      _.each(_.uniq(xValues),function(x) {
          _.each(_.uniq(zValues),function(z) {
              groupings.push([x,z,0]);
          });

      });

      _.each(xyz,function(_xyz) {
          _.each(groupings, function(pair) {
              if(_xyz[0] === pair[0] && _xyz[1] === pair[1]) {
                  pair[2] = _xyz[2];
              }
          });
      });

      var categories = _.uniq(_.map(groupings, function(group) { return group[0]; }));
      var valuePairs = _.map(groupings, function(group) { return [group[1],group[2]] });
      var labels = _.uniq(_.map(groupings, function(group) { return group[1] }));
      var values;
      _.each(labels, function(label) {
          values = _.map(_.filter(valuePairs, function(vp) {
              return vp[0] == label}),function(vp) {
                  return vp[1]; });
          columns.push([label].concat(values));
      });

      return {
          categories: categories,
          columns: columns,
          groups: labels
      }
  };

  var nanToZero = function(num) {
      if(num === 'nan' || _.isNaN(num)) {
          return 0;
      }
      return num;
  };
  var cleanNanToZero = function(values) {
      values = _.map(values, function(v) {
          return nanToZero(v);
      });
      return values;
  };

  var dayList = ['sunday','monday','tuesday','wednesday','thursday','friday','saturday'];
  var dayListAbbr = ['sun','mon','tue','wed','thu','fri','sat'];
  var monthList = ['january','february','march','april','may','june','july','august','september','october','november','december'];
  var monthListAbbr = ['jan','feb','mar','apr','may','jun','jul','aug','sep','sept','oct','nov','dec'];

  var categoryType = function(values) {
      if(_.every(values, function(v) { return _(dayList).contains(v.toString().toLowerCase()) })) {
          return 'day';
      }

      if(_.every(values, function(v) { return _(dayListAbbr).contains(v.toString().toLowerCase()) })) {
          return 'dayAbbr';
      }

      if(_.every(values, function(v) { return _(monthList).contains(v.toString().toLowerCase()) })) {
          return 'month';
      }

      if(_.every(values, function(v) { return _(monthListAbbr).contains(v.toString().toLowerCase()) })) {
          return 'monthAbbr';
      }

      return null;
  }

  var sortData = function(xYalues,yValues,zValues,limit,order,z2Values) {
      return [xYalues,yValues,zValues,z2Values];
      
      var tuples = _.zip(xYalues,yValues,zValues,z2Values);
          
      if(_.every(xYalues, function(x) { return !isNaN(x); })) {
          var sorted = _.sortBy(tuples, function(t){
                              return parseInt(t[0]);
                          }); 
      }
      else if(_.every(xYalues, function(x) { return !isNaN(x.toString().charAt(0)); })) {
          var sorted = _.sortBy(tuples, function(t){
                              return t[0];
                          }); 
      }
      else {
          var cType = categoryType(xYalues);
          if(cType) {
              var compareList = dayList;
              if(cType == 'dayAbbr') {
                  compareList = dayListAbbr;
              }
              else if(cType == 'month') {
                  compareList = monthList;
              }
              else if(cType == 'monthAbbr') {
                  compareList = monthListAbbr;
              }

              // Sort asc by y
              var sorted = _.sortBy(tuples, function(t){
                                  return compareList.indexOf(t[0].toLowerCase());
                              }); 
          }
          else {
             // Sort asc by y
              var sorted = _.sortBy(tuples, function(t){
                                  return t[1] * -1;
                              }); 
          }
      }

      if(limit && _.size(sorted)>limit ) {
          var i=0;
          var nth = Math.floor(_.size(sorted) / limit);
          sorted = _.filter(sorted, function(item) {
                  i++;
                  return i % nth == 0;
              });
      }
      
      if(order=='asc' || order=='desc') {
          var descMultiply = (order=='desc'?-1:1)
          sorted = _.sortBy(sorted, function(t){
                      return t[1] * descMultiply;
                      });
      } 
      else if(order=='a-z' || order=='z-a') {
          if(_.every(xYalues, function(x) { return !isNaN(x); })) {
              sorted = _.sortBy(sorted, function(t){
                      return parseInt(t[0]);
                  }); 
          }
          else {
              sorted = _.sortBy(sorted, function(t){
                      return t[0];
                  }); 
          }
          if(order=='z-a')
              sorted = sorted.reverse();
      }
      return _.unzip(sorted);
  };

  var checkIsDateStr = function(str) {
    if (!isNaN((new Date(str).getTime()))) {
      return true;
    }
    return false;
  };

  window.popily.chart.chartData = {        
      sortData: sortData,
      cleanNanToZero: cleanNanToZero,
      c3ify: c3ify,
      checkIsDateStr: checkIsDateStr
  }

})(window);

'use strict';

(function(window) {


  window.popily.dataset = function(insightObject) {

    var labels, dataTypes, table, columnsCache, variations;
    
    var initialize = function(insightObject) {
      labels = [];
      dataTypes = [];
      possibleDataTypes = [];
      columnsCache = null;
      variations = insightObject.variations;

      if(insightObject.hasOwnProperty('default_variation')) {
        variations[insightObject.default_variation] = insightObject.columns;
      }

      table = zip(insightObject.columns);
    }
    
    var zip = function(columns) {
      var data = [];
      
      _.each(columns, function(column) {
        labels.push(column.column_header);
        dataTypes.push(column.data_type);
        possibleDataTypes.push(column.possible_data_types);
        if(column.data_type == 'numeric')
          column.values = _.map(column.values, function(v) {return parseFloat(v)});
        data.push(column.values);
      });
      return _.zip.apply(null, data);
    };
    
    var unzip = function(data) {
      var columns = [];
      _.unzip(data).forEach(function(c, i) {
        columns.push({
          column_header:labels[i],
          values:c,
          data_type:dataTypes[i],
          possible_data_types: possibleDataTypes[i]
        });
      });
      return columns;
    }

    var columnIdx = function(column) {
      var idx = labels.indexOf(column);
      if(idx == -1)
        throw Error('column '+column+' not found in dataset');
      return idx;
    };
    
    var dataListeners = []
    var dataChanged = function() {
      columnsCache = null;
      dataListeners.forEach(function(listner) {
        listner();
      })
    }
  
    initialize(insightObject);
    
    return {
    
      orderBy: function(column, type) {
        var idx = columnIdx(column);
        
        if(!type || type == 'asc' || type == 'desc')
          orderTest = function(e, idx) { return e[idx]; }
        else
          orderTest = type;
        
        table = _.sortBy(table, function(e) {
          return orderTest(e, idx);
        });
        if(type == 'desc')
          table.reverse();
        dataChanged();
        return this;
      },
      
      reverse: function() {
        table = table.reverse();
        dataChanged();
        return this;
      },
      
      filter: function(column, op, value) {
        if(_.isUndefined(value)) {
          value = op;
          op = 'eq';
        }
        var idx = columnIdx(column);
        
        if(dataTypes[idx] == 'datetime' && !value instanceof Date)
          value = new Date(value);
        if(value instanceof Date)
          value = value.toISOString().replace('T', 0).slice(0, 19);
        
        if(op == 'eq')
          var testFunc = function(e) {return value.indexOf(e[idx])!==-1}
        else if(op == 'noteq')
          var testFunc = function(e) {return value.indexOf(e[idx])===-1}
        else if(op == 'gt')
          var testFunc = function(e) {return e[idx] > value}
        else if(op == 'gte')
          var testFunc = function(e) {return e[idx] >= value}
        else if(op == 'lt')
          var testFunc = function(e) {return e[idx] < value}
        else if(op == 'lte')
          var testFunc = function(e) {return e[idx] <= value}
        else if(op === 'in')
          var testFunc = function(e) { return _(value).contains(e[idx]) }
        else {
          console.error('Unrecognized filter option: '+op);
          return this; 
        }
        table = _.filter(table, testFunc);
        dataChanged();
        return this;
      },
      
      limit : function(max) {
        if(max && _.size(table)>max ) {
          var i=0;
          var nth = Math.floor(_.size(sorted) / limit);
          table = _.filter(table, function() {
            i++;
            return i % nth == 0;
          });
          dataChanged();
        }
        return this;
      },
      
      groupBy: function(column, groupingFunction, grouppedDataType, grouppedColumnHeader ) {
        var idx = columnIdx(column);
        groupingFunction = groupingFunction || function(e) {return e;};
        grouppedColumnHeader = grouppedColumnHeader || 'groupped';
        grouppedDataType = grouppedDataType || 'numeric';

        var groupped = _.groupBy(table, function(e){ 
          return e[idx]; 
        });
        
        var keysColumn = { 
          column_header: labels[idx],
          data_type: dataTypes[idx],
          values: Object.keys(groupped)
        };
        
        var values = []
        _.map(keysColumn.values, function(k) {
          values.push(groupingFunction(groupped[k])); 
        });
        
        var grouppedColumn = {
          column_header: grouppedColumnHeader,
          data_type: grouppedDataType,
          values: values
        }
        initialize([keysColumn, grouppedColumn]);
        dataChanged();
        return this;
      },

      countUnique: function(column) {
        var idx = columnIdx(column);
        var column = this.getColumns()[idx];
        var counts = _.countBy(column.values, function(val) { return val; });
        var newColumns = [];

        var valColumn = {
          column_header: column.column_header,
          data_type: column.data_type,
          values: _(counts).keys()
        };
        var countColumn = {
          column_header: 'count_0',
          data_type: 'numeric',
          values: _(counts).values()
        };
        initialize([valColumn,countColumn]);
        dataChanged();
        return this;
      },
      
      replaceValues: function(column, replacements) {
        var idx = columnIdx(column);
        
        _.map(table, function(row) {
          if(row[idx] in replacements)
            row[idx] = replacements[row[idx]];
        });
        
        dataChanged();
        return this;
      },
      
      normalize: function(column, columnNormalized) {
        var idx = columnIdx(column);
        var normalizedIdx = columnIdx(columnNormalized);
        
        var groupped = _.groupBy(table, function(e){ 
          return e[idx]; 
        })
        _.map(groupped, function(group) {
          group.sum = _.reduce(group, function(memo, row){ return memo+row[normalizedIdx]; }, 0)
        });

        table.forEach(function(row) {
          var group = groupped[row[idx]];
          row[normalizedIdx] = 100*row[normalizedIdx]/group.sum;
        });
        
        dataChanged();
        return this;
      },
      
      getColumns: function(cb) {
        if(!columnsCache)
          columnsCache = unzip(table);
        
        if(cb) {
          cb(columnsCache);
          return this;
        }
        else
          return columnsCache;
      },
      
      getColumn: function(column, cb) {
        var columns = this.getColumns();
        var column = _.find(columns, function(c) { return c.column_header === column });
        if(cb) {
          cb(column);
          return this;
        }
        else
          return column;
      },

      assignVariation: function(variation) {
        if(variations.hasOwnProperty(variation)) {
          columnsCache = null;
          table = zip(variations[variation]);
        }
      },
      
      onChange: function(cb) {
        dataListeners.push(cb);
      }
    }
  }
  
  popily.dataset.count = function(arr) {
    return arr.length;
  }
  popily.dataset.count.dataType = 'numeric';
  popily.dataset.count.columnLabel = 'Count';
  
  popily.dataset.countUnique = function(arr) {
    return _.uniq(arr).length;
  }
  popily.dataset.countUnique.dataType = 'numeric';
  popily.dataset.countUnique.columnLabel = 'Count unique';

})(window);

(function(window) {
    var nan = -99999;

    var daysDiff = function(dateStrings) {
        var dates = _.map(dateStrings,function(d) { return new Date(d); });
        var minDate = _.min(dates);
        var maxDate = _.max(dates);
        var dateDiff = maxDate - minDate;
        var daysDiff = dateDiff / 1000 / 60 / 60 / 24;

        return daysDiff;
    };

    var formatNumbers = function(numberList, decimalPlaces) {
        var formatted = _.map(numberList, function(num) {
            num = parseFloat(num);

            var formatStr = '0';
            if(_.isUndefined(decimalPlaces)) {
                formatStr += '[.00]'
            }
            else {
                formatStr += '[.';
                for(var i=0;i<decimalPlaces-1;i++) {
                    formatStr += '0';
                }
                formatStr += ']';
            }

            if(num !== "nan" && _.isNumber(num) && !_.isNaN(num)) {
                return numeral(num).format(formatStr);
            }
            return '0.00';
        });
        return formatted;
    };

    var toNumber = function(strList) {
        return _.map(strList, function(val) { 
              if(val.toString().indexOf('.') > 0) {
                  return parseFloat(val);
              }

              return parseInt(val,10) 
          });
    };


    function formatDates(xValues, interval) {
        var dayDiff = daysDiff(xValues); 
        var tickFormatStr = formatFromDayDiff(dayDiff);


        var dateFormatStr = formatFromInterval(interval);
        if(_.isUndefined(interval)) {
            dateFormatStr = formatFromInspection(xValues);
        }

        var dateFormat = d3.time.format(dateFormatStr);
        var tickFormat = d3.time.format(tickFormatStr);
        var fullFormat = d3.time.format('%Y-%m-%d %H:%M:%S');

        var ticksValues = tickFormatValues(xValues, tickFormatStr, dateFormat);

        if(dateFormat != fullFormat) {
            xValues = _.map(xValues, function(d) {
                  return dateFormat(fullFormat.parse(d.split('.')[0]));
              });
        }

        return xValues;
    }

    function formatFromDayDiff(dayDiff) {
        if(dayDiff > 1000)
            return '%Y';
        if(dayDiff > 90)
            return '%Y %B';
        if(dayDiff > 3)
            return '%Y-%m-%d';
        return '%Y-%m-%d %H:%M:%S';
    }

    function formatFromInspection(xValues) {
        var times = _.map(xValues, function(xValue) { return xValue.split(' ')[1] });
        if(_.every(times, function(time) { return time == '00:00:00' })) {
            return '%Y-%m-%d';
        }
        return '%Y-%m-%d %H:%M:%S';
    }
        
    function formatFromInterval(interval) {
        if(interval == 'year')
            return '%Y';
        if(interval == 'month')
            return '%Y %B';
        if(interval == 'week')
            return '%Y-%m-%d';
        if(interval == 'day')
            return  '%Y-%m-%d';
        return '%Y-%m-%d %H:%M:%S';
    }

    function stepInterval(interval) {
        if(interval=='%Y') return function(d, step) {d.setFullYear(d.getFullYear()+step); return d;};
        if(interval=='%Y %B') return function(d, step) {d.setMonth(d.getMonth()+step); return d;};
        if(interval=='%Y-%m-%d') return function(d, step) {d.setDate(d.getDate()+step); return d;};
        return false;
    }

    function tickFormatValues(categories, tickFormatStr, dateFormat) {
        var stepFunc = stepInterval(tickFormatStr);
        if(!stepFunc)
            return null;
        
        var dates = _.map(categories, function(d) { return new Date(d); });
        var minDate = _.min(dates);
        var maxDate = _.max(dates);
        var dateDiff = maxDate - minDate;
        var maxSteps = 10;

        var stepDIff = stepFunc(new Date(1980), 1) - new Date(1980);
        var step = 1;
        var steps = dateDiff/stepDIff;
        if(steps > maxSteps)
            step = Math.floor(steps/maxSteps);
        
        var values = [];
        var date = new Date(minDate.getTime());
        for(; date<=maxDate; date = stepFunc(date, step))
        {
            values.push(dateFormat(date))
        }
        return values;
    }

    // Credit: https://gist.github.com/mathewbyrne/1280286
    function slugify(text) {
      return text.toString().toLowerCase()
        .replace(/\s+/g, '-')           // Replace spaces with -
        .replace(/[^\w\-]+/g, '')       // Remove all non-word chars
        .replace(/\-\-+/g, '-')         // Replace multiple - with single -
        .replace(/^-+/, '')             // Trim - from start of text
        .replace(/-+$/, '');            // Trim - from end of text
    }


      var joinWith = function(arr, word) {
        if(arr.length < 2)
          return arr.join('');
        else
          return [arr.slice(0, -1).join(', '), arr.slice(-1)[0]].join(' ' + word + ' ');
      };

      var wrapLabel = function(label) {
        return '<span class="popily-title-variable" >'+ label + '</span>';
      };

      var capitalize = function(str) {
        return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
      };
      
    var formatAxis = function(axis, options, valueFormater) {

      var formatters = [];
      (options['formatters']||[]).forEach(function(f) {
        if(f.column == axis.label)
          formatters.push(f);
      });
      
      var optionsFormater = function(v) { 
        formatters.forEach(function(f) {
          if(f.op == 'prefix')
            v = f.value + v;
          else if(f.op == 'sufix')
            v = v + f.value;
          else if(f.func)
            v = f.func(v);
        });
        return v;
      };
              
      return function(v) {
        var $$ = this, config = $$.config;
        if(!valueFormater) {
          valueFormater = $$.isTimeSeries() ? $$.defaultAxisTimeFormat : $$.isCategorized() ? $$.categoryName : function (v) { return v < 0 ? v.toFixed(0) : v; };
        }
        return (options[axis+'Prefix']||"") + optionsFormater(valueFormater.call($$, v)) + (options[axis+'Sufix']||"");
      }
    }

    popily.chart.format = {
        formatNumbers: formatNumbers,
        toNumber: toNumber,
        daysDiff: daysDiff,
        formatFromDayDiff: formatFromDayDiff,
        formatFromInterval: formatFromInterval,
        formatFromInspection: formatFromInspection,
        formatDates: formatDates,
        tickFormatValues: tickFormatValues,
        slugify: slugify,
        joinWith: joinWith,
        wrapLabel: wrapLabel,
        capitalize: capitalize,
        formatAxis: formatAxis
    }
})(window);

(function(window) {
  var chartSize = function() {
      var height = window.innerHeight;
      var width = Math.min(window.innerWidth, 1052); // 1052 container max-width
      var mqTest = window.matchMedia( "(min-width: 48em)" );
      if(mqTest) {
          height = height - 460;
      } else {
          height = height - 150;
      }
      if (height > width)
          height = width;
      else if(height < 430)
          height = 430;
      return {'height': height};
  };

  var updateChart = function(element, chart, chartData, chartPadding, rotated) {
      return chart;
      // x axis label height
      var xLabel = element.querySelector('.c3-axis-x-label');
      var xLabelHeight = Math.ceil(xLabel.getBBox().height);
      // x axis labels box sizes
      var xLabelsBox = element.querySelector('.c3-axis.c3-axis-x');
      var xLabelsBoxHeight = Math.ceil(xLabelsBox.getBBox().height);
      var xLabelsBoxWidth = Math.ceil(xLabelsBox.getBBox().width);
      // y axis labels box sizes
      var yLabelsBox = element.querySelector('.c3-axis.c3-axis-y');
      var yLabelsBoxHeight = Math.ceil(yLabelsBox.getBBox().height);
      var yLabelsBoxWidth = Math.ceil(yLabelsBox.getBBox().width);
      // main chart sizes
      var chartBox = element.querySelector('.c3-zoom-rect');
      var chartBoxHeight = Math.ceil(chartBox.getBBox().height);
      var chartBoxWidth = Math.ceil(chartBox.getBBox().width);
      // main svg sizes
      var chartArea = element.querySelector('svg');
      if(!chartArea)
          var chartArea = element.querySelector('svg');
      
      var chartAreaWidth = chartArea.clientWidth || chartArea.parentNode.clientWidth;
      var chartAreaHeight = chartArea.clientHeight || chartArea.parentNode.clientHeight;;

      chartPadding.bottom = xLabelHeight;    
      
      if (!chart.internal.config.axis_rotated) {
            
          // check whether padding bottom is needed
          // add padding bottom if needed
          if (chartBoxHeight + xLabelsBoxHeight + chartPadding.top > chartAreaHeight) {
              var paddingBottom = Math.abs(chartAreaHeight - (chartBoxHeight + xLabelsBoxHeight + chartPadding.top));
              chartPadding.bottom = paddingBottom + xLabelHeight;
          }
          // check whether padding right is needed
          // add padding right if needed
          if (xLabelsBoxWidth > chartBoxWidth) {
              var paddingRight = Math.abs(chartBoxWidth - xLabelsBoxWidth);
              chartPadding.right = paddingRight;
          }
          // check whether padding left is needed
          // add padding left if needed
          if (chartBoxWidth + yLabelsBoxWidth > chartAreaWidth) {
              var paddingLeft = Math.abs(chartAreaWidth - (chartBoxWidth + yLabelsBoxWidth));
              chartPadding.left = paddingLeft;
          }
          chartPadding.left = 500;
          chart = chart.destroy();
          chart = c3.generate(chartData);
          
          // move x axis label on the bottom of the x axis labels box        
          var dyAttr = xLabel.getAttribute('dy');           
          var dyAttrValue = dyAttr.slice(0,-2);        
          function emToPx(emValue) {
              var emSize = parseFloat(getComputedStyle(document.querySelector('html')).getPropertyValue('font-size'));
              return (emSize * emValue);
          }
          var xLabelTop = Number(emToPx(dyAttrValue));        
          var xLabelTransform = xLabelsBoxHeight - xLabelTop - 4;    
          element.querySelector('.c3-axis-x-label').setAttribute('y', xLabelTransform);
      }
      else {
          // check whether padding left is needed
          // add padding left if needed
          if (chartBoxWidth + xLabelsBoxWidth > chartAreaWidth) {
              var paddingLeft = Math.abs(chartAreaWidth - (chartBoxWidth + xLabelsBoxWidth));
              chartPadding.left = paddingLeft;
          }
          // check whether padding bottom is needed
          // add padding bottom if needed
          if (xLabelsBoxHeight > chartBoxHeight) {
              var paddingBottom = Math.abs(chartBoxHeight - xLabelsBoxHeight);   
              chartPadding.bottom = paddingBottom;
          }
          // check whether padding right is needed
          // add padding right if needed
          if (yLabelsBoxWidth > chartBoxWidth) {
              var paddingRight = Math.abs(chartBoxWidth - yLabelsBoxWidth);
              chartPadding.right = paddingRight;
          }
          chart.destroy();
          chart = c3.generate(chartData);
      }
      return chart;
  };    
  
  var createStyleElement = function(css) {
    var style = document.createElement('style');
    style.type = 'text/css';
    if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }
    return style;
  }
  
  var initialAnimation = function(chartData, options) {
    var endingValues = chartData.data.columns;
    if(!options.skipAnimation) {
      chartData.data.columns = [];
      endingValues.forEach(function(c) {
        if(chartData.data.xs)
          chartData.data.columns.push([c[0]]);
        else
          chartData.data.columns.push(c.slice(0).fill(0, 1));
      });
    }
    
    return {
      start: function(chart, cb) {
        if(!options.skipAnimation) {
          cb = cb || function() {};
          chart.load({
            columns: endingValues,
            done: function() {
              setTimeout(cb, 350);
            }
          });
        }
      }
    }
  }

  window.popily.chart.utils = {
    chartSize: chartSize,
    updateChart: updateChart,
    createStyleElement: createStyleElement,
    initialAnimation: initialAnimation };
})(window);

(function(window) {

  // Average number 1 of Category 1 
  
  var joinWithOr = function(arr) {
    return popily.chart.format.joinWith(arr,'or');
  };

   var joinWithAnd = function(arr) {
    return popily.chart.format.joinWith(arr,'and');
  };
  
    
  window.popily.chart.generateLabels = function(calculation, columns, transformations) {
    var makeClause = function(transformation) {
        var t = transformation;

        if(t.op == 'in' && t.value.length < 4) {
          return 'is equal to '+ joinWithOr(t.value);
        }
        else if(t.op == 'eq' || _.isUndefined(t.op))
          return 'is equal to '+ t.value;
        else if(t.op == 'noteq')
          return 'is not equal to '+ t.value;
        else if(t.op == 'gt')
          return 'is greater than '+ t.value;
        else if(t.op == 'gte')
          return 'is greater than or equal to '+ t.value;
        else if(t.op == 'lt')
          return 'is less than '+ t.value;
        else if(t.op == 'lte')
          return 'is less than or equal to'+ t.value;
    };

    var numbers = _.filter(columns, function(column) { return column.dataType === 'numeric'});
    var groupers = _.filter(columns, function(column) { return column.dataType !== 'numeric' });
    var prefix,suffix,clauses;
    if(numbers.length === 1 && numbers[0].label === 'count_0') {
      prefix = 'Number of ';
    }
    else {
      prefix = popily.chart.format.capitalize(calculation) + ' of ' + joinWithAnd(_.map(_.pluck(numbers,'label'),popily.chart.format.wrapLabel));
    }

    if(groupers.length > 0) {
      suffix = ' grouped by ' + joinWithAnd(_.map(_.pluck(groupers,'label'),popily.chart.format.wrapLabel));
    }
    else {
      suffix = '';
    }

    if(transformations.length > 0) {
      var clausePieces = [];
      _.each(transformations, function(transformation) {
        clausePieces.push(popily.chart.format.wrapLabel(transformation.column) + ' ' + makeClause(transformation));
      });

      if(clausePieces.length > 0) {
        clauses = ' where ' + joinWithAnd(clausePieces);
      }

    }
    else {
      clauses = '';
    }
    return {
      title: prefix + suffix + clauses
    }
    
  }

})(window);

'use strict';
    
(function(window) {

  function c3Customizations() {
    
    c3.chart.internal.fn.additionalConfig = {
      axis_x_tick_autorotate: true,
      axis_y_tick_rotate: true,
      grid_background: false,
    }
    
    c3.chart.internal.fn.oldInit = c3.chart.internal.fn.init;
    
    c3.chart.internal.fn.init = function() {
      this.oldInit();
      var $$ = this;
      
      if($$.config.grid_background) {
        var bg = $$.main.insert("rect", "rect");
        bg.classed('popily-background', true)
          .attr('width', $$.width)
          .attr('height', $$.height)
          .attr('fill', $$.config.grid_background);
      }
    }
    
    c3.chart.internal.fn.updateSvgSizeOld = c3.chart.internal.fn.updateSvgSize;
    c3.chart.internal.fn.updateSvgSize = function() {
      var $$ = this;
      $$.updateSvgSizeOld();
      $$.svg.select('.popily-background')
        .attr('width', $$.width)
        .attr('height', $$.height);
    }
    
    c3.chart.internal.fn.oldGetHorizontalAxisHeight = c3.chart.internal.fn.getHorizontalAxisHeight;
    c3.chart.internal.fn.getHorizontalAxisHeight = function(axisId) {
      var $$ = this, config = this.config;
      
      if(config.axis_x_tick_autorotate && ((axisId === 'x' && !config.axis_rotated) || (axisId === 'y' && config.axis_rotated)) && ($$.svg != false)  && (!_.isUndefined($$.x))) {
        
        var targetsToShow = $$.filterTargetsToShow($$.data.targets);
        if(!config.axis_x_tick_rotate_original)
          config.axis_x_tick_rotate_original = config.axis_x_tick_rotate;
        else
          config.axis_x_tick_rotate = config.axis_x_tick_rotate_original;
        
        var wtf, scale, test = 1, axis, g;
        
        if(axisId === 'x') {
          wtf = $$.getXDomain(targetsToShow);
          if($$.isCategorized())
            wtf[1] += 2;
          scale = $$.x.copy().domain(wtf);
        }
        else {
          wtf = $$.getYDomain(targetsToShow, 'y');
          scale = $$.y.copy().domain(wtf);
        }
        
        /*var dummy = $$.d3.select('body').append('div').classed('c3', true).classed('popily-chartarea', true);
        var svg = dummy.append("svg")
            .style('visibility', 'visible')
            .style('position', 'fixed')
            .style('top', 0).style('left', 0); */
        
        while(test && test < 10) {
          if(axisId === 'x') {
            axis = $$.axis.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, 
                                $$.xAxisTickValues, false, true, false);
            $$.axis.updateXAxisTickValues(targetsToShow, axis);
          }
          else if(axisId === 'y') {
            axis = $$.axis.getYAxis(scale, $$.yOrient, config.axis_y_tick_format, 
                                $$.yAxisTickValues, false, true, false);
          }
          g = $$.svg.append('g');
          g.call(axis);
          if(axisId === 'y') {
            var texts = g.selectAll("text")
              .attr("transform", 'rotate('+config.axis_x_tick_rotate+') translate(10, 0)')
              .style("text-anchor", 'start')
              .attr("x", 0)
              .attr("y", 11.5 - 2.5 * (config.axis_x_tick_rotate / 15) * (config.axis_x_tick_rotate > 0 ? 1 : -1));
            g.select("text").remove();
          }
          var axisWidth = g[0][0].getBoundingClientRect().width;
          var maxAxisWidth = g.select('path')[0][0].getBoundingClientRect().width;
          //console.log(axisWidth);
          //console.log(maxAxisWidth);
          if(axisWidth > maxAxisWidth + 2) {
            config.axis_x_tick_rotate = Math.min(config.axis_x_tick_rotate+10, 90);
            test = test + 1;
          }
          else
            test = 0; 
          g.remove();
        }
        //dummy.remove();
      }
      
      var h = $$.oldGetHorizontalAxisHeight(axisId);
      
      if (axisId === 'y' && config.axis_rotated && config.axis_x_tick_rotate) {
        h = 30 + $$.axis.getMaxTickWidth(axisId) * Math.cos(Math.PI * (90 - config.axis_x_tick_rotate) / 180);
      }
      
      return h;
    }
    c3.chart.internal.fn.oldgetAxisWidthByAxisId = c3.chart.internal.fn.getAxisWidthByAxisId;
    c3.chart.internal.fn.getAxisWidthByAxisId = function(id, withoutRecompute) {
      var $$ = this, config = this.config;
      w = $$.oldgetAxisWidthByAxisId(id, withoutRecompute);
      
      if (id === 'y' && config.axis_y_tick_rotate) {
        var position = $$.axis.getLabelPositionById(id);
        w = $$.axis.getMaxTickWidth(id, withoutRecompute) * Math.sin(Math.PI * (90 - config.axis_y_tick_rotate) / 180);
        w = w + (position.isInner ? 20 : 40);
      }

      return w-8;
    };
    
    for (var k in c3.chart.internal.fn.CLASS) {
      c3.chart.internal.fn.CLASS[k] = c3.chart.internal.fn.CLASS[k].replace('c3', 'popily');
    };
    
    c3.chart.internal.fn.afterInit = function(config) {
    };
    
    
    c3.chart.internal.axis.fn.constructor.prototype.redrawOld = c3.chart.internal.axis.fn.constructor.prototype.redraw;
    
    c3.chart.internal.axis.fn.constructor.prototype.redraw = function redraw(transitions, isHidden) {
      var $$ = this.owner;
      this.redrawOld(transitions, isHidden);
      if($$.config.axis_rotated) {
        transitions.axisY.selectAll("text")
          .attr("transform", 'rotate('+$$.config.axis_x_tick_rotate+') translate(10, 0)')
          .style("text-anchor", 'start')
          .attr("x", 10)
          .attr("y", 11.5 - 2.5 * ($$.config.axis_x_tick_rotate / 15) * ($$.config.axis_x_tick_rotate > 0 ? 1 : -1));
      }
      
      if($$.config.axis_y_tick_rotate) {
        transitions.axisY.selectAll(".tick text")
          .attr("transform", 'rotate('+($$.config.axis_y_tick_rotate*-1)+') translate(0, -10)')
          .style("text-anchor", 'end')
          .attr("x", 10)
          .attr("y", 11.5 - 2.5 * ($$.config.axis_y_tick_rotate / 15) * ($$.config.axis_y_tick_rotate > 0 ? 1 : -1));
      }
      
    };
    
    
    c3.chart.internal.axis.fn.constructor.prototype.oldDyForYAxisLabel = c3.chart.internal.axis.fn.constructor.prototype.dyForYAxisLabel;
    c3.chart.internal.axis.fn.constructor.prototype.dyForYAxisLabel = function dyForYAxisLabel() {
      var $$ = this.owner,
        position = this.getYAxisLabelPosition();
      
      if ($$.config.axis_y_tick_rotate) {
        var tickWidth = this.getMaxTickWidth('y');
        return position.isInner ? "1.2em" : -10 - ($$.config.axis_y_inner ? 0 : (tickWidth*Math.sin(Math.PI * (90 - $$.config.axis_y_tick_rotate) / 180) + 10));
      } else {
        return this.oldDyForYAxisLabel();
      }
    };
    
  }
  
  c3Customizations();
  
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};

      var numerics = _.where(columns,{data_type:'numeric' });

      // Reorganize the columns to use the column headers as the groupby 
      // variable.
      if(numerics.length > 1) {
        var xColumn = _.find(columns, function(column) { 
                          var dataType = column.data_type;
                          return dataType === 'datetime' || dataType === 'category';
                      });
        var firstNumeric = numerics.shift();
        var x = xColumn;
        var y = firstNumeric;
        var z = {
          column_header: 'Columns',
          data_type: 'category',
          values: _.map(firstNumeric.values,function(val) { return firstNumeric.column_header })
        };

        _.each(numerics, function(numeric) {
            for(var i=0;i<numeric.values.length;i++) {
              x.values.push(x.values[i]);
              y.values.push(numeric.values[i]);
              z.values.push(numeric.column_header);
            }
        });
      }
      else {
        var x,y,z;
        y = popilyChart.analyze.getColumnForType(columns, 'numeric');
        
        // put the datetime on the x if we can
        x = popilyChart.analyze.getColumnForType(columns, 'datetime');

        if(x) {
          z = popilyChart.analyze.getColumnForType(columns, 'category');
        }
        else {
          // No datetime, so can group on either
          var groupers = _.filter(columns, function(column) { 
                          var dataType = column.data_type;
                          return dataType === 'category';
                      });

          // smaller groups and more dense x looks better than lots of 
          // groups and only a few xs.
          if(_.uniq(groupers[0].values).length > _.uniq(groupers[1].values).length) {
            x = groupers[0];
            z = groupers[1];
          }
          else {
            x = groupers[1];
            z = groupers[0];
          }
        }

      }

      // Reassign based on user preference if necessary
      if(options.groupByColumn && options.groupByColumn === x.column_header) {
        axis.z = x;
        axis.x = z;
      }
      else if(options.xColumn && options.xColumn === z.column_header) {
        axis.x = z;
        axis.z = x;
      }
      else {
        axis.x = x;
        axis.z = z;
      }
      axis.y = y;

      return axis;
  };

  chart.prepData = function(formattedData, options, group) {
    var that = this;
    var limit = that.defaults.categoryLimit;
    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;
    var zValues = [];
    if(chartData.hasOwnProperty('z')) {
        zValues = chartData.z.values;
    }
    var values = [xValues,yValues,zValues];

    // Check if every x value has ' to ' in it. This is kind of cheating 
    // to see if it's a list of value ranges (eg '1 to 10') and needs 
    // to be ordered as such.
    if(_.every(xValues, function(x) { return x.indexOf(' to ') > -1 })) {
        var rangeBottoms = _.map(xValues, function(x) {
            return parseFloat(x.split(' to ')[0]);
        });

        values.push(rangeBottoms);
        var cleanZipped = _.zip(values[0],values[1],values[2],values[3]);
        zipped = _.sortBy(cleanZipped, function(t){ 
                            return t[3]; 
                        });
        values = _.first(_.unzip(zipped),limit);        
    }
    else {
        var order = options.order || 'auto';
        values = popilyChart.chartData.sortData(values[0],values[1],values[2],limit,order);
    }

    xValues = values[0];
    
    // Format date strings just in case we're working with dates.
    if(chartData.x.dataType.indexOf('date') > -1 && _.every(xValues, popilyChart.chartData.checkIsDateStr)) {
      var dateFormatStr = popilyChart.format.formatFromInspection(xValues);
      var dateFormat = d3.time.format(dateFormatStr);
      xValues = _.map(xValues, function(x) { return dateFormat((new Date(x))); });
    }

    // Format y values as numbers
    yValues = popilyChart.format.formatNumbers(values[1]);
    zValues = values[2];

    return [xValues, yValues, zValues];
  };

  chart.getChartObject = function(kwargs) {
    var that = this;
    var element = kwargs.element;
    var data = kwargs.data;
    var zValues = kwargs.zValues;
    var xLabel = kwargs.xLabel;
    var yLabel = kwargs.yLabel;
    var options = kwargs.options;
    var rotated = kwargs.rotated;
    var formattedData = kwargs.formattedData;

    rotated = options.rotated || rotated;
        
    var chartData = {
      bindto: element,
      data: {
          columns: data.columns,
          type: 'bar'
      },
      padding: that.defaults.chartPadding(),
      axis: {
          x: {
              show: options.xAxis,
              type: 'category',
              categories: data.categories,
              tick: {
                  rotate: options.xRotation ||  45,
                  autorotate: !options.xRotation,
                  multiline: false,
                  format: popily.chart.format.formatAxis(formattedData.chartData.x, options)
              },
              label: {
                 text: options.xLabel || xLabel,
                 position: rotated?'outer-middle':'inner-right',
              },
          },
          y: {
              show: options.yAxis,
              label: {
                  text: options.yLabel || yLabel,
                  position: rotated?'inner-right':'outer-middle'
              },
              tick: {
                  format: popily.chart.format.formatAxis(formattedData.chartData.y, options, d3.format(",")),
                  rotate: options.yRotation ||  0,
              }
          },
          rotated: rotated
      },
      color: {
          pattern: options.colors
      },
      legend: {
          position: 'bottom',
          show: (!_.isUndefined(options.legend) ? options.legend : (function() {
            if(zValues.length < 50) {
              return true; 
            }
            return false;
          })())
      },
      tooltip: {
          show: (_.isUndefined(options.tooltip)?true:options.tooltip),
          grouped: false,
      },
      size: {
          height: options.height
      },
      grid: {
        x: {
          show: _.isUndefined(options.xGrid)?false:options.xGrid
        },
        y: {
          show: _.isUndefined(options.yGrid)?true:options.yGrid
        },
        background: options.background
      },
      bar: {
        width: {
          ratio: (options.barSize || 0.9)
        }
      },
      onresized: function() {
        console.log(1);
      }
    };
    return chartData;
  };

  chart.updateSpecials = function(element, rotated, options) {
      
  }

  popilyChart.chartTypes.barCommon = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};

      _.each(columns, function(column) {
          if(column.data_type === 'category') {
            axis.z = column;
          }
          else if(!axis.y) {
            axis.y = column;
          }
          else {
            axis.x = column;
          }
      });

      return axis;
  };

  chart.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.categoryLimit;
    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;
    var zValues = [];

    if(!_.isUndefined(chartData.z)) {
      zValues = chartData.z.values;
    }

    var order = options.order || 'auto';
    cleanValues = _.unzip(_.zip([xValues,yValues,zValues]).slice(0,5000))[0];
    var cleanXValues = popilyChart.format.toNumber(cleanValues[0]);
    var cleanYValues = popilyChart.format.toNumber(cleanValues[1]);

    cleanXValues = popilyChart.format.formatNumbers(cleanXValues);
    cleanYValues = popilyChart.format.formatNumbers(cleanYValues);
    var cleanZValues = cleanValues[2];
    if(zValues.length === 0 && chartData.metadata && chartData.metadata.rowlabels) {
      cleanZValues = chartData.metadata.rowlabels;
    }
    return [cleanXValues, cleanYValues, cleanZValues];
  };

  chart.render = function(element, options, columns, xs, xLabel, yLabel, tooltip, formattedData) {
      var chartPadding = {right: 10, top: 10};

      var chartData = {
          bindto: element,
          data: {
              xs: xs,
              columns: columns,
              type: 'scatter'
          },
          padding: this.defaults.chartPadding(),
          size: {
              height: options.height
          },
          point: {
            r: (options.pointSize || 4)
          },
          axis: {
              x: {
                  show: options.xAxis,
                  label: {
                      text: options.xLabel || xLabel,
                      position: 'inner-right',
                  },
                  tick: {
                      fit: false,
                      rotate: options.xRotation ||  45,
                      autorotate: !options.xRotation,
                      format: popily.chart.format.formatAxis(formattedData.chartData.x, options),
                  }
              },
              y: {
                  show: options.yAxis,
                  label: {
                      text: options.yLabel || yLabel,
                      position: 'outer-middle'
                  },
                  tick: {
                      format: popily.chart.format.formatAxis(formattedData.chartData.y, options, d3.format(",")),
                      rotate: options.yRotation ||  0,
                  }
              }
          },
          grid: {
            x: {
              show: _.isUndefined(options.xGrid)?true:options.xGrid
            },
            y: {
              show: _.isUndefined(options.yGrid)?true:options.yGrid
            },
            background: options.background
          },
          color: {
              pattern: options.colors
          },
          legend: {
              show: _.isUndefined(options.legend) || options.legend,
              position: 'outer-bottom',
          },
          tooltip: tooltip
      };

      var animation = popily.chart.utils.initialAnimation(chartData, options)
      var chart = c3.generate(chartData);
      chartData.bindto = element;
      
      animation.start(chart);
      
      return chart;
  };

  popilyChart.chartTypes.compare = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  var chart = _.clone(popilyChart.baseChart);

  chart.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.categoryLimit;
    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;
    var zValues = [];
    if(chartData.hasOwnProperty('z')) {
        zValues = chartData.z.values;
    }

    yValues = popily.chart.chartData.cleanNanToZero(yValues)

    var order = options.order || 'auto';
    cleanValues = popilyChart.chartData.sortData(xValues,yValues,zValues,0,order);

    var cleanXValues = cleanValues[0];
    var cleanYValues = popilyChart.format.formatNumbers(cleanValues[1]);
    var cleanZValues = cleanValues[2];

    return [cleanXValues, cleanYValues, cleanZValues];
  };

  chart.getYMin = function(yValues) {
    var yMin = 0;
    var lowestY = _.min(yValues);
    if(lowestY < 0) {
        yMin = lowestY;
    }

    return yMin;
  };

  chart.getChartObject = function(kwargs) {
    var element = kwargs.element;
    var data = kwargs.data;
    var xLabel = kwargs.xLabel;
    var yLabel = kwargs.yLabel;
    var yMin = kwargs.yMin;
    var options = kwargs.options;
    var dateFormatStr = kwargs.dateFormatStr;
    var chartPadding = kwargs.chartPadding;
    var variation = kwargs.variation;
    var ticksValues = kwargs.ticksValues;
    var tickFormatStr = kwargs.tickFormatStr;
    var tickFormat = d3.time.format(tickFormatStr);
    var formattedData = kwargs.formattedData;
    
    var chartData = {
        bindto: element,
        data: {
            x: 'x',
            columns: data.columns,
            xFormat: dateFormatStr
        },
        padding: chartPadding,
        axis: {
            x: {
                show: options.xAxis,
                type: (!options.order || options.order == 'auto' ? 'timeseries' : 'category'),
                tick: {
                    fit: false,
                    format: popily.chart.format.formatAxis(formattedData.chartData.x, options, tickFormat),
                    rotate: options.xRotation ||  45,
                    autorotate: !options.xRotation,
                    centered: true,
                    values: (!options.order || options.order == 'auto' ? ticksValues : null),
                    count: ticksValues.length
                },
                label: {
                    text: options.xLabel || xLabel,
                    position: 'inner-right'
                }
            },
            y: {
                show: options.yAxis,
                min: yMin,
                label: {
                    text: options.yLabel || yLabel,
                    position: 'outer-middle'
                },
                tick: {
                    format: popily.chart.format.formatAxis(formattedData.chartData.y, options, d3.format(",")),
                    rotate: options.yRotation ||  0,
                },
                padding: {top:0, bottom:0}
            }
        },
        grid: {
          x: {
            show: _.isUndefined(options.xGrid)?false:options.xGrid
          },
          y: {
            show: _.isUndefined(options.yGrid)?true:options.yGrid
          },
          background: options.background
        },
        color: {
            pattern: options.colors
        },
        point: {
          r: (options.pointSize || 2.5)
        },
        legend: {
            position: 'bottom',
            show: !_.isUndefined(options.legend) && options.legend
        },
        size: {
            height: options.height
        }
    }
    
    var tooltip = (_.isUndefined(options.tooltip)?true:options.tooltip);
    if(tooltip && (!options.order || options.order == 'auto') ) {
      var dateFormat = d3.time.format(dateFormatStr);
      chartData.tooltip = {
        show: true,
        format: {
          title: function(d) {
            return dateFormat(d);
          } 
        }
      }
      chartData.axis.x.tick.values = ticksValues;
    }

    return chartData;
  };

  chart.formatDates = function(xValues, data, options) {
    var dayDiff = popily.chart.format.daysDiff(xValues); 
    var tickFormatStr = popily.chart.format.formatFromDayDiff(dayDiff);
    
    var variation = options.variation;

    var dateFormatStr = popily.chart.format.formatFromInterval(variation);
    if(_.isUndefined(variation)) {
      dateFormatStr = popily.chart.format.formatFromInspection(xValues);
    }

    var dateFormat = d3.time.format(dateFormatStr);
    var tickFormat = d3.time.format(tickFormatStr);
    var fullFormat = d3.time.format('%Y-%m-%d %H:%M:%S');

    var ticksValues = popily.chart.format.tickFormatValues(xValues, tickFormatStr, dateFormat);
    
    if(dateFormat != fullFormat)
      data.categories = _.map(data.categories, function(d) {
          return dateFormat(fullFormat.parse(d.split('.')[0]));
      });

    return {
      dateFormatStr: dateFormatStr,
      tickFormatStr: tickFormatStr,
      ticksValues: ticksValues
    }
  };

  chart.render = function(element, options, formattedData, grouped) {
      var that = this;
      var preppedData = that.prepData(formattedData, options);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var zValues = preppedData[2];
      var xLabel = formattedData.chartData.x.label;
      var yLabel = formattedData.chartData.y.label;

      options.variation = options.variation || formattedData.chartData.metadata.intervals[0];
      var yMin = that.getYMin(yValues);
            
      var data = popilyChart.chartData.c3ify(xValues,yValues,zValues);
      var dateData = that.formatDates(xValues, data, options);

      data.categories.unshift('x');
      data.columns.unshift(data.categories); 
      var chartPadding = that.defaults.chartPadding;
      var kwargs = {
        element: element,
        data: data,
        xLabel: xLabel,
        yLabel: yLabel,
        yMin: yMin,
        options: options, 
        dateFormatStr: dateData.dateFormatStr,
        chartPadding: chartPadding,
        tickFormatStr: dateData.tickFormatStr,
        ticksValues: dateData.ticksValues,
        formattedData: formattedData
      };
      var chartData = that.getChartObject(kwargs);
      chartData.tooltip.grouped = (function() {
          if(_.uniq(zValues).length > 20) {
              return false;
          }
          else {
              return true;
          }
      })();

      if(!_.isUndefined(options.lineSize)) {
        var style = popily.chart.utils.createStyleElement('.'+options.uniqueClassName+' .c3-line { stroke-width: '+options.lineSize+'px; }')
        element.parentNode.appendChild(style);
      }

      if(grouped) {
        chartData.data.type = 'area';
        chartData.data.groups = [data.groups];
        if(data.groups.length < 5)
          chartData.tooltip.grouped = true;
      }
      
      
      animation = popily.chart.utils.initialAnimation(chartData, options);
      var chart = c3.generate(chartData);
      chart = popily.chart.utils.updateChart(element, chart, chartData, chartPadding);
      
      animation.start(chart);
      
      return chart;
  };

  popilyChart.chartTypes.linear = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.barCommon.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, formattedData) {
      var that = this;
      var preppedData = popilyChart.chartTypes.barCommon.prepData(formattedData, options, true);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var zValues = preppedData[2];
      var xLabel = formattedData.chartData.x.label;
      var yLabel = formattedData.chartData.y.label;

      var data = popilyChart.chartData.c3ify(xValues,yValues,zValues);
      var rotated = false;
      if(data.columns.length > 25) {
          rotated = true;
      }

      var kwargs = {
        options: options,
        data: data,
        zValues: zValues,
        rotated: rotated,
        xLabel: xLabel,
        yLabel: yLabel,
        element: element,
        formattedData: formattedData
      };
      var chartData = popilyChart.chartTypes.barCommon.getChartObject(kwargs);
      chartData.onresized = function() {
        popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
      };

      var animation = popily.chart.utils.initialAnimation(chartData, options);

      var chart = c3.generate(chartData);

      animation.start(chart, function() {
        popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
      });
      
      return chart;
  };

  popilyChart.chartTypes.barGrouped = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.barCommon.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, formattedData) {
      var that = this;
      var preppedData = popilyChart.chartTypes.barCommon.prepData(formattedData, options, true);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var zValues = preppedData[2];
      var xLabel = formattedData.chartData.x.label;
      var yLabel = formattedData.chartData.y.label;

      var data;
      var groups;
      data = popilyChart.chartData.c3ify(xValues,yValues,zValues);
      groups = [data.groups];
      data.categories.unshift('x');
      data.columns.unshift(data.categories);
      var rotated = false;
      if(data.columns[0].length > 40) {
          rotated = true;
      }

      var kwargs = {
        options: options,
        data: data,
        zValues: zValues,
        rotated: rotated,
        xLabel: xLabel,
        yLabel: yLabel,
        element: element,
        formattedData: formattedData
      };
      var chartData = popilyChart.chartTypes.barCommon.getChartObject(kwargs);
      chartData.data = {
          x: 'x',
          columns: data.columns,
          type: 'bar',
          groups: groups
      };

      chartData.onresized = function() {
        popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
      };
      
      var animation = popily.chart.utils.initialAnimation(chartData, options);
      var chart = c3.generate(chartData);
      
      animation.start(chart, function() {
        popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
      });
      
      return chart;
  };

  popilyChart.chartTypes.barStacked = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var bar = _.clone(popilyChart.baseChart);

  bar.assignAxis = function(columns, calculation, options) {
      var axis = {};
      var typePattern = popilyChart.analyze.getTypePattern(columns);

      if(typePattern === 'numeric,numeric') {
        axis.y = {
            column_header: calculation.charAt(0).toUpperCase() + calculation.slice(1).toLowerCase(),
            values: _.map(columns, function(column) { return column.values[0] }),
            data_type: 'numeric'
        }
        axis.x = {
            column_header: 'Columns',
            values: _.map(columns, function(column) { return column.column_header }),
            data_type: 'category'
        }
      }
      else {
        _.each(columns, function(column) {
            if(column.data_type === 'numeric') {
              axis.y = column;
            }
            else {
              axis.x = column;
            }
        });
      }

      return axis;
  };

  bar.render = function(element, options, formattedData) {
      var that = this;
      var preppedData = popilyChart.chartTypes.barCommon.prepData(formattedData, options);
      var xValues = preppedData[0];
      var yValues = preppedData[1];

      var chart;
        
      var rotated = options.rotated || false;
      //if(insight.options_rotate)
      //  rotated = true;
      if(yValues.length > 40) {
        rotated = true;
      }

      if(rotated == true) {
        if(yValues.length > 40)
          options.height = (yValues.length * 9) + 450;
      }

      var yLabel = formattedData.chartData.y.label;
      yValues.unshift(yLabel);
      
      var chartData = {
        data: {
          columns: [yValues],
          type: 'bar'
        },
        bar: {
          width: {
            ratio: (options.barSize || 0.7)
          }
        },
        padding: that.defaults.chartPadding(),
        axis: {
          x: {
            show: options.xAxis,
            type: 'category',
            categories: xValues,
            tick: {
              format: popily.chart.format.formatAxis(formattedData.chartData.x, options),
              rotate: options.xRotation ||  45,
              autorotate: !options.xRotation,
              multiline: false,
              fit: true
            },
            label: {
              text: options.xLabel || formattedData.chartData.x.label,
              position: rotated?'outer-middle':'inner-right',
            }
          },
          y: {
            show: options.yAxis,
            label: {
              text: options.yLabel || yLabel,
              position: rotated?'inner-right':'outer-middle'
            },
            tick: {
              format: popily.chart.format.formatAxis(formattedData.chartData.y, options, d3.format(",")),
              rotate: options.yRotation ||  0,
            }
          },
          rotated: rotated
        },
        color: {                
          pattern: options.colors
        },       
        legend: {
          show: !_.isUndefined(options.legend) && options.legend,
        },
        size: {
          height: options.height
        },
        grid: {
          x: {
            show: _.isUndefined(options.xGrid)?false:options.xGrid
          },
          y: {
            show: _.isUndefined(options.yGrid)?true:options.yGrid
          },
          background: options.background
        },
        tooltip: (_.isUndefined(options.tooltip)?true:options.tooltip),
        onresized: function() {
          popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
        }
      }
    
      chartData.bindto = element;
      var animation = popily.chart.utils.initialAnimation(chartData, options);
      
      var chart = c3.generate(chartData);

      animation.start(chart, function() {
        popilyChart.chartTypes.barCommon.updateSpecials(element, rotated, options);
      });
      
      return chart;
  };

  popilyChart.chartTypes.bar = bar;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};
      var typePattern = popilyChart.analyze.getTypePattern(columns);

      var allNumbers = _.every(columns, function(column) { 
                                return column.data_type === 'numeric'; 
                            })

      if(allNumbers) {
        axis.y = {
            column_header: calculation.charAt(0).toUpperCase() + calculation.slice(1).toLowerCase(),
            values: _.map(columns, function(column) { return column.values[0] }),
            data_type: 'numeric'
        }
        axis.x = {
            column_header: 'Columns',
            values: _.map(columns, function(column) { return column.label }),
            data_type: 'category'
        }
      }
      else {
        _.each(columns, function(column) {
            if(column.data_type === 'numeric') {
              axis.y = column;
            }
            else {
              axis.x = column;
            }
        });
      }

      return axis;
  };

  chart.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.categoryLimit;

    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;

    yValues = popilyChart.format.formatNumbers(yValues);

    return [xValues, yValues];
  };

  chart.render = function(element, options, formattedData) {
      var width = options.width,
        height = options.height,
        format = d3.format(",d"),
        //color = d3.scale.category20c();
        color = d3.scale.ordinal().range(options.colors);
    var data = {'children': [
            {'name': 'negative', 'children': []},
            {'name': 'positive', 'children': []},
        ]};
        
    var preppedData = this.prepData(formattedData, options);
    var xValues = preppedData[0];
    var yValues = preppedData[1];
    var xLabel = formattedData.chartData.x.label;
    
    _.each(_.first(yValues,200), function(yValue,i) {
        if(yValue>0)
            data.children[1].children.push({category: xValues[i], className: 'data', showValue: yValue, value: parseFloat(yValue) });
        else
            data.children[0].children.push({category: yValues[i], className: 'data', showValue: yValue, value: -1*parseFloat(yValue) });
    });

    if(width == '100%')
      width = element.getBoundingClientRect().width;
    if(height == '100%')
      var height = popilyChart.utils.chartSize()['height'];
    
    var transitionDuration = 350;
    if(options.skipAnimation)
      transitionDuration = 0;

    var bubble = d3.layout.pack()
        .sort(null)
        .size([width, height])
        .padding(4);

    var svg = d3.select(element).append("svg")
        .attr("width", width)
        .attr("height", height)
        .attr("class", "bubble");

    if((_.isUndefined(options.tooltip)?true:options.tooltip)) {
        var tip = d3.tip()
            .attr('class', 'popily-tooltip-container')
            .offset([-5, 0])
            .html(function(d) {
                var text = "<table class='popily-tooltip'><tr><th colspan='2'>" + d.category + "</th></tr>";
                text += "<tr class='popily-tooltip-name-'>";
                text += "<td class='name'><span style='background-color:" + color(d.category) + "'></span> " + xLabel + "</td>";
                text += "<td class='value'>" + d.showValue + "</td>";
                text += "</tr>";
                return text + "</table>"; 
            });
        svg.call(tip);
    }
    
    var node = svg.selectAll(".node")
        .data(
            bubble.nodes(data)
                .filter(function(d) { return !d.children})
        )
        .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")"; })
        .on('mouseover', function(d) {
            tip.show(d, d);
            d3.select(this.childNodes[0])
                .transition().duration(50)
                .attr("r", d.r+5)
                .transition().duration(100)
                .attr("r", d.r+3)
        })
        .on('mouseout', function(d) { 
            tip.hide(d);
            d3.select(this.childNodes[0])
                .transition().duration(10)
                .attr("r", d.r)
        });
  
    node.append("circle")
        .style("fill", function(d) { return color(d.category); })
        .attr("r", 0)
        .transition().duration(transitionDuration)
        .attr("r", function(d) { return d.r; });
        
    node.append("text")
        .attr("dy", ".3em")
        .style("text-anchor", "middle")
        .style("opacity", 0)
        .text(function(d) {
            if (d.r / 3 > 3) return d.category.substring(0, d.r / 3); 
            else return '';
        })
        .transition().duration(transitionDuration)
        .style("opacity", 1)
        .attr("pointer-events", "none");

    var onResize = function() {
        if(options.width == '100%')
          width = element.getBoundingClientRect().width;
        if(options.height == '100%')
          height = popilyChart.utils.chartSize()['height'];
        
        svg
            .attr("width", width)
            .attr("height", height);

        var bubble = d3.layout.pack()
            .sort(null)
            .size([width, height])
            .padding(4);
        
        var node = svg.selectAll(".node")
            .data(
                bubble.nodes(data)
                   .filter(function(d) { return !d.children})
            );
        svg.selectAll("g")
            .attr("transform", function(d) {
                return "translate(" + d.x + "," + d.y + ")"; });
        
        svg.selectAll("circle")
            .attr("r", function(d) { return d.r; });
        svg.selectAll("text")
            .text(function(d) { 
                if (d.r / 3 > 3) return d.category.substring(0, d.r / 3); 
                else return '';
            })
        
    };

    d3.select(window).on('resize', onResize);
  };

  popilyChart.chartTypes.bubbleStatic = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};
      var typePattern = popilyChart.analyze.getTypePattern(columns);

      var allNumbers = _.every(columns, function(column) { 
                                return column.data_type === 'numeric'; 
                            })

      if(allNumbers) {
        axis.y = {
            column_header: calculation.charAt(0).toUpperCase() + calculation.slice(1).toLowerCase(),
            values: _.map(columns, function(column) { return column.values[0] }),
            data_type: 'numeric'
        }
        axis.x = {
            column_header: 'Columns',
            values: _.map(columns, function(column) { return column.column_header }),
            data_type: 'category'
        }
      }
      else {
        _.each(columns, function(column) {
            if(column.data_type === 'numeric') {
              axis.y = column;
            }
            else {
              axis.x = column;
            }
        });
      }

      return axis;
  };

  chart.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.categoryLimit;

    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;

    yValues = popilyChart.format.formatNumbers(yValues);

    return [xValues, yValues];
  };

  chart.render = function(element, options, formattedData) {
      var width = options.width,
        height = options.height,
        format = d3.format(",d"),
        color = d3.scale.ordinal().range(options.colors);

    if(width == '100%')
      width = element.getBoundingClientRect().width;
    if(height == '100%')
      var height = popilyChart.utils.chartSize()['height'];
    
    var preppedData = this.prepData(formattedData, options);
    var xValues = preppedData[0];
    var yValues = preppedData[1];
    var xLabel = formattedData.chartData.x.label;
    
    yValues = _.first(yValues,200);
    yValues = _.map(yValues, parseFloat);

    var nodes = [];
    _.each(yValues, function(yValue,i) {
      if(yValue>0) {
        var node = {
          id: i,
          value: yValue,
          description: yValue,
          name: i,
          group: xValues[i],
          x: Math.random() * width,
          y: Math.random() * height
        };
        return nodes.push(node);
      }
    });
    
    var maxValue = _.max(nodes, function(d){ return d.value; }).value;
    var sumValue = _.reduce(nodes, (function(a, b) { return a + b.value; }), 0);
    var avgValue = sumValue/nodes.length;
    
    var createScale = function() {
      var blankSpaceFactor = 2 + (width+height)/2000;
      var meanR = Math.sqrt((width*height)/(Math.PI*yValues.length*blankSpaceFactor));
      rMax = Math.sqrt(Math.pow(meanR,2) * maxValue/avgValue);
      return d3.scale.pow().exponent(0.5).domain([0, maxValue]).range([2, rMax]);
    }
    var radiusScale = createScale();
    
    var center = {
      x: width/2,
      y: height/2,
    };
    
    var transitionDuration = 350;
    if(options.skipAnimation)
      transitionDuration = 0;

    var svg = d3.select(element).append("svg")
        .attr("width", width)
        .attr("height", height)
        .attr("class", "bubble2");
        
    if((_.isUndefined(options.tooltip)?true:options.tooltip)) {
        var tip = d3.tip()
            .attr('class', 'popily-tooltip-container')
            .offset([-5, 0])
            .html(function(d) {
                var text = "<table class='popily-tooltip'><tr><th colspan='2'>" + d.group + "</th></tr>";
                text += "<tr class='popily-tooltip-name-'>";
                text += "<td class='name'><span style='background-color:" + color(d.group) + "'></span> " + xLabel + "</td>";
                text += "<td class='value'>" + d.showValue + "</td>";
                text += "</tr>";
                return text + "</table>"; 
            });
        svg.call(tip);
    }
        
    var bubbles = svg.selectAll(".bubble").data(nodes, function(d) {
      return d.id;
    });
    
    var node = bubbles.enter().append("g")
        .attr("class", "bubble")
        .on('mouseover', function(d) {
            tip.show(d, d);
            d3.select(this.childNodes[0])
                .transition().duration(50)
                .attr("r", radiusScale(d.value)+5)
                .transition().duration(100)
                .attr("r", radiusScale(d.value)+3)
        })
        .on('mouseout', function(d) { 
            tip.hide(d);
            d3.select(this.childNodes[0])
                .transition().duration(10)
                .attr("r", radiusScale(d.value))
        });
    
    var circles = node.append("circle")
        .style("fill", function(d) { return color(d.group); })
        .attr("r", 0)
        .transition().duration(transitionDuration)
        .attr("r", function(d) { return radiusScale(d.value); });
    
    var texts = node.append("text")
        .attr("dy", ".3em")
        .style("text-anchor", "middle")
        .style("opacity", 0)
        .text(function(d) {
            var r = radiusScale(d.value);
            if (r / 3 > 3) return d.group.substring(0, r / 3); 
            else return '';
        })
        .transition().duration(transitionDuration)
        .style("opacity", 1)
        .attr("pointer-events", "none");
    
    
    var chargeFn = function(d) {
      return -Math.pow(radiusScale(d.value), 2.0)*1.5;
    }
    
    var centered = function(alpha) {
      return function(d) {
        d.x = d.x + (center.x - d.x) * Math.max(height/width, 1) * alpha * 0.5;
        d.y = d.y + (center.y - d.y) * Math.max(width/height, 1) * alpha * 0.5;
      };
    }
    
    var force = d3.layout.force()
        .size([width, height])
        .nodes(nodes)
        .size([width, height])
        .gravity(0.2)
        .charge(chargeFn)
        .friction(0.9)
        .on("tick", function(e) {
          return bubbles.each(centered(e.alpha)).attr("transform", function(d) {
            return "translate(" + d.x + "," + d.y + ")"; 
          })
        });
        
    force.start();
        
    
    d3.select(window).on('resize', function() {
      
      if(options.width == '100%')
        width = element.getBoundingClientRect().width;
      if(options.height == '100%')
        height = popilyChart.utils.chartSize()['height'];
      
      center = {
        x: width/2,
        y: height/2,
      };
      
      radiusScale = createScale();
      svg
        .attr("width", width)
        .attr("height", height);
      
      bubbles.selectAll("circle").attr("r", function(d) { return radiusScale(d.value); });
      bubbles.selectAll("text").text(function(d) {
            var r = radiusScale(d.value);
            if (r / 3 > 3) return d.group.substring(0, r / 3); 
            else return '';
        });
      
      force
        .charge(chargeFn)
        .size([width, height])
        .start();
      
    }); 
    
    
  };

  popilyChart.chartTypes.bubble = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);
  chart.defaultFor = [
    'ratio_per_category'
  ];
  chart.accepts = [];

  chart.render = function(element, options, rawData) {
      var that = this;
      var yValues = rawData.chartData.y.values;

      var chartData = {
          bindto: element,
          data: {
              columns: [['data', parseFloat(yValues[0]) * 100]],
              type: 'gauge'
          },              
          color: {
              pattern: options.colors
          },              
          legend: {
              show: !_.isUndefined(options.legend) && options.legend
          },
          size: {
            height: options.height
          },
          grid: {
            background: options.background
          },
          onresized: function() {
              if (window.innerWidth <= 768) {
                  chart.resize({height:220});
              }
              else {
                 chart.resize({height:340});
              }
          }
      };
      var animation = popily.chart.utils.initialAnimation(chartData, options)
      var chart = c3.generate(chartData); 
      animation.start(chart);

      return chart;
  };

  popilyChart.chartTypes.gauge = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;

  var chart = _.clone(popilyChart.baseChart);
  
  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};
      var typePattern = popilyChart.analyze.getTypePattern(columns);

      if(typePattern === 'numeric,numeric') {
        axis.y = {
            column_header: calculation.charAt(0).toUpperCase() + calculation.slice(1).toLowerCase(),
            values: _.map(columns, function(column) { return column.values[0] }),
            data_type: 'numeric'
        }
        axis.x = {
            column_header: 'Columns',
            values: _.map(columns, function(column) { return column.column_header }),
            data_type: 'category'
        }
      }
      else {
        _.each(columns, function(column) {
            if(column.data_type === 'numeric') {
              axis.y = column;
            }
            else {
              axis.x = column;
            }
        });
      }

      return axis;
  };

  chart.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.categoryLimit;
    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;

    var order = options.order || 'auto';
    sortedValues = popilyChart.chartData.sortData(xValues,yValues,[],limit,order);

    var cleanXValues = sortedValues[0];
    var cleanYValues = popilyChart.format.formatNumbers(sortedValues[1]);

    return [cleanXValues, cleanYValues];
  };

  chart.render = function(element, options, formattedData) {
      var preppedData = this.prepData(formattedData, options);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var xLabel = formattedData.chartData.x.label;
      var yLabel = formattedData.chartData.y.label;

    
      var yMin = 0;
      var lowestY = _.min(yValues);
      if(lowestY < 0) {
          yMin = lowestY;
      }

      yValues.unshift(yLabel);

      var dayDiff = popily.chart.format.daysDiff(xValues); 
      var tickFormatStr = popily.chart.format.formatFromDayDiff(dayDiff);
      
      var variation = options.variation || formattedData.chartData.metadata.intervals[0];

      var dateFormatStr = popily.chart.format.formatFromInterval(variation);
      if(_.isUndefined(variation)) {
        dateFormatStr = popily.chart.format.formatFromInspection(xValues);
      }
      
      var dateFormat = d3.time.format(dateFormatStr);
      var tickFormat = d3.time.format(tickFormatStr);
      var fullFormat = d3.time.format('%Y-%m-%d %H:%M:%S');

      var ticksValues = popily.chart.format.tickFormatValues(xValues, tickFormatStr, dateFormat);
      
      if(dateFormat != fullFormat)
          xValues = _.map(xValues, function(d) {
                  return dateFormat(fullFormat.parse(d.split('.')[0]));
              });
          
      xValues.unshift('x');

      if(!_.isUndefined(options.lineSize)) {
        var style = popily.chart.utils.createStyleElement('.'+options.uniqueClassName+' .c3-line { stroke-width: '+options.lineSize+'px; }')
        element.parentNode.appendChild(style);
      }

      var tooltip = (_.isUndefined(options.tooltip)?true:options.tooltip);
      if(tooltip && (!options.order || options.order == 'auto') ) {
        tooltip = {
          title: function (d) {
            return dateFormat(d);
          }
        }
      }

      var chartData = {
          bindto: element,
          data: {
              x: 'x',
              xFormat: dateFormatStr, // 'xFormat' can be used as custom format of 'x'
              columns: [xValues,yValues]
          },
          padding: this.defaults.chartPadding(),
          axis: {
              x: {
                  show: options.xAxis,
                  type: (!options.order || options.order == 'auto' ? 'timeseries' : 'category'),
                  tick: {
                      fit: false,
                      format: popily.chart.format.formatAxis(formattedData.chartData.x, options, tickFormat),
                      rotate: options.xRotation ||  45,
                      autorotate: !options.xRotation,
                      multiline: false,
                      //height: 130,
                      values: (!options.order || options.order == 'auto' ? ticksValues : null),
                      count: xValues.length-1
                  },
                  label: {
                     text: xLabel,
                     position: 'inner-right'
                  }
              },
              y: {
                  show: options.yAxis,
                  min: yMin,
                  label: {
                      text: yLabel,
                      position: 'outer-middle'
                  },
                  tick: {
                      format: popily.chart.format.formatAxis(formattedData.chartData.y, options, d3.format(",")),
                      rotate: options.yRotation ||  0,
                  }
              }
          },
          color: {
              pattern: options.colors
          },
          legend: {
              show: !_.isUndefined(options.legend) && options.legend
          },
          size: {
              height: options.height
          },
          line: {
              connectNull: true
          },
          point: {
            r: (options.pointSize || 2.5)
          },
          grid: {
            x: {
              show: _.isUndefined(options.xGrid)?false:options.xGrid
            },
            y: {
              show: _.isUndefined(options.yGrid)?true:options.yGrid
            },
            background: options.background
          },
          tooltip: tooltip
      }
      
      var tooltip = (_.isUndefined(options.tooltip)?true:options.tooltip);
      if(tooltip && (!options.order || options.order == 'auto') ) {
        chartData.tooltip.format = {
          title: function(d) {
            return dateFormat(d);
          } 
        }
        chartData.axis.x.tick.values = ticksValues;
      }


      var animation = popily.chart.utils.initialAnimation(chartData, options);
      var chart = c3.generate(chartData);

      animation.start(chart);
      
      return chart;
  };

  popilyChart.chartTypes.line = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;

  var chart = _.clone(popilyChart.baseChart);

  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.barCommon.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, rawData) {
      return popilyChart.chartTypes.linear.render(element, options, rawData);
  };

  popilyChart.chartTypes.multiLine = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var pie = _.clone(popilyChart.baseChart);
  pie.assignAxis = function(columns, calculation, options) {
      var axis = {};

      _.each(columns, function(column) {
          if(column.data_type === 'numeric') {
            axis.y = column;
          }
          else {
            axis.x = column;
          }
      });

      return axis;
  };

  pie.prepData = function(formattedData, options) {
    var that = this;
    var limit = that.defaults.pieLimit;
    var chartData = formattedData.chartData;
    var xValues = chartData.x.values;
    var yValues = chartData.y.values;
    var order = options.order || 'auto';

    cleanValues = popilyChart.chartData.sortData(xValues,yValues,[],limit,order);

    var cleanXValues = cleanValues[0];
    var cleanYValues = popilyChart.format.formatNumbers(popilyChart.format.toNumber(cleanValues[1]));

    return [cleanXValues, cleanYValues];
  };

  pie.render = function(element, options, formattedData) {
      var that = this;
      var preppedData = this.prepData(formattedData, options);
      var columns = _.zip(preppedData[0],preppedData[1]);

      var chartData = {
          bindto: element,
          data: {
              columns: columns,
              type: 'pie',
              order:null
          },
          color: {
              pattern: options.colors
          },
          legend: {
              position: 'bottom',
              show: preppedData[0].length < 20 ? _.isUndefined(options.legend) || options.legend : false
          },
          size: {
            height: options.height
          },
          grid: {
            background: options.background
          },
          tooltip: (_.isUndefined(options.tooltip)?true:options.tooltip)
      };
      
      
      var animation = popily.chart.utils.initialAnimation(chartData, options);
      var chart = c3.generate(chartData); 
      animation.start(chart);

      return chart;
  };

  popilyChart.chartTypes.pie = pie;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;

  var chart = _.clone(popilyChart.baseChart);
  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.barCommon.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, rawData) {
      return popilyChart.chartTypes.linear.render(element, options, rawData, true);
  };

  popilyChart.chartTypes.radar = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);
  chart.assignAxis = function(columns, calculation, options) {
      var axis = {};

      _.each(columns, function(column) {
          if(column.data_type === 'category') {
            axis.z = column;
          }
          else if(!axis.y) {
            axis.y = column;
          }
          else {
            axis.x = column;
          }
      });

      return axis;
  };

  chart.render = function(element, options, formattedData) {
      var preppedData = popilyChart.chartTypes.compare.prepData(formattedData, options);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var zValues = preppedData[2];
      var xLabel = formattedData.chartData.x.label;
      var yLabel = formattedData.chartData.y.label;
      var zLabel = formattedData.chartData.z.label;    

      var columns = [];
      var xs = {};
      var zs = {};

      /*
      console.log(xValues);
      console.log(yValues);
      console.log(zValues);
      */
      _.each(_.uniq(zValues), function(z) {
          zs[z] = {xs:[],ys:[]};
      });

      _.each(zValues, function(z,i) {
          zs[z].ys.push(yValues[i]);
          zs[z].xs.push(xValues[i]);
      });
      
      _.each(_.keys(zs), function(z) {
          zs[z].xs.unshift(z+'_x');
          zs[z].ys.unshift(z);

          xs[z] = z+'_x';
          columns.push(zs[z].xs);
          columns.push(zs[z].ys);
      });

      var tooltip = options.tooltip || {
          contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
              var markup = '<table class="popily-tooltip"><tbody>';
              if(!_.isUndefined(zValues[d[0].index]))
                markup += '<tr><th colspan="2"><span style="background-color:'+color(d[0].id)+'"></span> '+zValues[d[0].index]+'</th></tr>';
              
              markup += '<tr class="popily-tooltip-name"><td class="name">'+xLabel+'</td><td class="value">'+d[0].x+'</td></tr>';
              markup += '<tr class="popily-tooltip-name"><td class="name">'+yLabel+'</td><td class="value">'+d[0].value+'</td></tr>';
              
              markup += '</tbody></table>'
              return markup;
          }
      };

      var showLegend = true;
      if(_.unique(zValues).length > 25) {
          showLegend = false;
      }

      return popilyChart.chartTypes.compare.render(element, options, columns, xs, xLabel, yLabel, tooltip, formattedData);
  };

  popilyChart.chartTypes.scatterplotCategory = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);
  
  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.compare.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, rawData) {
      formattedData = rawData;
      var preppedData = popilyChart.chartTypes.compare.prepData(rawData, options);
      var xValues = preppedData[0];
      var yValues = preppedData[1];
      var zValues = preppedData[2];
      var xLabel = rawData.chartData.x.label;
      var yLabel = rawData.chartData.y.label;    


      var columns = [];
      yValues.unshift(yLabel);
      xValues.unshift(xLabel);
      var xs = {};
      xs[yLabel] = xLabel;
      columns.push(xValues);
      columns.push(yValues);

      var tooltip = options.tooltip || {
          contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
              
              var markup = '<table class="popily-tooltip"><tbody>';
              if(!_.isUndefined(zValues[d[0].index]))
                markup += '<tr><th colspan="2"><span style="background-color:'+color(d[0].id)+'"></span> '+zValues[d[0].index]+'</th></tr>';
              
              markup += '<tr class="popily-tooltip-name"><td class="name">'+xLabel+'</td><td class="value">'+d[0].x+'</td></tr>';
              markup += '<tr class="popily-tooltip-name"><td class="name">'+yLabel+'</td><td class="value">'+d[0].value+'</td></tr>';
              
              markup += '</tbody></table>'
              return markup;
          }
      };
        
      return popilyChart.chartTypes.compare.render(element, options, columns, xs, xLabel, yLabel, tooltip, formattedData);
  };

  popilyChart.chartTypes.scatterplot = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  var format = popilyChart.format;
  
  var chart = _.clone(popilyChart.baseChart);
  chart.assignAxis = function(columns, calculation, options) {
      var axis = {
        columns: columns
      };
      return axis;
  };

  chart.render = function(element, options, formattedData) {
      var columns = formattedData.chartData.columns;
      var calculation = formattedData.chartData.calculation;
      var header = _.pluck(columns,'label')[0];
      var value = format.formatNumbers(_.pluck(columns,'values'))[0];      
      var p = document.createElement('p');
      p.innerHTML = 'The ' + format.wrapLabel(calculation) + ' of ' + format.wrapLabel(header) + ' is ' + format.wrapLabel(value);

      element.appendChild(p);

      return p;
  };

  popilyChart.chartTypes.sentence = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;

  var chart = _.clone(popilyChart.baseChart);
  chart.assignAxis = function(columns, calculation, options) {
      return popilyChart.chartTypes.barCommon.assignAxis(columns,calculation,options);
  };

  chart.render = function(element, options, rawData) {
      return popilyChart.chartTypes.linear.render(element, options, rawData, true);
  };

  popilyChart.chartTypes.stackedArea = chart;
})(window);

(function(window) {
  var popilyChart = window.popily.chart;
  
  var chart = _.clone(popilyChart.baseChart);
  chart.assignAxis = function(columns, calculation, options) {
      var axis = {
        columns: columns
      };
      return axis;
  };


  chart.prepData = function(formattedData, options) {
      var columns = formattedData.chartData.columns;
      var interval = options.interval || formattedData.chartData.defaultVariation;

      _.each(columns, function(column) {
          if(column.dataType === 'datetime') {
            column.values = popilyChart.format.formatDates(column.values,interval);
          }
          else if(column.dataType === 'numeric') {
            column.values = popilyChart.format.formatNumbers(column.values,2);
          }
      });

      return columns;
  };

  chart.render = function(element, options, formattedData) {
      var columns = this.prepData(formattedData,options);
      var headers = _.pluck(columns,'label');
      var values = _.pluck(columns,'values');
      var rows = _.zip.apply(null, values);

      var table = document.createElement('table');
      var thead = document.createElement('thead');
      var tbody = document.createElement('tbody');
      var theadrow = document.createElement('tr');

      _.each(headers,function(header) {
        var th = document.createElement('th');
        th.innerHTML = header;
        theadrow.appendChild(th);
      });

      _.each(rows, function(items) {
        var tr = document.createElement('tr');
          _.each(items, function(item) {
            var td = document.createElement('td');
            td.innerHTML = item;
            tr.appendChild(td);
          });

        tbody.appendChild(tr);
      });

      thead.appendChild(theadrow);
      table.appendChild(thead);
      table.appendChild(tbody);

      element.appendChild(table);

      return table;
  };

  popilyChart.chartTypes.table = chart;
})(window);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImQzLm1pbi5qcyIsImQzLXRpcC5qcyIsInBhdGhzZWcuanMiLCJjMy5taW4uanMiLCJ1bmRlcnNjb3JlLm1pbi5qcyIsIm51bWVyYWwubWluLmpzIiwicG9waWx5LWFwaS5qcyIsInBvcGlseS5qcyIsImFuYWx5emUuanMiLCJjaGFydC1kYXRhLmpzIiwiZGF0YXNldC5qcyIsImZvcm1hdC5qcyIsInV0aWxzLmpzIiwibGFiZWwuanMiLCJjM2V4dGVuZC5qcyIsImJhci5qcyIsImNvbXBhcmUuanMiLCJsaW5lYXIuanMiLCJiYXItZ3JvdXBlZC5qcyIsImJhci1zdGFja2VkLmpzIiwiYnViYmxlLXN0YXRpYy5qcyIsImJ1YmJsZTIuanMiLCJnYXVnZS5qcyIsImxpbmUuanMiLCJtdWx0aS1saW5lLmpzIiwicGllLmpzIiwicmFkYXIuanMiLCJzY2F0dGVycGxvdC1jYXRlZ29yeS5qcyIsInNjYXR0ZXJwbG90LmpzIiwic2VudGVuY2UuanMiLCJzdGFja2VkLWFyZWEuanMiLCJ0YWJsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDblVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5eUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDem9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9NQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDak9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzFIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FKOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBS3pJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2hNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJwb3BpbHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIhZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4pe3JldHVybiBuJiYobi5vd25lckRvY3VtZW50fHxuLmRvY3VtZW50fHxuKS5kb2N1bWVudEVsZW1lbnR9ZnVuY3Rpb24gdChuKXtyZXR1cm4gbiYmKG4ub3duZXJEb2N1bWVudCYmbi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3fHxuLmRvY3VtZW50JiZufHxuLmRlZmF1bHRWaWV3KX1mdW5jdGlvbiBlKG4sdCl7cmV0dXJuIHQ+bj8tMTpuPnQ/MTpuPj10PzA6TmFOfWZ1bmN0aW9uIHIobil7cmV0dXJuIG51bGw9PT1uP05hTjorbn1mdW5jdGlvbiB1KG4pe3JldHVybiFpc05hTihuKX1mdW5jdGlvbiBpKG4pe3JldHVybntsZWZ0OmZ1bmN0aW9uKHQsZSxyLHUpe2Zvcihhcmd1bWVudHMubGVuZ3RoPDMmJihyPTApLGFyZ3VtZW50cy5sZW5ndGg8NCYmKHU9dC5sZW5ndGgpO3U+cjspe3ZhciBpPXIrdT4+PjE7bih0W2ldLGUpPDA/cj1pKzE6dT1pfXJldHVybiByfSxyaWdodDpmdW5jdGlvbih0LGUscix1KXtmb3IoYXJndW1lbnRzLmxlbmd0aDwzJiYocj0wKSxhcmd1bWVudHMubGVuZ3RoPDQmJih1PXQubGVuZ3RoKTt1PnI7KXt2YXIgaT1yK3U+Pj4xO24odFtpXSxlKT4wP3U9aTpyPWkrMX1yZXR1cm4gcn19fWZ1bmN0aW9uIGEobil7cmV0dXJuIG4ubGVuZ3RofWZ1bmN0aW9uIG8obil7Zm9yKHZhciB0PTE7bip0JTE7KXQqPTEwO3JldHVybiB0fWZ1bmN0aW9uIGwobix0KXtmb3IodmFyIGUgaW4gdClPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx7dmFsdWU6dFtlXSxlbnVtZXJhYmxlOiExfSl9ZnVuY3Rpb24gYygpe3RoaXMuXz1PYmplY3QuY3JlYXRlKG51bGwpfWZ1bmN0aW9uIHMobil7cmV0dXJuKG4rPVwiXCIpPT09eGF8fG5bMF09PT1iYT9iYStuOm59ZnVuY3Rpb24gZihuKXtyZXR1cm4obis9XCJcIilbMF09PT1iYT9uLnNsaWNlKDEpOm59ZnVuY3Rpb24gaChuKXtyZXR1cm4gcyhuKWluIHRoaXMuX31mdW5jdGlvbiBnKG4pe3JldHVybihuPXMobikpaW4gdGhpcy5fJiZkZWxldGUgdGhpcy5fW25dfWZ1bmN0aW9uIHAoKXt2YXIgbj1bXTtmb3IodmFyIHQgaW4gdGhpcy5fKW4ucHVzaChmKHQpKTtyZXR1cm4gbn1mdW5jdGlvbiB2KCl7dmFyIG49MDtmb3IodmFyIHQgaW4gdGhpcy5fKSsrbjtyZXR1cm4gbn1mdW5jdGlvbiBkKCl7Zm9yKHZhciBuIGluIHRoaXMuXylyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBtKCl7dGhpcy5fPU9iamVjdC5jcmVhdGUobnVsbCl9ZnVuY3Rpb24geShuKXtyZXR1cm4gbn1mdW5jdGlvbiBNKG4sdCxlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1lLmFwcGx5KHQsYXJndW1lbnRzKTtyZXR1cm4gcj09PXQ/bjpyfX1mdW5jdGlvbiB4KG4sdCl7aWYodCBpbiBuKXJldHVybiB0O3Q9dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpO2Zvcih2YXIgZT0wLHI9X2EubGVuZ3RoO3I+ZTsrK2Upe3ZhciB1PV9hW2VdK3Q7aWYodSBpbiBuKXJldHVybiB1fX1mdW5jdGlvbiBiKCl7fWZ1bmN0aW9uIF8oKXt9ZnVuY3Rpb24gdyhuKXtmdW5jdGlvbiB0KCl7Zm9yKHZhciB0LHI9ZSx1PS0xLGk9ci5sZW5ndGg7Kyt1PGk7KSh0PXJbdV0ub24pJiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbn12YXIgZT1bXSxyPW5ldyBjO3JldHVybiB0Lm9uPWZ1bmN0aW9uKHQsdSl7dmFyIGksYT1yLmdldCh0KTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP2EmJmEub246KGEmJihhLm9uPW51bGwsZT1lLnNsaWNlKDAsaT1lLmluZGV4T2YoYSkpLmNvbmNhdChlLnNsaWNlKGkrMSkpLHIucmVtb3ZlKHQpKSx1JiZlLnB1c2goci5zZXQodCx7b246dX0pKSxuKX0sdH1mdW5jdGlvbiBTKCl7b2EuZXZlbnQucHJldmVudERlZmF1bHQoKX1mdW5jdGlvbiBrKCl7Zm9yKHZhciBuLHQ9b2EuZXZlbnQ7bj10LnNvdXJjZUV2ZW50Oyl0PW47cmV0dXJuIHR9ZnVuY3Rpb24gTihuKXtmb3IodmFyIHQ9bmV3IF8sZT0wLHI9YXJndW1lbnRzLmxlbmd0aDsrK2U8cjspdFthcmd1bWVudHNbZV1dPXcodCk7cmV0dXJuIHQub2Y9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gZnVuY3Rpb24odSl7dHJ5e3ZhciBpPXUuc291cmNlRXZlbnQ9b2EuZXZlbnQ7dS50YXJnZXQ9bixvYS5ldmVudD11LHRbdS50eXBlXS5hcHBseShlLHIpfWZpbmFsbHl7b2EuZXZlbnQ9aX19fSx0fWZ1bmN0aW9uIEUobil7cmV0dXJuIFNhKG4sQWEpLG59ZnVuY3Rpb24gQShuKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246ZnVuY3Rpb24oKXtyZXR1cm4ga2Eobix0aGlzKX19ZnVuY3Rpb24gQyhuKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246ZnVuY3Rpb24oKXtyZXR1cm4gTmEobix0aGlzKX19ZnVuY3Rpb24geihuLHQpe2Z1bmN0aW9uIGUoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZShuKX1mdW5jdGlvbiByKCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuLnNwYWNlLG4ubG9jYWwpfWZ1bmN0aW9uIHUoKXt0aGlzLnNldEF0dHJpYnV0ZShuLHQpfWZ1bmN0aW9uIGkoKXt0aGlzLnNldEF0dHJpYnV0ZU5TKG4uc3BhY2Usbi5sb2NhbCx0KX1mdW5jdGlvbiBhKCl7dmFyIGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09ZT90aGlzLnJlbW92ZUF0dHJpYnV0ZShuKTp0aGlzLnNldEF0dHJpYnV0ZShuLGUpfWZ1bmN0aW9uIG8oKXt2YXIgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtudWxsPT1lP3RoaXMucmVtb3ZlQXR0cmlidXRlTlMobi5zcGFjZSxuLmxvY2FsKTp0aGlzLnNldEF0dHJpYnV0ZU5TKG4uc3BhY2Usbi5sb2NhbCxlKX1yZXR1cm4gbj1vYS5ucy5xdWFsaWZ5KG4pLG51bGw9PXQ/bi5sb2NhbD9yOmU6XCJmdW5jdGlvblwiPT10eXBlb2YgdD9uLmxvY2FsP286YTpuLmxvY2FsP2k6dX1mdW5jdGlvbiBMKG4pe3JldHVybiBuLnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpfWZ1bmN0aW9uIHEobil7cmV0dXJuIG5ldyBSZWdFeHAoXCIoPzpefFxcXFxzKylcIitvYS5yZXF1b3RlKG4pK1wiKD86XFxcXHMrfCQpXCIsXCJnXCIpfWZ1bmN0aW9uIFQobil7cmV0dXJuKG4rXCJcIikudHJpbSgpLnNwbGl0KC9efFxccysvKX1mdW5jdGlvbiBSKG4sdCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT0tMTsrK2U8dTspbltlXSh0aGlzLHQpfWZ1bmN0aW9uIHIoKXtmb3IodmFyIGU9LTEscj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTsrK2U8dTspbltlXSh0aGlzLHIpfW49VChuKS5tYXAoRCk7dmFyIHU9bi5sZW5ndGg7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD9yOmV9ZnVuY3Rpb24gRChuKXt2YXIgdD1xKG4pO3JldHVybiBmdW5jdGlvbihlLHIpe2lmKHU9ZS5jbGFzc0xpc3QpcmV0dXJuIHI/dS5hZGQobik6dS5yZW1vdmUobik7dmFyIHU9ZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIjtyPyh0Lmxhc3RJbmRleD0wLHQudGVzdCh1KXx8ZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLEwodStcIiBcIituKSkpOmUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixMKHUucmVwbGFjZSh0LFwiIFwiKSkpfX1mdW5jdGlvbiBQKG4sdCxlKXtmdW5jdGlvbiByKCl7dGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuKX1mdW5jdGlvbiB1KCl7dGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuLHQsZSl9ZnVuY3Rpb24gaSgpe3ZhciByPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO251bGw9PXI/dGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuKTp0aGlzLnN0eWxlLnNldFByb3BlcnR5KG4scixlKX1yZXR1cm4gbnVsbD09dD9yOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/aTp1fWZ1bmN0aW9uIFUobix0KXtmdW5jdGlvbiBlKCl7ZGVsZXRlIHRoaXNbbl19ZnVuY3Rpb24gcigpe3RoaXNbbl09dH1mdW5jdGlvbiB1KCl7dmFyIGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7bnVsbD09ZT9kZWxldGUgdGhpc1tuXTp0aGlzW25dPWV9cmV0dXJuIG51bGw9PXQ/ZTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3U6cn1mdW5jdGlvbiBqKG4pe2Z1bmN0aW9uIHQoKXt2YXIgdD10aGlzLm93bmVyRG9jdW1lbnQsZT10aGlzLm5hbWVzcGFjZVVSSTtyZXR1cm4gZT09PUNhJiZ0LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkk9PT1DYT90LmNyZWF0ZUVsZW1lbnQobik6dC5jcmVhdGVFbGVtZW50TlMoZSxuKX1mdW5jdGlvbiBlKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobi5zcGFjZSxuLmxvY2FsKX1yZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246KG49b2EubnMucXVhbGlmeShuKSkubG9jYWw/ZTp0fWZ1bmN0aW9uIEYoKXt2YXIgbj10aGlzLnBhcmVudE5vZGU7biYmbi5yZW1vdmVDaGlsZCh0aGlzKX1mdW5jdGlvbiBIKG4pe3JldHVybntfX2RhdGFfXzpufX1mdW5jdGlvbiBPKG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBFYSh0aGlzLG4pfX1mdW5jdGlvbiBJKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RofHwobj1lKSxmdW5jdGlvbih0LGUpe3JldHVybiB0JiZlP24odC5fX2RhdGFfXyxlLl9fZGF0YV9fKTohdC0hZX19ZnVuY3Rpb24gWShuLHQpe2Zvcih2YXIgZT0wLHI9bi5sZW5ndGg7cj5lO2UrKylmb3IodmFyIHUsaT1uW2VdLGE9MCxvPWkubGVuZ3RoO28+YTthKyspKHU9aVthXSkmJnQodSxhLGUpO3JldHVybiBufWZ1bmN0aW9uIFoobil7cmV0dXJuIFNhKG4sTGEpLG59ZnVuY3Rpb24gVihuKXt2YXIgdCxlO3JldHVybiBmdW5jdGlvbihyLHUsaSl7dmFyIGEsbz1uW2ldLnVwZGF0ZSxsPW8ubGVuZ3RoO2ZvcihpIT1lJiYoZT1pLHQ9MCksdT49dCYmKHQ9dSsxKTshKGE9b1t0XSkmJisrdDxsOyk7cmV0dXJuIGF9fWZ1bmN0aW9uIFgobix0LGUpe2Z1bmN0aW9uIHIoKXt2YXIgdD10aGlzW2FdO3QmJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobix0LHQuJCksZGVsZXRlIHRoaXNbYV0pfWZ1bmN0aW9uIHUoKXt2YXIgdT1sKHQsY2EoYXJndW1lbnRzKSk7ci5jYWxsKHRoaXMpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihuLHRoaXNbYV09dSx1LiQ9ZSksdS5fPXR9ZnVuY3Rpb24gaSgpe3ZhciB0LGU9bmV3IFJlZ0V4cChcIl5fX29uKFteLl0rKVwiK29hLnJlcXVvdGUobikrXCIkXCIpO2Zvcih2YXIgciBpbiB0aGlzKWlmKHQ9ci5tYXRjaChlKSl7dmFyIHU9dGhpc1tyXTt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodFsxXSx1LHUuJCksZGVsZXRlIHRoaXNbcl19fXZhciBhPVwiX19vblwiK24sbz1uLmluZGV4T2YoXCIuXCIpLGw9JDtvPjAmJihuPW4uc2xpY2UoMCxvKSk7dmFyIGM9cWEuZ2V0KG4pO3JldHVybiBjJiYobj1jLGw9Qiksbz90P3U6cjp0P2I6aX1mdW5jdGlvbiAkKG4sdCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciByPW9hLmV2ZW50O29hLmV2ZW50PWUsdFswXT10aGlzLl9fZGF0YV9fO3RyeXtuLmFwcGx5KHRoaXMsdCl9ZmluYWxseXtvYS5ldmVudD1yfX19ZnVuY3Rpb24gQihuLHQpe3ZhciBlPSQobix0KTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHQ9dGhpcyxyPW4ucmVsYXRlZFRhcmdldDtyJiYocj09PXR8fDgmci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0KSl8fGUuY2FsbCh0LG4pfX1mdW5jdGlvbiBXKGUpe3ZhciByPVwiLmRyYWdzdXBwcmVzcy1cIisgKytSYSx1PVwiY2xpY2tcIityLGk9b2Euc2VsZWN0KHQoZSkpLm9uKFwidG91Y2htb3ZlXCIrcixTKS5vbihcImRyYWdzdGFydFwiK3IsUykub24oXCJzZWxlY3RzdGFydFwiK3IsUyk7aWYobnVsbD09VGEmJihUYT1cIm9uc2VsZWN0c3RhcnRcImluIGU/ITE6eChlLnN0eWxlLFwidXNlclNlbGVjdFwiKSksVGEpe3ZhciBhPW4oZSkuc3R5bGUsbz1hW1RhXTthW1RhXT1cIm5vbmVcIn1yZXR1cm4gZnVuY3Rpb24obil7aWYoaS5vbihyLG51bGwpLFRhJiYoYVtUYV09byksbil7dmFyIHQ9ZnVuY3Rpb24oKXtpLm9uKHUsbnVsbCl9O2kub24odSxmdW5jdGlvbigpe1MoKSx0KCl9LCEwKSxzZXRUaW1lb3V0KHQsMCl9fX1mdW5jdGlvbiBKKG4sZSl7ZS5jaGFuZ2VkVG91Y2hlcyYmKGU9ZS5jaGFuZ2VkVG91Y2hlc1swXSk7dmFyIHI9bi5vd25lclNWR0VsZW1lbnR8fG47aWYoci5jcmVhdGVTVkdQb2ludCl7dmFyIHU9ci5jcmVhdGVTVkdQb2ludCgpO2lmKDA+RGEpe3ZhciBpPXQobik7aWYoaS5zY3JvbGxYfHxpLnNjcm9sbFkpe3I9b2Euc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxsZWZ0OjAsbWFyZ2luOjAscGFkZGluZzowLGJvcmRlcjpcIm5vbmVcIn0sXCJpbXBvcnRhbnRcIik7dmFyIGE9clswXVswXS5nZXRTY3JlZW5DVE0oKTtEYT0hKGEuZnx8YS5lKSxyLnJlbW92ZSgpfX1yZXR1cm4gRGE/KHUueD1lLnBhZ2VYLHUueT1lLnBhZ2VZKToodS54PWUuY2xpZW50WCx1Lnk9ZS5jbGllbnRZKSx1PXUubWF0cml4VHJhbnNmb3JtKG4uZ2V0U2NyZWVuQ1RNKCkuaW52ZXJzZSgpKSxbdS54LHUueV19dmFyIG89bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm5bZS5jbGllbnRYLW8ubGVmdC1uLmNsaWVudExlZnQsZS5jbGllbnRZLW8udG9wLW4uY2xpZW50VG9wXX1mdW5jdGlvbiBHKCl7cmV0dXJuIG9hLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXJ9ZnVuY3Rpb24gSyhuKXtyZXR1cm4gbj4wPzE6MD5uPy0xOjB9ZnVuY3Rpb24gUShuLHQsZSl7cmV0dXJuKHRbMF0tblswXSkqKGVbMV0tblsxXSktKHRbMV0tblsxXSkqKGVbMF0tblswXSl9ZnVuY3Rpb24gbm4obil7cmV0dXJuIG4+MT8wOi0xPm4/amE6TWF0aC5hY29zKG4pfWZ1bmN0aW9uIHRuKG4pe3JldHVybiBuPjE/T2E6LTE+bj8tT2E6TWF0aC5hc2luKG4pfWZ1bmN0aW9uIGVuKG4pe3JldHVybigobj1NYXRoLmV4cChuKSktMS9uKS8yfWZ1bmN0aW9uIHJuKG4pe3JldHVybigobj1NYXRoLmV4cChuKSkrMS9uKS8yfWZ1bmN0aW9uIHVuKG4pe3JldHVybigobj1NYXRoLmV4cCgyKm4pKS0xKS8obisxKX1mdW5jdGlvbiBhbihuKXtyZXR1cm4obj1NYXRoLnNpbihuLzIpKSpufWZ1bmN0aW9uIG9uKCl7fWZ1bmN0aW9uIGxuKG4sdCxlKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGxuPyh0aGlzLmg9K24sdGhpcy5zPSt0LHZvaWQodGhpcy5sPStlKSk6YXJndW1lbnRzLmxlbmd0aDwyP24gaW5zdGFuY2VvZiBsbj9uZXcgbG4obi5oLG4ucyxuLmwpOl9uKFwiXCIrbix3bixsbik6bmV3IGxuKG4sdCxlKX1mdW5jdGlvbiBjbihuLHQsZSl7ZnVuY3Rpb24gcihuKXtyZXR1cm4gbj4zNjA/bi09MzYwOjA+biYmKG4rPTM2MCksNjA+bj9pKyhhLWkpKm4vNjA6MTgwPm4/YToyNDA+bj9pKyhhLWkpKigyNDAtbikvNjA6aX1mdW5jdGlvbiB1KG4pe3JldHVybiBNYXRoLnJvdW5kKDI1NSpyKG4pKX12YXIgaSxhO3JldHVybiBuPWlzTmFOKG4pPzA6KG4lPTM2MCk8MD9uKzM2MDpuLHQ9aXNOYU4odCk/MDowPnQ/MDp0PjE/MTp0LGU9MD5lPzA6ZT4xPzE6ZSxhPS41Pj1lP2UqKDErdCk6ZSt0LWUqdCxpPTIqZS1hLG5ldyB5bih1KG4rMTIwKSx1KG4pLHUobi0xMjApKX1mdW5jdGlvbiBzbihuLHQsZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBzbj8odGhpcy5oPStuLHRoaXMuYz0rdCx2b2lkKHRoaXMubD0rZSkpOmFyZ3VtZW50cy5sZW5ndGg8Mj9uIGluc3RhbmNlb2Ygc24/bmV3IHNuKG4uaCxuLmMsbi5sKTpuIGluc3RhbmNlb2YgaG4/cG4obi5sLG4uYSxuLmIpOnBuKChuPVNuKChuPW9hLnJnYihuKSkucixuLmcsbi5iKSkubCxuLmEsbi5iKTpuZXcgc24obix0LGUpfWZ1bmN0aW9uIGZuKG4sdCxlKXtyZXR1cm4gaXNOYU4obikmJihuPTApLGlzTmFOKHQpJiYodD0wKSxuZXcgaG4oZSxNYXRoLmNvcyhuKj1JYSkqdCxNYXRoLnNpbihuKSp0KX1mdW5jdGlvbiBobihuLHQsZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBobj8odGhpcy5sPStuLHRoaXMuYT0rdCx2b2lkKHRoaXMuYj0rZSkpOmFyZ3VtZW50cy5sZW5ndGg8Mj9uIGluc3RhbmNlb2YgaG4/bmV3IGhuKG4ubCxuLmEsbi5iKTpuIGluc3RhbmNlb2Ygc24/Zm4obi5oLG4uYyxuLmwpOlNuKChuPXluKG4pKS5yLG4uZyxuLmIpOm5ldyBobihuLHQsZSl9ZnVuY3Rpb24gZ24obix0LGUpe3ZhciByPShuKzE2KS8xMTYsdT1yK3QvNTAwLGk9ci1lLzIwMDtyZXR1cm4gdT12bih1KSpRYSxyPXZuKHIpKm5vLGk9dm4oaSkqdG8sbmV3IHluKG1uKDMuMjQwNDU0Mip1LTEuNTM3MTM4NSpyLS40OTg1MzE0KmkpLG1uKC0uOTY5MjY2KnUrMS44NzYwMTA4KnIrLjA0MTU1NippKSxtbiguMDU1NjQzNCp1LS4yMDQwMjU5KnIrMS4wNTcyMjUyKmkpKX1mdW5jdGlvbiBwbihuLHQsZSl7cmV0dXJuIG4+MD9uZXcgc24oTWF0aC5hdGFuMihlLHQpKllhLE1hdGguc3FydCh0KnQrZSplKSxuKTpuZXcgc24oTmFOLE5hTixuKX1mdW5jdGlvbiB2bihuKXtyZXR1cm4gbj4uMjA2ODkzMDM0P24qbipuOihuLTQvMjkpLzcuNzg3MDM3fWZ1bmN0aW9uIGRuKG4pe3JldHVybiBuPi4wMDg4NTY/TWF0aC5wb3cobiwxLzMpOjcuNzg3MDM3Km4rNC8yOX1mdW5jdGlvbiBtbihuKXtyZXR1cm4gTWF0aC5yb3VuZCgyNTUqKC4wMDMwND49bj8xMi45MipuOjEuMDU1Kk1hdGgucG93KG4sMS8yLjQpLS4wNTUpKX1mdW5jdGlvbiB5bihuLHQsZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiB5bj8odGhpcy5yPX5+bix0aGlzLmc9fn50LHZvaWQodGhpcy5iPX5+ZSkpOmFyZ3VtZW50cy5sZW5ndGg8Mj9uIGluc3RhbmNlb2YgeW4/bmV3IHluKG4ucixuLmcsbi5iKTpfbihcIlwiK24seW4sY24pOm5ldyB5bihuLHQsZSl9ZnVuY3Rpb24gTW4obil7cmV0dXJuIG5ldyB5bihuPj4xNixuPj44JjI1NSwyNTUmbil9ZnVuY3Rpb24geG4obil7cmV0dXJuIE1uKG4pK1wiXCJ9ZnVuY3Rpb24gYm4obil7cmV0dXJuIDE2Pm4/XCIwXCIrTWF0aC5tYXgoMCxuKS50b1N0cmluZygxNik6TWF0aC5taW4oMjU1LG4pLnRvU3RyaW5nKDE2KX1mdW5jdGlvbiBfbihuLHQsZSl7dmFyIHIsdSxpLGE9MCxvPTAsbD0wO2lmKHI9LyhbYS16XSspXFwoKC4qKVxcKS8uZXhlYyhuPW4udG9Mb3dlckNhc2UoKSkpc3dpdGNoKHU9clsyXS5zcGxpdChcIixcIiksclsxXSl7Y2FzZVwiaHNsXCI6cmV0dXJuIGUocGFyc2VGbG9hdCh1WzBdKSxwYXJzZUZsb2F0KHVbMV0pLzEwMCxwYXJzZUZsb2F0KHVbMl0pLzEwMCk7Y2FzZVwicmdiXCI6cmV0dXJuIHQoTm4odVswXSksTm4odVsxXSksTm4odVsyXSkpfXJldHVybihpPXVvLmdldChuKSk/dChpLnIsaS5nLGkuYik6KG51bGw9PW58fFwiI1wiIT09bi5jaGFyQXQoMCl8fGlzTmFOKGk9cGFyc2VJbnQobi5zbGljZSgxKSwxNikpfHwoND09PW4ubGVuZ3RoPyhhPSgzODQwJmkpPj40LGE9YT4+NHxhLG89MjQwJmksbz1vPj40fG8sbD0xNSZpLGw9bDw8NHxsKTo3PT09bi5sZW5ndGgmJihhPSgxNjcxMTY4MCZpKT4+MTYsbz0oNjUyODAmaSk+PjgsbD0yNTUmaSkpLHQoYSxvLGwpKX1mdW5jdGlvbiB3bihuLHQsZSl7dmFyIHIsdSxpPU1hdGgubWluKG4vPTI1NSx0Lz0yNTUsZS89MjU1KSxhPU1hdGgubWF4KG4sdCxlKSxvPWEtaSxsPShhK2kpLzI7cmV0dXJuIG8/KHU9LjU+bD9vLyhhK2kpOm8vKDItYS1pKSxyPW49PWE/KHQtZSkvbysoZT50PzY6MCk6dD09YT8oZS1uKS9vKzI6KG4tdCkvbys0LHIqPTYwKToocj1OYU4sdT1sPjAmJjE+bD8wOnIpLG5ldyBsbihyLHUsbCl9ZnVuY3Rpb24gU24obix0LGUpe249a24obiksdD1rbih0KSxlPWtuKGUpO3ZhciByPWRuKCguNDEyNDU2NCpuKy4zNTc1NzYxKnQrLjE4MDQzNzUqZSkvUWEpLHU9ZG4oKC4yMTI2NzI5Km4rLjcxNTE1MjIqdCsuMDcyMTc1KmUpL25vKSxpPWRuKCguMDE5MzMzOSpuKy4xMTkxOTIqdCsuOTUwMzA0MSplKS90byk7cmV0dXJuIGhuKDExNip1LTE2LDUwMCooci11KSwyMDAqKHUtaSkpfWZ1bmN0aW9uIGtuKG4pe3JldHVybihuLz0yNTUpPD0uMDQwNDU/bi8xMi45MjpNYXRoLnBvdygobisuMDU1KS8xLjA1NSwyLjQpfWZ1bmN0aW9uIE5uKG4pe3ZhciB0PXBhcnNlRmxvYXQobik7cmV0dXJuXCIlXCI9PT1uLmNoYXJBdChuLmxlbmd0aC0xKT9NYXRoLnJvdW5kKDIuNTUqdCk6dH1mdW5jdGlvbiBFbihuKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246ZnVuY3Rpb24oKXtyZXR1cm4gbn19ZnVuY3Rpb24gQW4obil7cmV0dXJuIGZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gMj09PWFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihyPWUsZT1udWxsKSxDbih0LGUsbixyKX19ZnVuY3Rpb24gQ24obix0LGUscil7ZnVuY3Rpb24gdSgpe3ZhciBuLHQ9bC5zdGF0dXM7aWYoIXQmJkxuKGwpfHx0Pj0yMDAmJjMwMD50fHwzMDQ9PT10KXt0cnl7bj1lLmNhbGwoaSxsKX1jYXRjaChyKXtyZXR1cm4gdm9pZCBhLmVycm9yLmNhbGwoaSxyKX1hLmxvYWQuY2FsbChpLG4pfWVsc2UgYS5lcnJvci5jYWxsKGksbCl9dmFyIGk9e30sYT1vYS5kaXNwYXRjaChcImJlZm9yZXNlbmRcIixcInByb2dyZXNzXCIsXCJsb2FkXCIsXCJlcnJvclwiKSxvPXt9LGw9bmV3IFhNTEh0dHBSZXF1ZXN0LGM9bnVsbDtyZXR1cm4hdGhpcy5YRG9tYWluUmVxdWVzdHx8XCJ3aXRoQ3JlZGVudGlhbHNcImluIGx8fCEvXihodHRwKHMpPzopP1xcL1xcLy8udGVzdChuKXx8KGw9bmV3IFhEb21haW5SZXF1ZXN0KSxcIm9ubG9hZFwiaW4gbD9sLm9ubG9hZD1sLm9uZXJyb3I9dTpsLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2wucmVhZHlTdGF0ZT4zJiZ1KCl9LGwub25wcm9ncmVzcz1mdW5jdGlvbihuKXt2YXIgdD1vYS5ldmVudDtvYS5ldmVudD1uO3RyeXthLnByb2dyZXNzLmNhbGwoaSxsKX1maW5hbGx5e29hLmV2ZW50PXR9fSxpLmhlYWRlcj1mdW5jdGlvbihuLHQpe3JldHVybiBuPShuK1wiXCIpLnRvTG93ZXJDYXNlKCksYXJndW1lbnRzLmxlbmd0aDwyP29bbl06KG51bGw9PXQ/ZGVsZXRlIG9bbl06b1tuXT10K1wiXCIsaSl9LGkubWltZVR5cGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9bnVsbD09bj9udWxsOm4rXCJcIixpKTp0fSxpLnJlc3BvbnNlVHlwZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz1uLGkpOmN9LGkucmVzcG9uc2U9ZnVuY3Rpb24obil7cmV0dXJuIGU9bixpfSxbXCJnZXRcIixcInBvc3RcIl0uZm9yRWFjaChmdW5jdGlvbihuKXtpW25dPWZ1bmN0aW9uKCl7cmV0dXJuIGkuc2VuZC5hcHBseShpLFtuXS5jb25jYXQoY2EoYXJndW1lbnRzKSkpfX0pLGkuc2VuZD1mdW5jdGlvbihlLHIsdSl7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHImJih1PXIscj1udWxsKSxsLm9wZW4oZSxuLCEwKSxudWxsPT10fHxcImFjY2VwdFwiaW4gb3x8KG8uYWNjZXB0PXQrXCIsKi8qXCIpLGwuc2V0UmVxdWVzdEhlYWRlcilmb3IodmFyIHMgaW4gbylsLnNldFJlcXVlc3RIZWFkZXIocyxvW3NdKTtyZXR1cm4gbnVsbCE9dCYmbC5vdmVycmlkZU1pbWVUeXBlJiZsLm92ZXJyaWRlTWltZVR5cGUodCksbnVsbCE9YyYmKGwucmVzcG9uc2VUeXBlPWMpLG51bGwhPXUmJmkub24oXCJlcnJvclwiLHUpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKG4pe3UobnVsbCxuKX0pLGEuYmVmb3Jlc2VuZC5jYWxsKGksbCksbC5zZW5kKG51bGw9PXI/bnVsbDpyKSxpfSxpLmFib3J0PWZ1bmN0aW9uKCl7cmV0dXJuIGwuYWJvcnQoKSxpfSxvYS5yZWJpbmQoaSxhLFwib25cIiksbnVsbD09cj9pOmkuZ2V0KHpuKHIpKX1mdW5jdGlvbiB6bihuKXtyZXR1cm4gMT09PW4ubGVuZ3RoP2Z1bmN0aW9uKHQsZSl7bihudWxsPT10P2U6bnVsbCl9Om59ZnVuY3Rpb24gTG4obil7dmFyIHQ9bi5yZXNwb25zZVR5cGU7cmV0dXJuIHQmJlwidGV4dFwiIT09dD9uLnJlc3BvbnNlOm4ucmVzcG9uc2VUZXh0fWZ1bmN0aW9uIHFuKG4sdCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoOzI+ciYmKHQ9MCksMz5yJiYoZT1EYXRlLm5vdygpKTt2YXIgdT1lK3QsaT17YzpuLHQ6dSxuOm51bGx9O3JldHVybiBhbz9hby5uPWk6aW89aSxhbz1pLG9vfHwobG89Y2xlYXJUaW1lb3V0KGxvKSxvbz0xLGNvKFRuKSksaX1mdW5jdGlvbiBUbigpe3ZhciBuPVJuKCksdD1EbigpLW47dD4yND8oaXNGaW5pdGUodCkmJihjbGVhclRpbWVvdXQobG8pLGxvPXNldFRpbWVvdXQoVG4sdCkpLG9vPTApOihvbz0xLGNvKFRuKSl9ZnVuY3Rpb24gUm4oKXtmb3IodmFyIG49RGF0ZS5ub3coKSx0PWlvO3Q7KW4+PXQudCYmdC5jKG4tdC50KSYmKHQuYz1udWxsKSx0PXQubjtyZXR1cm4gbn1mdW5jdGlvbiBEbigpe2Zvcih2YXIgbix0PWlvLGU9MS8wO3Q7KXQuYz8odC50PGUmJihlPXQudCksdD0obj10KS5uKTp0PW4/bi5uPXQubjppbz10Lm47cmV0dXJuIGFvPW4sZX1mdW5jdGlvbiBQbihuLHQpe3JldHVybiB0LShuP01hdGguY2VpbChNYXRoLmxvZyhuKS9NYXRoLkxOMTApOjEpfWZ1bmN0aW9uIFVuKG4sdCl7dmFyIGU9TWF0aC5wb3coMTAsMypNYSg4LXQpKTtyZXR1cm57c2NhbGU6dD44P2Z1bmN0aW9uKG4pe3JldHVybiBuL2V9OmZ1bmN0aW9uKG4pe3JldHVybiBuKmV9LHN5bWJvbDpufX1mdW5jdGlvbiBqbihuKXt2YXIgdD1uLmRlY2ltYWwsZT1uLnRob3VzYW5kcyxyPW4uZ3JvdXBpbmcsdT1uLmN1cnJlbmN5LGk9ciYmZT9mdW5jdGlvbihuLHQpe2Zvcih2YXIgdT1uLmxlbmd0aCxpPVtdLGE9MCxvPXJbMF0sbD0wO3U+MCYmbz4wJiYobCtvKzE+dCYmKG89TWF0aC5tYXgoMSx0LWwpKSxpLnB1c2gobi5zdWJzdHJpbmcodS09byx1K28pKSwhKChsKz1vKzEpPnQpKTspbz1yW2E9KGErMSklci5sZW5ndGhdO3JldHVybiBpLnJldmVyc2UoKS5qb2luKGUpfTp5O3JldHVybiBmdW5jdGlvbihuKXt2YXIgZT1mby5leGVjKG4pLHI9ZVsxXXx8XCIgXCIsYT1lWzJdfHxcIj5cIixvPWVbM118fFwiLVwiLGw9ZVs0XXx8XCJcIixjPWVbNV0scz0rZVs2XSxmPWVbN10saD1lWzhdLGc9ZVs5XSxwPTEsdj1cIlwiLGQ9XCJcIixtPSExLHk9ITA7c3dpdGNoKGgmJihoPStoLnN1YnN0cmluZygxKSksKGN8fFwiMFwiPT09ciYmXCI9XCI9PT1hKSYmKGM9cj1cIjBcIixhPVwiPVwiKSxnKXtjYXNlXCJuXCI6Zj0hMCxnPVwiZ1wiO2JyZWFrO2Nhc2VcIiVcIjpwPTEwMCxkPVwiJVwiLGc9XCJmXCI7YnJlYWs7Y2FzZVwicFwiOnA9MTAwLGQ9XCIlXCIsZz1cInJcIjticmVhaztjYXNlXCJiXCI6Y2FzZVwib1wiOmNhc2VcInhcIjpjYXNlXCJYXCI6XCIjXCI9PT1sJiYodj1cIjBcIitnLnRvTG93ZXJDYXNlKCkpO2Nhc2VcImNcIjp5PSExO2Nhc2VcImRcIjptPSEwLGg9MDticmVhaztjYXNlXCJzXCI6cD0tMSxnPVwiclwifVwiJFwiPT09bCYmKHY9dVswXSxkPXVbMV0pLFwiclwiIT1nfHxofHwoZz1cImdcIiksbnVsbCE9aCYmKFwiZ1wiPT1nP2g9TWF0aC5tYXgoMSxNYXRoLm1pbigyMSxoKSk6KFwiZVwiPT1nfHxcImZcIj09ZykmJihoPU1hdGgubWF4KDAsTWF0aC5taW4oMjAsaCkpKSksZz1oby5nZXQoZyl8fEZuO3ZhciBNPWMmJmY7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciBlPWQ7aWYobSYmbiUxKXJldHVyblwiXCI7dmFyIHU9MD5ufHwwPT09biYmMD4xL24/KG49LW4sXCItXCIpOlwiLVwiPT09bz9cIlwiOm87aWYoMD5wKXt2YXIgbD1vYS5mb3JtYXRQcmVmaXgobixoKTtuPWwuc2NhbGUobiksZT1sLnN5bWJvbCtkfWVsc2Ugbio9cDtuPWcobixoKTt2YXIgeCxiLF89bi5sYXN0SW5kZXhPZihcIi5cIik7aWYoMD5fKXt2YXIgdz15P24ubGFzdEluZGV4T2YoXCJlXCIpOi0xOzA+dz8oeD1uLGI9XCJcIik6KHg9bi5zdWJzdHJpbmcoMCx3KSxiPW4uc3Vic3RyaW5nKHcpKX1lbHNlIHg9bi5zdWJzdHJpbmcoMCxfKSxiPXQrbi5zdWJzdHJpbmcoXysxKTshYyYmZiYmKHg9aSh4LDEvMCkpO3ZhciBTPXYubGVuZ3RoK3gubGVuZ3RoK2IubGVuZ3RoKyhNPzA6dS5sZW5ndGgpLGs9cz5TP25ldyBBcnJheShTPXMtUysxKS5qb2luKHIpOlwiXCI7cmV0dXJuIE0mJih4PWkoayt4LGsubGVuZ3RoP3MtYi5sZW5ndGg6MS8wKSksdSs9dixuPXgrYiwoXCI8XCI9PT1hP3UrbitrOlwiPlwiPT09YT9rK3UrbjpcIl5cIj09PWE/ay5zdWJzdHJpbmcoMCxTPj49MSkrdStuK2suc3Vic3RyaW5nKFMpOnUrKE0/bjprK24pKStlfX19ZnVuY3Rpb24gRm4obil7cmV0dXJuIG4rXCJcIn1mdW5jdGlvbiBIbigpe3RoaXMuXz1uZXcgRGF0ZShhcmd1bWVudHMubGVuZ3RoPjE/RGF0ZS5VVEMuYXBwbHkodGhpcyxhcmd1bWVudHMpOmFyZ3VtZW50c1swXSl9ZnVuY3Rpb24gT24obix0LGUpe2Z1bmN0aW9uIHIodCl7dmFyIGU9bih0KSxyPWkoZSwxKTtyZXR1cm4gci10PnQtZT9lOnJ9ZnVuY3Rpb24gdShlKXtyZXR1cm4gdChlPW4obmV3IHBvKGUtMSkpLDEpLGV9ZnVuY3Rpb24gaShuLGUpe3JldHVybiB0KG49bmV3IHBvKCtuKSxlKSxufWZ1bmN0aW9uIGEobixyLGkpe3ZhciBhPXUobiksbz1bXTtpZihpPjEpZm9yKDtyPmE7KWUoYSklaXx8by5wdXNoKG5ldyBEYXRlKCthKSksdChhLDEpO2Vsc2UgZm9yKDtyPmE7KW8ucHVzaChuZXcgRGF0ZSgrYSkpLHQoYSwxKTtyZXR1cm4gb31mdW5jdGlvbiBvKG4sdCxlKXt0cnl7cG89SG47dmFyIHI9bmV3IEhuO3JldHVybiByLl89bixhKHIsdCxlKX1maW5hbGx5e3BvPURhdGV9fW4uZmxvb3I9bixuLnJvdW5kPXIsbi5jZWlsPXUsbi5vZmZzZXQ9aSxuLnJhbmdlPWE7dmFyIGw9bi51dGM9SW4obik7cmV0dXJuIGwuZmxvb3I9bCxsLnJvdW5kPUluKHIpLGwuY2VpbD1Jbih1KSxsLm9mZnNldD1JbihpKSxsLnJhbmdlPW8sbn1mdW5jdGlvbiBJbihuKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt0cnl7cG89SG47dmFyIHI9bmV3IEhuO3JldHVybiByLl89dCxuKHIsZSkuX31maW5hbGx5e3BvPURhdGV9fX1mdW5jdGlvbiBZbihuKXtmdW5jdGlvbiB0KG4pe2Z1bmN0aW9uIHQodCl7Zm9yKHZhciBlLHUsaSxhPVtdLG89LTEsbD0wOysrbzxyOykzNz09PW4uY2hhckNvZGVBdChvKSYmKGEucHVzaChuLnNsaWNlKGwsbykpLG51bGwhPSh1PW1vW2U9bi5jaGFyQXQoKytvKV0pJiYoZT1uLmNoYXJBdCgrK28pKSwoaT1BW2VdKSYmKGU9aSh0LG51bGw9PXU/XCJlXCI9PT1lP1wiIFwiOlwiMFwiOnUpKSxhLnB1c2goZSksbD1vKzEpO3JldHVybiBhLnB1c2gobi5zbGljZShsLG8pKSxhLmpvaW4oXCJcIil9dmFyIHI9bi5sZW5ndGg7cmV0dXJuIHQucGFyc2U9ZnVuY3Rpb24odCl7dmFyIHI9e3k6MTkwMCxtOjAsZDoxLEg6MCxNOjAsUzowLEw6MCxaOm51bGx9LHU9ZShyLG4sdCwwKTtpZih1IT10Lmxlbmd0aClyZXR1cm4gbnVsbDtcInBcImluIHImJihyLkg9ci5IJTEyKzEyKnIucCk7dmFyIGk9bnVsbCE9ci5aJiZwbyE9PUhuLGE9bmV3KGk/SG46cG8pO3JldHVyblwialwiaW4gcj9hLnNldEZ1bGxZZWFyKHIueSwwLHIuaik6XCJXXCJpbiByfHxcIlVcImluIHI/KFwid1wiaW4gcnx8KHIudz1cIldcImluIHI/MTowKSxhLnNldEZ1bGxZZWFyKHIueSwwLDEpLGEuc2V0RnVsbFllYXIoci55LDAsXCJXXCJpbiByPyhyLncrNiklNys3KnIuVy0oYS5nZXREYXkoKSs1KSU3OnIudys3KnIuVS0oYS5nZXREYXkoKSs2KSU3KSk6YS5zZXRGdWxsWWVhcihyLnksci5tLHIuZCksYS5zZXRIb3VycyhyLkgrKHIuWi8xMDB8MCksci5NK3IuWiUxMDAsci5TLHIuTCksaT9hLl86YX0sdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBufSx0fWZ1bmN0aW9uIGUobix0LGUscil7Zm9yKHZhciB1LGksYSxvPTAsbD10Lmxlbmd0aCxjPWUubGVuZ3RoO2w+bzspe2lmKHI+PWMpcmV0dXJuLTE7aWYodT10LmNoYXJDb2RlQXQobysrKSwzNz09PXUpe2lmKGE9dC5jaGFyQXQobysrKSxpPUNbYSBpbiBtbz90LmNoYXJBdChvKyspOmFdLCFpfHwocj1pKG4sZSxyKSk8MClyZXR1cm4tMX1lbHNlIGlmKHUhPWUuY2hhckNvZGVBdChyKyspKXJldHVybi0xfXJldHVybiByfWZ1bmN0aW9uIHIobix0LGUpe18ubGFzdEluZGV4PTA7dmFyIHI9Xy5leGVjKHQuc2xpY2UoZSkpO3JldHVybiByPyhuLnc9dy5nZXQoclswXS50b0xvd2VyQ2FzZSgpKSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiB1KG4sdCxlKXt4Lmxhc3RJbmRleD0wO3ZhciByPXguZXhlYyh0LnNsaWNlKGUpKTtyZXR1cm4gcj8obi53PWIuZ2V0KHJbMF0udG9Mb3dlckNhc2UoKSksZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gaShuLHQsZSl7Ti5sYXN0SW5kZXg9MDt2YXIgcj1OLmV4ZWModC5zbGljZShlKSk7cmV0dXJuIHI/KG4ubT1FLmdldChyWzBdLnRvTG93ZXJDYXNlKCkpLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGEobix0LGUpe1MubGFzdEluZGV4PTA7dmFyIHI9Uy5leGVjKHQuc2xpY2UoZSkpO3JldHVybiByPyhuLm09ay5nZXQoclswXS50b0xvd2VyQ2FzZSgpKSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBvKG4sdCxyKXtyZXR1cm4gZShuLEEuYy50b1N0cmluZygpLHQscil9ZnVuY3Rpb24gbChuLHQscil7cmV0dXJuIGUobixBLngudG9TdHJpbmcoKSx0LHIpfWZ1bmN0aW9uIGMobix0LHIpe3JldHVybiBlKG4sQS5YLnRvU3RyaW5nKCksdCxyKX1mdW5jdGlvbiBzKG4sdCxlKXt2YXIgcj1NLmdldCh0LnNsaWNlKGUsZSs9MikudG9Mb3dlckNhc2UoKSk7cmV0dXJuIG51bGw9PXI/LTE6KG4ucD1yLGUpfXZhciBmPW4uZGF0ZVRpbWUsaD1uLmRhdGUsZz1uLnRpbWUscD1uLnBlcmlvZHMsdj1uLmRheXMsZD1uLnNob3J0RGF5cyxtPW4ubW9udGhzLHk9bi5zaG9ydE1vbnRoczt0LnV0Yz1mdW5jdGlvbihuKXtmdW5jdGlvbiBlKG4pe3RyeXtwbz1Ibjt2YXIgdD1uZXcgcG87cmV0dXJuIHQuXz1uLHIodCl9ZmluYWxseXtwbz1EYXRlfX12YXIgcj10KG4pO3JldHVybiBlLnBhcnNlPWZ1bmN0aW9uKG4pe3RyeXtwbz1Ibjt2YXIgdD1yLnBhcnNlKG4pO3JldHVybiB0JiZ0Ll99ZmluYWxseXtwbz1EYXRlfX0sZS50b1N0cmluZz1yLnRvU3RyaW5nLGV9LHQubXVsdGk9dC51dGMubXVsdGk9Y3Q7dmFyIE09b2EubWFwKCkseD1Wbih2KSxiPVhuKHYpLF89Vm4oZCksdz1YbihkKSxTPVZuKG0pLGs9WG4obSksTj1Wbih5KSxFPVhuKHkpO3AuZm9yRWFjaChmdW5jdGlvbihuLHQpe00uc2V0KG4udG9Mb3dlckNhc2UoKSx0KX0pO3ZhciBBPXthOmZ1bmN0aW9uKG4pe3JldHVybiBkW24uZ2V0RGF5KCldfSxBOmZ1bmN0aW9uKG4pe3JldHVybiB2W24uZ2V0RGF5KCldfSxiOmZ1bmN0aW9uKG4pe3JldHVybiB5W24uZ2V0TW9udGgoKV19LEI6ZnVuY3Rpb24obil7cmV0dXJuIG1bbi5nZXRNb250aCgpXX0sYzp0KGYpLGQ6ZnVuY3Rpb24obix0KXtyZXR1cm4gWm4obi5nZXREYXRlKCksdCwyKX0sZTpmdW5jdGlvbihuLHQpe3JldHVybiBabihuLmdldERhdGUoKSx0LDIpfSxIOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIFpuKG4uZ2V0SG91cnMoKSx0LDIpfSxJOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIFpuKG4uZ2V0SG91cnMoKSUxMnx8MTIsdCwyKX0sajpmdW5jdGlvbihuLHQpe3JldHVybiBabigxK2dvLmRheU9mWWVhcihuKSx0LDMpfSxMOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIFpuKG4uZ2V0TWlsbGlzZWNvbmRzKCksdCwzKX0sbTpmdW5jdGlvbihuLHQpe3JldHVybiBabihuLmdldE1vbnRoKCkrMSx0LDIpfSxNOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIFpuKG4uZ2V0TWludXRlcygpLHQsMil9LHA6ZnVuY3Rpb24obil7cmV0dXJuIHBbKyhuLmdldEhvdXJzKCk+PTEyKV19LFM6ZnVuY3Rpb24obix0KXtyZXR1cm4gWm4obi5nZXRTZWNvbmRzKCksdCwyKX0sVTpmdW5jdGlvbihuLHQpe3JldHVybiBabihnby5zdW5kYXlPZlllYXIobiksdCwyKX0sdzpmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXREYXkoKX0sVzpmdW5jdGlvbihuLHQpe3JldHVybiBabihnby5tb25kYXlPZlllYXIobiksdCwyKX0seDp0KGgpLFg6dChnKSx5OmZ1bmN0aW9uKG4sdCl7cmV0dXJuIFpuKG4uZ2V0RnVsbFllYXIoKSUxMDAsdCwyKX0sWTpmdW5jdGlvbihuLHQpe3JldHVybiBabihuLmdldEZ1bGxZZWFyKCklMWU0LHQsNCl9LFo6b3QsXCIlXCI6ZnVuY3Rpb24oKXtyZXR1cm5cIiVcIn19LEM9e2E6cixBOnUsYjppLEI6YSxjOm8sZDp0dCxlOnR0LEg6cnQsSTpydCxqOmV0LEw6YXQsbTpudCxNOnV0LHA6cyxTOml0LFU6Qm4sdzokbixXOlduLHg6bCxYOmMseTpHbixZOkpuLFo6S24sXCIlXCI6bHR9O3JldHVybiB0fWZ1bmN0aW9uIFpuKG4sdCxlKXt2YXIgcj0wPm4/XCItXCI6XCJcIix1PShyPy1uOm4pK1wiXCIsaT11Lmxlbmd0aDtyZXR1cm4gcisoZT5pP25ldyBBcnJheShlLWkrMSkuam9pbih0KSt1OnUpfWZ1bmN0aW9uIFZuKG4pe3JldHVybiBuZXcgUmVnRXhwKFwiXig/OlwiK24ubWFwKG9hLnJlcXVvdGUpLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKX1mdW5jdGlvbiBYbihuKXtmb3IodmFyIHQ9bmV3IGMsZT0tMSxyPW4ubGVuZ3RoOysrZTxyOyl0LnNldChuW2VdLnRvTG93ZXJDYXNlKCksZSk7cmV0dXJuIHR9ZnVuY3Rpb24gJG4obix0LGUpe3lvLmxhc3RJbmRleD0wO3ZhciByPXlvLmV4ZWModC5zbGljZShlLGUrMSkpO3JldHVybiByPyhuLnc9K3JbMF0sZStyWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gQm4obix0LGUpe3lvLmxhc3RJbmRleD0wO3ZhciByPXlvLmV4ZWModC5zbGljZShlKSk7cmV0dXJuIHI/KG4uVT0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBXbihuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUpKTtyZXR1cm4gcj8obi5XPStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIEpuKG4sdCxlKXt5by5sYXN0SW5kZXg9MDt2YXIgcj15by5leGVjKHQuc2xpY2UoZSxlKzQpKTtyZXR1cm4gcj8obi55PStyWzBdLGUrclswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIEduKG4sdCxlKXt5by5sYXN0SW5kZXg9MDt2YXIgcj15by5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi55PVFuKCtyWzBdKSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBLbihuLHQsZSl7cmV0dXJuL15bKy1dXFxkezR9JC8udGVzdCh0PXQuc2xpY2UoZSxlKzUpKT8obi5aPS10LGUrNSk6LTF9ZnVuY3Rpb24gUW4obil7cmV0dXJuIG4rKG4+Njg/MTkwMDoyZTMpfWZ1bmN0aW9uIG50KG4sdCxlKXt5by5sYXN0SW5kZXg9MDt2YXIgcj15by5leGVjKHQuc2xpY2UoZSxlKzIpKTtyZXR1cm4gcj8obi5tPXJbMF0tMSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiB0dChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSsyKSk7cmV0dXJuIHI/KG4uZD0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBldChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSszKSk7cmV0dXJuIHI/KG4uaj0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBydChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSsyKSk7cmV0dXJuIHI/KG4uSD0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiB1dChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSsyKSk7cmV0dXJuIHI/KG4uTT0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBpdChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSsyKSk7cmV0dXJuIHI/KG4uUz0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBhdChuLHQsZSl7eW8ubGFzdEluZGV4PTA7dmFyIHI9eW8uZXhlYyh0LnNsaWNlKGUsZSszKSk7cmV0dXJuIHI/KG4uTD0rclswXSxlK3JbMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBvdChuKXt2YXIgdD1uLmdldFRpbWV6b25lT2Zmc2V0KCksZT10PjA/XCItXCI6XCIrXCIscj1NYSh0KS82MHwwLHU9TWEodCklNjA7cmV0dXJuIGUrWm4ocixcIjBcIiwyKStabih1LFwiMFwiLDIpfWZ1bmN0aW9uIGx0KG4sdCxlKXtNby5sYXN0SW5kZXg9MDt2YXIgcj1Nby5leGVjKHQuc2xpY2UoZSxlKzEpKTtyZXR1cm4gcj9lK3JbMF0ubGVuZ3RoOi0xfWZ1bmN0aW9uIGN0KG4pe2Zvcih2YXIgdD1uLmxlbmd0aCxlPS0xOysrZTx0OyluW2VdWzBdPXRoaXMobltlXVswXSk7cmV0dXJuIGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLHI9bltlXTshclsxXSh0KTspcj1uWysrZV07cmV0dXJuIHJbMF0odCl9fWZ1bmN0aW9uIHN0KCl7fWZ1bmN0aW9uIGZ0KG4sdCxlKXt2YXIgcj1lLnM9bit0LHU9ci1uLGk9ci11O2UudD1uLWkrKHQtdSl9ZnVuY3Rpb24gaHQobix0KXtuJiZ3by5oYXNPd25Qcm9wZXJ0eShuLnR5cGUpJiZ3b1tuLnR5cGVdKG4sdCl9ZnVuY3Rpb24gZ3Qobix0LGUpe3ZhciByLHU9LTEsaT1uLmxlbmd0aC1lO2Zvcih0LmxpbmVTdGFydCgpOysrdTxpOylyPW5bdV0sdC5wb2ludChyWzBdLHJbMV0sclsyXSk7dC5saW5lRW5kKCl9ZnVuY3Rpb24gcHQobix0KXt2YXIgZT0tMSxyPW4ubGVuZ3RoO2Zvcih0LnBvbHlnb25TdGFydCgpOysrZTxyOylndChuW2VdLHQsMSk7dC5wb2x5Z29uRW5kKCl9ZnVuY3Rpb24gdnQoKXtmdW5jdGlvbiBuKG4sdCl7bio9SWEsdD10KklhLzIramEvNDt2YXIgZT1uLXIsYT1lPj0wPzE6LTEsbz1hKmUsbD1NYXRoLmNvcyh0KSxjPU1hdGguc2luKHQpLHM9aSpjLGY9dSpsK3MqTWF0aC5jb3MobyksaD1zKmEqTWF0aC5zaW4obyk7a28uYWRkKE1hdGguYXRhbjIoaCxmKSkscj1uLHU9bCxpPWN9dmFyIHQsZSxyLHUsaTtOby5wb2ludD1mdW5jdGlvbihhLG8pe05vLnBvaW50PW4scj0odD1hKSpJYSx1PU1hdGguY29zKG89KGU9bykqSWEvMitqYS80KSxpPU1hdGguc2luKG8pfSxOby5saW5lRW5kPWZ1bmN0aW9uKCl7bih0LGUpfX1mdW5jdGlvbiBkdChuKXt2YXIgdD1uWzBdLGU9blsxXSxyPU1hdGguY29zKGUpO3JldHVybltyKk1hdGguY29zKHQpLHIqTWF0aC5zaW4odCksTWF0aC5zaW4oZSldfWZ1bmN0aW9uIG10KG4sdCl7cmV0dXJuIG5bMF0qdFswXStuWzFdKnRbMV0rblsyXSp0WzJdfWZ1bmN0aW9uIHl0KG4sdCl7cmV0dXJuW25bMV0qdFsyXS1uWzJdKnRbMV0sblsyXSp0WzBdLW5bMF0qdFsyXSxuWzBdKnRbMV0tblsxXSp0WzBdXX1mdW5jdGlvbiBNdChuLHQpe25bMF0rPXRbMF0sblsxXSs9dFsxXSxuWzJdKz10WzJdfWZ1bmN0aW9uIHh0KG4sdCl7cmV0dXJuW25bMF0qdCxuWzFdKnQsblsyXSp0XX1mdW5jdGlvbiBidChuKXt2YXIgdD1NYXRoLnNxcnQoblswXSpuWzBdK25bMV0qblsxXStuWzJdKm5bMl0pO25bMF0vPXQsblsxXS89dCxuWzJdLz10fWZ1bmN0aW9uIF90KG4pe3JldHVybltNYXRoLmF0YW4yKG5bMV0sblswXSksdG4oblsyXSldfWZ1bmN0aW9uIHd0KG4sdCl7cmV0dXJuIE1hKG5bMF0tdFswXSk8UGEmJk1hKG5bMV0tdFsxXSk8UGF9ZnVuY3Rpb24gU3Qobix0KXtuKj1JYTt2YXIgZT1NYXRoLmNvcyh0Kj1JYSk7a3QoZSpNYXRoLmNvcyhuKSxlKk1hdGguc2luKG4pLE1hdGguc2luKHQpKX1mdW5jdGlvbiBrdChuLHQsZSl7KytFbyxDbys9KG4tQ28pL0VvLHpvKz0odC16bykvRW8sTG8rPShlLUxvKS9Fb31mdW5jdGlvbiBOdCgpe2Z1bmN0aW9uIG4obix1KXtuKj1JYTt2YXIgaT1NYXRoLmNvcyh1Kj1JYSksYT1pKk1hdGguY29zKG4pLG89aSpNYXRoLnNpbihuKSxsPU1hdGguc2luKHUpLGM9TWF0aC5hdGFuMihNYXRoLnNxcnQoKGM9ZSpsLXIqbykqYysoYz1yKmEtdCpsKSpjKyhjPXQqby1lKmEpKmMpLHQqYStlKm8rcipsKTtBbys9Yyxxbys9YyoodCsodD1hKSksVG8rPWMqKGUrKGU9bykpLFJvKz1jKihyKyhyPWwpKSxrdCh0LGUscil9dmFyIHQsZSxyO2pvLnBvaW50PWZ1bmN0aW9uKHUsaSl7dSo9SWE7dmFyIGE9TWF0aC5jb3MoaSo9SWEpO3Q9YSpNYXRoLmNvcyh1KSxlPWEqTWF0aC5zaW4odSkscj1NYXRoLnNpbihpKSxqby5wb2ludD1uLGt0KHQsZSxyKX19ZnVuY3Rpb24gRXQoKXtqby5wb2ludD1TdH1mdW5jdGlvbiBBdCgpe2Z1bmN0aW9uIG4obix0KXtuKj1JYTt2YXIgZT1NYXRoLmNvcyh0Kj1JYSksYT1lKk1hdGguY29zKG4pLG89ZSpNYXRoLnNpbihuKSxsPU1hdGguc2luKHQpLGM9dSpsLWkqbyxzPWkqYS1yKmwsZj1yKm8tdSphLGg9TWF0aC5zcXJ0KGMqYytzKnMrZipmKSxnPXIqYSt1Km8raSpsLHA9aCYmLW5uKGcpL2gsdj1NYXRoLmF0YW4yKGgsZyk7RG8rPXAqYyxQbys9cCpzLFVvKz1wKmYsQW8rPXYscW8rPXYqKHIrKHI9YSkpLFRvKz12Kih1Kyh1PW8pKSxSbys9diooaSsoaT1sKSksa3Qocix1LGkpfXZhciB0LGUscix1LGk7am8ucG9pbnQ9ZnVuY3Rpb24oYSxvKXt0PWEsZT1vLGpvLnBvaW50PW4sYSo9SWE7dmFyIGw9TWF0aC5jb3Mobyo9SWEpO3I9bCpNYXRoLmNvcyhhKSx1PWwqTWF0aC5zaW4oYSksaT1NYXRoLnNpbihvKSxrdChyLHUsaSl9LGpvLmxpbmVFbmQ9ZnVuY3Rpb24oKXtuKHQsZSksam8ubGluZUVuZD1FdCxqby5wb2ludD1TdH19ZnVuY3Rpb24gQ3Qobix0KXtmdW5jdGlvbiBlKGUscil7cmV0dXJuIGU9bihlLHIpLHQoZVswXSxlWzFdKX1yZXR1cm4gbi5pbnZlcnQmJnQuaW52ZXJ0JiYoZS5pbnZlcnQ9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gZT10LmludmVydChlLHIpLGUmJm4uaW52ZXJ0KGVbMF0sZVsxXSl9KSxlfWZ1bmN0aW9uIHp0KCl7cmV0dXJuITB9ZnVuY3Rpb24gTHQobix0LGUscix1KXt2YXIgaT1bXSxhPVtdO2lmKG4uZm9yRWFjaChmdW5jdGlvbihuKXtpZighKCh0PW4ubGVuZ3RoLTEpPD0wKSl7dmFyIHQsZT1uWzBdLHI9blt0XTtpZih3dChlLHIpKXt1LmxpbmVTdGFydCgpO2Zvcih2YXIgbz0wO3Q+bzsrK28pdS5wb2ludCgoZT1uW29dKVswXSxlWzFdKTtyZXR1cm4gdm9pZCB1LmxpbmVFbmQoKX12YXIgbD1uZXcgVHQoZSxuLG51bGwsITApLGM9bmV3IFR0KGUsbnVsbCxsLCExKTtsLm89YyxpLnB1c2gobCksYS5wdXNoKGMpLGw9bmV3IFR0KHIsbixudWxsLCExKSxjPW5ldyBUdChyLG51bGwsbCwhMCksbC5vPWMsaS5wdXNoKGwpLGEucHVzaChjKX19KSxhLnNvcnQodCkscXQoaSkscXQoYSksaS5sZW5ndGgpe2Zvcih2YXIgbz0wLGw9ZSxjPWEubGVuZ3RoO2M+bzsrK28pYVtvXS5lPWw9IWw7Zm9yKHZhciBzLGYsaD1pWzBdOzspe2Zvcih2YXIgZz1oLHA9ITA7Zy52OylpZigoZz1nLm4pPT09aClyZXR1cm47cz1nLnosdS5saW5lU3RhcnQoKTtkb3tpZihnLnY9Zy5vLnY9ITAsZy5lKXtpZihwKWZvcih2YXIgbz0wLGM9cy5sZW5ndGg7Yz5vOysrbyl1LnBvaW50KChmPXNbb10pWzBdLGZbMV0pO2Vsc2UgcihnLngsZy5uLngsMSx1KTtnPWcubn1lbHNle2lmKHApe3M9Zy5wLno7Zm9yKHZhciBvPXMubGVuZ3RoLTE7bz49MDstLW8pdS5wb2ludCgoZj1zW29dKVswXSxmWzFdKX1lbHNlIHIoZy54LGcucC54LC0xLHUpO2c9Zy5wfWc9Zy5vLHM9Zy56LHA9IXB9d2hpbGUoIWcudik7dS5saW5lRW5kKCl9fX1mdW5jdGlvbiBxdChuKXtpZih0PW4ubGVuZ3RoKXtmb3IodmFyIHQsZSxyPTAsdT1uWzBdOysrcjx0Oyl1Lm49ZT1uW3JdLGUucD11LHU9ZTt1Lm49ZT1uWzBdLGUucD11fX1mdW5jdGlvbiBUdChuLHQsZSxyKXt0aGlzLng9bix0aGlzLno9dCx0aGlzLm89ZSx0aGlzLmU9cix0aGlzLnY9ITEsdGhpcy5uPXRoaXMucD1udWxsfWZ1bmN0aW9uIFJ0KG4sdCxlLHIpe3JldHVybiBmdW5jdGlvbih1LGkpe2Z1bmN0aW9uIGEodCxlKXt2YXIgcj11KHQsZSk7bih0PXJbMF0sZT1yWzFdKSYmaS5wb2ludCh0LGUpfWZ1bmN0aW9uIG8obix0KXt2YXIgZT11KG4sdCk7ZC5wb2ludChlWzBdLGVbMV0pfWZ1bmN0aW9uIGwoKXt5LnBvaW50PW8sZC5saW5lU3RhcnQoKX1mdW5jdGlvbiBjKCl7eS5wb2ludD1hLGQubGluZUVuZCgpfWZ1bmN0aW9uIHMobix0KXt2LnB1c2goW24sdF0pO3ZhciBlPXUobix0KTt4LnBvaW50KGVbMF0sZVsxXSl9ZnVuY3Rpb24gZigpe3gubGluZVN0YXJ0KCksdj1bXX1mdW5jdGlvbiBoKCl7cyh2WzBdWzBdLHZbMF1bMV0pLHgubGluZUVuZCgpO3ZhciBuLHQ9eC5jbGVhbigpLGU9TS5idWZmZXIoKSxyPWUubGVuZ3RoO2lmKHYucG9wKCkscC5wdXNoKHYpLHY9bnVsbCxyKWlmKDEmdCl7bj1lWzBdO3ZhciB1LHI9bi5sZW5ndGgtMSxhPS0xO2lmKHI+MCl7Zm9yKGJ8fChpLnBvbHlnb25TdGFydCgpLGI9ITApLGkubGluZVN0YXJ0KCk7KythPHI7KWkucG9pbnQoKHU9blthXSlbMF0sdVsxXSk7aS5saW5lRW5kKCl9fWVsc2Ugcj4xJiYyJnQmJmUucHVzaChlLnBvcCgpLmNvbmNhdChlLnNoaWZ0KCkpKSxnLnB1c2goZS5maWx0ZXIoRHQpKX12YXIgZyxwLHYsZD10KGkpLG09dS5pbnZlcnQoclswXSxyWzFdKSx5PXtwb2ludDphLGxpbmVTdGFydDpsLGxpbmVFbmQ6Yyxwb2x5Z29uU3RhcnQ6ZnVuY3Rpb24oKXt5LnBvaW50PXMseS5saW5lU3RhcnQ9Zix5LmxpbmVFbmQ9aCxnPVtdLHA9W119LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt5LnBvaW50PWEseS5saW5lU3RhcnQ9bCx5LmxpbmVFbmQ9YyxnPW9hLm1lcmdlKGcpO3ZhciBuPU90KG0scCk7Zy5sZW5ndGg/KGJ8fChpLnBvbHlnb25TdGFydCgpLGI9ITApLEx0KGcsVXQsbixlLGkpKTpuJiYoYnx8KGkucG9seWdvblN0YXJ0KCksYj0hMCksaS5saW5lU3RhcnQoKSxlKG51bGwsbnVsbCwxLGkpLGkubGluZUVuZCgpKSxiJiYoaS5wb2x5Z29uRW5kKCksYj0hMSksZz1wPW51bGx9LHNwaGVyZTpmdW5jdGlvbigpe2kucG9seWdvblN0YXJ0KCksaS5saW5lU3RhcnQoKSxlKG51bGwsbnVsbCwxLGkpLGkubGluZUVuZCgpLGkucG9seWdvbkVuZCgpfX0sTT1QdCgpLHg9dChNKSxiPSExO3JldHVybiB5fX1mdW5jdGlvbiBEdChuKXtyZXR1cm4gbi5sZW5ndGg+MX1mdW5jdGlvbiBQdCgpe3ZhciBuLHQ9W107cmV0dXJue2xpbmVTdGFydDpmdW5jdGlvbigpe3QucHVzaChuPVtdKX0scG9pbnQ6ZnVuY3Rpb24odCxlKXtuLnB1c2goW3QsZV0pfSxsaW5lRW5kOmIsYnVmZmVyOmZ1bmN0aW9uKCl7dmFyIGU9dDtyZXR1cm4gdD1bXSxuPW51bGwsZX0scmVqb2luOmZ1bmN0aW9uKCl7dC5sZW5ndGg+MSYmdC5wdXNoKHQucG9wKCkuY29uY2F0KHQuc2hpZnQoKSkpfX19ZnVuY3Rpb24gVXQobix0KXtyZXR1cm4oKG49bi54KVswXTwwP25bMV0tT2EtUGE6T2EtblsxXSktKCh0PXQueClbMF08MD90WzFdLU9hLVBhOk9hLXRbMV0pfWZ1bmN0aW9uIGp0KG4pe3ZhciB0LGU9TmFOLHI9TmFOLHU9TmFOO3JldHVybntsaW5lU3RhcnQ6ZnVuY3Rpb24oKXtuLmxpbmVTdGFydCgpLHQ9MX0scG9pbnQ6ZnVuY3Rpb24oaSxhKXt2YXIgbz1pPjA/amE6LWphLGw9TWEoaS1lKTtNYShsLWphKTxQYT8obi5wb2ludChlLHI9KHIrYSkvMj4wP09hOi1PYSksbi5wb2ludCh1LHIpLG4ubGluZUVuZCgpLG4ubGluZVN0YXJ0KCksbi5wb2ludChvLHIpLG4ucG9pbnQoaSxyKSx0PTApOnUhPT1vJiZsPj1qYSYmKE1hKGUtdSk8UGEmJihlLT11KlBhKSxNYShpLW8pPFBhJiYoaS09bypQYSkscj1GdChlLHIsaSxhKSxuLnBvaW50KHUsciksbi5saW5lRW5kKCksbi5saW5lU3RhcnQoKSxuLnBvaW50KG8sciksdD0wKSxuLnBvaW50KGU9aSxyPWEpLHU9b30sbGluZUVuZDpmdW5jdGlvbigpe24ubGluZUVuZCgpLGU9cj1OYU59LGNsZWFuOmZ1bmN0aW9uKCl7cmV0dXJuIDItdH19fWZ1bmN0aW9uIEZ0KG4sdCxlLHIpe3ZhciB1LGksYT1NYXRoLnNpbihuLWUpO3JldHVybiBNYShhKT5QYT9NYXRoLmF0YW4oKE1hdGguc2luKHQpKihpPU1hdGguY29zKHIpKSpNYXRoLnNpbihlKS1NYXRoLnNpbihyKSoodT1NYXRoLmNvcyh0KSkqTWF0aC5zaW4obikpLyh1KmkqYSkpOih0K3IpLzJ9ZnVuY3Rpb24gSHQobix0LGUscil7dmFyIHU7aWYobnVsbD09bil1PWUqT2Esci5wb2ludCgtamEsdSksci5wb2ludCgwLHUpLHIucG9pbnQoamEsdSksci5wb2ludChqYSwwKSxyLnBvaW50KGphLC11KSxyLnBvaW50KDAsLXUpLHIucG9pbnQoLWphLC11KSxyLnBvaW50KC1qYSwwKSxyLnBvaW50KC1qYSx1KTtlbHNlIGlmKE1hKG5bMF0tdFswXSk+UGEpe3ZhciBpPW5bMF08dFswXT9qYTotamE7dT1lKmkvMixyLnBvaW50KC1pLHUpLHIucG9pbnQoMCx1KSxyLnBvaW50KGksdSl9ZWxzZSByLnBvaW50KHRbMF0sdFsxXSl9ZnVuY3Rpb24gT3Qobix0KXt2YXIgZT1uWzBdLHI9blsxXSx1PVtNYXRoLnNpbihlKSwtTWF0aC5jb3MoZSksMF0saT0wLGE9MDtrby5yZXNldCgpO2Zvcih2YXIgbz0wLGw9dC5sZW5ndGg7bD5vOysrbyl7dmFyIGM9dFtvXSxzPWMubGVuZ3RoO2lmKHMpZm9yKHZhciBmPWNbMF0saD1mWzBdLGc9ZlsxXS8yK2phLzQscD1NYXRoLnNpbihnKSx2PU1hdGguY29zKGcpLGQ9MTs7KXtkPT09cyYmKGQ9MCksbj1jW2RdO3ZhciBtPW5bMF0seT1uWzFdLzIramEvNCxNPU1hdGguc2luKHkpLHg9TWF0aC5jb3MoeSksYj1tLWgsXz1iPj0wPzE6LTEsdz1fKmIsUz13PmphLGs9cCpNO2lmKGtvLmFkZChNYXRoLmF0YW4yKGsqXypNYXRoLnNpbih3KSx2KngraypNYXRoLmNvcyh3KSkpLGkrPVM/YitfKkZhOmIsU15oPj1lXm0+PWUpe3ZhciBOPXl0KGR0KGYpLGR0KG4pKTtidChOKTt2YXIgRT15dCh1LE4pO2J0KEUpO3ZhciBBPShTXmI+PTA/LTE6MSkqdG4oRVsyXSk7KHI+QXx8cj09PUEmJihOWzBdfHxOWzFdKSkmJihhKz1TXmI+PTA/MTotMSl9aWYoIWQrKylicmVhaztoPW0scD1NLHY9eCxmPW59fXJldHVybigtUGE+aXx8UGE+aSYmMD5rbyleMSZhfWZ1bmN0aW9uIEl0KG4pe2Z1bmN0aW9uIHQobix0KXtyZXR1cm4gTWF0aC5jb3MobikqTWF0aC5jb3ModCk+aX1mdW5jdGlvbiBlKG4pe3ZhciBlLGksbCxjLHM7cmV0dXJue2xpbmVTdGFydDpmdW5jdGlvbigpe2M9bD0hMSxzPTF9LHBvaW50OmZ1bmN0aW9uKGYsaCl7dmFyIGcscD1bZixoXSx2PXQoZixoKSxkPWE/dj8wOnUoZixoKTp2P3UoZisoMD5mP2phOi1qYSksaCk6MDtpZighZSYmKGM9bD12KSYmbi5saW5lU3RhcnQoKSx2IT09bCYmKGc9cihlLHApLCh3dChlLGcpfHx3dChwLGcpKSYmKHBbMF0rPVBhLHBbMV0rPVBhLHY9dChwWzBdLHBbMV0pKSksdiE9PWwpcz0wLHY/KG4ubGluZVN0YXJ0KCksZz1yKHAsZSksbi5wb2ludChnWzBdLGdbMV0pKTooZz1yKGUscCksbi5wb2ludChnWzBdLGdbMV0pLG4ubGluZUVuZCgpKSxlPWc7ZWxzZSBpZihvJiZlJiZhXnYpe3ZhciBtO2QmaXx8IShtPXIocCxlLCEwKSl8fChzPTAsYT8obi5saW5lU3RhcnQoKSxuLnBvaW50KG1bMF1bMF0sbVswXVsxXSksbi5wb2ludChtWzFdWzBdLG1bMV1bMV0pLG4ubGluZUVuZCgpKToobi5wb2ludChtWzFdWzBdLG1bMV1bMV0pLG4ubGluZUVuZCgpLG4ubGluZVN0YXJ0KCksbi5wb2ludChtWzBdWzBdLG1bMF1bMV0pKSl9IXZ8fGUmJnd0KGUscCl8fG4ucG9pbnQocFswXSxwWzFdKSxlPXAsbD12LGk9ZH0sbGluZUVuZDpmdW5jdGlvbigpe2wmJm4ubGluZUVuZCgpLGU9bnVsbH0sY2xlYW46ZnVuY3Rpb24oKXtyZXR1cm4gc3woYyYmbCk8PDF9fX1mdW5jdGlvbiByKG4sdCxlKXt2YXIgcj1kdChuKSx1PWR0KHQpLGE9WzEsMCwwXSxvPXl0KHIsdSksbD1tdChvLG8pLGM9b1swXSxzPWwtYypjO2lmKCFzKXJldHVybiFlJiZuO3ZhciBmPWkqbC9zLGg9LWkqYy9zLGc9eXQoYSxvKSxwPXh0KGEsZiksdj14dChvLGgpO010KHAsdik7dmFyIGQ9ZyxtPW10KHAsZCkseT1tdChkLGQpLE09bSptLXkqKG10KHAscCktMSk7aWYoISgwPk0pKXt2YXIgeD1NYXRoLnNxcnQoTSksYj14dChkLCgtbS14KS95KTtpZihNdChiLHApLGI9X3QoYiksIWUpcmV0dXJuIGI7dmFyIF8sdz1uWzBdLFM9dFswXSxrPW5bMV0sTj10WzFdO3c+UyYmKF89dyx3PVMsUz1fKTt2YXIgRT1TLXcsQT1NYShFLWphKTxQYSxDPUF8fFBhPkU7aWYoIUEmJms+TiYmKF89ayxrPU4sTj1fKSxDP0E/aytOPjBeYlsxXTwoTWEoYlswXS13KTxQYT9rOk4pOms8PWJbMV0mJmJbMV08PU46RT5qYV4odzw9YlswXSYmYlswXTw9Uykpe3ZhciB6PXh0KGQsKC1tK3gpL3kpO3JldHVybiBNdCh6LHApLFtiLF90KHopXX19fWZ1bmN0aW9uIHUodCxlKXt2YXIgcj1hP246amEtbix1PTA7cmV0dXJuLXI+dD91fD0xOnQ+ciYmKHV8PTIpLC1yPmU/dXw9NDplPnImJih1fD04KSx1fXZhciBpPU1hdGguY29zKG4pLGE9aT4wLG89TWEoaSk+UGEsbD12ZShuLDYqSWEpO3JldHVybiBSdCh0LGUsbCxhP1swLC1uXTpbLWphLG4tamFdKX1mdW5jdGlvbiBZdChuLHQsZSxyKXtyZXR1cm4gZnVuY3Rpb24odSl7dmFyIGksYT11LmEsbz11LmIsbD1hLngsYz1hLnkscz1vLngsZj1vLnksaD0wLGc9MSxwPXMtbCx2PWYtYztpZihpPW4tbCxwfHwhKGk+MCkpe2lmKGkvPXAsMD5wKXtpZihoPmkpcmV0dXJuO2c+aSYmKGc9aSl9ZWxzZSBpZihwPjApe2lmKGk+ZylyZXR1cm47aT5oJiYoaD1pKX1pZihpPWUtbCxwfHwhKDA+aSkpe2lmKGkvPXAsMD5wKXtpZihpPmcpcmV0dXJuO2k+aCYmKGg9aSl9ZWxzZSBpZihwPjApe2lmKGg+aSlyZXR1cm47Zz5pJiYoZz1pKX1pZihpPXQtYyx2fHwhKGk+MCkpe2lmKGkvPXYsMD52KXtpZihoPmkpcmV0dXJuO2c+aSYmKGc9aSl9ZWxzZSBpZih2PjApe2lmKGk+ZylyZXR1cm47aT5oJiYoaD1pKX1pZihpPXItYyx2fHwhKDA+aSkpe2lmKGkvPXYsMD52KXtpZihpPmcpcmV0dXJuO2k+aCYmKGg9aSl9ZWxzZSBpZih2PjApe2lmKGg+aSlyZXR1cm47Zz5pJiYoZz1pKX1yZXR1cm4gaD4wJiYodS5hPXt4OmwraCpwLHk6YytoKnZ9KSwxPmcmJih1LmI9e3g6bCtnKnAseTpjK2cqdn0pLHV9fX19fX1mdW5jdGlvbiBadChuLHQsZSxyKXtmdW5jdGlvbiB1KHIsdSl7cmV0dXJuIE1hKHJbMF0tbik8UGE/dT4wPzA6MzpNYShyWzBdLWUpPFBhP3U+MD8yOjE6TWEoclsxXS10KTxQYT91PjA/MTowOnU+MD8zOjJ9ZnVuY3Rpb24gaShuLHQpe3JldHVybiBhKG4ueCx0LngpfWZ1bmN0aW9uIGEobix0KXt2YXIgZT11KG4sMSkscj11KHQsMSk7cmV0dXJuIGUhPT1yP2UtcjowPT09ZT90WzFdLW5bMV06MT09PWU/blswXS10WzBdOjI9PT1lP25bMV0tdFsxXTp0WzBdLW5bMF19cmV0dXJuIGZ1bmN0aW9uKG8pe2Z1bmN0aW9uIGwobil7Zm9yKHZhciB0PTAsZT1kLmxlbmd0aCxyPW5bMV0sdT0wO2U+dTsrK3UpZm9yKHZhciBpLGE9MSxvPWRbdV0sbD1vLmxlbmd0aCxjPW9bMF07bD5hOysrYSlpPW9bYV0sY1sxXTw9cj9pWzFdPnImJlEoYyxpLG4pPjAmJisrdDppWzFdPD1yJiZRKGMsaSxuKTwwJiYtLXQsYz1pO3JldHVybiAwIT09dH1mdW5jdGlvbiBjKGksbyxsLGMpe3ZhciBzPTAsZj0wO2lmKG51bGw9PWl8fChzPXUoaSxsKSkhPT0oZj11KG8sbCkpfHxhKGksbyk8MF5sPjApe2RvIGMucG9pbnQoMD09PXN8fDM9PT1zP246ZSxzPjE/cjp0KTt3aGlsZSgocz0ocytsKzQpJTQpIT09Zil9ZWxzZSBjLnBvaW50KG9bMF0sb1sxXSl9ZnVuY3Rpb24gcyh1LGkpe3JldHVybiB1Pj1uJiZlPj11JiZpPj10JiZyPj1pfWZ1bmN0aW9uIGYobix0KXtzKG4sdCkmJm8ucG9pbnQobix0KX1mdW5jdGlvbiBoKCl7Qy5wb2ludD1wLGQmJmQucHVzaChtPVtdKSxTPSEwLHc9ITEsYj1fPU5hTn1mdW5jdGlvbiBnKCl7diYmKHAoeSxNKSx4JiZ3JiZFLnJlam9pbigpLHYucHVzaChFLmJ1ZmZlcigpKSksQy5wb2ludD1mLHcmJm8ubGluZUVuZCgpfWZ1bmN0aW9uIHAobix0KXtuPU1hdGgubWF4KC1IbyxNYXRoLm1pbihIbyxuKSksdD1NYXRoLm1heCgtSG8sTWF0aC5taW4oSG8sdCkpO3ZhciBlPXMobix0KTtpZihkJiZtLnB1c2goW24sdF0pLFMpeT1uLE09dCx4PWUsUz0hMSxlJiYoby5saW5lU3RhcnQoKSxvLnBvaW50KG4sdCkpO2Vsc2UgaWYoZSYmdylvLnBvaW50KG4sdCk7ZWxzZXt2YXIgcj17YTp7eDpiLHk6X30sYjp7eDpuLHk6dH19O0Eocik/KHd8fChvLmxpbmVTdGFydCgpLG8ucG9pbnQoci5hLngsci5hLnkpKSxvLnBvaW50KHIuYi54LHIuYi55KSxlfHxvLmxpbmVFbmQoKSxrPSExKTplJiYoby5saW5lU3RhcnQoKSxvLnBvaW50KG4sdCksaz0hMSl9Yj1uLF89dCx3PWV9dmFyIHYsZCxtLHksTSx4LGIsXyx3LFMsayxOPW8sRT1QdCgpLEE9WXQobix0LGUsciksQz17cG9pbnQ6ZixsaW5lU3RhcnQ6aCxsaW5lRW5kOmcscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7bz1FLHY9W10sZD1bXSxrPSEwfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7bz1OLHY9b2EubWVyZ2Uodik7dmFyIHQ9bChbbixyXSksZT1rJiZ0LHU9di5sZW5ndGg7KGV8fHUpJiYoby5wb2x5Z29uU3RhcnQoKSxlJiYoby5saW5lU3RhcnQoKSxjKG51bGwsbnVsbCwxLG8pLG8ubGluZUVuZCgpKSx1JiZMdCh2LGksdCxjLG8pLG8ucG9seWdvbkVuZCgpKSx2PWQ9bT1udWxsfX07cmV0dXJuIEN9fWZ1bmN0aW9uIFZ0KG4pe3ZhciB0PTAsZT1qYS8zLHI9b2UobiksdT1yKHQsZSk7cmV0dXJuIHUucGFyYWxsZWxzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3IodD1uWzBdKmphLzE4MCxlPW5bMV0qamEvMTgwKTpbdC9qYSoxODAsZS9qYSoxODBdfSx1fWZ1bmN0aW9uIFh0KG4sdCl7ZnVuY3Rpb24gZShuLHQpe3ZhciBlPU1hdGguc3FydChpLTIqdSpNYXRoLnNpbih0KSkvdTtyZXR1cm5bZSpNYXRoLnNpbihuKj11KSxhLWUqTWF0aC5jb3MobildfXZhciByPU1hdGguc2luKG4pLHU9KHIrTWF0aC5zaW4odCkpLzIsaT0xK3IqKDIqdS1yKSxhPU1hdGguc3FydChpKS91O3JldHVybiBlLmludmVydD1mdW5jdGlvbihuLHQpe3ZhciBlPWEtdDtyZXR1cm5bTWF0aC5hdGFuMihuLGUpL3UsdG4oKGktKG4qbitlKmUpKnUqdSkvKDIqdSkpXX0sZX1mdW5jdGlvbiAkdCgpe2Z1bmN0aW9uIG4obix0KXtJbys9dSpuLXIqdCxyPW4sdT10fXZhciB0LGUscix1OyRvLnBvaW50PWZ1bmN0aW9uKGksYSl7JG8ucG9pbnQ9bix0PXI9aSxlPXU9YX0sJG8ubGluZUVuZD1mdW5jdGlvbigpe24odCxlKX19ZnVuY3Rpb24gQnQobix0KXtZbz5uJiYoWW89biksbj5WbyYmKFZvPW4pLFpvPnQmJihabz10KSx0PlhvJiYoWG89dCl9ZnVuY3Rpb24gV3QoKXtmdW5jdGlvbiBuKG4sdCl7YS5wdXNoKFwiTVwiLG4sXCIsXCIsdCxpKX1mdW5jdGlvbiB0KG4sdCl7YS5wdXNoKFwiTVwiLG4sXCIsXCIsdCksby5wb2ludD1lfWZ1bmN0aW9uIGUobix0KXthLnB1c2goXCJMXCIsbixcIixcIix0KX1mdW5jdGlvbiByKCl7by5wb2ludD1ufWZ1bmN0aW9uIHUoKXthLnB1c2goXCJaXCIpfXZhciBpPUp0KDQuNSksYT1bXSxvPXtwb2ludDpuLGxpbmVTdGFydDpmdW5jdGlvbigpe28ucG9pbnQ9dH0sbGluZUVuZDpyLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe28ubGluZUVuZD11fSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7by5saW5lRW5kPXIsby5wb2ludD1ufSxwb2ludFJhZGl1czpmdW5jdGlvbihuKXtyZXR1cm4gaT1KdChuKSxvfSxyZXN1bHQ6ZnVuY3Rpb24oKXtpZihhLmxlbmd0aCl7dmFyIG49YS5qb2luKFwiXCIpO3JldHVybiBhPVtdLG59fX07cmV0dXJuIG99ZnVuY3Rpb24gSnQobil7cmV0dXJuXCJtMCxcIituK1wiYVwiK24rXCIsXCIrbitcIiAwIDEsMSAwLFwiKy0yKm4rXCJhXCIrbitcIixcIituK1wiIDAgMSwxIDAsXCIrMipuK1wielwifWZ1bmN0aW9uIEd0KG4sdCl7Q28rPW4sem8rPXQsKytMb31mdW5jdGlvbiBLdCgpe2Z1bmN0aW9uIG4obixyKXt2YXIgdT1uLXQsaT1yLWUsYT1NYXRoLnNxcnQodSp1K2kqaSk7cW8rPWEqKHQrbikvMixUbys9YSooZStyKS8yLFJvKz1hLEd0KHQ9bixlPXIpfXZhciB0LGU7V28ucG9pbnQ9ZnVuY3Rpb24ocix1KXtXby5wb2ludD1uLEd0KHQ9cixlPXUpfX1mdW5jdGlvbiBRdCgpe1dvLnBvaW50PUd0fWZ1bmN0aW9uIG5lKCl7ZnVuY3Rpb24gbihuLHQpe3ZhciBlPW4tcixpPXQtdSxhPU1hdGguc3FydChlKmUraSppKTtxbys9YSoocituKS8yLFRvKz1hKih1K3QpLzIsUm8rPWEsYT11Km4tcip0LERvKz1hKihyK24pLFBvKz1hKih1K3QpLFVvKz0zKmEsR3Qocj1uLHU9dCl9dmFyIHQsZSxyLHU7V28ucG9pbnQ9ZnVuY3Rpb24oaSxhKXtXby5wb2ludD1uLEd0KHQ9cj1pLGU9dT1hKX0sV28ubGluZUVuZD1mdW5jdGlvbigpe24odCxlKX19ZnVuY3Rpb24gdGUobil7ZnVuY3Rpb24gdCh0LGUpe24ubW92ZVRvKHQrYSxlKSxuLmFyYyh0LGUsYSwwLEZhKX1mdW5jdGlvbiBlKHQsZSl7bi5tb3ZlVG8odCxlKSxvLnBvaW50PXJ9ZnVuY3Rpb24gcih0LGUpe24ubGluZVRvKHQsZSl9ZnVuY3Rpb24gdSgpe28ucG9pbnQ9dH1mdW5jdGlvbiBpKCl7bi5jbG9zZVBhdGgoKX12YXIgYT00LjUsbz17cG9pbnQ6dCxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXtvLnBvaW50PWV9LGxpbmVFbmQ6dSxwb2x5Z29uU3RhcnQ6ZnVuY3Rpb24oKXtvLmxpbmVFbmQ9aX0scG9seWdvbkVuZDpmdW5jdGlvbigpe28ubGluZUVuZD11LG8ucG9pbnQ9dH0scG9pbnRSYWRpdXM6ZnVuY3Rpb24obil7cmV0dXJuIGE9bixvfSxyZXN1bHQ6Yn07cmV0dXJuIG99ZnVuY3Rpb24gZWUobil7ZnVuY3Rpb24gdChuKXtyZXR1cm4obz9yOmUpKG4pfWZ1bmN0aW9uIGUodCl7cmV0dXJuIGllKHQsZnVuY3Rpb24oZSxyKXtlPW4oZSxyKSx0LnBvaW50KGVbMF0sZVsxXSl9KX1mdW5jdGlvbiByKHQpe2Z1bmN0aW9uIGUoZSxyKXtlPW4oZSxyKSx0LnBvaW50KGVbMF0sZVsxXSl9ZnVuY3Rpb24gcigpe009TmFOLFMucG9pbnQ9aSx0LmxpbmVTdGFydCgpfWZ1bmN0aW9uIGkoZSxyKXt2YXIgaT1kdChbZSxyXSksYT1uKGUscik7dShNLHgseSxiLF8sdyxNPWFbMF0seD1hWzFdLHk9ZSxiPWlbMF0sXz1pWzFdLHc9aVsyXSxvLHQpLHQucG9pbnQoTSx4KX1mdW5jdGlvbiBhKCl7Uy5wb2ludD1lLHQubGluZUVuZCgpfWZ1bmN0aW9uIGwoKXtcbnIoKSxTLnBvaW50PWMsUy5saW5lRW5kPXN9ZnVuY3Rpb24gYyhuLHQpe2koZj1uLGg9dCksZz1NLHA9eCx2PWIsZD1fLG09dyxTLnBvaW50PWl9ZnVuY3Rpb24gcygpe3UoTSx4LHksYixfLHcsZyxwLGYsdixkLG0sbyx0KSxTLmxpbmVFbmQ9YSxhKCl9dmFyIGYsaCxnLHAsdixkLG0seSxNLHgsYixfLHcsUz17cG9pbnQ6ZSxsaW5lU3RhcnQ6cixsaW5lRW5kOmEscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7dC5wb2x5Z29uU3RhcnQoKSxTLmxpbmVTdGFydD1sfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dC5wb2x5Z29uRW5kKCksUy5saW5lU3RhcnQ9cn19O3JldHVybiBTfWZ1bmN0aW9uIHUodCxlLHIsbyxsLGMscyxmLGgsZyxwLHYsZCxtKXt2YXIgeT1zLXQsTT1mLWUseD15KnkrTSpNO2lmKHg+NCppJiZkLS0pe3ZhciBiPW8rZyxfPWwrcCx3PWMrdixTPU1hdGguc3FydChiKmIrXypfK3cqdyksaz1NYXRoLmFzaW4ody89UyksTj1NYShNYSh3KS0xKTxQYXx8TWEoci1oKTxQYT8ocitoKS8yOk1hdGguYXRhbjIoXyxiKSxFPW4oTixrKSxBPUVbMF0sQz1FWzFdLHo9QS10LEw9Qy1lLHE9TSp6LXkqTDsocSpxL3g+aXx8TWEoKHkqeitNKkwpL3gtLjUpPi4zfHxhPm8qZytsKnArYyp2KSYmKHUodCxlLHIsbyxsLGMsQSxDLE4sYi89UyxfLz1TLHcsZCxtKSxtLnBvaW50KEEsQyksdShBLEMsTixiLF8sdyxzLGYsaCxnLHAsdixkLG0pKX19dmFyIGk9LjUsYT1NYXRoLmNvcygzMCpJYSksbz0xNjtyZXR1cm4gdC5wcmVjaXNpb249ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89KGk9bipuKT4wJiYxNix0KTpNYXRoLnNxcnQoaSl9LHR9ZnVuY3Rpb24gcmUobil7dmFyIHQ9ZWUoZnVuY3Rpb24odCxlKXtyZXR1cm4gbihbdCpZYSxlKllhXSl9KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIGxlKHQobikpfX1mdW5jdGlvbiB1ZShuKXt0aGlzLnN0cmVhbT1ufWZ1bmN0aW9uIGllKG4sdCl7cmV0dXJue3BvaW50OnQsc3BoZXJlOmZ1bmN0aW9uKCl7bi5zcGhlcmUoKX0sbGluZVN0YXJ0OmZ1bmN0aW9uKCl7bi5saW5lU3RhcnQoKX0sbGluZUVuZDpmdW5jdGlvbigpe24ubGluZUVuZCgpfSxwb2x5Z29uU3RhcnQ6ZnVuY3Rpb24oKXtuLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7bi5wb2x5Z29uRW5kKCl9fX1mdW5jdGlvbiBhZShuKXtyZXR1cm4gb2UoZnVuY3Rpb24oKXtyZXR1cm4gbn0pKCl9ZnVuY3Rpb24gb2Uobil7ZnVuY3Rpb24gdChuKXtyZXR1cm4gbj1vKG5bMF0qSWEsblsxXSpJYSksW25bMF0qaCtsLGMtblsxXSpoXX1mdW5jdGlvbiBlKG4pe3JldHVybiBuPW8uaW52ZXJ0KChuWzBdLWwpL2gsKGMtblsxXSkvaCksbiYmW25bMF0qWWEsblsxXSpZYV19ZnVuY3Rpb24gcigpe289Q3QoYT1mZShtLE0seCksaSk7dmFyIG49aSh2LGQpO3JldHVybiBsPWctblswXSpoLGM9cCtuWzFdKmgsdSgpfWZ1bmN0aW9uIHUoKXtyZXR1cm4gcyYmKHMudmFsaWQ9ITEscz1udWxsKSx0fXZhciBpLGEsbyxsLGMscyxmPWVlKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIG49aShuLHQpLFtuWzBdKmgrbCxjLW5bMV0qaF19KSxoPTE1MCxnPTQ4MCxwPTI1MCx2PTAsZD0wLG09MCxNPTAseD0wLGI9Rm8sXz15LHc9bnVsbCxTPW51bGw7cmV0dXJuIHQuc3RyZWFtPWZ1bmN0aW9uKG4pe3JldHVybiBzJiYocy52YWxpZD0hMSkscz1sZShiKGEsZihfKG4pKSkpLHMudmFsaWQ9ITAsc30sdC5jbGlwQW5nbGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGI9bnVsbD09bj8odz1uLEZvKTpJdCgodz0rbikqSWEpLHUoKSk6d30sdC5jbGlwRXh0ZW50PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhTPW4sXz1uP1p0KG5bMF1bMF0sblswXVsxXSxuWzFdWzBdLG5bMV1bMV0pOnksdSgpKTpTfSx0LnNjYWxlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhoPStuLHIoKSk6aH0sdC50cmFuc2xhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGc9K25bMF0scD0rblsxXSxyKCkpOltnLHBdfSx0LmNlbnRlcj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odj1uWzBdJTM2MCpJYSxkPW5bMV0lMzYwKklhLHIoKSk6W3YqWWEsZCpZYV19LHQucm90YXRlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhtPW5bMF0lMzYwKklhLE09blsxXSUzNjAqSWEseD1uLmxlbmd0aD4yP25bMl0lMzYwKklhOjAscigpKTpbbSpZYSxNKllhLHgqWWFdfSxvYS5yZWJpbmQodCxmLFwicHJlY2lzaW9uXCIpLGZ1bmN0aW9uKCl7cmV0dXJuIGk9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC5pbnZlcnQ9aS5pbnZlcnQmJmUscigpfX1mdW5jdGlvbiBsZShuKXtyZXR1cm4gaWUobixmdW5jdGlvbih0LGUpe24ucG9pbnQodCpJYSxlKklhKX0pfWZ1bmN0aW9uIGNlKG4sdCl7cmV0dXJuW24sdF19ZnVuY3Rpb24gc2Uobix0KXtyZXR1cm5bbj5qYT9uLUZhOi1qYT5uP24rRmE6bix0XX1mdW5jdGlvbiBmZShuLHQsZSl7cmV0dXJuIG4/dHx8ZT9DdChnZShuKSxwZSh0LGUpKTpnZShuKTp0fHxlP3BlKHQsZSk6c2V9ZnVuY3Rpb24gaGUobil7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrPW4sW3Q+amE/dC1GYTotamE+dD90K0ZhOnQsZV19fWZ1bmN0aW9uIGdlKG4pe3ZhciB0PWhlKG4pO3JldHVybiB0LmludmVydD1oZSgtbiksdH1mdW5jdGlvbiBwZShuLHQpe2Z1bmN0aW9uIGUobix0KXt2YXIgZT1NYXRoLmNvcyh0KSxvPU1hdGguY29zKG4pKmUsbD1NYXRoLnNpbihuKSplLGM9TWF0aC5zaW4odCkscz1jKnIrbyp1O3JldHVybltNYXRoLmF0YW4yKGwqaS1zKmEsbypyLWMqdSksdG4ocyppK2wqYSldfXZhciByPU1hdGguY29zKG4pLHU9TWF0aC5zaW4obiksaT1NYXRoLmNvcyh0KSxhPU1hdGguc2luKHQpO3JldHVybiBlLmludmVydD1mdW5jdGlvbihuLHQpe3ZhciBlPU1hdGguY29zKHQpLG89TWF0aC5jb3MobikqZSxsPU1hdGguc2luKG4pKmUsYz1NYXRoLnNpbih0KSxzPWMqaS1sKmE7cmV0dXJuW01hdGguYXRhbjIobCppK2MqYSxvKnIrcyp1KSx0bihzKnItbyp1KV19LGV9ZnVuY3Rpb24gdmUobix0KXt2YXIgZT1NYXRoLmNvcyhuKSxyPU1hdGguc2luKG4pO3JldHVybiBmdW5jdGlvbih1LGksYSxvKXt2YXIgbD1hKnQ7bnVsbCE9dT8odT1kZShlLHUpLGk9ZGUoZSxpKSwoYT4wP2k+dTp1PmkpJiYodSs9YSpGYSkpOih1PW4rYSpGYSxpPW4tLjUqbCk7Zm9yKHZhciBjLHM9dTthPjA/cz5pOmk+cztzLT1sKW8ucG9pbnQoKGM9X3QoW2UsLXIqTWF0aC5jb3MocyksLXIqTWF0aC5zaW4ocyldKSlbMF0sY1sxXSl9fWZ1bmN0aW9uIGRlKG4sdCl7dmFyIGU9ZHQodCk7ZVswXS09bixidChlKTt2YXIgcj1ubigtZVsxXSk7cmV0dXJuKCgtZVsyXTwwPy1yOnIpKzIqTWF0aC5QSS1QYSklKDIqTWF0aC5QSSl9ZnVuY3Rpb24gbWUobix0LGUpe3ZhciByPW9hLnJhbmdlKG4sdC1QYSxlKS5jb25jYXQodCk7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiByLm1hcChmdW5jdGlvbih0KXtyZXR1cm5bbix0XX0pfX1mdW5jdGlvbiB5ZShuLHQsZSl7dmFyIHI9b2EucmFuZ2Uobix0LVBhLGUpLmNvbmNhdCh0KTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIHIubWFwKGZ1bmN0aW9uKHQpe3JldHVyblt0LG5dfSl9fWZ1bmN0aW9uIE1lKG4pe3JldHVybiBuLnNvdXJjZX1mdW5jdGlvbiB4ZShuKXtyZXR1cm4gbi50YXJnZXR9ZnVuY3Rpb24gYmUobix0LGUscil7dmFyIHU9TWF0aC5jb3ModCksaT1NYXRoLnNpbih0KSxhPU1hdGguY29zKHIpLG89TWF0aC5zaW4ociksbD11Kk1hdGguY29zKG4pLGM9dSpNYXRoLnNpbihuKSxzPWEqTWF0aC5jb3MoZSksZj1hKk1hdGguc2luKGUpLGg9MipNYXRoLmFzaW4oTWF0aC5zcXJ0KGFuKHItdCkrdSphKmFuKGUtbikpKSxnPTEvTWF0aC5zaW4oaCkscD1oP2Z1bmN0aW9uKG4pe3ZhciB0PU1hdGguc2luKG4qPWgpKmcsZT1NYXRoLnNpbihoLW4pKmcscj1lKmwrdCpzLHU9ZSpjK3QqZixhPWUqaSt0Km87cmV0dXJuW01hdGguYXRhbjIodSxyKSpZYSxNYXRoLmF0YW4yKGEsTWF0aC5zcXJ0KHIqcit1KnUpKSpZYV19OmZ1bmN0aW9uKCl7cmV0dXJuW24qWWEsdCpZYV19O3JldHVybiBwLmRpc3RhbmNlPWgscH1mdW5jdGlvbiBfZSgpe2Z1bmN0aW9uIG4obix1KXt2YXIgaT1NYXRoLnNpbih1Kj1JYSksYT1NYXRoLmNvcyh1KSxvPU1hKChuKj1JYSktdCksbD1NYXRoLmNvcyhvKTtKbys9TWF0aC5hdGFuMihNYXRoLnNxcnQoKG89YSpNYXRoLnNpbihvKSkqbysobz1yKmktZSphKmwpKm8pLGUqaStyKmEqbCksdD1uLGU9aSxyPWF9dmFyIHQsZSxyO0dvLnBvaW50PWZ1bmN0aW9uKHUsaSl7dD11KklhLGU9TWF0aC5zaW4oaSo9SWEpLHI9TWF0aC5jb3MoaSksR28ucG9pbnQ9bn0sR28ubGluZUVuZD1mdW5jdGlvbigpe0dvLnBvaW50PUdvLmxpbmVFbmQ9Yn19ZnVuY3Rpb24gd2Uobix0KXtmdW5jdGlvbiBlKHQsZSl7dmFyIHI9TWF0aC5jb3ModCksdT1NYXRoLmNvcyhlKSxpPW4ocip1KTtyZXR1cm5baSp1Kk1hdGguc2luKHQpLGkqTWF0aC5zaW4oZSldfXJldHVybiBlLmludmVydD1mdW5jdGlvbihuLGUpe3ZhciByPU1hdGguc3FydChuKm4rZSplKSx1PXQociksaT1NYXRoLnNpbih1KSxhPU1hdGguY29zKHUpO3JldHVybltNYXRoLmF0YW4yKG4qaSxyKmEpLE1hdGguYXNpbihyJiZlKmkvcildfSxlfWZ1bmN0aW9uIFNlKG4sdCl7ZnVuY3Rpb24gZShuLHQpe2E+MD8tT2ErUGE+dCYmKHQ9LU9hK1BhKTp0Pk9hLVBhJiYodD1PYS1QYSk7dmFyIGU9YS9NYXRoLnBvdyh1KHQpLGkpO3JldHVybltlKk1hdGguc2luKGkqbiksYS1lKk1hdGguY29zKGkqbildfXZhciByPU1hdGguY29zKG4pLHU9ZnVuY3Rpb24obil7cmV0dXJuIE1hdGgudGFuKGphLzQrbi8yKX0saT1uPT09dD9NYXRoLnNpbihuKTpNYXRoLmxvZyhyL01hdGguY29zKHQpKS9NYXRoLmxvZyh1KHQpL3UobikpLGE9cipNYXRoLnBvdyh1KG4pLGkpL2k7cmV0dXJuIGk/KGUuaW52ZXJ0PWZ1bmN0aW9uKG4sdCl7dmFyIGU9YS10LHI9SyhpKSpNYXRoLnNxcnQobipuK2UqZSk7cmV0dXJuW01hdGguYXRhbjIobixlKS9pLDIqTWF0aC5hdGFuKE1hdGgucG93KGEvciwxL2kpKS1PYV19LGUpOk5lfWZ1bmN0aW9uIGtlKG4sdCl7ZnVuY3Rpb24gZShuLHQpe3ZhciBlPWktdDtyZXR1cm5bZSpNYXRoLnNpbih1Km4pLGktZSpNYXRoLmNvcyh1Km4pXX12YXIgcj1NYXRoLmNvcyhuKSx1PW49PT10P01hdGguc2luKG4pOihyLU1hdGguY29zKHQpKS8odC1uKSxpPXIvdStuO3JldHVybiBNYSh1KTxQYT9jZTooZS5pbnZlcnQ9ZnVuY3Rpb24obix0KXt2YXIgZT1pLXQ7cmV0dXJuW01hdGguYXRhbjIobixlKS91LGktSyh1KSpNYXRoLnNxcnQobipuK2UqZSldfSxlKX1mdW5jdGlvbiBOZShuLHQpe3JldHVybltuLE1hdGgubG9nKE1hdGgudGFuKGphLzQrdC8yKSldfWZ1bmN0aW9uIEVlKG4pe3ZhciB0LGU9YWUobikscj1lLnNjYWxlLHU9ZS50cmFuc2xhdGUsaT1lLmNsaXBFeHRlbnQ7cmV0dXJuIGUuc2NhbGU9ZnVuY3Rpb24oKXt2YXIgbj1yLmFwcGx5KGUsYXJndW1lbnRzKTtyZXR1cm4gbj09PWU/dD9lLmNsaXBFeHRlbnQobnVsbCk6ZTpufSxlLnRyYW5zbGF0ZT1mdW5jdGlvbigpe3ZhciBuPXUuYXBwbHkoZSxhcmd1bWVudHMpO3JldHVybiBuPT09ZT90P2UuY2xpcEV4dGVudChudWxsKTplOm59LGUuY2xpcEV4dGVudD1mdW5jdGlvbihuKXt2YXIgYT1pLmFwcGx5KGUsYXJndW1lbnRzKTtpZihhPT09ZSl7aWYodD1udWxsPT1uKXt2YXIgbz1qYSpyKCksbD11KCk7aShbW2xbMF0tbyxsWzFdLW9dLFtsWzBdK28sbFsxXStvXV0pfX1lbHNlIHQmJihhPW51bGwpO3JldHVybiBhfSxlLmNsaXBFeHRlbnQobnVsbCl9ZnVuY3Rpb24gQWUobix0KXtyZXR1cm5bTWF0aC5sb2coTWF0aC50YW4oamEvNCt0LzIpKSwtbl19ZnVuY3Rpb24gQ2Uobil7cmV0dXJuIG5bMF19ZnVuY3Rpb24gemUobil7cmV0dXJuIG5bMV19ZnVuY3Rpb24gTGUobil7Zm9yKHZhciB0PW4ubGVuZ3RoLGU9WzAsMV0scj0yLHU9Mjt0PnU7dSsrKXtmb3IoO3I+MSYmUShuW2Vbci0yXV0sbltlW3ItMV1dLG5bdV0pPD0wOyktLXI7ZVtyKytdPXV9cmV0dXJuIGUuc2xpY2UoMCxyKX1mdW5jdGlvbiBxZShuLHQpe3JldHVybiBuWzBdLXRbMF18fG5bMV0tdFsxXX1mdW5jdGlvbiBUZShuLHQsZSl7cmV0dXJuKGVbMF0tdFswXSkqKG5bMV0tdFsxXSk8KGVbMV0tdFsxXSkqKG5bMF0tdFswXSl9ZnVuY3Rpb24gUmUobix0LGUscil7dmFyIHU9blswXSxpPWVbMF0sYT10WzBdLXUsbz1yWzBdLWksbD1uWzFdLGM9ZVsxXSxzPXRbMV0tbCxmPXJbMV0tYyxoPShvKihsLWMpLWYqKHUtaSkpLyhmKmEtbypzKTtyZXR1cm5bdStoKmEsbCtoKnNdfWZ1bmN0aW9uIERlKG4pe3ZhciB0PW5bMF0sZT1uW24ubGVuZ3RoLTFdO3JldHVybiEodFswXS1lWzBdfHx0WzFdLWVbMV0pfWZ1bmN0aW9uIFBlKCl7cnIodGhpcyksdGhpcy5lZGdlPXRoaXMuc2l0ZT10aGlzLmNpcmNsZT1udWxsfWZ1bmN0aW9uIFVlKG4pe3ZhciB0PWNsLnBvcCgpfHxuZXcgUGU7cmV0dXJuIHQuc2l0ZT1uLHR9ZnVuY3Rpb24gamUobil7QmUobiksYWwucmVtb3ZlKG4pLGNsLnB1c2gobikscnIobil9ZnVuY3Rpb24gRmUobil7dmFyIHQ9bi5jaXJjbGUsZT10Lngscj10LmN5LHU9e3g6ZSx5OnJ9LGk9bi5QLGE9bi5OLG89W25dO2plKG4pO2Zvcih2YXIgbD1pO2wuY2lyY2xlJiZNYShlLWwuY2lyY2xlLngpPFBhJiZNYShyLWwuY2lyY2xlLmN5KTxQYTspaT1sLlAsby51bnNoaWZ0KGwpLGplKGwpLGw9aTtvLnVuc2hpZnQobCksQmUobCk7Zm9yKHZhciBjPWE7Yy5jaXJjbGUmJk1hKGUtYy5jaXJjbGUueCk8UGEmJk1hKHItYy5jaXJjbGUuY3kpPFBhOylhPWMuTixvLnB1c2goYyksamUoYyksYz1hO28ucHVzaChjKSxCZShjKTt2YXIgcyxmPW8ubGVuZ3RoO2ZvcihzPTE7Zj5zOysrcyljPW9bc10sbD1vW3MtMV0sbnIoYy5lZGdlLGwuc2l0ZSxjLnNpdGUsdSk7bD1vWzBdLGM9b1tmLTFdLGMuZWRnZT1LZShsLnNpdGUsYy5zaXRlLG51bGwsdSksJGUobCksJGUoYyl9ZnVuY3Rpb24gSGUobil7Zm9yKHZhciB0LGUscix1LGk9bi54LGE9bi55LG89YWwuXztvOylpZihyPU9lKG8sYSktaSxyPlBhKW89by5MO2Vsc2V7aWYodT1pLUllKG8sYSksISh1PlBhKSl7cj4tUGE/KHQ9by5QLGU9byk6dT4tUGE/KHQ9byxlPW8uTik6dD1lPW87YnJlYWt9aWYoIW8uUil7dD1vO2JyZWFrfW89by5SfXZhciBsPVVlKG4pO2lmKGFsLmluc2VydCh0LGwpLHR8fGUpe2lmKHQ9PT1lKXJldHVybiBCZSh0KSxlPVVlKHQuc2l0ZSksYWwuaW5zZXJ0KGwsZSksbC5lZGdlPWUuZWRnZT1LZSh0LnNpdGUsbC5zaXRlKSwkZSh0KSx2b2lkICRlKGUpO2lmKCFlKXJldHVybiB2b2lkKGwuZWRnZT1LZSh0LnNpdGUsbC5zaXRlKSk7QmUodCksQmUoZSk7dmFyIGM9dC5zaXRlLHM9Yy54LGY9Yy55LGg9bi54LXMsZz1uLnktZixwPWUuc2l0ZSx2PXAueC1zLGQ9cC55LWYsbT0yKihoKmQtZyp2KSx5PWgqaCtnKmcsTT12KnYrZCpkLHg9e3g6KGQqeS1nKk0pL20rcyx5OihoKk0tdip5KS9tK2Z9O25yKGUuZWRnZSxjLHAseCksbC5lZGdlPUtlKGMsbixudWxsLHgpLGUuZWRnZT1LZShuLHAsbnVsbCx4KSwkZSh0KSwkZShlKX19ZnVuY3Rpb24gT2Uobix0KXt2YXIgZT1uLnNpdGUscj1lLngsdT1lLnksaT11LXQ7aWYoIWkpcmV0dXJuIHI7dmFyIGE9bi5QO2lmKCFhKXJldHVybi0oMS8wKTtlPWEuc2l0ZTt2YXIgbz1lLngsbD1lLnksYz1sLXQ7aWYoIWMpcmV0dXJuIG87dmFyIHM9by1yLGY9MS9pLTEvYyxoPXMvYztyZXR1cm4gZj8oLWgrTWF0aC5zcXJ0KGgqaC0yKmYqKHMqcy8oLTIqYyktbCtjLzIrdS1pLzIpKSkvZityOihyK28pLzJ9ZnVuY3Rpb24gSWUobix0KXt2YXIgZT1uLk47aWYoZSlyZXR1cm4gT2UoZSx0KTt2YXIgcj1uLnNpdGU7cmV0dXJuIHIueT09PXQ/ci54OjEvMH1mdW5jdGlvbiBZZShuKXt0aGlzLnNpdGU9bix0aGlzLmVkZ2VzPVtdfWZ1bmN0aW9uIFplKG4pe2Zvcih2YXIgdCxlLHIsdSxpLGEsbyxsLGMscyxmPW5bMF1bMF0saD1uWzFdWzBdLGc9blswXVsxXSxwPW5bMV1bMV0sdj1pbCxkPXYubGVuZ3RoO2QtLTspaWYoaT12W2RdLGkmJmkucHJlcGFyZSgpKWZvcihvPWkuZWRnZXMsbD1vLmxlbmd0aCxhPTA7bD5hOylzPW9bYV0uZW5kKCkscj1zLngsdT1zLnksYz1vWysrYSVsXS5zdGFydCgpLHQ9Yy54LGU9Yy55LChNYShyLXQpPlBhfHxNYSh1LWUpPlBhKSYmKG8uc3BsaWNlKGEsMCxuZXcgdHIoUWUoaS5zaXRlLHMsTWEoci1mKTxQYSYmcC11PlBhP3t4OmYseTpNYSh0LWYpPFBhP2U6cH06TWEodS1wKTxQYSYmaC1yPlBhP3t4Ok1hKGUtcCk8UGE/dDpoLHk6cH06TWEoci1oKTxQYSYmdS1nPlBhP3t4OmgseTpNYSh0LWgpPFBhP2U6Z306TWEodS1nKTxQYSYmci1mPlBhP3t4Ok1hKGUtZyk8UGE/dDpmLHk6Z306bnVsbCksaS5zaXRlLG51bGwpKSwrK2wpfWZ1bmN0aW9uIFZlKG4sdCl7cmV0dXJuIHQuYW5nbGUtbi5hbmdsZX1mdW5jdGlvbiBYZSgpe3JyKHRoaXMpLHRoaXMueD10aGlzLnk9dGhpcy5hcmM9dGhpcy5zaXRlPXRoaXMuY3k9bnVsbH1mdW5jdGlvbiAkZShuKXt2YXIgdD1uLlAsZT1uLk47aWYodCYmZSl7dmFyIHI9dC5zaXRlLHU9bi5zaXRlLGk9ZS5zaXRlO2lmKHIhPT1pKXt2YXIgYT11Lngsbz11LnksbD1yLngtYSxjPXIueS1vLHM9aS54LWEsZj1pLnktbyxoPTIqKGwqZi1jKnMpO2lmKCEoaD49LVVhKSl7dmFyIGc9bCpsK2MqYyxwPXMqcytmKmYsdj0oZipnLWMqcCkvaCxkPShsKnAtcypnKS9oLGY9ZCtvLG09c2wucG9wKCl8fG5ldyBYZTttLmFyYz1uLG0uc2l0ZT11LG0ueD12K2EsbS55PWYrTWF0aC5zcXJ0KHYqditkKmQpLG0uY3k9ZixuLmNpcmNsZT1tO2Zvcih2YXIgeT1udWxsLE09bGwuXztNOylpZihtLnk8TS55fHxtLnk9PT1NLnkmJm0ueDw9TS54KXtpZighTS5MKXt5PU0uUDticmVha31NPU0uTH1lbHNle2lmKCFNLlIpe3k9TTticmVha31NPU0uUn1sbC5pbnNlcnQoeSxtKSx5fHwob2w9bSl9fX19ZnVuY3Rpb24gQmUobil7dmFyIHQ9bi5jaXJjbGU7dCYmKHQuUHx8KG9sPXQuTiksbGwucmVtb3ZlKHQpLHNsLnB1c2godCkscnIodCksbi5jaXJjbGU9bnVsbCl9ZnVuY3Rpb24gV2Uobil7Zm9yKHZhciB0LGU9dWwscj1ZdChuWzBdWzBdLG5bMF1bMV0sblsxXVswXSxuWzFdWzFdKSx1PWUubGVuZ3RoO3UtLTspdD1lW3VdLCghSmUodCxuKXx8IXIodCl8fE1hKHQuYS54LXQuYi54KTxQYSYmTWEodC5hLnktdC5iLnkpPFBhKSYmKHQuYT10LmI9bnVsbCxlLnNwbGljZSh1LDEpKX1mdW5jdGlvbiBKZShuLHQpe3ZhciBlPW4uYjtpZihlKXJldHVybiEwO3ZhciByLHUsaT1uLmEsYT10WzBdWzBdLG89dFsxXVswXSxsPXRbMF1bMV0sYz10WzFdWzFdLHM9bi5sLGY9bi5yLGg9cy54LGc9cy55LHA9Zi54LHY9Zi55LGQ9KGgrcCkvMixtPShnK3YpLzI7aWYodj09PWcpe2lmKGE+ZHx8ZD49bylyZXR1cm47aWYoaD5wKXtpZihpKXtpZihpLnk+PWMpcmV0dXJufWVsc2UgaT17eDpkLHk6bH07ZT17eDpkLHk6Y319ZWxzZXtpZihpKXtpZihpLnk8bClyZXR1cm59ZWxzZSBpPXt4OmQseTpjfTtlPXt4OmQseTpsfX19ZWxzZSBpZihyPShoLXApLyh2LWcpLHU9bS1yKmQsLTE+cnx8cj4xKWlmKGg+cCl7aWYoaSl7aWYoaS55Pj1jKXJldHVybn1lbHNlIGk9e3g6KGwtdSkvcix5Omx9O2U9e3g6KGMtdSkvcix5OmN9fWVsc2V7aWYoaSl7aWYoaS55PGwpcmV0dXJufWVsc2UgaT17eDooYy11KS9yLHk6Y307ZT17eDoobC11KS9yLHk6bH19ZWxzZSBpZih2Pmcpe2lmKGkpe2lmKGkueD49bylyZXR1cm59ZWxzZSBpPXt4OmEseTpyKmErdX07ZT17eDpvLHk6cipvK3V9fWVsc2V7aWYoaSl7aWYoaS54PGEpcmV0dXJufWVsc2UgaT17eDpvLHk6cipvK3V9O2U9e3g6YSx5OnIqYSt1fX1yZXR1cm4gbi5hPWksbi5iPWUsITB9ZnVuY3Rpb24gR2Uobix0KXt0aGlzLmw9bix0aGlzLnI9dCx0aGlzLmE9dGhpcy5iPW51bGx9ZnVuY3Rpb24gS2Uobix0LGUscil7dmFyIHU9bmV3IEdlKG4sdCk7cmV0dXJuIHVsLnB1c2godSksZSYmbnIodSxuLHQsZSksciYmbnIodSx0LG4sciksaWxbbi5pXS5lZGdlcy5wdXNoKG5ldyB0cih1LG4sdCkpLGlsW3QuaV0uZWRnZXMucHVzaChuZXcgdHIodSx0LG4pKSx1fWZ1bmN0aW9uIFFlKG4sdCxlKXt2YXIgcj1uZXcgR2UobixudWxsKTtyZXR1cm4gci5hPXQsci5iPWUsdWwucHVzaChyKSxyfWZ1bmN0aW9uIG5yKG4sdCxlLHIpe24uYXx8bi5iP24ubD09PWU/bi5iPXI6bi5hPXI6KG4uYT1yLG4ubD10LG4ucj1lKX1mdW5jdGlvbiB0cihuLHQsZSl7dmFyIHI9bi5hLHU9bi5iO3RoaXMuZWRnZT1uLHRoaXMuc2l0ZT10LHRoaXMuYW5nbGU9ZT9NYXRoLmF0YW4yKGUueS10LnksZS54LXQueCk6bi5sPT09dD9NYXRoLmF0YW4yKHUueC1yLngsci55LXUueSk6TWF0aC5hdGFuMihyLngtdS54LHUueS1yLnkpfWZ1bmN0aW9uIGVyKCl7dGhpcy5fPW51bGx9ZnVuY3Rpb24gcnIobil7bi5VPW4uQz1uLkw9bi5SPW4uUD1uLk49bnVsbH1mdW5jdGlvbiB1cihuLHQpe3ZhciBlPXQscj10LlIsdT1lLlU7dT91Lkw9PT1lP3UuTD1yOnUuUj1yOm4uXz1yLHIuVT11LGUuVT1yLGUuUj1yLkwsZS5SJiYoZS5SLlU9ZSksci5MPWV9ZnVuY3Rpb24gaXIobix0KXt2YXIgZT10LHI9dC5MLHU9ZS5VO3U/dS5MPT09ZT91Lkw9cjp1LlI9cjpuLl89cixyLlU9dSxlLlU9cixlLkw9ci5SLGUuTCYmKGUuTC5VPWUpLHIuUj1lfWZ1bmN0aW9uIGFyKG4pe2Zvcig7bi5MOyluPW4uTDtyZXR1cm4gbn1mdW5jdGlvbiBvcihuLHQpe3ZhciBlLHIsdSxpPW4uc29ydChscikucG9wKCk7Zm9yKHVsPVtdLGlsPW5ldyBBcnJheShuLmxlbmd0aCksYWw9bmV3IGVyLGxsPW5ldyBlcjs7KWlmKHU9b2wsaSYmKCF1fHxpLnk8dS55fHxpLnk9PT11LnkmJmkueDx1LngpKShpLnghPT1lfHxpLnkhPT1yKSYmKGlsW2kuaV09bmV3IFllKGkpLEhlKGkpLGU9aS54LHI9aS55KSxpPW4ucG9wKCk7ZWxzZXtpZighdSlicmVhaztGZSh1LmFyYyl9dCYmKFdlKHQpLFplKHQpKTt2YXIgYT17Y2VsbHM6aWwsZWRnZXM6dWx9O3JldHVybiBhbD1sbD11bD1pbD1udWxsLGF9ZnVuY3Rpb24gbHIobix0KXtyZXR1cm4gdC55LW4ueXx8dC54LW4ueH1mdW5jdGlvbiBjcihuLHQsZSl7cmV0dXJuKG4ueC1lLngpKih0Lnktbi55KS0obi54LXQueCkqKGUueS1uLnkpfWZ1bmN0aW9uIHNyKG4pe3JldHVybiBuLnh9ZnVuY3Rpb24gZnIobil7cmV0dXJuIG4ueX1mdW5jdGlvbiBocigpe3JldHVybntsZWFmOiEwLG5vZGVzOltdLHBvaW50Om51bGwseDpudWxsLHk6bnVsbH19ZnVuY3Rpb24gZ3Iobix0LGUscix1LGkpe2lmKCFuKHQsZSxyLHUsaSkpe3ZhciBhPS41KihlK3UpLG89LjUqKHIraSksbD10Lm5vZGVzO2xbMF0mJmdyKG4sbFswXSxlLHIsYSxvKSxsWzFdJiZncihuLGxbMV0sYSxyLHUsbyksbFsyXSYmZ3IobixsWzJdLGUsbyxhLGkpLGxbM10mJmdyKG4sbFszXSxhLG8sdSxpKX19ZnVuY3Rpb24gcHIobix0LGUscix1LGksYSl7dmFyIG8sbD0xLzA7cmV0dXJuIGZ1bmN0aW9uIGMobixzLGYsaCxnKXtpZighKHM+aXx8Zj5hfHxyPmh8fHU+Zykpe2lmKHA9bi5wb2ludCl7dmFyIHAsdj10LW4ueCxkPWUtbi55LG09dip2K2QqZDtpZihsPm0pe3ZhciB5PU1hdGguc3FydChsPW0pO3I9dC15LHU9ZS15LGk9dCt5LGE9ZSt5LG89cH19Zm9yKHZhciBNPW4ubm9kZXMseD0uNSoocytoKSxiPS41KihmK2cpLF89dD49eCx3PWU+PWIsUz13PDwxfF8saz1TKzQ7az5TOysrUylpZihuPU1bMyZTXSlzd2l0Y2goMyZTKXtjYXNlIDA6YyhuLHMsZix4LGIpO2JyZWFrO2Nhc2UgMTpjKG4seCxmLGgsYik7YnJlYWs7Y2FzZSAyOmMobixzLGIseCxnKTticmVhaztjYXNlIDM6YyhuLHgsYixoLGcpfX19KG4scix1LGksYSksb31mdW5jdGlvbiB2cihuLHQpe249b2EucmdiKG4pLHQ9b2EucmdiKHQpO3ZhciBlPW4ucixyPW4uZyx1PW4uYixpPXQuci1lLGE9dC5nLXIsbz10LmItdTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuXCIjXCIrYm4oTWF0aC5yb3VuZChlK2kqbikpK2JuKE1hdGgucm91bmQocithKm4pKStibihNYXRoLnJvdW5kKHUrbypuKSl9fWZ1bmN0aW9uIGRyKG4sdCl7dmFyIGUscj17fSx1PXt9O2ZvcihlIGluIG4pZSBpbiB0P3JbZV09TXIobltlXSx0W2VdKTp1W2VdPW5bZV07Zm9yKGUgaW4gdCllIGluIG58fCh1W2VdPXRbZV0pO3JldHVybiBmdW5jdGlvbihuKXtmb3IoZSBpbiByKXVbZV09cltlXShuKTtyZXR1cm4gdX19ZnVuY3Rpb24gbXIobix0KXtyZXR1cm4gbj0rbix0PSt0LGZ1bmN0aW9uKGUpe3JldHVybiBuKigxLWUpK3QqZX19ZnVuY3Rpb24geXIobix0KXt2YXIgZSxyLHUsaT1obC5sYXN0SW5kZXg9Z2wubGFzdEluZGV4PTAsYT0tMSxvPVtdLGw9W107Zm9yKG4rPVwiXCIsdCs9XCJcIjsoZT1obC5leGVjKG4pKSYmKHI9Z2wuZXhlYyh0KSk7KSh1PXIuaW5kZXgpPmkmJih1PXQuc2xpY2UoaSx1KSxvW2FdP29bYV0rPXU6b1srK2FdPXUpLChlPWVbMF0pPT09KHI9clswXSk/b1thXT9vW2FdKz1yOm9bKythXT1yOihvWysrYV09bnVsbCxsLnB1c2goe2k6YSx4Om1yKGUscil9KSksaT1nbC5sYXN0SW5kZXg7cmV0dXJuIGk8dC5sZW5ndGgmJih1PXQuc2xpY2UoaSksb1thXT9vW2FdKz11Om9bKythXT11KSxvLmxlbmd0aDwyP2xbMF0/KHQ9bFswXS54LGZ1bmN0aW9uKG4pe3JldHVybiB0KG4pK1wiXCJ9KTpmdW5jdGlvbigpe3JldHVybiB0fToodD1sLmxlbmd0aCxmdW5jdGlvbihuKXtmb3IodmFyIGUscj0wO3Q+cjsrK3Ipb1soZT1sW3JdKS5pXT1lLngobik7cmV0dXJuIG8uam9pbihcIlwiKX0pfWZ1bmN0aW9uIE1yKG4sdCl7Zm9yKHZhciBlLHI9b2EuaW50ZXJwb2xhdG9ycy5sZW5ndGg7LS1yPj0wJiYhKGU9b2EuaW50ZXJwb2xhdG9yc1tyXShuLHQpKTspO3JldHVybiBlfWZ1bmN0aW9uIHhyKG4sdCl7dmFyIGUscj1bXSx1PVtdLGk9bi5sZW5ndGgsYT10Lmxlbmd0aCxvPU1hdGgubWluKG4ubGVuZ3RoLHQubGVuZ3RoKTtmb3IoZT0wO28+ZTsrK2Upci5wdXNoKE1yKG5bZV0sdFtlXSkpO2Zvcig7aT5lOysrZSl1W2VdPW5bZV07Zm9yKDthPmU7KytlKXVbZV09dFtlXTtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKGU9MDtvPmU7KytlKXVbZV09cltlXShuKTtyZXR1cm4gdX19ZnVuY3Rpb24gYnIobil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiAwPj10PzA6dD49MT8xOm4odCl9fWZ1bmN0aW9uIF9yKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gMS1uKDEtdCl9fWZ1bmN0aW9uIHdyKG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4uNSooLjU+dD9uKDIqdCk6Mi1uKDItMip0KSl9fWZ1bmN0aW9uIFNyKG4pe3JldHVybiBuKm59ZnVuY3Rpb24ga3Iobil7cmV0dXJuIG4qbipufWZ1bmN0aW9uIE5yKG4pe2lmKDA+PW4pcmV0dXJuIDA7aWYobj49MSlyZXR1cm4gMTt2YXIgdD1uKm4sZT10Km47cmV0dXJuIDQqKC41Pm4/ZTozKihuLXQpK2UtLjc1KX1mdW5jdGlvbiBFcihuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsbil9fWZ1bmN0aW9uIEFyKG4pe3JldHVybiAxLU1hdGguY29zKG4qT2EpfWZ1bmN0aW9uIENyKG4pe3JldHVybiBNYXRoLnBvdygyLDEwKihuLTEpKX1mdW5jdGlvbiB6cihuKXtyZXR1cm4gMS1NYXRoLnNxcnQoMS1uKm4pfWZ1bmN0aW9uIExyKG4sdCl7dmFyIGU7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MiYmKHQ9LjQ1KSxhcmd1bWVudHMubGVuZ3RoP2U9dC9GYSpNYXRoLmFzaW4oMS9uKToobj0xLGU9dC80KSxmdW5jdGlvbihyKXtyZXR1cm4gMStuKk1hdGgucG93KDIsLTEwKnIpKk1hdGguc2luKChyLWUpKkZhL3QpfX1mdW5jdGlvbiBxcihuKXtyZXR1cm4gbnx8KG49MS43MDE1OCksZnVuY3Rpb24odCl7cmV0dXJuIHQqdCooKG4rMSkqdC1uKX19ZnVuY3Rpb24gVHIobil7cmV0dXJuIDEvMi43NT5uPzcuNTYyNSpuKm46Mi8yLjc1Pm4/Ny41NjI1KihuLT0xLjUvMi43NSkqbisuNzU6Mi41LzIuNzU+bj83LjU2MjUqKG4tPTIuMjUvMi43NSkqbisuOTM3NTo3LjU2MjUqKG4tPTIuNjI1LzIuNzUpKm4rLjk4NDM3NX1mdW5jdGlvbiBScihuLHQpe249b2EuaGNsKG4pLHQ9b2EuaGNsKHQpO3ZhciBlPW4uaCxyPW4uYyx1PW4ubCxpPXQuaC1lLGE9dC5jLXIsbz10LmwtdTtyZXR1cm4gaXNOYU4oYSkmJihhPTAscj1pc05hTihyKT90LmM6ciksaXNOYU4oaSk/KGk9MCxlPWlzTmFOKGUpP3QuaDplKTppPjE4MD9pLT0zNjA6LTE4MD5pJiYoaSs9MzYwKSxmdW5jdGlvbihuKXtyZXR1cm4gZm4oZStpKm4scithKm4sdStvKm4pK1wiXCJ9fWZ1bmN0aW9uIERyKG4sdCl7bj1vYS5oc2wobiksdD1vYS5oc2wodCk7dmFyIGU9bi5oLHI9bi5zLHU9bi5sLGk9dC5oLWUsYT10LnMtcixvPXQubC11O3JldHVybiBpc05hTihhKSYmKGE9MCxyPWlzTmFOKHIpP3QuczpyKSxpc05hTihpKT8oaT0wLGU9aXNOYU4oZSk/dC5oOmUpOmk+MTgwP2ktPTM2MDotMTgwPmkmJihpKz0zNjApLGZ1bmN0aW9uKG4pe3JldHVybiBjbihlK2kqbixyK2Eqbix1K28qbikrXCJcIn19ZnVuY3Rpb24gUHIobix0KXtuPW9hLmxhYihuKSx0PW9hLmxhYih0KTt2YXIgZT1uLmwscj1uLmEsdT1uLmIsaT10LmwtZSxhPXQuYS1yLG89dC5iLXU7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBnbihlK2kqbixyK2Eqbix1K28qbikrXCJcIn19ZnVuY3Rpb24gVXIobix0KXtyZXR1cm4gdC09bixmdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5yb3VuZChuK3QqZSl9fWZ1bmN0aW9uIGpyKG4pe3ZhciB0PVtuLmEsbi5iXSxlPVtuLmMsbi5kXSxyPUhyKHQpLHU9RnIodCxlKSxpPUhyKE9yKGUsdCwtdSkpfHwwO3RbMF0qZVsxXTxlWzBdKnRbMV0mJih0WzBdKj0tMSx0WzFdKj0tMSxyKj0tMSx1Kj0tMSksdGhpcy5yb3RhdGU9KHI/TWF0aC5hdGFuMih0WzFdLHRbMF0pOk1hdGguYXRhbjIoLWVbMF0sZVsxXSkpKllhLHRoaXMudHJhbnNsYXRlPVtuLmUsbi5mXSx0aGlzLnNjYWxlPVtyLGldLHRoaXMuc2tldz1pP01hdGguYXRhbjIodSxpKSpZYTowfWZ1bmN0aW9uIEZyKG4sdCl7cmV0dXJuIG5bMF0qdFswXStuWzFdKnRbMV19ZnVuY3Rpb24gSHIobil7dmFyIHQ9TWF0aC5zcXJ0KEZyKG4sbikpO3JldHVybiB0JiYoblswXS89dCxuWzFdLz10KSx0fWZ1bmN0aW9uIE9yKG4sdCxlKXtyZXR1cm4gblswXSs9ZSp0WzBdLG5bMV0rPWUqdFsxXSxufWZ1bmN0aW9uIElyKG4pe3JldHVybiBuLmxlbmd0aD9uLnBvcCgpK1wiLFwiOlwiXCJ9ZnVuY3Rpb24gWXIobix0LGUscil7aWYoblswXSE9PXRbMF18fG5bMV0hPT10WzFdKXt2YXIgdT1lLnB1c2goXCJ0cmFuc2xhdGUoXCIsbnVsbCxcIixcIixudWxsLFwiKVwiKTtyLnB1c2goe2k6dS00LHg6bXIoblswXSx0WzBdKX0se2k6dS0yLHg6bXIoblsxXSx0WzFdKX0pfWVsc2UodFswXXx8dFsxXSkmJmUucHVzaChcInRyYW5zbGF0ZShcIit0K1wiKVwiKX1mdW5jdGlvbiBacihuLHQsZSxyKXtuIT09dD8obi10PjE4MD90Kz0zNjA6dC1uPjE4MCYmKG4rPTM2MCksci5wdXNoKHtpOmUucHVzaChJcihlKStcInJvdGF0ZShcIixudWxsLFwiKVwiKS0yLHg6bXIobix0KX0pKTp0JiZlLnB1c2goSXIoZSkrXCJyb3RhdGUoXCIrdCtcIilcIil9ZnVuY3Rpb24gVnIobix0LGUscil7biE9PXQ/ci5wdXNoKHtpOmUucHVzaChJcihlKStcInNrZXdYKFwiLG51bGwsXCIpXCIpLTIseDptcihuLHQpfSk6dCYmZS5wdXNoKElyKGUpK1wic2tld1goXCIrdCtcIilcIil9ZnVuY3Rpb24gWHIobix0LGUscil7aWYoblswXSE9PXRbMF18fG5bMV0hPT10WzFdKXt2YXIgdT1lLnB1c2goSXIoZSkrXCJzY2FsZShcIixudWxsLFwiLFwiLG51bGwsXCIpXCIpO3IucHVzaCh7aTp1LTQseDptcihuWzBdLHRbMF0pfSx7aTp1LTIseDptcihuWzFdLHRbMV0pfSl9ZWxzZSgxIT09dFswXXx8MSE9PXRbMV0pJiZlLnB1c2goSXIoZSkrXCJzY2FsZShcIit0K1wiKVwiKX1mdW5jdGlvbiAkcihuLHQpe3ZhciBlPVtdLHI9W107cmV0dXJuIG49b2EudHJhbnNmb3JtKG4pLHQ9b2EudHJhbnNmb3JtKHQpLFlyKG4udHJhbnNsYXRlLHQudHJhbnNsYXRlLGUsciksWnIobi5yb3RhdGUsdC5yb3RhdGUsZSxyKSxWcihuLnNrZXcsdC5za2V3LGUsciksWHIobi5zY2FsZSx0LnNjYWxlLGUsciksbj10PW51bGwsZnVuY3Rpb24obil7Zm9yKHZhciB0LHU9LTEsaT1yLmxlbmd0aDsrK3U8aTspZVsodD1yW3VdKS5pXT10Lngobik7cmV0dXJuIGUuam9pbihcIlwiKX19ZnVuY3Rpb24gQnIobix0KXtyZXR1cm4gdD0odC09bj0rbil8fDEvdCxmdW5jdGlvbihlKXtyZXR1cm4oZS1uKS90fX1mdW5jdGlvbiBXcihuLHQpe3JldHVybiB0PSh0LT1uPStuKXx8MS90LGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEsKGUtbikvdCkpfX1mdW5jdGlvbiBKcihuKXtmb3IodmFyIHQ9bi5zb3VyY2UsZT1uLnRhcmdldCxyPUtyKHQsZSksdT1bdF07dCE9PXI7KXQ9dC5wYXJlbnQsdS5wdXNoKHQpO2Zvcih2YXIgaT11Lmxlbmd0aDtlIT09cjspdS5zcGxpY2UoaSwwLGUpLGU9ZS5wYXJlbnQ7cmV0dXJuIHV9ZnVuY3Rpb24gR3Iobil7Zm9yKHZhciB0PVtdLGU9bi5wYXJlbnQ7bnVsbCE9ZTspdC5wdXNoKG4pLG49ZSxlPWUucGFyZW50O3JldHVybiB0LnB1c2gobiksdH1mdW5jdGlvbiBLcihuLHQpe2lmKG49PT10KXJldHVybiBuO2Zvcih2YXIgZT1HcihuKSxyPUdyKHQpLHU9ZS5wb3AoKSxpPXIucG9wKCksYT1udWxsO3U9PT1pOylhPXUsdT1lLnBvcCgpLGk9ci5wb3AoKTtyZXR1cm4gYX1mdW5jdGlvbiBRcihuKXtuLmZpeGVkfD0yfWZ1bmN0aW9uIG51KG4pe24uZml4ZWQmPS03fWZ1bmN0aW9uIHR1KG4pe24uZml4ZWR8PTQsbi5weD1uLngsbi5weT1uLnl9ZnVuY3Rpb24gZXUobil7bi5maXhlZCY9LTV9ZnVuY3Rpb24gcnUobix0LGUpe3ZhciByPTAsdT0wO2lmKG4uY2hhcmdlPTAsIW4ubGVhZilmb3IodmFyIGksYT1uLm5vZGVzLG89YS5sZW5ndGgsbD0tMTsrK2w8bzspaT1hW2xdLG51bGwhPWkmJihydShpLHQsZSksbi5jaGFyZ2UrPWkuY2hhcmdlLHIrPWkuY2hhcmdlKmkuY3gsdSs9aS5jaGFyZ2UqaS5jeSk7aWYobi5wb2ludCl7bi5sZWFmfHwobi5wb2ludC54Kz1NYXRoLnJhbmRvbSgpLS41LG4ucG9pbnQueSs9TWF0aC5yYW5kb20oKS0uNSk7dmFyIGM9dCplW24ucG9pbnQuaW5kZXhdO24uY2hhcmdlKz1uLnBvaW50Q2hhcmdlPWMscis9YypuLnBvaW50LngsdSs9YypuLnBvaW50Lnl9bi5jeD1yL24uY2hhcmdlLG4uY3k9dS9uLmNoYXJnZX1mdW5jdGlvbiB1dShuLHQpe3JldHVybiBvYS5yZWJpbmQobix0LFwic29ydFwiLFwiY2hpbGRyZW5cIixcInZhbHVlXCIpLG4ubm9kZXM9bixuLmxpbmtzPXN1LG59ZnVuY3Rpb24gaXUobix0KXtmb3IodmFyIGU9W25dO251bGwhPShuPWUucG9wKCkpOylpZih0KG4pLCh1PW4uY2hpbGRyZW4pJiYocj11Lmxlbmd0aCkpZm9yKHZhciByLHU7LS1yPj0wOyllLnB1c2godVtyXSl9ZnVuY3Rpb24gYXUobix0KXtmb3IodmFyIGU9W25dLHI9W107bnVsbCE9KG49ZS5wb3AoKSk7KWlmKHIucHVzaChuKSwoaT1uLmNoaWxkcmVuKSYmKHU9aS5sZW5ndGgpKWZvcih2YXIgdSxpLGE9LTE7KythPHU7KWUucHVzaChpW2FdKTtmb3IoO251bGwhPShuPXIucG9wKCkpOyl0KG4pfWZ1bmN0aW9uIG91KG4pe3JldHVybiBuLmNoaWxkcmVufWZ1bmN0aW9uIGx1KG4pe3JldHVybiBuLnZhbHVlfWZ1bmN0aW9uIGN1KG4sdCl7cmV0dXJuIHQudmFsdWUtbi52YWx1ZX1mdW5jdGlvbiBzdShuKXtyZXR1cm4gb2EubWVyZ2Uobi5tYXAoZnVuY3Rpb24obil7cmV0dXJuKG4uY2hpbGRyZW58fFtdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJue3NvdXJjZTpuLHRhcmdldDp0fX0pfSkpfWZ1bmN0aW9uIGZ1KG4pe3JldHVybiBuLnh9ZnVuY3Rpb24gaHUobil7cmV0dXJuIG4ueX1mdW5jdGlvbiBndShuLHQsZSl7bi55MD10LG4ueT1lfWZ1bmN0aW9uIHB1KG4pe3JldHVybiBvYS5yYW5nZShuLmxlbmd0aCl9ZnVuY3Rpb24gdnUobil7Zm9yKHZhciB0PS0xLGU9blswXS5sZW5ndGgscj1bXTsrK3Q8ZTspclt0XT0wO3JldHVybiByfWZ1bmN0aW9uIGR1KG4pe2Zvcih2YXIgdCxlPTEscj0wLHU9blswXVsxXSxpPW4ubGVuZ3RoO2k+ZTsrK2UpKHQ9bltlXVsxXSk+dSYmKHI9ZSx1PXQpO3JldHVybiByfWZ1bmN0aW9uIG11KG4pe3JldHVybiBuLnJlZHVjZSh5dSwwKX1mdW5jdGlvbiB5dShuLHQpe3JldHVybiBuK3RbMV19ZnVuY3Rpb24gTXUobix0KXtyZXR1cm4geHUobixNYXRoLmNlaWwoTWF0aC5sb2codC5sZW5ndGgpL01hdGguTE4yKzEpKX1mdW5jdGlvbiB4dShuLHQpe2Zvcih2YXIgZT0tMSxyPStuWzBdLHU9KG5bMV0tcikvdCxpPVtdOysrZTw9dDspaVtlXT11KmUrcjtyZXR1cm4gaX1mdW5jdGlvbiBidShuKXtyZXR1cm5bb2EubWluKG4pLG9hLm1heChuKV19ZnVuY3Rpb24gX3Uobix0KXtyZXR1cm4gbi52YWx1ZS10LnZhbHVlfWZ1bmN0aW9uIHd1KG4sdCl7dmFyIGU9bi5fcGFja19uZXh0O24uX3BhY2tfbmV4dD10LHQuX3BhY2tfcHJldj1uLHQuX3BhY2tfbmV4dD1lLGUuX3BhY2tfcHJldj10fWZ1bmN0aW9uIFN1KG4sdCl7bi5fcGFja19uZXh0PXQsdC5fcGFja19wcmV2PW59ZnVuY3Rpb24ga3Uobix0KXt2YXIgZT10Lngtbi54LHI9dC55LW4ueSx1PW4ucit0LnI7cmV0dXJuLjk5OSp1KnU+ZSplK3Iqcn1mdW5jdGlvbiBOdShuKXtmdW5jdGlvbiB0KG4pe3M9TWF0aC5taW4obi54LW4ucixzKSxmPU1hdGgubWF4KG4ueCtuLnIsZiksaD1NYXRoLm1pbihuLnktbi5yLGgpLGc9TWF0aC5tYXgobi55K24ucixnKX1pZigoZT1uLmNoaWxkcmVuKSYmKGM9ZS5sZW5ndGgpKXt2YXIgZSxyLHUsaSxhLG8sbCxjLHM9MS8wLGY9LSgxLzApLGg9MS8wLGc9LSgxLzApO2lmKGUuZm9yRWFjaChFdSkscj1lWzBdLHIueD0tci5yLHIueT0wLHQociksYz4xJiYodT1lWzFdLHUueD11LnIsdS55PTAsdCh1KSxjPjIpKWZvcihpPWVbMl0senUocix1LGkpLHQoaSksd3UocixpKSxyLl9wYWNrX3ByZXY9aSx3dShpLHUpLHU9ci5fcGFja19uZXh0LGE9MztjPmE7YSsrKXt6dShyLHUsaT1lW2FdKTt2YXIgcD0wLHY9MSxkPTE7Zm9yKG89dS5fcGFja19uZXh0O28hPT11O289by5fcGFja19uZXh0LHYrKylpZihrdShvLGkpKXtwPTE7YnJlYWt9aWYoMT09cClmb3IobD1yLl9wYWNrX3ByZXY7bCE9PW8uX3BhY2tfcHJldiYmIWt1KGwsaSk7bD1sLl9wYWNrX3ByZXYsZCsrKTtwPyhkPnZ8fHY9PWQmJnUucjxyLnI/U3Uocix1PW8pOlN1KHI9bCx1KSxhLS0pOih3dShyLGkpLHU9aSx0KGkpKX12YXIgbT0ocytmKS8yLHk9KGgrZykvMixNPTA7Zm9yKGE9MDtjPmE7YSsrKWk9ZVthXSxpLngtPW0saS55LT15LE09TWF0aC5tYXgoTSxpLnIrTWF0aC5zcXJ0KGkueCppLngraS55KmkueSkpO24ucj1NLGUuZm9yRWFjaChBdSl9fWZ1bmN0aW9uIEV1KG4pe24uX3BhY2tfbmV4dD1uLl9wYWNrX3ByZXY9bn1mdW5jdGlvbiBBdShuKXtkZWxldGUgbi5fcGFja19uZXh0LGRlbGV0ZSBuLl9wYWNrX3ByZXZ9ZnVuY3Rpb24gQ3Uobix0LGUscil7dmFyIHU9bi5jaGlsZHJlbjtpZihuLng9dCs9cipuLngsbi55PWUrPXIqbi55LG4ucio9cix1KWZvcih2YXIgaT0tMSxhPXUubGVuZ3RoOysraTxhOylDdSh1W2ldLHQsZSxyKX1mdW5jdGlvbiB6dShuLHQsZSl7dmFyIHI9bi5yK2Uucix1PXQueC1uLngsaT10Lnktbi55O2lmKHImJih1fHxpKSl7dmFyIGE9dC5yK2UucixvPXUqdStpKmk7YSo9YSxyKj1yO3ZhciBsPS41KyhyLWEpLygyKm8pLGM9TWF0aC5zcXJ0KE1hdGgubWF4KDAsMiphKihyK28pLShyLT1vKSpyLWEqYSkpLygyKm8pO2UueD1uLngrbCp1K2MqaSxlLnk9bi55K2wqaS1jKnV9ZWxzZSBlLng9bi54K3IsZS55PW4ueX1mdW5jdGlvbiBMdShuLHQpe3JldHVybiBuLnBhcmVudD09dC5wYXJlbnQ/MToyfWZ1bmN0aW9uIHF1KG4pe3ZhciB0PW4uY2hpbGRyZW47cmV0dXJuIHQubGVuZ3RoP3RbMF06bi50fWZ1bmN0aW9uIFR1KG4pe3ZhciB0LGU9bi5jaGlsZHJlbjtyZXR1cm4odD1lLmxlbmd0aCk/ZVt0LTFdOm4udH1mdW5jdGlvbiBSdShuLHQsZSl7dmFyIHI9ZS8odC5pLW4uaSk7dC5jLT1yLHQucys9ZSxuLmMrPXIsdC56Kz1lLHQubSs9ZX1mdW5jdGlvbiBEdShuKXtmb3IodmFyIHQsZT0wLHI9MCx1PW4uY2hpbGRyZW4saT11Lmxlbmd0aDstLWk+PTA7KXQ9dVtpXSx0LnorPWUsdC5tKz1lLGUrPXQucysocis9dC5jKX1mdW5jdGlvbiBQdShuLHQsZSl7cmV0dXJuIG4uYS5wYXJlbnQ9PT10LnBhcmVudD9uLmE6ZX1mdW5jdGlvbiBVdShuKXtyZXR1cm4gMStvYS5tYXgobixmdW5jdGlvbihuKXtyZXR1cm4gbi55fSl9ZnVuY3Rpb24ganUobil7cmV0dXJuIG4ucmVkdWNlKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4rdC54fSwwKS9uLmxlbmd0aH1mdW5jdGlvbiBGdShuKXt2YXIgdD1uLmNoaWxkcmVuO3JldHVybiB0JiZ0Lmxlbmd0aD9GdSh0WzBdKTpufWZ1bmN0aW9uIEh1KG4pe3ZhciB0LGU9bi5jaGlsZHJlbjtyZXR1cm4gZSYmKHQ9ZS5sZW5ndGgpP0h1KGVbdC0xXSk6bn1mdW5jdGlvbiBPdShuKXtyZXR1cm57eDpuLngseTpuLnksZHg6bi5keCxkeTpuLmR5fX1mdW5jdGlvbiBJdShuLHQpe3ZhciBlPW4ueCt0WzNdLHI9bi55K3RbMF0sdT1uLmR4LXRbMV0tdFszXSxpPW4uZHktdFswXS10WzJdO3JldHVybiAwPnUmJihlKz11LzIsdT0wKSwwPmkmJihyKz1pLzIsaT0wKSx7eDplLHk6cixkeDp1LGR5Oml9fWZ1bmN0aW9uIFl1KG4pe3ZhciB0PW5bMF0sZT1uW24ubGVuZ3RoLTFdO3JldHVybiBlPnQ/W3QsZV06W2UsdF19ZnVuY3Rpb24gWnUobil7cmV0dXJuIG4ucmFuZ2VFeHRlbnQ/bi5yYW5nZUV4dGVudCgpOll1KG4ucmFuZ2UoKSl9ZnVuY3Rpb24gVnUobix0LGUscil7dmFyIHU9ZShuWzBdLG5bMV0pLGk9cih0WzBdLHRbMV0pO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gaSh1KG4pKX19ZnVuY3Rpb24gWHUobix0KXt2YXIgZSxyPTAsdT1uLmxlbmd0aC0xLGk9bltyXSxhPW5bdV07cmV0dXJuIGk+YSYmKGU9cixyPXUsdT1lLGU9aSxpPWEsYT1lKSxuW3JdPXQuZmxvb3IoaSksblt1XT10LmNlaWwoYSksbn1mdW5jdGlvbiAkdShuKXtyZXR1cm4gbj97Zmxvb3I6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguZmxvb3IodC9uKSpufSxjZWlsOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmNlaWwodC9uKSpufX06U2x9ZnVuY3Rpb24gQnUobix0LGUscil7dmFyIHU9W10saT1bXSxhPTAsbz1NYXRoLm1pbihuLmxlbmd0aCx0Lmxlbmd0aCktMTtmb3IobltvXTxuWzBdJiYobj1uLnNsaWNlKCkucmV2ZXJzZSgpLHQ9dC5zbGljZSgpLnJldmVyc2UoKSk7KythPD1vOyl1LnB1c2goZShuW2EtMV0sblthXSkpLGkucHVzaChyKHRbYS0xXSx0W2FdKSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBlPW9hLmJpc2VjdChuLHQsMSxvKS0xO3JldHVybiBpW2VdKHVbZV0odCkpfX1mdW5jdGlvbiBXdShuLHQsZSxyKXtmdW5jdGlvbiB1KCl7dmFyIHU9TWF0aC5taW4obi5sZW5ndGgsdC5sZW5ndGgpPjI/QnU6VnUsbD1yP1dyOkJyO3JldHVybiBhPXUobix0LGwsZSksbz11KHQsbixsLE1yKSxpfWZ1bmN0aW9uIGkobil7cmV0dXJuIGEobil9dmFyIGEsbztyZXR1cm4gaS5pbnZlcnQ9ZnVuY3Rpb24obil7cmV0dXJuIG8obil9LGkuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPXQubWFwKE51bWJlciksdSgpKTpufSxpLnJhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW4sdSgpKTp0fSxpLnJhbmdlUm91bmQ9ZnVuY3Rpb24obil7cmV0dXJuIGkucmFuZ2UobikuaW50ZXJwb2xhdGUoVXIpfSxpLmNsYW1wPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPW4sdSgpKTpyfSxpLmludGVycG9sYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdSgpKTplfSxpLnRpY2tzPWZ1bmN0aW9uKHQpe3JldHVybiBRdShuLHQpfSxpLnRpY2tGb3JtYXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmkobix0LGUpfSxpLm5pY2U9ZnVuY3Rpb24odCl7cmV0dXJuIEd1KG4sdCksdSgpfSxpLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gV3Uobix0LGUscil9LHUoKX1mdW5jdGlvbiBKdShuLHQpe3JldHVybiBvYS5yZWJpbmQobix0LFwicmFuZ2VcIixcInJhbmdlUm91bmRcIixcImludGVycG9sYXRlXCIsXCJjbGFtcFwiKX1mdW5jdGlvbiBHdShuLHQpe3JldHVybiBYdShuLCR1KEt1KG4sdClbMl0pKSxYdShuLCR1KEt1KG4sdClbMl0pKSxufWZ1bmN0aW9uIEt1KG4sdCl7bnVsbD09dCYmKHQ9MTApO3ZhciBlPVl1KG4pLHI9ZVsxXS1lWzBdLHU9TWF0aC5wb3coMTAsTWF0aC5mbG9vcihNYXRoLmxvZyhyL3QpL01hdGguTE4xMCkpLGk9dC9yKnU7cmV0dXJuLjE1Pj1pP3UqPTEwOi4zNT49aT91Kj01Oi43NT49aSYmKHUqPTIpLGVbMF09TWF0aC5jZWlsKGVbMF0vdSkqdSxlWzFdPU1hdGguZmxvb3IoZVsxXS91KSp1Ky41KnUsZVsyXT11LGV9ZnVuY3Rpb24gUXUobix0KXtyZXR1cm4gb2EucmFuZ2UuYXBwbHkob2EsS3Uobix0KSl9ZnVuY3Rpb24gbmkobix0LGUpe3ZhciByPUt1KG4sdCk7aWYoZSl7dmFyIHU9Zm8uZXhlYyhlKTtpZih1LnNoaWZ0KCksXCJzXCI9PT11WzhdKXt2YXIgaT1vYS5mb3JtYXRQcmVmaXgoTWF0aC5tYXgoTWEoclswXSksTWEoclsxXSkpKTtyZXR1cm4gdVs3XXx8KHVbN109XCIuXCIrdGkoaS5zY2FsZShyWzJdKSkpLHVbOF09XCJmXCIsZT1vYS5mb3JtYXQodS5qb2luKFwiXCIpKSxmdW5jdGlvbihuKXtyZXR1cm4gZShpLnNjYWxlKG4pKStpLnN5bWJvbH19dVs3XXx8KHVbN109XCIuXCIrZWkodVs4XSxyKSksZT11LmpvaW4oXCJcIil9ZWxzZSBlPVwiLC5cIit0aShyWzJdKStcImZcIjtyZXR1cm4gb2EuZm9ybWF0KGUpfWZ1bmN0aW9uIHRpKG4pe3JldHVybi1NYXRoLmZsb29yKE1hdGgubG9nKG4pL01hdGguTE4xMCsuMDEpfWZ1bmN0aW9uIGVpKG4sdCl7dmFyIGU9dGkodFsyXSk7cmV0dXJuIG4gaW4ga2w/TWF0aC5hYnMoZS10aShNYXRoLm1heChNYSh0WzBdKSxNYSh0WzFdKSkpKSsgKyhcImVcIiE9PW4pOmUtMiooXCIlXCI9PT1uKX1mdW5jdGlvbiByaShuLHQsZSxyKXtmdW5jdGlvbiB1KG4pe3JldHVybihlP01hdGgubG9nKDA+bj8wOm4pOi1NYXRoLmxvZyhuPjA/MDotbikpL01hdGgubG9nKHQpfWZ1bmN0aW9uIGkobil7cmV0dXJuIGU/TWF0aC5wb3codCxuKTotTWF0aC5wb3codCwtbil9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbih1KHQpKX1yZXR1cm4gYS5pbnZlcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGkobi5pbnZlcnQodCkpfSxhLmRvbWFpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT10WzBdPj0wLG4uZG9tYWluKChyPXQubWFwKE51bWJlcikpLm1hcCh1KSksYSk6cn0sYS5iYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PStlLG4uZG9tYWluKHIubWFwKHUpKSxhKTp0fSxhLm5pY2U9ZnVuY3Rpb24oKXt2YXIgdD1YdShyLm1hcCh1KSxlP01hdGg6RWwpO3JldHVybiBuLmRvbWFpbih0KSxyPXQubWFwKGkpLGF9LGEudGlja3M9ZnVuY3Rpb24oKXt2YXIgbj1ZdShyKSxhPVtdLG89blswXSxsPW5bMV0sYz1NYXRoLmZsb29yKHUobykpLHM9TWF0aC5jZWlsKHUobCkpLGY9dCUxPzI6dDtpZihpc0Zpbml0ZShzLWMpKXtpZihlKXtmb3IoO3M+YztjKyspZm9yKHZhciBoPTE7Zj5oO2grKylhLnB1c2goaShjKSpoKTthLnB1c2goaShjKSl9ZWxzZSBmb3IoYS5wdXNoKGkoYykpO2MrKzxzOylmb3IodmFyIGg9Zi0xO2g+MDtoLS0pYS5wdXNoKGkoYykqaCk7Zm9yKGM9MDthW2NdPG87YysrKTtmb3Iocz1hLmxlbmd0aDthW3MtMV0+bDtzLS0pO2E9YS5zbGljZShjLHMpfXJldHVybiBhfSxhLnRpY2tGb3JtYXQ9ZnVuY3Rpb24obixlKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gTmw7YXJndW1lbnRzLmxlbmd0aDwyP2U9Tmw6XCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGU9b2EuZm9ybWF0KGUpKTt2YXIgcj1NYXRoLm1heCgxLHQqbi9hLnRpY2tzKCkubGVuZ3RoKTtyZXR1cm4gZnVuY3Rpb24obil7dmFyIGE9bi9pKE1hdGgucm91bmQodShuKSkpO3JldHVybiB0LS41PmEqdCYmKGEqPXQpLHI+PWE/ZShuKTpcIlwifX0sYS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHJpKG4uY29weSgpLHQsZSxyKX0sSnUoYSxuKX1mdW5jdGlvbiB1aShuLHQsZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gbih1KHQpKX12YXIgdT1paSh0KSxpPWlpKDEvdCk7cmV0dXJuIHIuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiBpKG4uaW52ZXJ0KHQpKX0sci5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG4uZG9tYWluKChlPXQubWFwKE51bWJlcikpLm1hcCh1KSkscik6ZX0sci50aWNrcz1mdW5jdGlvbihuKXtyZXR1cm4gUXUoZSxuKX0sci50aWNrRm9ybWF0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG5pKGUsbix0KX0sci5uaWNlPWZ1bmN0aW9uKG4pe3JldHVybiByLmRvbWFpbihHdShlLG4pKX0sci5leHBvbmVudD1mdW5jdGlvbihhKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1paSh0PWEpLGk9aWkoMS90KSxuLmRvbWFpbihlLm1hcCh1KSkscik6dH0sci5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHVpKG4uY29weSgpLHQsZSl9LEp1KHIsbil9ZnVuY3Rpb24gaWkobil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiAwPnQ/LU1hdGgucG93KC10LG4pOk1hdGgucG93KHQsbil9fWZ1bmN0aW9uIGFpKG4sdCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gaVsoKHUuZ2V0KGUpfHwoXCJyYW5nZVwiPT09dC50P3Uuc2V0KGUsbi5wdXNoKGUpKTpOYU4pKS0xKSVpLmxlbmd0aF19ZnVuY3Rpb24gcih0LGUpe3JldHVybiBvYS5yYW5nZShuLmxlbmd0aCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiB0K2Uqbn0pfXZhciB1LGksYTtyZXR1cm4gZS5kb21haW49ZnVuY3Rpb24ocil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG47bj1bXSx1PW5ldyBjO2Zvcih2YXIgaSxhPS0xLG89ci5sZW5ndGg7KythPG87KXUuaGFzKGk9clthXSl8fHUuc2V0KGksbi5wdXNoKGkpKTtyZXR1cm4gZVt0LnRdLmFwcGx5KGUsdC5hKX0sZS5yYW5nZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1uLGE9MCx0PXt0OlwicmFuZ2VcIixhOmFyZ3VtZW50c30sZSk6aX0sZS5yYW5nZVBvaW50cz1mdW5jdGlvbih1LG8pe2FyZ3VtZW50cy5sZW5ndGg8MiYmKG89MCk7dmFyIGw9dVswXSxjPXVbMV0scz1uLmxlbmd0aDwyPyhsPShsK2MpLzIsMCk6KGMtbCkvKG4ubGVuZ3RoLTErbyk7cmV0dXJuIGk9cihsK3Mqby8yLHMpLGE9MCx0PXt0OlwicmFuZ2VQb2ludHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZVJvdW5kUG9pbnRzPWZ1bmN0aW9uKHUsbyl7YXJndW1lbnRzLmxlbmd0aDwyJiYobz0wKTt2YXIgbD11WzBdLGM9dVsxXSxzPW4ubGVuZ3RoPDI/KGw9Yz1NYXRoLnJvdW5kKChsK2MpLzIpLDApOihjLWwpLyhuLmxlbmd0aC0xK28pfDA7cmV0dXJuIGk9cihsK01hdGgucm91bmQocypvLzIrKGMtbC0obi5sZW5ndGgtMStvKSpzKS8yKSxzKSxhPTAsdD17dDpcInJhbmdlUm91bmRQb2ludHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZUJhbmRzPWZ1bmN0aW9uKHUsbyxsKXthcmd1bWVudHMubGVuZ3RoPDImJihvPTApLGFyZ3VtZW50cy5sZW5ndGg8MyYmKGw9byk7dmFyIGM9dVsxXTx1WzBdLHM9dVtjLTBdLGY9dVsxLWNdLGg9KGYtcykvKG4ubGVuZ3RoLW8rMipsKTtyZXR1cm4gaT1yKHMraCpsLGgpLGMmJmkucmV2ZXJzZSgpLGE9aCooMS1vKSx0PXt0OlwicmFuZ2VCYW5kc1wiLGE6YXJndW1lbnRzfSxlfSxlLnJhbmdlUm91bmRCYW5kcz1mdW5jdGlvbih1LG8sbCl7YXJndW1lbnRzLmxlbmd0aDwyJiYobz0wKSxhcmd1bWVudHMubGVuZ3RoPDMmJihsPW8pO3ZhciBjPXVbMV08dVswXSxzPXVbYy0wXSxmPXVbMS1jXSxoPU1hdGguZmxvb3IoKGYtcykvKG4ubGVuZ3RoLW8rMipsKSk7cmV0dXJuIGk9cihzK01hdGgucm91bmQoKGYtcy0obi5sZW5ndGgtbykqaCkvMiksaCksYyYmaS5yZXZlcnNlKCksYT1NYXRoLnJvdW5kKGgqKDEtbykpLHQ9e3Q6XCJyYW5nZVJvdW5kQmFuZHNcIixhOmFyZ3VtZW50c30sZX0sZS5yYW5nZUJhbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gYX0sZS5yYW5nZUV4dGVudD1mdW5jdGlvbigpe3JldHVybiBZdSh0LmFbMF0pfSxlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gYWkobix0KX0sZS5kb21haW4obil9ZnVuY3Rpb24gb2kobix0KXtmdW5jdGlvbiBpKCl7dmFyIGU9MCxyPXQubGVuZ3RoO2ZvcihvPVtdOysrZTxyOylvW2UtMV09b2EucXVhbnRpbGUobixlL3IpO3JldHVybiBhfWZ1bmN0aW9uIGEobil7cmV0dXJuIGlzTmFOKG49K24pP3ZvaWQgMDp0W29hLmJpc2VjdChvLG4pXX12YXIgbztyZXR1cm4gYS5kb21haW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49dC5tYXAocikuZmlsdGVyKHUpLnNvcnQoZSksaSgpKTpufSxhLnJhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PW4saSgpKTp0fSxhLnF1YW50aWxlcz1mdW5jdGlvbigpe3JldHVybiBvfSxhLmludmVydEV4dGVudD1mdW5jdGlvbihlKXtyZXR1cm4gZT10LmluZGV4T2YoZSksMD5lP1tOYU4sTmFOXTpbZT4wP29bZS0xXTpuWzBdLGU8by5sZW5ndGg/b1tlXTpuW24ubGVuZ3RoLTFdXX0sYS5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIG9pKG4sdCl9LGkoKX1mdW5jdGlvbiBsaShuLHQsZSl7ZnVuY3Rpb24gcih0KXtyZXR1cm4gZVtNYXRoLm1heCgwLE1hdGgubWluKGEsTWF0aC5mbG9vcihpKih0LW4pKSkpXX1mdW5jdGlvbiB1KCl7cmV0dXJuIGk9ZS5sZW5ndGgvKHQtbiksYT1lLmxlbmd0aC0xLHJ9dmFyIGksYTtyZXR1cm4gci5kb21haW49ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49K2VbMF0sdD0rZVtlLmxlbmd0aC0xXSx1KCkpOltuLHRdfSxyLnJhbmdlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdSgpKTplfSxyLmludmVydEV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gdD1lLmluZGV4T2YodCksdD0wPnQ/TmFOOnQvaStuLFt0LHQrMS9pXX0sci5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIGxpKG4sdCxlKX0sdSgpfWZ1bmN0aW9uIGNpKG4sdCl7ZnVuY3Rpb24gZShlKXtyZXR1cm4gZT49ZT90W29hLmJpc2VjdChuLGUpXTp2b2lkIDB9cmV0dXJuIGUuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPXQsZSk6bn0sZS5yYW5nZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1uLGUpOnR9LGUuaW52ZXJ0RXh0ZW50PWZ1bmN0aW9uKGUpe3JldHVybiBlPXQuaW5kZXhPZihlKSxbbltlLTFdLG5bZV1dfSxlLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gY2kobix0KX0sZX1mdW5jdGlvbiBzaShuKXtmdW5jdGlvbiB0KG4pe3JldHVybitufXJldHVybiB0LmludmVydD10LHQuZG9tYWluPXQucmFuZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG49ZS5tYXAodCksdCk6bn0sdC50aWNrcz1mdW5jdGlvbih0KXtyZXR1cm4gUXUobix0KX0sdC50aWNrRm9ybWF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5pKG4sdCxlKX0sdC5jb3B5PWZ1bmN0aW9uKCl7cmV0dXJuIHNpKG4pfSx0fWZ1bmN0aW9uIGZpKCl7cmV0dXJuIDB9ZnVuY3Rpb24gaGkobil7cmV0dXJuIG4uaW5uZXJSYWRpdXN9ZnVuY3Rpb24gZ2kobil7cmV0dXJuIG4ub3V0ZXJSYWRpdXN9ZnVuY3Rpb24gcGkobil7cmV0dXJuIG4uc3RhcnRBbmdsZX1mdW5jdGlvbiB2aShuKXtyZXR1cm4gbi5lbmRBbmdsZX1mdW5jdGlvbiBkaShuKXtyZXR1cm4gbiYmbi5wYWRBbmdsZX1mdW5jdGlvbiBtaShuLHQsZSxyKXtyZXR1cm4obi1lKSp0LSh0LXIpKm4+MD8wOjF9ZnVuY3Rpb24geWkobix0LGUscix1KXt2YXIgaT1uWzBdLXRbMF0sYT1uWzFdLXRbMV0sbz0odT9yOi1yKS9NYXRoLnNxcnQoaSppK2EqYSksbD1vKmEsYz0tbyppLHM9blswXStsLGY9blsxXStjLGg9dFswXStsLGc9dFsxXStjLHA9KHMraCkvMix2PShmK2cpLzIsZD1oLXMsbT1nLWYseT1kKmQrbSptLE09ZS1yLHg9cypnLWgqZixiPSgwPm0/LTE6MSkqTWF0aC5zcXJ0KE1hdGgubWF4KDAsTSpNKnkteCp4KSksXz0oeCptLWQqYikveSx3PSgteCpkLW0qYikveSxTPSh4Km0rZCpiKS95LGs9KC14KmQrbSpiKS95LE49Xy1wLEU9dy12LEE9Uy1wLEM9ay12O3JldHVybiBOKk4rRSpFPkEqQStDKkMmJihfPVMsdz1rKSxbW18tbCx3LWNdLFtfKmUvTSx3KmUvTV1dfWZ1bmN0aW9uIE1pKG4pe2Z1bmN0aW9uIHQodCl7ZnVuY3Rpb24gYSgpe2MucHVzaChcIk1cIixpKG4ocyksbykpfWZvcih2YXIgbCxjPVtdLHM9W10sZj0tMSxoPXQubGVuZ3RoLGc9RW4oZSkscD1FbihyKTsrK2Y8aDspdS5jYWxsKHRoaXMsbD10W2ZdLGYpP3MucHVzaChbK2cuY2FsbCh0aGlzLGwsZiksK3AuY2FsbCh0aGlzLGwsZildKTpzLmxlbmd0aCYmKGEoKSxzPVtdKTtyZXR1cm4gcy5sZW5ndGgmJmEoKSxjLmxlbmd0aD9jLmpvaW4oXCJcIik6bnVsbH12YXIgZT1DZSxyPXplLHU9enQsaT14aSxhPWkua2V5LG89Ljc7cmV0dXJuIHQueD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1uLHQpOmV9LHQueT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1uLHQpOnJ9LHQuZGVmaW5lZD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1uLHQpOnV9LHQuaW50ZXJwb2xhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9pPW46KGk9VGwuZ2V0KG4pfHx4aSkua2V5LHQpOmF9LHQudGVuc2lvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obz1uLHQpOm99LHR9ZnVuY3Rpb24geGkobil7cmV0dXJuIG4ubGVuZ3RoPjE/bi5qb2luKFwiTFwiKTpuK1wiWlwifWZ1bmN0aW9uIGJpKG4pe3JldHVybiBuLmpvaW4oXCJMXCIpK1wiWlwifWZ1bmN0aW9uIF9pKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIkhcIiwoclswXSsocj1uW3RdKVswXSkvMixcIlZcIixyWzFdKTtyZXR1cm4gZT4xJiZ1LnB1c2goXCJIXCIsclswXSksdS5qb2luKFwiXCIpfWZ1bmN0aW9uIHdpKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIlZcIiwocj1uW3RdKVsxXSxcIkhcIixyWzBdKTtyZXR1cm4gdS5qb2luKFwiXCIpfWZ1bmN0aW9uIFNpKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgscj1uWzBdLHU9W3JbMF0sXCIsXCIsclsxXV07Kyt0PGU7KXUucHVzaChcIkhcIiwocj1uW3RdKVswXSxcIlZcIixyWzFdKTtyZXR1cm4gdS5qb2luKFwiXCIpfWZ1bmN0aW9uIGtpKG4sdCl7cmV0dXJuIG4ubGVuZ3RoPDQ/eGkobik6blsxXStBaShuLnNsaWNlKDEsLTEpLENpKG4sdCkpfWZ1bmN0aW9uIE5pKG4sdCl7cmV0dXJuIG4ubGVuZ3RoPDM/Ymkobik6blswXStBaSgobi5wdXNoKG5bMF0pLG4pLENpKFtuW24ubGVuZ3RoLTJdXS5jb25jYXQobixbblsxXV0pLHQpKX1mdW5jdGlvbiBFaShuLHQpe3JldHVybiBuLmxlbmd0aDwzP3hpKG4pOm5bMF0rQWkobixDaShuLHQpKX1mdW5jdGlvbiBBaShuLHQpe2lmKHQubGVuZ3RoPDF8fG4ubGVuZ3RoIT10Lmxlbmd0aCYmbi5sZW5ndGghPXQubGVuZ3RoKzIpcmV0dXJuIHhpKG4pO3ZhciBlPW4ubGVuZ3RoIT10Lmxlbmd0aCxyPVwiXCIsdT1uWzBdLGk9blsxXSxhPXRbMF0sbz1hLGw9MTtpZihlJiYocis9XCJRXCIrKGlbMF0tMiphWzBdLzMpK1wiLFwiKyhpWzFdLTIqYVsxXS8zKStcIixcIitpWzBdK1wiLFwiK2lbMV0sdT1uWzFdLGw9MiksdC5sZW5ndGg+MSl7bz10WzFdLGk9bltsXSxsKysscis9XCJDXCIrKHVbMF0rYVswXSkrXCIsXCIrKHVbMV0rYVsxXSkrXCIsXCIrKGlbMF0tb1swXSkrXCIsXCIrKGlbMV0tb1sxXSkrXCIsXCIraVswXStcIixcIitpWzFdO2Zvcih2YXIgYz0yO2M8dC5sZW5ndGg7YysrLGwrKylpPW5bbF0sbz10W2NdLHIrPVwiU1wiKyhpWzBdLW9bMF0pK1wiLFwiKyhpWzFdLW9bMV0pK1wiLFwiK2lbMF0rXCIsXCIraVsxXX1pZihlKXt2YXIgcz1uW2xdO3IrPVwiUVwiKyhpWzBdKzIqb1swXS8zKStcIixcIisoaVsxXSsyKm9bMV0vMykrXCIsXCIrc1swXStcIixcIitzWzFdfXJldHVybiByfWZ1bmN0aW9uIENpKG4sdCl7Zm9yKHZhciBlLHI9W10sdT0oMS10KS8yLGk9blswXSxhPW5bMV0sbz0xLGw9bi5sZW5ndGg7KytvPGw7KWU9aSxpPWEsYT1uW29dLHIucHVzaChbdSooYVswXS1lWzBdKSx1KihhWzFdLWVbMV0pXSk7cmV0dXJuIHJ9ZnVuY3Rpb24gemkobil7aWYobi5sZW5ndGg8MylyZXR1cm4geGkobik7dmFyIHQ9MSxlPW4ubGVuZ3RoLHI9blswXSx1PXJbMF0saT1yWzFdLGE9W3UsdSx1LChyPW5bMV0pWzBdXSxvPVtpLGksaSxyWzFdXSxsPVt1LFwiLFwiLGksXCJMXCIsUmkoUGwsYSksXCIsXCIsUmkoUGwsbyldO2ZvcihuLnB1c2gobltlLTFdKTsrK3Q8PWU7KXI9blt0XSxhLnNoaWZ0KCksYS5wdXNoKHJbMF0pLG8uc2hpZnQoKSxvLnB1c2goclsxXSksRGkobCxhLG8pO3JldHVybiBuLnBvcCgpLGwucHVzaChcIkxcIixyKSxsLmpvaW4oXCJcIil9ZnVuY3Rpb24gTGkobil7aWYobi5sZW5ndGg8NClyZXR1cm4geGkobik7Zm9yKHZhciB0LGU9W10scj0tMSx1PW4ubGVuZ3RoLGk9WzBdLGE9WzBdOysrcjwzOyl0PW5bcl0saS5wdXNoKHRbMF0pLGEucHVzaCh0WzFdKTtmb3IoZS5wdXNoKFJpKFBsLGkpK1wiLFwiK1JpKFBsLGEpKSwtLXI7KytyPHU7KXQ9bltyXSxpLnNoaWZ0KCksaS5wdXNoKHRbMF0pLGEuc2hpZnQoKSxhLnB1c2godFsxXSksRGkoZSxpLGEpO3JldHVybiBlLmpvaW4oXCJcIil9ZnVuY3Rpb24gcWkobil7Zm9yKHZhciB0LGUscj0tMSx1PW4ubGVuZ3RoLGk9dSs0LGE9W10sbz1bXTsrK3I8NDspZT1uW3IldV0sYS5wdXNoKGVbMF0pLG8ucHVzaChlWzFdKTtmb3IodD1bUmkoUGwsYSksXCIsXCIsUmkoUGwsbyldLC0tcjsrK3I8aTspZT1uW3IldV0sYS5zaGlmdCgpLGEucHVzaChlWzBdKSxvLnNoaWZ0KCksby5wdXNoKGVbMV0pLERpKHQsYSxvKTtyZXR1cm4gdC5qb2luKFwiXCIpfWZ1bmN0aW9uIFRpKG4sdCl7dmFyIGU9bi5sZW5ndGgtMTtpZihlKWZvcih2YXIgcix1LGk9blswXVswXSxhPW5bMF1bMV0sbz1uW2VdWzBdLWksbD1uW2VdWzFdLWEsYz0tMTsrK2M8PWU7KXI9bltjXSx1PWMvZSxyWzBdPXQqclswXSsoMS10KSooaSt1Km8pLHJbMV09dCpyWzFdKygxLXQpKihhK3UqbCk7cmV0dXJuIHppKG4pfWZ1bmN0aW9uIFJpKG4sdCl7cmV0dXJuIG5bMF0qdFswXStuWzFdKnRbMV0rblsyXSp0WzJdK25bM10qdFszXX1mdW5jdGlvbiBEaShuLHQsZSl7bi5wdXNoKFwiQ1wiLFJpKFJsLHQpLFwiLFwiLFJpKFJsLGUpLFwiLFwiLFJpKERsLHQpLFwiLFwiLFJpKERsLGUpLFwiLFwiLFJpKFBsLHQpLFwiLFwiLFJpKFBsLGUpKX1mdW5jdGlvbiBQaShuLHQpe3JldHVybih0WzFdLW5bMV0pLyh0WzBdLW5bMF0pfWZ1bmN0aW9uIFVpKG4pe2Zvcih2YXIgdD0wLGU9bi5sZW5ndGgtMSxyPVtdLHU9blswXSxpPW5bMV0sYT1yWzBdPVBpKHUsaSk7Kyt0PGU7KXJbdF09KGErKGE9UGkodT1pLGk9blt0KzFdKSkpLzI7cmV0dXJuIHJbdF09YSxyfWZ1bmN0aW9uIGppKG4pe2Zvcih2YXIgdCxlLHIsdSxpPVtdLGE9VWkobiksbz0tMSxsPW4ubGVuZ3RoLTE7KytvPGw7KXQ9UGkobltvXSxuW28rMV0pLE1hKHQpPFBhP2Fbb109YVtvKzFdPTA6KGU9YVtvXS90LHI9YVtvKzFdL3QsdT1lKmUrcipyLHU+OSYmKHU9Myp0L01hdGguc3FydCh1KSxhW29dPXUqZSxhW28rMV09dSpyKSk7Zm9yKG89LTE7KytvPD1sOyl1PShuW01hdGgubWluKGwsbysxKV1bMF0tbltNYXRoLm1heCgwLG8tMSldWzBdKS8oNiooMSthW29dKmFbb10pKSxpLnB1c2goW3V8fDAsYVtvXSp1fHwwXSk7cmV0dXJuIGl9ZnVuY3Rpb24gRmkobil7cmV0dXJuIG4ubGVuZ3RoPDM/eGkobik6blswXStBaShuLGppKG4pKX1mdW5jdGlvbiBIaShuKXtmb3IodmFyIHQsZSxyLHU9LTEsaT1uLmxlbmd0aDsrK3U8aTspdD1uW3VdLGU9dFswXSxyPXRbMV0tT2EsdFswXT1lKk1hdGguY29zKHIpLHRbMV09ZSpNYXRoLnNpbihyKTtyZXR1cm4gbn1mdW5jdGlvbiBPaShuKXtmdW5jdGlvbiB0KHQpe2Z1bmN0aW9uIGwoKXt2LnB1c2goXCJNXCIsbyhuKG0pLGYpLHMsYyhuKGQucmV2ZXJzZSgpKSxmKSxcIlpcIil9Zm9yKHZhciBoLGcscCx2PVtdLGQ9W10sbT1bXSx5PS0xLE09dC5sZW5ndGgseD1FbihlKSxiPUVuKHUpLF89ZT09PXI/ZnVuY3Rpb24oKXtcbnJldHVybiBnfTpFbihyKSx3PXU9PT1pP2Z1bmN0aW9uKCl7cmV0dXJuIHB9OkVuKGkpOysreTxNOylhLmNhbGwodGhpcyxoPXRbeV0seSk/KGQucHVzaChbZz0reC5jYWxsKHRoaXMsaCx5KSxwPStiLmNhbGwodGhpcyxoLHkpXSksbS5wdXNoKFsrXy5jYWxsKHRoaXMsaCx5KSwrdy5jYWxsKHRoaXMsaCx5KV0pKTpkLmxlbmd0aCYmKGwoKSxkPVtdLG09W10pO3JldHVybiBkLmxlbmd0aCYmbCgpLHYubGVuZ3RoP3Yuam9pbihcIlwiKTpudWxsfXZhciBlPUNlLHI9Q2UsdT0wLGk9emUsYT16dCxvPXhpLGw9by5rZXksYz1vLHM9XCJMXCIsZj0uNztyZXR1cm4gdC54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXI9bix0KTpyfSx0LngwPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdCk6ZX0sdC54MT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1uLHQpOnJ9LHQueT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1pPW4sdCk6aX0sdC55MD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1uLHQpOnV9LHQueTE9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9bix0KTppfSx0LmRlZmluZWQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9bix0KTphfSx0LmludGVycG9sYXRlPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhsPVwiZnVuY3Rpb25cIj09dHlwZW9mIG4/bz1uOihvPVRsLmdldChuKXx8eGkpLmtleSxjPW8ucmV2ZXJzZXx8byxzPW8uY2xvc2VkP1wiTVwiOlwiTFwiLHQpOmx9LHQudGVuc2lvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj1uLHQpOmZ9LHR9ZnVuY3Rpb24gSWkobil7cmV0dXJuIG4ucmFkaXVzfWZ1bmN0aW9uIFlpKG4pe3JldHVybltuLngsbi55XX1mdW5jdGlvbiBaaShuKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPXRbMF0scj10WzFdLU9hO3JldHVybltlKk1hdGguY29zKHIpLGUqTWF0aC5zaW4ocildfX1mdW5jdGlvbiBWaSgpe3JldHVybiA2NH1mdW5jdGlvbiBYaSgpe3JldHVyblwiY2lyY2xlXCJ9ZnVuY3Rpb24gJGkobil7dmFyIHQ9TWF0aC5zcXJ0KG4vamEpO3JldHVyblwiTTAsXCIrdCtcIkFcIit0K1wiLFwiK3QrXCIgMCAxLDEgMCxcIistdCtcIkFcIit0K1wiLFwiK3QrXCIgMCAxLDEgMCxcIit0K1wiWlwifWZ1bmN0aW9uIEJpKG4pe3JldHVybiBmdW5jdGlvbigpe3ZhciB0LGUscjsodD10aGlzW25dKSYmKHI9dFtlPXQuYWN0aXZlXSkmJihyLnRpbWVyLmM9bnVsbCxyLnRpbWVyLnQ9TmFOLC0tdC5jb3VudD9kZWxldGUgdFtlXTpkZWxldGUgdGhpc1tuXSx0LmFjdGl2ZSs9LjUsci5ldmVudCYmci5ldmVudC5pbnRlcnJ1cHQuY2FsbCh0aGlzLHRoaXMuX19kYXRhX18sci5pbmRleCkpfX1mdW5jdGlvbiBXaShuLHQsZSl7cmV0dXJuIFNhKG4sWWwpLG4ubmFtZXNwYWNlPXQsbi5pZD1lLG59ZnVuY3Rpb24gSmkobix0LGUscil7dmFyIHU9bi5pZCxpPW4ubmFtZXNwYWNlO3JldHVybiBZKG4sXCJmdW5jdGlvblwiPT10eXBlb2YgZT9mdW5jdGlvbihuLGEsbyl7bltpXVt1XS50d2Vlbi5zZXQodCxyKGUuY2FsbChuLG4uX19kYXRhX18sYSxvKSkpfTooZT1yKGUpLGZ1bmN0aW9uKG4pe25baV1bdV0udHdlZW4uc2V0KHQsZSl9KSl9ZnVuY3Rpb24gR2kobil7cmV0dXJuIG51bGw9PW4mJihuPVwiXCIpLGZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudD1ufX1mdW5jdGlvbiBLaShuKXtyZXR1cm4gbnVsbD09bj9cIl9fdHJhbnNpdGlvbl9fXCI6XCJfX3RyYW5zaXRpb25fXCIrbitcIl9fXCJ9ZnVuY3Rpb24gUWkobix0LGUscix1KXtmdW5jdGlvbiBpKG4pe3ZhciB0PXYuZGVsYXk7cmV0dXJuIHMudD10K2wsbj49dD9hKG4tdCk6dm9pZChzLmM9YSl9ZnVuY3Rpb24gYShlKXt2YXIgdT1wLmFjdGl2ZSxpPXBbdV07aSYmKGkudGltZXIuYz1udWxsLGkudGltZXIudD1OYU4sLS1wLmNvdW50LGRlbGV0ZSBwW3VdLGkuZXZlbnQmJmkuZXZlbnQuaW50ZXJydXB0LmNhbGwobixuLl9fZGF0YV9fLGkuaW5kZXgpKTtmb3IodmFyIGEgaW4gcClpZihyPithKXt2YXIgYz1wW2FdO2MudGltZXIuYz1udWxsLGMudGltZXIudD1OYU4sLS1wLmNvdW50LGRlbGV0ZSBwW2FdfXMuYz1vLHFuKGZ1bmN0aW9uKCl7cmV0dXJuIHMuYyYmbyhlfHwxKSYmKHMuYz1udWxsLHMudD1OYU4pLDF9LDAsbCkscC5hY3RpdmU9cix2LmV2ZW50JiZ2LmV2ZW50LnN0YXJ0LmNhbGwobixuLl9fZGF0YV9fLHQpLGc9W10sdi50d2Vlbi5mb3JFYWNoKGZ1bmN0aW9uKGUscil7KHI9ci5jYWxsKG4sbi5fX2RhdGFfXyx0KSkmJmcucHVzaChyKX0pLGg9di5lYXNlLGY9di5kdXJhdGlvbn1mdW5jdGlvbiBvKHUpe2Zvcih2YXIgaT11L2YsYT1oKGkpLG89Zy5sZW5ndGg7bz4wOylnWy0tb10uY2FsbChuLGEpO3JldHVybiBpPj0xPyh2LmV2ZW50JiZ2LmV2ZW50LmVuZC5jYWxsKG4sbi5fX2RhdGFfXyx0KSwtLXAuY291bnQ/ZGVsZXRlIHBbcl06ZGVsZXRlIG5bZV0sMSk6dm9pZCAwfXZhciBsLHMsZixoLGcscD1uW2VdfHwobltlXT17YWN0aXZlOjAsY291bnQ6MH0pLHY9cFtyXTt2fHwobD11LnRpbWUscz1xbihpLDAsbCksdj1wW3JdPXt0d2VlbjpuZXcgYyx0aW1lOmwsdGltZXI6cyxkZWxheTp1LmRlbGF5LGR1cmF0aW9uOnUuZHVyYXRpb24sZWFzZTp1LmVhc2UsaW5kZXg6dH0sdT1udWxsLCsrcC5jb3VudCl9ZnVuY3Rpb24gbmEobix0LGUpe24uYXR0cihcInRyYW5zZm9ybVwiLGZ1bmN0aW9uKG4pe3ZhciByPXQobik7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrKGlzRmluaXRlKHIpP3I6ZShuKSkrXCIsMClcIn0pfWZ1bmN0aW9uIHRhKG4sdCxlKXtuLmF0dHIoXCJ0cmFuc2Zvcm1cIixmdW5jdGlvbihuKXt2YXIgcj10KG4pO3JldHVyblwidHJhbnNsYXRlKDAsXCIrKGlzRmluaXRlKHIpP3I6ZShuKSkrXCIpXCJ9KX1mdW5jdGlvbiBlYShuKXtyZXR1cm4gbi50b0lTT1N0cmluZygpfWZ1bmN0aW9uIHJhKG4sdCxlKXtmdW5jdGlvbiByKHQpe3JldHVybiBuKHQpfWZ1bmN0aW9uIHUobixlKXt2YXIgcj1uWzFdLW5bMF0sdT1yL2UsaT1vYS5iaXNlY3QoS2wsdSk7cmV0dXJuIGk9PUtsLmxlbmd0aD9bdC55ZWFyLEt1KG4ubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBuLzMxNTM2ZTZ9KSxlKVsyXV06aT90W3UvS2xbaS0xXTxLbFtpXS91P2ktMTppXTpbdGMsS3UobixlKVsyXV19cmV0dXJuIHIuaW52ZXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB1YShuLmludmVydCh0KSl9LHIuZG9tYWluPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuLmRvbWFpbih0KSxyKTpuLmRvbWFpbigpLm1hcCh1YSl9LHIubmljZT1mdW5jdGlvbihuLHQpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIWlzTmFOKGUpJiYhbi5yYW5nZShlLHVhKCtlKzEpLHQpLmxlbmd0aH12YXIgaT1yLmRvbWFpbigpLGE9WXUoaSksbz1udWxsPT1uP3UoYSwxMCk6XCJudW1iZXJcIj09dHlwZW9mIG4mJnUoYSxuKTtyZXR1cm4gbyYmKG49b1swXSx0PW9bMV0pLHIuZG9tYWluKFh1KGksdD4xP3tmbG9vcjpmdW5jdGlvbih0KXtmb3IoO2UodD1uLmZsb29yKHQpKTspdD11YSh0LTEpO3JldHVybiB0fSxjZWlsOmZ1bmN0aW9uKHQpe2Zvcig7ZSh0PW4uY2VpbCh0KSk7KXQ9dWEoK3QrMSk7cmV0dXJuIHR9fTpuKSl9LHIudGlja3M9ZnVuY3Rpb24obix0KXt2YXIgZT1ZdShyLmRvbWFpbigpKSxpPW51bGw9PW4/dShlLDEwKTpcIm51bWJlclwiPT10eXBlb2Ygbj91KGUsbik6IW4ucmFuZ2UmJlt7cmFuZ2U6bn0sdF07cmV0dXJuIGkmJihuPWlbMF0sdD1pWzFdKSxuLnJhbmdlKGVbMF0sdWEoK2VbMV0rMSksMT50PzE6dCl9LHIudGlja0Zvcm1hdD1mdW5jdGlvbigpe3JldHVybiBlfSxyLmNvcHk9ZnVuY3Rpb24oKXtyZXR1cm4gcmEobi5jb3B5KCksdCxlKX0sSnUocixuKX1mdW5jdGlvbiB1YShuKXtyZXR1cm4gbmV3IERhdGUobil9ZnVuY3Rpb24gaWEobil7cmV0dXJuIEpTT04ucGFyc2Uobi5yZXNwb25zZVRleHQpfWZ1bmN0aW9uIGFhKG4pe3ZhciB0PXNhLmNyZWF0ZVJhbmdlKCk7cmV0dXJuIHQuc2VsZWN0Tm9kZShzYS5ib2R5KSx0LmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChuLnJlc3BvbnNlVGV4dCl9dmFyIG9hPXt2ZXJzaW9uOlwiMy41LjE2XCJ9LGxhPVtdLnNsaWNlLGNhPWZ1bmN0aW9uKG4pe3JldHVybiBsYS5jYWxsKG4pfSxzYT10aGlzLmRvY3VtZW50O2lmKHNhKXRyeXtjYShzYS5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcylbMF0ubm9kZVR5cGV9Y2F0Y2goZmEpe2NhPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1uLmxlbmd0aCxlPW5ldyBBcnJheSh0KTt0LS07KWVbdF09blt0XTtyZXR1cm4gZX19aWYoRGF0ZS5ub3d8fChEYXRlLm5vdz1mdW5jdGlvbigpe3JldHVybituZXcgRGF0ZX0pLHNhKXRyeXtzYS5jcmVhdGVFbGVtZW50KFwiRElWXCIpLnN0eWxlLnNldFByb3BlcnR5KFwib3BhY2l0eVwiLDAsXCJcIil9Y2F0Y2goaGEpe3ZhciBnYT10aGlzLkVsZW1lbnQucHJvdG90eXBlLHBhPWdhLnNldEF0dHJpYnV0ZSx2YT1nYS5zZXRBdHRyaWJ1dGVOUyxkYT10aGlzLkNTU1N0eWxlRGVjbGFyYXRpb24ucHJvdG90eXBlLG1hPWRhLnNldFByb3BlcnR5O2dhLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihuLHQpe3BhLmNhbGwodGhpcyxuLHQrXCJcIil9LGdhLnNldEF0dHJpYnV0ZU5TPWZ1bmN0aW9uKG4sdCxlKXt2YS5jYWxsKHRoaXMsbix0LGUrXCJcIil9LGRhLnNldFByb3BlcnR5PWZ1bmN0aW9uKG4sdCxlKXttYS5jYWxsKHRoaXMsbix0K1wiXCIsZSl9fW9hLmFzY2VuZGluZz1lLG9hLmRlc2NlbmRpbmc9ZnVuY3Rpb24obix0KXtyZXR1cm4gbj50Py0xOnQ+bj8xOnQ+PW4/MDpOYU59LG9hLm1pbj1mdW5jdGlvbihuLHQpe3ZhciBlLHIsdT0tMSxpPW4ubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IoOysrdTxpOylpZihudWxsIT0ocj1uW3VdKSYmcj49cil7ZT1yO2JyZWFrfWZvcig7Kyt1PGk7KW51bGwhPShyPW5bdV0pJiZlPnImJihlPXIpfWVsc2V7Zm9yKDsrK3U8aTspaWYobnVsbCE9KHI9dC5jYWxsKG4sblt1XSx1KSkmJnI+PXIpe2U9cjticmVha31mb3IoOysrdTxpOyludWxsIT0ocj10LmNhbGwobixuW3VdLHUpKSYmZT5yJiYoZT1yKX1yZXR1cm4gZX0sb2EubWF4PWZ1bmN0aW9uKG4sdCl7dmFyIGUscix1PS0xLGk9bi5sZW5ndGg7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcig7Kyt1PGk7KWlmKG51bGwhPShyPW5bdV0pJiZyPj1yKXtlPXI7YnJlYWt9Zm9yKDsrK3U8aTspbnVsbCE9KHI9blt1XSkmJnI+ZSYmKGU9cil9ZWxzZXtmb3IoOysrdTxpOylpZihudWxsIT0ocj10LmNhbGwobixuW3VdLHUpKSYmcj49cil7ZT1yO2JyZWFrfWZvcig7Kyt1PGk7KW51bGwhPShyPXQuY2FsbChuLG5bdV0sdSkpJiZyPmUmJihlPXIpfXJldHVybiBlfSxvYS5leHRlbnQ9ZnVuY3Rpb24obix0KXt2YXIgZSxyLHUsaT0tMSxhPW4ubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IoOysraTxhOylpZihudWxsIT0ocj1uW2ldKSYmcj49cil7ZT11PXI7YnJlYWt9Zm9yKDsrK2k8YTspbnVsbCE9KHI9bltpXSkmJihlPnImJihlPXIpLHI+dSYmKHU9cikpfWVsc2V7Zm9yKDsrK2k8YTspaWYobnVsbCE9KHI9dC5jYWxsKG4sbltpXSxpKSkmJnI+PXIpe2U9dT1yO2JyZWFrfWZvcig7KytpPGE7KW51bGwhPShyPXQuY2FsbChuLG5baV0saSkpJiYoZT5yJiYoZT1yKSxyPnUmJih1PXIpKX1yZXR1cm5bZSx1XX0sb2Euc3VtPWZ1bmN0aW9uKG4sdCl7dmFyIGUscj0wLGk9bi5sZW5ndGgsYT0tMTtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOysrYTxpOyl1KGU9K25bYV0pJiYocis9ZSk7ZWxzZSBmb3IoOysrYTxpOyl1KGU9K3QuY2FsbChuLG5bYV0sYSkpJiYocis9ZSk7cmV0dXJuIHJ9LG9hLm1lYW49ZnVuY3Rpb24obix0KXt2YXIgZSxpPTAsYT1uLmxlbmd0aCxvPS0xLGw9YTtpZigxPT09YXJndW1lbnRzLmxlbmd0aClmb3IoOysrbzxhOyl1KGU9cihuW29dKSk/aSs9ZTotLWw7ZWxzZSBmb3IoOysrbzxhOyl1KGU9cih0LmNhbGwobixuW29dLG8pKSk/aSs9ZTotLWw7cmV0dXJuIGw/aS9sOnZvaWQgMH0sb2EucXVhbnRpbGU9ZnVuY3Rpb24obix0KXt2YXIgZT0obi5sZW5ndGgtMSkqdCsxLHI9TWF0aC5mbG9vcihlKSx1PStuW3ItMV0saT1lLXI7cmV0dXJuIGk/dStpKihuW3JdLXUpOnV9LG9hLm1lZGlhbj1mdW5jdGlvbihuLHQpe3ZhciBpLGE9W10sbz1uLmxlbmd0aCxsPS0xO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcig7KytsPG87KXUoaT1yKG5bbF0pKSYmYS5wdXNoKGkpO2Vsc2UgZm9yKDsrK2w8bzspdShpPXIodC5jYWxsKG4sbltsXSxsKSkpJiZhLnB1c2goaSk7cmV0dXJuIGEubGVuZ3RoP29hLnF1YW50aWxlKGEuc29ydChlKSwuNSk6dm9pZCAwfSxvYS52YXJpYW5jZT1mdW5jdGlvbihuLHQpe3ZhciBlLGksYT1uLmxlbmd0aCxvPTAsbD0wLGM9LTEscz0wO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoKWZvcig7KytjPGE7KXUoZT1yKG5bY10pKSYmKGk9ZS1vLG8rPWkvKytzLGwrPWkqKGUtbykpO2Vsc2UgZm9yKDsrK2M8YTspdShlPXIodC5jYWxsKG4sbltjXSxjKSkpJiYoaT1lLW8sbys9aS8rK3MsbCs9aSooZS1vKSk7cmV0dXJuIHM+MT9sLyhzLTEpOnZvaWQgMH0sb2EuZGV2aWF0aW9uPWZ1bmN0aW9uKCl7dmFyIG49b2EudmFyaWFuY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBuP01hdGguc3FydChuKTpufTt2YXIgeWE9aShlKTtvYS5iaXNlY3RMZWZ0PXlhLmxlZnQsb2EuYmlzZWN0PW9hLmJpc2VjdFJpZ2h0PXlhLnJpZ2h0LG9hLmJpc2VjdG9yPWZ1bmN0aW9uKG4pe3JldHVybiBpKDE9PT1uLmxlbmd0aD9mdW5jdGlvbih0LHIpe3JldHVybiBlKG4odCkscil9Om4pfSxvYS5zaHVmZmxlPWZ1bmN0aW9uKG4sdCxlKXsoaT1hcmd1bWVudHMubGVuZ3RoKTwzJiYoZT1uLmxlbmd0aCwyPmkmJih0PTApKTtmb3IodmFyIHIsdSxpPWUtdDtpOyl1PU1hdGgucmFuZG9tKCkqaS0tfDAscj1uW2krdF0sbltpK3RdPW5bdSt0XSxuW3UrdF09cjtyZXR1cm4gbn0sb2EucGVybXV0ZT1mdW5jdGlvbihuLHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxyPW5ldyBBcnJheShlKTtlLS07KXJbZV09blt0W2VdXTtyZXR1cm4gcn0sb2EucGFpcnM9ZnVuY3Rpb24obil7Zm9yKHZhciB0LGU9MCxyPW4ubGVuZ3RoLTEsdT1uWzBdLGk9bmV3IEFycmF5KDA+cj8wOnIpO3I+ZTspaVtlXT1bdD11LHU9blsrK2VdXTtyZXR1cm4gaX0sb2EudHJhbnNwb3NlPWZ1bmN0aW9uKG4pe2lmKCEodT1uLmxlbmd0aCkpcmV0dXJuW107Zm9yKHZhciB0PS0xLGU9b2EubWluKG4sYSkscj1uZXcgQXJyYXkoZSk7Kyt0PGU7KWZvcih2YXIgdSxpPS0xLG89clt0XT1uZXcgQXJyYXkodSk7KytpPHU7KW9baV09bltpXVt0XTtyZXR1cm4gcn0sb2EuemlwPWZ1bmN0aW9uKCl7cmV0dXJuIG9hLnRyYW5zcG9zZShhcmd1bWVudHMpfSxvYS5rZXlzPWZ1bmN0aW9uKG4pe3ZhciB0PVtdO2Zvcih2YXIgZSBpbiBuKXQucHVzaChlKTtyZXR1cm4gdH0sb2EudmFsdWVzPWZ1bmN0aW9uKG4pe3ZhciB0PVtdO2Zvcih2YXIgZSBpbiBuKXQucHVzaChuW2VdKTtyZXR1cm4gdH0sb2EuZW50cmllcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtmb3IodmFyIGUgaW4gbil0LnB1c2goe2tleTplLHZhbHVlOm5bZV19KTtyZXR1cm4gdH0sb2EubWVyZ2U9ZnVuY3Rpb24obil7Zm9yKHZhciB0LGUscix1PW4ubGVuZ3RoLGk9LTEsYT0wOysraTx1OylhKz1uW2ldLmxlbmd0aDtmb3IoZT1uZXcgQXJyYXkoYSk7LS11Pj0wOylmb3Iocj1uW3VdLHQ9ci5sZW5ndGg7LS10Pj0wOyllWy0tYV09clt0XTtyZXR1cm4gZX07dmFyIE1hPU1hdGguYWJzO29hLnJhbmdlPWZ1bmN0aW9uKG4sdCxlKXtpZihhcmd1bWVudHMubGVuZ3RoPDMmJihlPTEsYXJndW1lbnRzLmxlbmd0aDwyJiYodD1uLG49MCkpLCh0LW4pL2U9PT0xLzApdGhyb3cgbmV3IEVycm9yKFwiaW5maW5pdGUgcmFuZ2VcIik7dmFyIHIsdT1bXSxpPW8oTWEoZSkpLGE9LTE7aWYobio9aSx0Kj1pLGUqPWksMD5lKWZvcig7KHI9bitlKisrYSk+dDspdS5wdXNoKHIvaSk7ZWxzZSBmb3IoOyhyPW4rZSorK2EpPHQ7KXUucHVzaChyL2kpO3JldHVybiB1fSxvYS5tYXA9ZnVuY3Rpb24obix0KXt2YXIgZT1uZXcgYztpZihuIGluc3RhbmNlb2YgYyluLmZvckVhY2goZnVuY3Rpb24obix0KXtlLnNldChuLHQpfSk7ZWxzZSBpZihBcnJheS5pc0FycmF5KG4pKXt2YXIgcix1PS0xLGk9bi5sZW5ndGg7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKDsrK3U8aTspZS5zZXQodSxuW3VdKTtlbHNlIGZvcig7Kyt1PGk7KWUuc2V0KHQuY2FsbChuLHI9blt1XSx1KSxyKX1lbHNlIGZvcih2YXIgYSBpbiBuKWUuc2V0KGEsblthXSk7cmV0dXJuIGV9O3ZhciB4YT1cIl9fcHJvdG9fX1wiLGJhPVwiXFx4MDBcIjtsKGMse2hhczpoLGdldDpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5fW3MobildfSxzZXQ6ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5fW3MobildPXR9LHJlbW92ZTpnLGtleXM6cCx2YWx1ZXM6ZnVuY3Rpb24oKXt2YXIgbj1bXTtmb3IodmFyIHQgaW4gdGhpcy5fKW4ucHVzaCh0aGlzLl9bdF0pO3JldHVybiBufSxlbnRyaWVzOmZ1bmN0aW9uKCl7dmFyIG49W107Zm9yKHZhciB0IGluIHRoaXMuXyluLnB1c2goe2tleTpmKHQpLHZhbHVlOnRoaXMuX1t0XX0pO3JldHVybiBufSxzaXplOnYsZW1wdHk6ZCxmb3JFYWNoOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdCBpbiB0aGlzLl8pbi5jYWxsKHRoaXMsZih0KSx0aGlzLl9bdF0pfX0pLG9hLm5lc3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsYSxvKXtpZihvPj1pLmxlbmd0aClyZXR1cm4gcj9yLmNhbGwodSxhKTplP2Euc29ydChlKTphO2Zvcih2YXIgbCxzLGYsaCxnPS0xLHA9YS5sZW5ndGgsdj1pW28rK10sZD1uZXcgYzsrK2c8cDspKGg9ZC5nZXQobD12KHM9YVtnXSkpKT9oLnB1c2gocyk6ZC5zZXQobCxbc10pO3JldHVybiB0PyhzPXQoKSxmPWZ1bmN0aW9uKGUscil7cy5zZXQoZSxuKHQscixvKSl9KToocz17fSxmPWZ1bmN0aW9uKGUscil7c1tlXT1uKHQscixvKX0pLGQuZm9yRWFjaChmKSxzfWZ1bmN0aW9uIHQobixlKXtpZihlPj1pLmxlbmd0aClyZXR1cm4gbjt2YXIgcj1bXSx1PWFbZSsrXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKG4sdSl7ci5wdXNoKHtrZXk6bix2YWx1ZXM6dCh1LGUpfSl9KSx1P3Iuc29ydChmdW5jdGlvbihuLHQpe3JldHVybiB1KG4ua2V5LHQua2V5KX0pOnJ9dmFyIGUscix1PXt9LGk9W10sYT1bXTtyZXR1cm4gdS5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbihlLHQsMCl9LHUuZW50cmllcz1mdW5jdGlvbihlKXtyZXR1cm4gdChuKG9hLm1hcCxlLDApLDApfSx1LmtleT1mdW5jdGlvbihuKXtyZXR1cm4gaS5wdXNoKG4pLHV9LHUuc29ydEtleXM9ZnVuY3Rpb24obil7cmV0dXJuIGFbaS5sZW5ndGgtMV09bix1fSx1LnNvcnRWYWx1ZXM9ZnVuY3Rpb24obil7cmV0dXJuIGU9bix1fSx1LnJvbGx1cD1mdW5jdGlvbihuKXtyZXR1cm4gcj1uLHV9LHV9LG9hLnNldD1mdW5jdGlvbihuKXt2YXIgdD1uZXcgbTtpZihuKWZvcih2YXIgZT0wLHI9bi5sZW5ndGg7cj5lOysrZSl0LmFkZChuW2VdKTtyZXR1cm4gdH0sbChtLHtoYXM6aCxhZGQ6ZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX1tzKG4rPVwiXCIpXT0hMCxufSxyZW1vdmU6Zyx2YWx1ZXM6cCxzaXplOnYsZW1wdHk6ZCxmb3JFYWNoOmZ1bmN0aW9uKG4pe2Zvcih2YXIgdCBpbiB0aGlzLl8pbi5jYWxsKHRoaXMsZih0KSl9fSksb2EuYmVoYXZpb3I9e30sb2EucmViaW5kPWZ1bmN0aW9uKG4sdCl7Zm9yKHZhciBlLHI9MSx1PWFyZ3VtZW50cy5sZW5ndGg7KytyPHU7KW5bZT1hcmd1bWVudHNbcl1dPU0obix0LHRbZV0pO3JldHVybiBufTt2YXIgX2E9W1wid2Via2l0XCIsXCJtc1wiLFwibW96XCIsXCJNb3pcIixcIm9cIixcIk9cIl07b2EuZGlzcGF0Y2g9ZnVuY3Rpb24oKXtmb3IodmFyIG49bmV3IF8sdD0tMSxlPWFyZ3VtZW50cy5sZW5ndGg7Kyt0PGU7KW5bYXJndW1lbnRzW3RdXT13KG4pO3JldHVybiBufSxfLnByb3RvdHlwZS5vbj1mdW5jdGlvbihuLHQpe3ZhciBlPW4uaW5kZXhPZihcIi5cIikscj1cIlwiO2lmKGU+PTAmJihyPW4uc2xpY2UoZSsxKSxuPW4uc2xpY2UoMCxlKSksbilyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP3RoaXNbbl0ub24ocik6dGhpc1tuXS5vbihyLHQpO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXtpZihudWxsPT10KWZvcihuIGluIHRoaXMpdGhpcy5oYXNPd25Qcm9wZXJ0eShuKSYmdGhpc1tuXS5vbihyLG51bGwpO3JldHVybiB0aGlzfX0sb2EuZXZlbnQ9bnVsbCxvYS5yZXF1b3RlPWZ1bmN0aW9uKG4pe3JldHVybiBuLnJlcGxhY2Uod2EsXCJcXFxcJCZcIil9O3ZhciB3YT0vW1xcXFxcXF5cXCRcXCpcXCtcXD9cXHxcXFtcXF1cXChcXClcXC5cXHtcXH1dL2csU2E9e30uX19wcm90b19fP2Z1bmN0aW9uKG4sdCl7bi5fX3Byb3RvX189dH06ZnVuY3Rpb24obix0KXtmb3IodmFyIGUgaW4gdCluW2VdPXRbZV19LGthPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQucXVlcnlTZWxlY3RvcihuKX0sTmE9ZnVuY3Rpb24obix0KXtyZXR1cm4gdC5xdWVyeVNlbGVjdG9yQWxsKG4pfSxFYT1mdW5jdGlvbihuLHQpe3ZhciBlPW4ubWF0Y2hlc3x8blt4KG4sXCJtYXRjaGVzU2VsZWN0b3JcIildO3JldHVybihFYT1mdW5jdGlvbihuLHQpe3JldHVybiBlLmNhbGwobix0KX0pKG4sdCl9O1wiZnVuY3Rpb25cIj09dHlwZW9mIFNpenpsZSYmKGthPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIFNpenpsZShuLHQpWzBdfHxudWxsfSxOYT1TaXp6bGUsRWE9U2l6emxlLm1hdGNoZXNTZWxlY3Rvciksb2Euc2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG9hLnNlbGVjdChzYS5kb2N1bWVudEVsZW1lbnQpfTt2YXIgQWE9b2Euc2VsZWN0aW9uLnByb3RvdHlwZT1bXTtBYS5zZWxlY3Q9ZnVuY3Rpb24obil7dmFyIHQsZSxyLHUsaT1bXTtuPUEobik7Zm9yKHZhciBhPS0xLG89dGhpcy5sZW5ndGg7KythPG87KXtpLnB1c2godD1bXSksdC5wYXJlbnROb2RlPShyPXRoaXNbYV0pLnBhcmVudE5vZGU7Zm9yKHZhciBsPS0xLGM9ci5sZW5ndGg7KytsPGM7KSh1PXJbbF0pPyh0LnB1c2goZT1uLmNhbGwodSx1Ll9fZGF0YV9fLGwsYSkpLGUmJlwiX19kYXRhX19cImluIHUmJihlLl9fZGF0YV9fPXUuX19kYXRhX18pKTp0LnB1c2gobnVsbCl9cmV0dXJuIEUoaSl9LEFhLnNlbGVjdEFsbD1mdW5jdGlvbihuKXt2YXIgdCxlLHI9W107bj1DKG4pO2Zvcih2YXIgdT0tMSxpPXRoaXMubGVuZ3RoOysrdTxpOylmb3IodmFyIGE9dGhpc1t1XSxvPS0xLGw9YS5sZW5ndGg7KytvPGw7KShlPWFbb10pJiYoci5wdXNoKHQ9Y2Eobi5jYWxsKGUsZS5fX2RhdGFfXyxvLHUpKSksdC5wYXJlbnROb2RlPWUpO3JldHVybiBFKHIpfTt2YXIgQ2E9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsemE9e3N2ZzpcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIseGh0bWw6Q2EseGxpbms6XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIseG1sOlwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIseG1sbnM6XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wifTtvYS5ucz17cHJlZml4OnphLHF1YWxpZnk6ZnVuY3Rpb24obil7dmFyIHQ9bi5pbmRleE9mKFwiOlwiKSxlPW47cmV0dXJuIHQ+PTAmJlwieG1sbnNcIiE9PShlPW4uc2xpY2UoMCx0KSkmJihuPW4uc2xpY2UodCsxKSksemEuaGFzT3duUHJvcGVydHkoZSk/e3NwYWNlOnphW2VdLGxvY2FsOm59Om59fSxBYS5hdHRyPWZ1bmN0aW9uKG4sdCl7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtpZihcInN0cmluZ1wiPT10eXBlb2Ygbil7dmFyIGU9dGhpcy5ub2RlKCk7cmV0dXJuIG49b2EubnMucXVhbGlmeShuKSxuLmxvY2FsP2UuZ2V0QXR0cmlidXRlTlMobi5zcGFjZSxuLmxvY2FsKTplLmdldEF0dHJpYnV0ZShuKX1mb3IodCBpbiBuKXRoaXMuZWFjaCh6KHQsblt0XSkpO3JldHVybiB0aGlzfXJldHVybiB0aGlzLmVhY2goeihuLHQpKX0sQWEuY2xhc3NlZD1mdW5jdGlvbihuLHQpe2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pe3ZhciBlPXRoaXMubm9kZSgpLHI9KG49VChuKSkubGVuZ3RoLHU9LTE7aWYodD1lLmNsYXNzTGlzdCl7Zm9yKDsrK3U8cjspaWYoIXQuY29udGFpbnMoblt1XSkpcmV0dXJuITF9ZWxzZSBmb3IodD1lLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpOysrdTxyOylpZighcShuW3VdKS50ZXN0KHQpKXJldHVybiExO3JldHVybiEwfWZvcih0IGluIG4pdGhpcy5lYWNoKFIodCxuW3RdKSk7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuZWFjaChSKG4sdCkpfSxBYS5zdHlsZT1mdW5jdGlvbihuLGUscil7dmFyIHU9YXJndW1lbnRzLmxlbmd0aDtpZigzPnUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBuKXsyPnUmJihlPVwiXCIpO2ZvcihyIGluIG4pdGhpcy5lYWNoKFAocixuW3JdLGUpKTtyZXR1cm4gdGhpc31pZigyPnUpe3ZhciBpPXRoaXMubm9kZSgpO3JldHVybiB0KGkpLmdldENvbXB1dGVkU3R5bGUoaSxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKG4pfXI9XCJcIn1yZXR1cm4gdGhpcy5lYWNoKFAobixlLHIpKX0sQWEucHJvcGVydHk9ZnVuY3Rpb24obix0KXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXJldHVybiB0aGlzLm5vZGUoKVtuXTtmb3IodCBpbiBuKXRoaXMuZWFjaChVKHQsblt0XSkpO3JldHVybiB0aGlzfXJldHVybiB0aGlzLmVhY2goVShuLHQpKX0sQWEudGV4dD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLmVhY2goXCJmdW5jdGlvblwiPT10eXBlb2Ygbj9mdW5jdGlvbigpe3ZhciB0PW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudGV4dENvbnRlbnQ9bnVsbD09dD9cIlwiOnR9Om51bGw9PW4/ZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50PVwiXCJ9OmZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudD1ufSk6dGhpcy5ub2RlKCkudGV4dENvbnRlbnR9LEFhLmh0bWw9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5lYWNoKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/ZnVuY3Rpb24oKXt2YXIgdD1uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmlubmVySFRNTD1udWxsPT10P1wiXCI6dH06bnVsbD09bj9mdW5jdGlvbigpe3RoaXMuaW5uZXJIVE1MPVwiXCJ9OmZ1bmN0aW9uKCl7dGhpcy5pbm5lckhUTUw9bn0pOnRoaXMubm9kZSgpLmlubmVySFRNTH0sQWEuYXBwZW5kPWZ1bmN0aW9uKG4pe3JldHVybiBuPWoobiksdGhpcy5zZWxlY3QoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChuLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9KX0sQWEuaW5zZXJ0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG49aihuKSx0PUEodCksdGhpcy5zZWxlY3QoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fG51bGwpfSl9LEFhLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goRil9LEFhLmRhdGE9ZnVuY3Rpb24obix0KXtmdW5jdGlvbiBlKG4sZSl7dmFyIHIsdSxpLGE9bi5sZW5ndGgsZj1lLmxlbmd0aCxoPU1hdGgubWluKGEsZiksZz1uZXcgQXJyYXkoZikscD1uZXcgQXJyYXkoZiksdj1uZXcgQXJyYXkoYSk7aWYodCl7dmFyIGQsbT1uZXcgYyx5PW5ldyBBcnJheShhKTtmb3Iocj0tMTsrK3I8YTspKHU9bltyXSkmJihtLmhhcyhkPXQuY2FsbCh1LHUuX19kYXRhX18scikpP3Zbcl09dTptLnNldChkLHUpLHlbcl09ZCk7Zm9yKHI9LTE7KytyPGY7KSh1PW0uZ2V0KGQ9dC5jYWxsKGUsaT1lW3JdLHIpKSk/dSE9PSEwJiYoZ1tyXT11LHUuX19kYXRhX189aSk6cFtyXT1IKGkpLG0uc2V0KGQsITApO2ZvcihyPS0xOysrcjxhOylyIGluIHkmJm0uZ2V0KHlbcl0pIT09ITAmJih2W3JdPW5bcl0pfWVsc2V7Zm9yKHI9LTE7KytyPGg7KXU9bltyXSxpPWVbcl0sdT8odS5fX2RhdGFfXz1pLGdbcl09dSk6cFtyXT1IKGkpO2Zvcig7Zj5yOysrcilwW3JdPUgoZVtyXSk7Zm9yKDthPnI7KytyKXZbcl09bltyXX1wLnVwZGF0ZT1nLHAucGFyZW50Tm9kZT1nLnBhcmVudE5vZGU9di5wYXJlbnROb2RlPW4ucGFyZW50Tm9kZSxvLnB1c2gocCksbC5wdXNoKGcpLHMucHVzaCh2KX12YXIgcix1LGk9LTEsYT10aGlzLmxlbmd0aDtpZighYXJndW1lbnRzLmxlbmd0aCl7Zm9yKG49bmV3IEFycmF5KGE9KHI9dGhpc1swXSkubGVuZ3RoKTsrK2k8YTspKHU9cltpXSkmJihuW2ldPXUuX19kYXRhX18pO3JldHVybiBufXZhciBvPVooW10pLGw9RShbXSkscz1FKFtdKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuKWZvcig7KytpPGE7KWUocj10aGlzW2ldLG4uY2FsbChyLHIucGFyZW50Tm9kZS5fX2RhdGFfXyxpKSk7ZWxzZSBmb3IoOysraTxhOyllKHI9dGhpc1tpXSxuKTtyZXR1cm4gbC5lbnRlcj1mdW5jdGlvbigpe3JldHVybiBvfSxsLmV4aXQ9ZnVuY3Rpb24oKXtyZXR1cm4gc30sbH0sQWEuZGF0dW09ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIsbik6dGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpfSxBYS5maWx0ZXI9ZnVuY3Rpb24obil7dmFyIHQsZSxyLHU9W107XCJmdW5jdGlvblwiIT10eXBlb2YgbiYmKG49TyhuKSk7Zm9yKHZhciBpPTAsYT10aGlzLmxlbmd0aDthPmk7aSsrKXt1LnB1c2godD1bXSksdC5wYXJlbnROb2RlPShlPXRoaXNbaV0pLnBhcmVudE5vZGU7Zm9yKHZhciBvPTAsbD1lLmxlbmd0aDtsPm87bysrKShyPWVbb10pJiZuLmNhbGwocixyLl9fZGF0YV9fLG8saSkmJnQucHVzaChyKX1yZXR1cm4gRSh1KX0sQWEub3JkZXI9ZnVuY3Rpb24oKXtmb3IodmFyIG49LTEsdD10aGlzLmxlbmd0aDsrK248dDspZm9yKHZhciBlLHI9dGhpc1tuXSx1PXIubGVuZ3RoLTEsaT1yW3VdOy0tdT49MDspKGU9clt1XSkmJihpJiZpIT09ZS5uZXh0U2libGluZyYmaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLGkpLGk9ZSk7cmV0dXJuIHRoaXN9LEFhLnNvcnQ9ZnVuY3Rpb24obil7bj1JLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIHQ9LTEsZT10aGlzLmxlbmd0aDsrK3Q8ZTspdGhpc1t0XS5zb3J0KG4pO3JldHVybiB0aGlzLm9yZGVyKCl9LEFhLmVhY2g9ZnVuY3Rpb24obil7cmV0dXJuIFkodGhpcyxmdW5jdGlvbih0LGUscil7bi5jYWxsKHQsdC5fX2RhdGFfXyxlLHIpfSl9LEFhLmNhbGw9ZnVuY3Rpb24obil7dmFyIHQ9Y2EoYXJndW1lbnRzKTtyZXR1cm4gbi5hcHBseSh0WzBdPXRoaXMsdCksdGhpc30sQWEuZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5ub2RlKCl9LEFhLm5vZGU9ZnVuY3Rpb24oKXtmb3IodmFyIG49MCx0PXRoaXMubGVuZ3RoO3Q+bjtuKyspZm9yKHZhciBlPXRoaXNbbl0scj0wLHU9ZS5sZW5ndGg7dT5yO3IrKyl7dmFyIGk9ZVtyXTtpZihpKXJldHVybiBpfXJldHVybiBudWxsfSxBYS5zaXplPWZ1bmN0aW9uKCl7dmFyIG49MDtyZXR1cm4gWSh0aGlzLGZ1bmN0aW9uKCl7KytufSksbn07dmFyIExhPVtdO29hLnNlbGVjdGlvbi5lbnRlcj1aLG9hLnNlbGVjdGlvbi5lbnRlci5wcm90b3R5cGU9TGEsTGEuYXBwZW5kPUFhLmFwcGVuZCxMYS5lbXB0eT1BYS5lbXB0eSxMYS5ub2RlPUFhLm5vZGUsTGEuY2FsbD1BYS5jYWxsLExhLnNpemU9QWEuc2l6ZSxMYS5zZWxlY3Q9ZnVuY3Rpb24obil7Zm9yKHZhciB0LGUscix1LGksYT1bXSxvPS0xLGw9dGhpcy5sZW5ndGg7KytvPGw7KXtyPSh1PXRoaXNbb10pLnVwZGF0ZSxhLnB1c2godD1bXSksdC5wYXJlbnROb2RlPXUucGFyZW50Tm9kZTtmb3IodmFyIGM9LTEscz11Lmxlbmd0aDsrK2M8czspKGk9dVtjXSk/KHQucHVzaChyW2NdPWU9bi5jYWxsKHUucGFyZW50Tm9kZSxpLl9fZGF0YV9fLGMsbykpLGUuX19kYXRhX189aS5fX2RhdGFfXyk6dC5wdXNoKG51bGwpfXJldHVybiBFKGEpfSxMYS5pbnNlcnQ9ZnVuY3Rpb24obix0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyJiYodD1WKHRoaXMpKSxBYS5pbnNlcnQuY2FsbCh0aGlzLG4sdCl9LG9hLnNlbGVjdD1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD8oZT1ba2EodCxzYSldLGUucGFyZW50Tm9kZT1zYS5kb2N1bWVudEVsZW1lbnQpOihlPVt0XSxlLnBhcmVudE5vZGU9bih0KSksRShbZV0pfSxvYS5zZWxlY3RBbGw9ZnVuY3Rpb24obil7dmFyIHQ7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIG4/KHQ9Y2EoTmEobixzYSkpLHQucGFyZW50Tm9kZT1zYS5kb2N1bWVudEVsZW1lbnQpOih0PWNhKG4pLHQucGFyZW50Tm9kZT1udWxsKSxFKFt0XSl9LEFhLm9uPWZ1bmN0aW9uKG4sdCxlKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoO2lmKDM+cil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4pezI+ciYmKHQ9ITEpO2ZvcihlIGluIG4pdGhpcy5lYWNoKFgoZSxuW2VdLHQpKTtyZXR1cm4gdGhpc31pZigyPnIpcmV0dXJuKHI9dGhpcy5ub2RlKClbXCJfX29uXCIrbl0pJiZyLl87ZT0hMX1yZXR1cm4gdGhpcy5lYWNoKFgobix0LGUpKX07dmFyIHFhPW9hLm1hcCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwifSk7c2EmJnFhLmZvckVhY2goZnVuY3Rpb24obil7XCJvblwiK24gaW4gc2EmJnFhLnJlbW92ZShuKX0pO3ZhciBUYSxSYT0wO29hLm1vdXNlPWZ1bmN0aW9uKG4pe3JldHVybiBKKG4saygpKX07dmFyIERhPXRoaXMubmF2aWdhdG9yJiYvV2ViS2l0Ly50ZXN0KHRoaXMubmF2aWdhdG9yLnVzZXJBZ2VudCk/LTE6MDtvYS50b3VjaD1mdW5jdGlvbihuLHQsZSl7aWYoYXJndW1lbnRzLmxlbmd0aDwzJiYoZT10LHQ9aygpLmNoYW5nZWRUb3VjaGVzKSx0KWZvcih2YXIgcix1PTAsaT10Lmxlbmd0aDtpPnU7Kyt1KWlmKChyPXRbdV0pLmlkZW50aWZpZXI9PT1lKXJldHVybiBKKG4scil9LG9hLmJlaGF2aW9yLmRyYWc9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKCl7dGhpcy5vbihcIm1vdXNlZG93bi5kcmFnXCIsaSkub24oXCJ0b3VjaHN0YXJ0LmRyYWdcIixhKX1mdW5jdGlvbiBlKG4sdCxlLGksYSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbygpe3ZhciBuLGUscj10KGgsdik7ciYmKG49clswXS1NWzBdLGU9clsxXS1NWzFdLHB8PW58ZSxNPXIsZyh7dHlwZTpcImRyYWdcIix4OnJbMF0rY1swXSx5OnJbMV0rY1sxXSxkeDpuLGR5OmV9KSl9ZnVuY3Rpb24gbCgpe3QoaCx2KSYmKG0ub24oaStkLG51bGwpLm9uKGErZCxudWxsKSx5KHApLGcoe3R5cGU6XCJkcmFnZW5kXCJ9KSl9dmFyIGMscz10aGlzLGY9b2EuZXZlbnQudGFyZ2V0LmNvcnJlc3BvbmRpbmdFbGVtZW50fHxvYS5ldmVudC50YXJnZXQsaD1zLnBhcmVudE5vZGUsZz1yLm9mKHMsYXJndW1lbnRzKSxwPTAsdj1uKCksZD1cIi5kcmFnXCIrKG51bGw9PXY/XCJcIjpcIi1cIit2KSxtPW9hLnNlbGVjdChlKGYpKS5vbihpK2Qsbykub24oYStkLGwpLHk9VyhmKSxNPXQoaCx2KTt1PyhjPXUuYXBwbHkocyxhcmd1bWVudHMpLGM9W2MueC1NWzBdLGMueS1NWzFdXSk6Yz1bMCwwXSxnKHt0eXBlOlwiZHJhZ3N0YXJ0XCJ9KX19dmFyIHI9TihuLFwiZHJhZ1wiLFwiZHJhZ3N0YXJ0XCIsXCJkcmFnZW5kXCIpLHU9bnVsbCxpPWUoYixvYS5tb3VzZSx0LFwibW91c2Vtb3ZlXCIsXCJtb3VzZXVwXCIpLGE9ZShHLG9hLnRvdWNoLHksXCJ0b3VjaG1vdmVcIixcInRvdWNoZW5kXCIpO3JldHVybiBuLm9yaWdpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT10LG4pOnV9LG9hLnJlYmluZChuLHIsXCJvblwiKX0sb2EudG91Y2hlcz1mdW5jdGlvbihuLHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDImJih0PWsoKS50b3VjaGVzKSx0P2NhKHQpLm1hcChmdW5jdGlvbih0KXt2YXIgZT1KKG4sdCk7cmV0dXJuIGUuaWRlbnRpZmllcj10LmlkZW50aWZpZXIsZX0pOltdfTt2YXIgUGE9MWUtNixVYT1QYSpQYSxqYT1NYXRoLlBJLEZhPTIqamEsSGE9RmEtUGEsT2E9amEvMixJYT1qYS8xODAsWWE9MTgwL2phLFphPU1hdGguU1FSVDIsVmE9MixYYT00O29hLmludGVycG9sYXRlWm9vbT1mdW5jdGlvbihuLHQpe3ZhciBlLHIsdT1uWzBdLGk9blsxXSxhPW5bMl0sbz10WzBdLGw9dFsxXSxjPXRbMl0scz1vLXUsZj1sLWksaD1zKnMrZipmO2lmKFVhPmgpcj1NYXRoLmxvZyhjL2EpL1phLGU9ZnVuY3Rpb24obil7cmV0dXJuW3UrbipzLGkrbipmLGEqTWF0aC5leHAoWmEqbipyKV19O2Vsc2V7dmFyIGc9TWF0aC5zcXJ0KGgpLHA9KGMqYy1hKmErWGEqaCkvKDIqYSpWYSpnKSx2PShjKmMtYSphLVhhKmgpLygyKmMqVmEqZyksZD1NYXRoLmxvZyhNYXRoLnNxcnQocCpwKzEpLXApLG09TWF0aC5sb2coTWF0aC5zcXJ0KHYqdisxKS12KTtyPShtLWQpL1phLGU9ZnVuY3Rpb24obil7dmFyIHQ9bipyLGU9cm4oZCksbz1hLyhWYSpnKSooZSp1bihaYSp0K2QpLWVuKGQpKTtyZXR1cm5bdStvKnMsaStvKmYsYSplL3JuKFphKnQrZCldfX1yZXR1cm4gZS5kdXJhdGlvbj0xZTMqcixlfSxvYS5iZWhhdmlvci56b29tPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXtuLm9uKEwsZikub24oQmErXCIuem9vbVwiLGcpLm9uKFwiZGJsY2xpY2suem9vbVwiLHApLm9uKFIsaCl9ZnVuY3Rpb24gZShuKXtyZXR1cm5bKG5bMF0tay54KS9rLmssKG5bMV0tay55KS9rLmtdfWZ1bmN0aW9uIHIobil7cmV0dXJuW25bMF0qay5rK2sueCxuWzFdKmsuaytrLnldfWZ1bmN0aW9uIHUobil7ay5rPU1hdGgubWF4KEFbMF0sTWF0aC5taW4oQVsxXSxuKSl9ZnVuY3Rpb24gaShuLHQpe3Q9cih0KSxrLngrPW5bMF0tdFswXSxrLnkrPW5bMV0tdFsxXX1mdW5jdGlvbiBhKHQsZSxyLGEpe3QuX19jaGFydF9fPXt4OmsueCx5OmsueSxrOmsua30sdShNYXRoLnBvdygyLGEpKSxpKGQ9ZSxyKSx0PW9hLnNlbGVjdCh0KSxDPjAmJih0PXQudHJhbnNpdGlvbigpLmR1cmF0aW9uKEMpKSx0LmNhbGwobi5ldmVudCl9ZnVuY3Rpb24gbygpe2ImJmIuZG9tYWluKHgucmFuZ2UoKS5tYXAoZnVuY3Rpb24obil7cmV0dXJuKG4tay54KS9rLmt9KS5tYXAoeC5pbnZlcnQpKSx3JiZ3LmRvbWFpbihfLnJhbmdlKCkubWFwKGZ1bmN0aW9uKG4pe3JldHVybihuLWsueSkvay5rfSkubWFwKF8uaW52ZXJ0KSl9ZnVuY3Rpb24gbChuKXt6Kyt8fG4oe3R5cGU6XCJ6b29tc3RhcnRcIn0pfWZ1bmN0aW9uIGMobil7bygpLG4oe3R5cGU6XCJ6b29tXCIsc2NhbGU6ay5rLHRyYW5zbGF0ZTpbay54LGsueV19KX1mdW5jdGlvbiBzKG4pey0tenx8KG4oe3R5cGU6XCJ6b29tZW5kXCJ9KSxkPW51bGwpfWZ1bmN0aW9uIGYoKXtmdW5jdGlvbiBuKCl7bz0xLGkob2EubW91c2UodSksaCksYyhhKX1mdW5jdGlvbiByKCl7Zi5vbihxLG51bGwpLm9uKFQsbnVsbCksZyhvKSxzKGEpfXZhciB1PXRoaXMsYT1ELm9mKHUsYXJndW1lbnRzKSxvPTAsZj1vYS5zZWxlY3QodCh1KSkub24ocSxuKS5vbihULHIpLGg9ZShvYS5tb3VzZSh1KSksZz1XKHUpO0lsLmNhbGwodSksbChhKX1mdW5jdGlvbiBoKCl7ZnVuY3Rpb24gbigpe3ZhciBuPW9hLnRvdWNoZXMocCk7cmV0dXJuIGc9ay5rLG4uZm9yRWFjaChmdW5jdGlvbihuKXtuLmlkZW50aWZpZXIgaW4gZCYmKGRbbi5pZGVudGlmaWVyXT1lKG4pKX0pLG59ZnVuY3Rpb24gdCgpe3ZhciB0PW9hLmV2ZW50LnRhcmdldDtvYS5zZWxlY3QodCkub24oeCxyKS5vbihiLG8pLF8ucHVzaCh0KTtmb3IodmFyIGU9b2EuZXZlbnQuY2hhbmdlZFRvdWNoZXMsdT0wLGk9ZS5sZW5ndGg7aT51OysrdSlkW2VbdV0uaWRlbnRpZmllcl09bnVsbDt2YXIgbD1uKCksYz1EYXRlLm5vdygpO2lmKDE9PT1sLmxlbmd0aCl7aWYoNTAwPmMtTSl7dmFyIHM9bFswXTthKHAscyxkW3MuaWRlbnRpZmllcl0sTWF0aC5mbG9vcihNYXRoLmxvZyhrLmspL01hdGguTE4yKSsxKSxTKCl9TT1jfWVsc2UgaWYobC5sZW5ndGg+MSl7dmFyIHM9bFswXSxmPWxbMV0saD1zWzBdLWZbMF0sZz1zWzFdLWZbMV07bT1oKmgrZypnfX1mdW5jdGlvbiByKCl7dmFyIG4sdCxlLHIsYT1vYS50b3VjaGVzKHApO0lsLmNhbGwocCk7Zm9yKHZhciBvPTAsbD1hLmxlbmd0aDtsPm87KytvLHI9bnVsbClpZihlPWFbb10scj1kW2UuaWRlbnRpZmllcl0pe2lmKHQpYnJlYWs7bj1lLHQ9cn1pZihyKXt2YXIgcz0ocz1lWzBdLW5bMF0pKnMrKHM9ZVsxXS1uWzFdKSpzLGY9bSYmTWF0aC5zcXJ0KHMvbSk7bj1bKG5bMF0rZVswXSkvMiwoblsxXStlWzFdKS8yXSx0PVsodFswXStyWzBdKS8yLCh0WzFdK3JbMV0pLzJdLHUoZipnKX1NPW51bGwsaShuLHQpLGModil9ZnVuY3Rpb24gbygpe2lmKG9hLmV2ZW50LnRvdWNoZXMubGVuZ3RoKXtmb3IodmFyIHQ9b2EuZXZlbnQuY2hhbmdlZFRvdWNoZXMsZT0wLHI9dC5sZW5ndGg7cj5lOysrZSlkZWxldGUgZFt0W2VdLmlkZW50aWZpZXJdO2Zvcih2YXIgdSBpbiBkKXJldHVybiB2b2lkIG4oKX1vYS5zZWxlY3RBbGwoXykub24oeSxudWxsKSx3Lm9uKEwsZikub24oUixoKSxOKCkscyh2KX12YXIgZyxwPXRoaXMsdj1ELm9mKHAsYXJndW1lbnRzKSxkPXt9LG09MCx5PVwiLnpvb20tXCIrb2EuZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uaWRlbnRpZmllcix4PVwidG91Y2htb3ZlXCIreSxiPVwidG91Y2hlbmRcIit5LF89W10sdz1vYS5zZWxlY3QocCksTj1XKHApO3QoKSxsKHYpLHcub24oTCxudWxsKS5vbihSLHQpfWZ1bmN0aW9uIGcoKXt2YXIgbj1ELm9mKHRoaXMsYXJndW1lbnRzKTt5P2NsZWFyVGltZW91dCh5KTooSWwuY2FsbCh0aGlzKSx2PWUoZD1tfHxvYS5tb3VzZSh0aGlzKSksbChuKSkseT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eT1udWxsLHMobil9LDUwKSxTKCksdShNYXRoLnBvdygyLC4wMDIqJGEoKSkqay5rKSxpKGQsdiksYyhuKX1mdW5jdGlvbiBwKCl7dmFyIG49b2EubW91c2UodGhpcyksdD1NYXRoLmxvZyhrLmspL01hdGguTE4yO2EodGhpcyxuLGUobiksb2EuZXZlbnQuc2hpZnRLZXk/TWF0aC5jZWlsKHQpLTE6TWF0aC5mbG9vcih0KSsxKX12YXIgdixkLG0seSxNLHgsYixfLHcsaz17eDowLHk6MCxrOjF9LEU9Wzk2MCw1MDBdLEE9V2EsQz0yNTAsej0wLEw9XCJtb3VzZWRvd24uem9vbVwiLHE9XCJtb3VzZW1vdmUuem9vbVwiLFQ9XCJtb3VzZXVwLnpvb21cIixSPVwidG91Y2hzdGFydC56b29tXCIsRD1OKG4sXCJ6b29tc3RhcnRcIixcInpvb21cIixcInpvb21lbmRcIik7cmV0dXJuIEJhfHwoQmE9XCJvbndoZWVsXCJpbiBzYT8oJGE9ZnVuY3Rpb24oKXtyZXR1cm4tb2EuZXZlbnQuZGVsdGFZKihvYS5ldmVudC5kZWx0YU1vZGU/MTIwOjEpfSxcIndoZWVsXCIpOlwib25tb3VzZXdoZWVsXCJpbiBzYT8oJGE9ZnVuY3Rpb24oKXtyZXR1cm4gb2EuZXZlbnQud2hlZWxEZWx0YX0sXCJtb3VzZXdoZWVsXCIpOigkYT1mdW5jdGlvbigpe3JldHVybi1vYS5ldmVudC5kZXRhaWx9LFwiTW96TW91c2VQaXhlbFNjcm9sbFwiKSksbi5ldmVudD1mdW5jdGlvbihuKXtuLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1ELm9mKHRoaXMsYXJndW1lbnRzKSx0PWs7SGw/b2Euc2VsZWN0KHRoaXMpLnRyYW5zaXRpb24oKS5lYWNoKFwic3RhcnQuem9vbVwiLGZ1bmN0aW9uKCl7az10aGlzLl9fY2hhcnRfX3x8e3g6MCx5OjAsazoxfSxsKG4pfSkudHdlZW4oXCJ6b29tOnpvb21cIixmdW5jdGlvbigpe3ZhciBlPUVbMF0scj1FWzFdLHU9ZD9kWzBdOmUvMixpPWQ/ZFsxXTpyLzIsYT1vYS5pbnRlcnBvbGF0ZVpvb20oWyh1LWsueCkvay5rLChpLWsueSkvay5rLGUvay5rXSxbKHUtdC54KS90LmssKGktdC55KS90LmssZS90LmtdKTtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIHI9YSh0KSxvPWUvclsyXTt0aGlzLl9fY2hhcnRfXz1rPXt4OnUtclswXSpvLHk6aS1yWzFdKm8sazpvfSxjKG4pfX0pLmVhY2goXCJpbnRlcnJ1cHQuem9vbVwiLGZ1bmN0aW9uKCl7cyhuKX0pLmVhY2goXCJlbmQuem9vbVwiLGZ1bmN0aW9uKCl7cyhuKX0pOih0aGlzLl9fY2hhcnRfXz1rLGwobiksYyhuKSxzKG4pKX0pfSxuLnRyYW5zbGF0ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaz17eDordFswXSx5Oit0WzFdLGs6ay5rfSxvKCksbik6W2sueCxrLnldfSxuLnNjYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhrPXt4OmsueCx5OmsueSxrOm51bGx9LHUoK3QpLG8oKSxuKTprLmt9LG4uc2NhbGVFeHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KEE9bnVsbD09dD9XYTpbK3RbMF0sK3RbMV1dLG4pOkF9LG4uY2VudGVyPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhtPXQmJlsrdFswXSwrdFsxXV0sbik6bX0sbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhFPXQmJlsrdFswXSwrdFsxXV0sbik6RX0sbi5kdXJhdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oQz0rdCxuKTpDfSxuLng9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGI9dCx4PXQuY29weSgpLGs9e3g6MCx5OjAsazoxfSxuKTpifSxuLnk9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHc9dCxfPXQuY29weSgpLGs9e3g6MCx5OjAsazoxfSxuKTp3fSxvYS5yZWJpbmQobixELFwib25cIil9O3ZhciAkYSxCYSxXYT1bMCwxLzBdO29hLmNvbG9yPW9uLG9uLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJnYigpK1wiXCJ9LG9hLmhzbD1sbjt2YXIgSmE9bG4ucHJvdG90eXBlPW5ldyBvbjtKYS5icmlnaHRlcj1mdW5jdGlvbihuKXtyZXR1cm4gbj1NYXRoLnBvdyguNyxhcmd1bWVudHMubGVuZ3RoP246MSksbmV3IGxuKHRoaXMuaCx0aGlzLnMsdGhpcy5sL24pfSxKYS5kYXJrZXI9ZnVuY3Rpb24obil7cmV0dXJuIG49TWF0aC5wb3coLjcsYXJndW1lbnRzLmxlbmd0aD9uOjEpLG5ldyBsbih0aGlzLmgsdGhpcy5zLG4qdGhpcy5sKX0sSmEucmdiPWZ1bmN0aW9uKCl7cmV0dXJuIGNuKHRoaXMuaCx0aGlzLnMsdGhpcy5sKX0sb2EuaGNsPXNuO3ZhciBHYT1zbi5wcm90b3R5cGU9bmV3IG9uO0dhLmJyaWdodGVyPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgc24odGhpcy5oLHRoaXMuYyxNYXRoLm1pbigxMDAsdGhpcy5sK0thKihhcmd1bWVudHMubGVuZ3RoP246MSkpKX0sR2EuZGFya2VyPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgc24odGhpcy5oLHRoaXMuYyxNYXRoLm1heCgwLHRoaXMubC1LYSooYXJndW1lbnRzLmxlbmd0aD9uOjEpKSl9LEdhLnJnYj1mdW5jdGlvbigpe3JldHVybiBmbih0aGlzLmgsdGhpcy5jLHRoaXMubCkucmdiKCl9LG9hLmxhYj1objt2YXIgS2E9MTgsUWE9Ljk1MDQ3LG5vPTEsdG89MS4wODg4Myxlbz1obi5wcm90b3R5cGU9bmV3IG9uO2VvLmJyaWdodGVyPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgaG4oTWF0aC5taW4oMTAwLHRoaXMubCtLYSooYXJndW1lbnRzLmxlbmd0aD9uOjEpKSx0aGlzLmEsdGhpcy5iKX0sZW8uZGFya2VyPWZ1bmN0aW9uKG4pe3JldHVybiBuZXcgaG4oTWF0aC5tYXgoMCx0aGlzLmwtS2EqKGFyZ3VtZW50cy5sZW5ndGg/bjoxKSksdGhpcy5hLHRoaXMuYil9LGVvLnJnYj1mdW5jdGlvbigpe3JldHVybiBnbih0aGlzLmwsdGhpcy5hLHRoaXMuYil9LG9hLnJnYj15bjt2YXIgcm89eW4ucHJvdG90eXBlPW5ldyBvbjtyby5icmlnaHRlcj1mdW5jdGlvbihuKXtuPU1hdGgucG93KC43LGFyZ3VtZW50cy5sZW5ndGg/bjoxKTt2YXIgdD10aGlzLnIsZT10aGlzLmcscj10aGlzLmIsdT0zMDtyZXR1cm4gdHx8ZXx8cj8odCYmdT50JiYodD11KSxlJiZ1PmUmJihlPXUpLHImJnU+ciYmKHI9dSksbmV3IHluKE1hdGgubWluKDI1NSx0L24pLE1hdGgubWluKDI1NSxlL24pLE1hdGgubWluKDI1NSxyL24pKSk6bmV3IHluKHUsdSx1KX0scm8uZGFya2VyPWZ1bmN0aW9uKG4pe3JldHVybiBuPU1hdGgucG93KC43LGFyZ3VtZW50cy5sZW5ndGg/bjoxKSxuZXcgeW4obip0aGlzLnIsbip0aGlzLmcsbip0aGlzLmIpfSxyby5oc2w9ZnVuY3Rpb24oKXtyZXR1cm4gd24odGhpcy5yLHRoaXMuZyx0aGlzLmIpfSxyby50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiI1wiK2JuKHRoaXMucikrYm4odGhpcy5nKStibih0aGlzLmIpfTt2YXIgdW89b2EubWFwKHthbGljZWJsdWU6MTU3OTIzODMsYW50aXF1ZXdoaXRlOjE2NDQ0Mzc1LGFxdWE6NjU1MzUsYXF1YW1hcmluZTo4Mzg4NTY0LGF6dXJlOjE1Nzk0MTc1LGJlaWdlOjE2MTE5MjYwLGJpc3F1ZToxNjc3MDI0NCxibGFjazowLGJsYW5jaGVkYWxtb25kOjE2NzcyMDQ1LGJsdWU6MjU1LGJsdWV2aW9sZXQ6OTA1NTIwMixicm93bjoxMDgyNDIzNCxidXJseXdvb2Q6MTQ1OTYyMzEsY2FkZXRibHVlOjYyNjY1MjgsY2hhcnRyZXVzZTo4Mzg4MzUyLGNob2NvbGF0ZToxMzc4OTQ3MCxjb3JhbDoxNjc0NDI3Mixjb3JuZmxvd2VyYmx1ZTo2NTkxOTgxLGNvcm5zaWxrOjE2Nzc1Mzg4LGNyaW1zb246MTQ0MjMxMDAsY3lhbjo2NTUzNSxkYXJrYmx1ZToxMzksZGFya2N5YW46MzU3MjMsZGFya2dvbGRlbnJvZDoxMjA5MjkzOSxkYXJrZ3JheToxMTExOTAxNyxkYXJrZ3JlZW46MjU2MDAsZGFya2dyZXk6MTExMTkwMTcsZGFya2toYWtpOjEyNDMzMjU5LGRhcmttYWdlbnRhOjkxMDk2NDMsZGFya29saXZlZ3JlZW46NTU5Nzk5OSxkYXJrb3JhbmdlOjE2NzQ3NTIwLGRhcmtvcmNoaWQ6MTAwNDAwMTIsZGFya3JlZDo5MTA5NTA0LGRhcmtzYWxtb246MTUzMDg0MTAsZGFya3NlYWdyZWVuOjk0MTk5MTksZGFya3NsYXRlYmx1ZTo0NzM0MzQ3LGRhcmtzbGF0ZWdyYXk6MzEwMDQ5NSxkYXJrc2xhdGVncmV5OjMxMDA0OTUsZGFya3R1cnF1b2lzZTo1Mjk0NSxkYXJrdmlvbGV0Ojk2OTk1MzksZGVlcHBpbms6MTY3MTY5NDcsZGVlcHNreWJsdWU6NDkxNTEsZGltZ3JheTo2OTA4MjY1LGRpbWdyZXk6NjkwODI2NSxkb2RnZXJibHVlOjIwMDMxOTksZmlyZWJyaWNrOjExNjc0MTQ2LGZsb3JhbHdoaXRlOjE2Nzc1OTIwLGZvcmVzdGdyZWVuOjIyNjM4NDIsZnVjaHNpYToxNjcxMTkzNSxnYWluc2Jvcm86MTQ0NzQ0NjAsZ2hvc3R3aGl0ZToxNjMxNjY3MSxnb2xkOjE2NzY2NzIwLGdvbGRlbnJvZDoxNDMyOTEyMCxncmF5Ojg0MjE1MDQsZ3JlZW46MzI3NjgsZ3JlZW55ZWxsb3c6MTE0MDMwNTUsZ3JleTo4NDIxNTA0LGhvbmV5ZGV3OjE1Nzk0MTYwLGhvdHBpbms6MTY3Mzg3NDAsaW5kaWFucmVkOjEzNDU4NTI0LGluZGlnbzo0OTE1MzMwLGl2b3J5OjE2Nzc3MjAwLGtoYWtpOjE1Nzg3NjYwLGxhdmVuZGVyOjE1MTMyNDEwLGxhdmVuZGVyYmx1c2g6MTY3NzMzNjUsbGF3bmdyZWVuOjgxOTA5NzYsbGVtb25jaGlmZm9uOjE2Nzc1ODg1LGxpZ2h0Ymx1ZToxMTM5MzI1NCxsaWdodGNvcmFsOjE1NzYxNTM2LGxpZ2h0Y3lhbjoxNDc0NTU5OSxsaWdodGdvbGRlbnJvZHllbGxvdzoxNjQ0ODIxMCxsaWdodGdyYXk6MTM4ODIzMjMsbGlnaHRncmVlbjo5NDk4MjU2LGxpZ2h0Z3JleToxMzg4MjMyMyxsaWdodHBpbms6MTY3NTg0NjUsbGlnaHRzYWxtb246MTY3NTI3NjIsbGlnaHRzZWFncmVlbjoyMTQyODkwLGxpZ2h0c2t5Ymx1ZTo4OTAwMzQ2LGxpZ2h0c2xhdGVncmF5Ojc4MzM3NTMsbGlnaHRzbGF0ZWdyZXk6NzgzMzc1MyxsaWdodHN0ZWVsYmx1ZToxMTU4NDczNCxsaWdodHllbGxvdzoxNjc3NzE4NCxsaW1lOjY1MjgwLGxpbWVncmVlbjozMzI5MzMwLGxpbmVuOjE2NDQ1NjcwLG1hZ2VudGE6MTY3MTE5MzUsbWFyb29uOjgzODg2MDgsbWVkaXVtYXF1YW1hcmluZTo2NzM3MzIyLG1lZGl1bWJsdWU6MjA1LG1lZGl1bW9yY2hpZDoxMjIxMTY2NyxtZWRpdW1wdXJwbGU6OTY2MjY4MyxtZWRpdW1zZWFncmVlbjozOTc4MDk3LG1lZGl1bXNsYXRlYmx1ZTo4MDg3NzkwLG1lZGl1bXNwcmluZ2dyZWVuOjY0MTU0LG1lZGl1bXR1cnF1b2lzZTo0NzcyMzAwLG1lZGl1bXZpb2xldHJlZDoxMzA0NzE3MyxtaWRuaWdodGJsdWU6MTY0NDkxMixtaW50Y3JlYW06MTYxMjE4NTAsbWlzdHlyb3NlOjE2NzcwMjczLG1vY2Nhc2luOjE2NzcwMjI5LG5hdmFqb3doaXRlOjE2NzY4Njg1LG5hdnk6MTI4LG9sZGxhY2U6MTY2NDM1NTgsb2xpdmU6ODQyMTM3NixvbGl2ZWRyYWI6NzA0ODczOSxvcmFuZ2U6MTY3NTM5MjAsb3JhbmdlcmVkOjE2NzI5MzQ0LG9yY2hpZDoxNDMxNTczNCxwYWxlZ29sZGVucm9kOjE1NjU3MTMwLHBhbGVncmVlbjoxMDAyNTg4MCxwYWxldHVycXVvaXNlOjExNTI5OTY2LHBhbGV2aW9sZXRyZWQ6MTQzODEyMDMscGFwYXlhd2hpcDoxNjc3MzA3NyxwZWFjaHB1ZmY6MTY3Njc2NzMscGVydToxMzQ2ODk5MSxwaW5rOjE2NzYxMDM1LHBsdW06MTQ1MjQ2MzcscG93ZGVyYmx1ZToxMTU5MTkxMCxwdXJwbGU6ODM4ODczNixyZWJlY2NhcHVycGxlOjY2OTc4ODEscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxyb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LHRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9KTt1by5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7dW8uc2V0KG4sTW4odCkpfSksb2EuZnVuY3Rvcj1FbixvYS54aHI9QW4oeSksb2EuZHN2PWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZShuLGUsaSl7YXJndW1lbnRzLmxlbmd0aDwzJiYoaT1lLGU9bnVsbCk7dmFyIGE9Q24obix0LG51bGw9PWU/cjp1KGUpLGkpO3JldHVybiBhLnJvdz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9hLnJlc3BvbnNlKG51bGw9PShlPW4pP3I6dShuKSk6ZX0sYX1mdW5jdGlvbiByKG4pe3JldHVybiBlLnBhcnNlKG4ucmVzcG9uc2VUZXh0KX1mdW5jdGlvbiB1KG4pe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXJzZSh0LnJlc3BvbnNlVGV4dCxuKX19ZnVuY3Rpb24gaSh0KXtyZXR1cm4gdC5tYXAoYSkuam9pbihuKX1mdW5jdGlvbiBhKG4pe3JldHVybiBvLnRlc3Qobik/J1wiJytuLnJlcGxhY2UoL1xcXCIvZywnXCJcIicpKydcIic6bn12YXIgbz1uZXcgUmVnRXhwKCdbXCInK24rXCJcXG5dXCIpLGw9bi5jaGFyQ29kZUF0KDApO3JldHVybiBlLnBhcnNlPWZ1bmN0aW9uKG4sdCl7dmFyIHI7cmV0dXJuIGUucGFyc2VSb3dzKG4sZnVuY3Rpb24obixlKXtpZihyKXJldHVybiByKG4sZS0xKTt2YXIgdT1uZXcgRnVuY3Rpb24oXCJkXCIsXCJyZXR1cm4ge1wiK24ubWFwKGZ1bmN0aW9uKG4sdCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KG4pK1wiOiBkW1wiK3QrXCJdXCJ9KS5qb2luKFwiLFwiKStcIn1cIik7cj10P2Z1bmN0aW9uKG4sZSl7cmV0dXJuIHQodShuKSxlKX06dX0pfSxlLnBhcnNlUm93cz1mdW5jdGlvbihuLHQpe2Z1bmN0aW9uIGUoKXtpZihzPj1jKXJldHVybiBhO2lmKHUpcmV0dXJuIHU9ITEsaTt2YXIgdD1zO2lmKDM0PT09bi5jaGFyQ29kZUF0KHQpKXtmb3IodmFyIGU9dDtlKys8YzspaWYoMzQ9PT1uLmNoYXJDb2RlQXQoZSkpe2lmKDM0IT09bi5jaGFyQ29kZUF0KGUrMSkpYnJlYWs7KytlfXM9ZSsyO3ZhciByPW4uY2hhckNvZGVBdChlKzEpO3JldHVybiAxMz09PXI/KHU9ITAsMTA9PT1uLmNoYXJDb2RlQXQoZSsyKSYmKytzKToxMD09PXImJih1PSEwKSxuLnNsaWNlKHQrMSxlKS5yZXBsYWNlKC9cIlwiL2csJ1wiJyl9Zm9yKDtjPnM7KXt2YXIgcj1uLmNoYXJDb2RlQXQocysrKSxvPTE7aWYoMTA9PT1yKXU9ITA7ZWxzZSBpZigxMz09PXIpdT0hMCwxMD09PW4uY2hhckNvZGVBdChzKSYmKCsrcywrK28pO2Vsc2UgaWYociE9PWwpY29udGludWU7cmV0dXJuIG4uc2xpY2UodCxzLW8pfXJldHVybiBuLnNsaWNlKHQpfWZvcih2YXIgcix1LGk9e30sYT17fSxvPVtdLGM9bi5sZW5ndGgscz0wLGY9MDsocj1lKCkpIT09YTspe2Zvcih2YXIgaD1bXTtyIT09aSYmciE9PWE7KWgucHVzaChyKSxyPWUoKTt0JiZudWxsPT0oaD10KGgsZisrKSl8fG8ucHVzaChoKX1yZXR1cm4gb30sZS5mb3JtYXQ9ZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0WzBdKSlyZXR1cm4gZS5mb3JtYXRSb3dzKHQpO3ZhciByPW5ldyBtLHU9W107cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbihuKXtmb3IodmFyIHQgaW4gbilyLmhhcyh0KXx8dS5wdXNoKHIuYWRkKHQpKX0pLFt1Lm1hcChhKS5qb2luKG4pXS5jb25jYXQodC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHUubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBhKHRbbl0pfSkuam9pbihuKX0pKS5qb2luKFwiXFxuXCIpfSxlLmZvcm1hdFJvd3M9ZnVuY3Rpb24obil7cmV0dXJuIG4ubWFwKGkpLmpvaW4oXCJcXG5cIil9LGV9LG9hLmNzdj1vYS5kc3YoXCIsXCIsXCJ0ZXh0L2NzdlwiKSxvYS50c3Y9b2EuZHN2KFwiICAgIFwiLFwidGV4dC90YWItc2VwYXJhdGVkLXZhbHVlc1wiKTt2YXIgaW8sYW8sb28sbG8sY289dGhpc1t4KHRoaXMsXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIildfHxmdW5jdGlvbihuKXtzZXRUaW1lb3V0KG4sMTcpfTtvYS50aW1lcj1mdW5jdGlvbigpe3FuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb2EudGltZXIuZmx1c2g9ZnVuY3Rpb24oKXtSbigpLERuKCl9LG9hLnJvdW5kPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHQ/TWF0aC5yb3VuZChuKih0PU1hdGgucG93KDEwLHQpKSkvdDpNYXRoLnJvdW5kKG4pfTt2YXIgc289W1wieVwiLFwielwiLFwiYVwiLFwiZlwiLFwicFwiLFwiblwiLFwiXFx4YjVcIixcIm1cIixcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXS5tYXAoVW4pO29hLmZvcm1hdFByZWZpeD1mdW5jdGlvbihuLHQpe3ZhciBlPTA7cmV0dXJuKG49K24pJiYoMD5uJiYobio9LTEpLHQmJihuPW9hLnJvdW5kKG4sUG4obix0KSkpLGU9MStNYXRoLmZsb29yKDFlLTEyK01hdGgubG9nKG4pL01hdGguTE4xMCksZT1NYXRoLm1heCgtMjQsTWF0aC5taW4oMjQsMypNYXRoLmZsb29yKChlLTEpLzMpKSkpLHNvWzgrZS8zXX07dmFyIGZvPS8oPzooW157XSk/KFs8Pj1eXSkpPyhbK1xcLSBdKT8oWyQjXSk/KDApPyhcXGQrKT8oLCk/KFxcLi0/XFxkKyk/KFthLXolXSk/L2ksaG89b2EubWFwKHtiOmZ1bmN0aW9uKG4pe3JldHVybiBuLnRvU3RyaW5nKDIpfSxjOmZ1bmN0aW9uKG4pe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pfSxvOmZ1bmN0aW9uKG4pe3JldHVybiBuLnRvU3RyaW5nKDgpfSx4OmZ1bmN0aW9uKG4pe3JldHVybiBuLnRvU3RyaW5nKDE2KX0sWDpmdW5jdGlvbihuKXtyZXR1cm4gbi50b1N0cmluZygxNikudG9VcHBlckNhc2UoKX0sZzpmdW5jdGlvbihuLHQpe3JldHVybiBuLnRvUHJlY2lzaW9uKHQpfSxlOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4udG9FeHBvbmVudGlhbCh0KX0sZjpmdW5jdGlvbihuLHQpe3JldHVybiBuLnRvRml4ZWQodCl9LHI6ZnVuY3Rpb24obix0KXtyZXR1cm4obj1vYS5yb3VuZChuLFBuKG4sdCkpKS50b0ZpeGVkKE1hdGgubWF4KDAsTWF0aC5taW4oMjAsUG4obiooMSsxZS0xNSksdCkpKSl9fSksZ289b2EudGltZT17fSxwbz1EYXRlO0huLnByb3RvdHlwZT17Z2V0RGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDRGF0ZSgpfSxnZXREYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmdldFVUQ0RheSgpfSxnZXRGdWxsWWVhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDRnVsbFllYXIoKX0sZ2V0SG91cnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmdldFVUQ0hvdXJzKCl9LGdldE1pbGxpc2Vjb25kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDTWlsbGlzZWNvbmRzKCl9LGdldE1pbnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmdldFVUQ01pbnV0ZXMoKX0sZ2V0TW9udGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmdldFVUQ01vbnRoKCl9LGdldFNlY29uZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLmdldFVUQ1NlY29uZHMoKX0sZ2V0VGltZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VGltZSgpfSxnZXRUaW1lem9uZU9mZnNldDpmdW5jdGlvbigpe3JldHVybiAwfSx2YWx1ZU9mOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy52YWx1ZU9mKCl9LHNldERhdGU6ZnVuY3Rpb24oKXt2by5zZXRVVENEYXRlLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfSxzZXREYXk6ZnVuY3Rpb24oKXt2by5zZXRVVENEYXkuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldEZ1bGxZZWFyOmZ1bmN0aW9uKCl7dm8uc2V0VVRDRnVsbFllYXIuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldEhvdXJzOmZ1bmN0aW9uKCl7dm8uc2V0VVRDSG91cnMuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldE1pbGxpc2Vjb25kczpmdW5jdGlvbigpe3ZvLnNldFVUQ01pbGxpc2Vjb25kcy5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0TWludXRlczpmdW5jdGlvbigpe3ZvLnNldFVUQ01pbnV0ZXMuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldE1vbnRoOmZ1bmN0aW9uKCl7dm8uc2V0VVRDTW9udGguYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldFNlY29uZHM6ZnVuY3Rpb24oKXt2by5zZXRVVENTZWNvbmRzLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfSxzZXRUaW1lOmZ1bmN0aW9uKCl7dm8uc2V0VGltZS5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX19O3ZhciB2bz1EYXRlLnByb3RvdHlwZTtnby55ZWFyPU9uKGZ1bmN0aW9uKG4pe3JldHVybiBuPWdvLmRheShuKSxuLnNldE1vbnRoKDAsMSksbn0sZnVuY3Rpb24obix0KXtuLnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSt0KX0sZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0RnVsbFllYXIoKX0pLGdvLnllYXJzPWdvLnllYXIucmFuZ2UsZ28ueWVhcnMudXRjPWdvLnllYXIudXRjLnJhbmdlLGdvLmRheT1PbihmdW5jdGlvbihuKXt2YXIgdD1uZXcgcG8oMmUzLDApO3JldHVybiB0LnNldEZ1bGxZZWFyKG4uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksbi5nZXREYXRlKCkpLHR9LGZ1bmN0aW9uKG4sdCl7bi5zZXREYXRlKG4uZ2V0RGF0ZSgpK3QpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXREYXRlKCktMX0pLGdvLmRheXM9Z28uZGF5LnJhbmdlLGdvLmRheXMudXRjPWdvLmRheS51dGMucmFuZ2UsZ28uZGF5T2ZZZWFyPWZ1bmN0aW9uKG4pe3ZhciB0PWdvLnllYXIobik7cmV0dXJuIE1hdGguZmxvb3IoKG4tdC02ZTQqKG4uZ2V0VGltZXpvbmVPZmZzZXQoKS10LmdldFRpbWV6b25lT2Zmc2V0KCkpKS84NjRlNSl9LFtcInN1bmRheVwiLFwibW9uZGF5XCIsXCJ0dWVzZGF5XCIsXCJ3ZWRuZXNkYXlcIixcInRodXJzZGF5XCIsXCJmcmlkYXlcIixcInNhdHVyZGF5XCJdLmZvckVhY2goZnVuY3Rpb24obix0KXt0PTctdDt2YXIgZT1nb1tuXT1PbihmdW5jdGlvbihuKXtyZXR1cm4obj1nby5kYXkobikpLnNldERhdGUobi5nZXREYXRlKCktKG4uZ2V0RGF5KCkrdCklNyksbn0sZnVuY3Rpb24obix0KXtuLnNldERhdGUobi5nZXREYXRlKCkrNypNYXRoLmZsb29yKHQpKX0sZnVuY3Rpb24obil7dmFyIGU9Z28ueWVhcihuKS5nZXREYXkoKTtyZXR1cm4gTWF0aC5mbG9vcigoZ28uZGF5T2ZZZWFyKG4pKyhlK3QpJTcpLzcpLShlIT09dCl9KTtnb1tuK1wic1wiXT1lLnJhbmdlLGdvW24rXCJzXCJdLnV0Yz1lLnV0Yy5yYW5nZSxnb1tuK1wiT2ZZZWFyXCJdPWZ1bmN0aW9uKG4pe3ZhciBlPWdvLnllYXIobikuZ2V0RGF5KCk7cmV0dXJuIE1hdGguZmxvb3IoKGdvLmRheU9mWWVhcihuKSsoZSt0KSU3KS83KX19KSxnby53ZWVrPWdvLnN1bmRheSxnby53ZWVrcz1nby5zdW5kYXkucmFuZ2UsZ28ud2Vla3MudXRjPWdvLnN1bmRheS51dGMucmFuZ2UsZ28ud2Vla09mWWVhcj1nby5zdW5kYXlPZlllYXI7dmFyIG1vPXtcIi1cIjpcIlwiLF86XCIgXCIsMDpcIjBcIn0seW89L15cXHMqXFxkKy8sTW89L14lLztvYS5sb2NhbGU9ZnVuY3Rpb24obil7cmV0dXJue251bWJlckZvcm1hdDpqbihuKSx0aW1lRm9ybWF0OlluKG4pfX07dmFyIHhvPW9hLmxvY2FsZSh7ZGVjaW1hbDpcIi5cIix0aG91c2FuZHM6XCIsXCIsZ3JvdXBpbmc6WzNdLGN1cnJlbmN5OltcIiRcIixcIlwiXSxkYXRlVGltZTpcIiVhICViICVlICVYICVZXCIsZGF0ZTpcIiVtLyVkLyVZXCIsdGltZTpcIiVIOiVNOiVTXCIscGVyaW9kczpbXCJBTVwiLFwiUE1cIl0sZGF5czpbXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSxcbnNob3J0RGF5czpbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl0sbW9udGhzOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSxzaG9ydE1vbnRoczpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdfSk7b2EuZm9ybWF0PXhvLm51bWJlckZvcm1hdCxvYS5nZW89e30sc3QucHJvdG90eXBlPXtzOjAsdDowLGFkZDpmdW5jdGlvbihuKXtmdChuLHRoaXMudCxibyksZnQoYm8ucyx0aGlzLnMsdGhpcyksdGhpcy5zP3RoaXMudCs9Ym8udDp0aGlzLnM9Ym8udH0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnM9dGhpcy50PTB9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfX07dmFyIGJvPW5ldyBzdDtvYS5nZW8uc3RyZWFtPWZ1bmN0aW9uKG4sdCl7biYmX28uaGFzT3duUHJvcGVydHkobi50eXBlKT9fb1tuLnR5cGVdKG4sdCk6aHQobix0KX07dmFyIF9vPXtGZWF0dXJlOmZ1bmN0aW9uKG4sdCl7aHQobi5nZW9tZXRyeSx0KX0sRmVhdHVyZUNvbGxlY3Rpb246ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9bi5mZWF0dXJlcyxyPS0xLHU9ZS5sZW5ndGg7KytyPHU7KWh0KGVbcl0uZ2VvbWV0cnksdCl9fSx3bz17U3BoZXJlOmZ1bmN0aW9uKG4sdCl7dC5zcGhlcmUoKX0sUG9pbnQ6ZnVuY3Rpb24obix0KXtuPW4uY29vcmRpbmF0ZXMsdC5wb2ludChuWzBdLG5bMV0sblsyXSl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9bi5jb29yZGluYXRlcyxyPS0xLHU9ZS5sZW5ndGg7KytyPHU7KW49ZVtyXSx0LnBvaW50KG5bMF0sblsxXSxuWzJdKX0sTGluZVN0cmluZzpmdW5jdGlvbihuLHQpe2d0KG4uY29vcmRpbmF0ZXMsdCwwKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKG4sdCl7Zm9yKHZhciBlPW4uY29vcmRpbmF0ZXMscj0tMSx1PWUubGVuZ3RoOysrcjx1OylndChlW3JdLHQsMCl9LFBvbHlnb246ZnVuY3Rpb24obix0KXtwdChuLmNvb3JkaW5hdGVzLHQpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24obix0KXtmb3IodmFyIGU9bi5jb29yZGluYXRlcyxyPS0xLHU9ZS5sZW5ndGg7KytyPHU7KXB0KGVbcl0sdCl9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihuLHQpe2Zvcih2YXIgZT1uLmdlb21ldHJpZXMscj0tMSx1PWUubGVuZ3RoOysrcjx1OylodChlW3JdLHQpfX07b2EuZ2VvLmFyZWE9ZnVuY3Rpb24obil7cmV0dXJuIFNvPTAsb2EuZ2VvLnN0cmVhbShuLE5vKSxTb307dmFyIFNvLGtvPW5ldyBzdCxObz17c3BoZXJlOmZ1bmN0aW9uKCl7U28rPTQqamF9LHBvaW50OmIsbGluZVN0YXJ0OmIsbGluZUVuZDpiLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe2tvLnJlc2V0KCksTm8ubGluZVN0YXJ0PXZ0fSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dmFyIG49MiprbztTbys9MD5uPzQqamErbjpuLE5vLmxpbmVTdGFydD1Oby5saW5lRW5kPU5vLnBvaW50PWJ9fTtvYS5nZW8uYm91bmRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHQpe00ucHVzaCh4PVtzPW4saD1uXSksZj50JiYoZj10KSx0PmcmJihnPXQpfWZ1bmN0aW9uIHQodCxlKXt2YXIgcj1kdChbdCpJYSxlKklhXSk7aWYobSl7dmFyIHU9eXQobSxyKSxpPVt1WzFdLC11WzBdLDBdLGE9eXQoaSx1KTtidChhKSxhPV90KGEpO3ZhciBsPXQtcCxjPWw+MD8xOi0xLHY9YVswXSpZYSpjLGQ9TWEobCk+MTgwO2lmKGReKHY+YypwJiZjKnQ+dikpe3ZhciB5PWFbMV0qWWE7eT5nJiYoZz15KX1lbHNlIGlmKHY9KHYrMzYwKSUzNjAtMTgwLGReKHY+YypwJiZjKnQ+dikpe3ZhciB5PS1hWzFdKllhO2Y+eSYmKGY9eSl9ZWxzZSBmPmUmJihmPWUpLGU+ZyYmKGc9ZSk7ZD9wPnQ/byhzLHQpPm8ocyxoKSYmKGg9dCk6byh0LGgpPm8ocyxoKSYmKHM9dCk6aD49cz8ocz50JiYocz10KSx0PmgmJihoPXQpKTp0PnA/byhzLHQpPm8ocyxoKSYmKGg9dCk6byh0LGgpPm8ocyxoKSYmKHM9dCl9ZWxzZSBuKHQsZSk7bT1yLHA9dH1mdW5jdGlvbiBlKCl7Yi5wb2ludD10fWZ1bmN0aW9uIHIoKXt4WzBdPXMseFsxXT1oLGIucG9pbnQ9bixtPW51bGx9ZnVuY3Rpb24gdShuLGUpe2lmKG0pe3ZhciByPW4tcDt5Kz1NYShyKT4xODA/cisocj4wPzM2MDotMzYwKTpyfWVsc2Ugdj1uLGQ9ZTtOby5wb2ludChuLGUpLHQobixlKX1mdW5jdGlvbiBpKCl7Tm8ubGluZVN0YXJ0KCl9ZnVuY3Rpb24gYSgpe3UodixkKSxOby5saW5lRW5kKCksTWEoeSk+UGEmJihzPS0oaD0xODApKSx4WzBdPXMseFsxXT1oLG09bnVsbH1mdW5jdGlvbiBvKG4sdCl7cmV0dXJuKHQtPW4pPDA/dCszNjA6dH1mdW5jdGlvbiBsKG4sdCl7cmV0dXJuIG5bMF0tdFswXX1mdW5jdGlvbiBjKG4sdCl7cmV0dXJuIHRbMF08PXRbMV0/dFswXTw9biYmbjw9dFsxXTpuPHRbMF18fHRbMV08bn12YXIgcyxmLGgsZyxwLHYsZCxtLHksTSx4LGI9e3BvaW50Om4sbGluZVN0YXJ0OmUsbGluZUVuZDpyLHBvbHlnb25TdGFydDpmdW5jdGlvbigpe2IucG9pbnQ9dSxiLmxpbmVTdGFydD1pLGIubGluZUVuZD1hLHk9MCxOby5wb2x5Z29uU3RhcnQoKX0scG9seWdvbkVuZDpmdW5jdGlvbigpe05vLnBvbHlnb25FbmQoKSxiLnBvaW50PW4sYi5saW5lU3RhcnQ9ZSxiLmxpbmVFbmQ9ciwwPmtvPyhzPS0oaD0xODApLGY9LShnPTkwKSk6eT5QYT9nPTkwOi1QYT55JiYoZj0tOTApLHhbMF09cyx4WzFdPWh9fTtyZXR1cm4gZnVuY3Rpb24obil7Zz1oPS0ocz1mPTEvMCksTT1bXSxvYS5nZW8uc3RyZWFtKG4sYik7dmFyIHQ9TS5sZW5ndGg7aWYodCl7TS5zb3J0KGwpO2Zvcih2YXIgZSxyPTEsdT1NWzBdLGk9W3VdO3Q+cjsrK3IpZT1NW3JdLGMoZVswXSx1KXx8YyhlWzFdLHUpPyhvKHVbMF0sZVsxXSk+byh1WzBdLHVbMV0pJiYodVsxXT1lWzFdKSxvKGVbMF0sdVsxXSk+byh1WzBdLHVbMV0pJiYodVswXT1lWzBdKSk6aS5wdXNoKHU9ZSk7Zm9yKHZhciBhLGUscD0tKDEvMCksdD1pLmxlbmd0aC0xLHI9MCx1PWlbdF07dD49cjt1PWUsKytyKWU9aVtyXSwoYT1vKHVbMV0sZVswXSkpPnAmJihwPWEscz1lWzBdLGg9dVsxXSl9cmV0dXJuIE09eD1udWxsLHM9PT0xLzB8fGY9PT0xLzA/W1tOYU4sTmFOXSxbTmFOLE5hTl1dOltbcyxmXSxbaCxnXV19fSgpLG9hLmdlby5jZW50cm9pZD1mdW5jdGlvbihuKXtFbz1Bbz1Dbz16bz1Mbz1xbz1Ubz1Sbz1Ebz1Qbz1Vbz0wLG9hLmdlby5zdHJlYW0obixqbyk7dmFyIHQ9RG8sZT1QbyxyPVVvLHU9dCp0K2UqZStyKnI7cmV0dXJuIFVhPnUmJih0PXFvLGU9VG8scj1SbyxQYT5BbyYmKHQ9Q28sZT16byxyPUxvKSx1PXQqdCtlKmUrcipyLFVhPnUpP1tOYU4sTmFOXTpbTWF0aC5hdGFuMihlLHQpKllhLHRuKHIvTWF0aC5zcXJ0KHUpKSpZYV19O3ZhciBFbyxBbyxDbyx6byxMbyxxbyxUbyxSbyxEbyxQbyxVbyxqbz17c3BoZXJlOmIscG9pbnQ6U3QsbGluZVN0YXJ0Ok50LGxpbmVFbmQ6RXQscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7am8ubGluZVN0YXJ0PUF0fSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7am8ubGluZVN0YXJ0PU50fX0sRm89UnQoenQsanQsSHQsWy1qYSwtamEvMl0pLEhvPTFlOTtvYS5nZW8uY2xpcEV4dGVudD1mdW5jdGlvbigpe3ZhciBuLHQsZSxyLHUsaSxhPXtzdHJlYW06ZnVuY3Rpb24obil7cmV0dXJuIHUmJih1LnZhbGlkPSExKSx1PWkobiksdS52YWxpZD0hMCx1fSxleHRlbnQ6ZnVuY3Rpb24obyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9WnQobj0rb1swXVswXSx0PStvWzBdWzFdLGU9K29bMV1bMF0scj0rb1sxXVsxXSksdSYmKHUudmFsaWQ9ITEsdT1udWxsKSxhKTpbW24sdF0sW2Uscl1dfX07cmV0dXJuIGEuZXh0ZW50KFtbMCwwXSxbOTYwLDUwMF1dKX0sKG9hLmdlby5jb25pY0VxdWFsQXJlYT1mdW5jdGlvbigpe3JldHVybiBWdChYdCl9KS5yYXc9WHQsb2EuZ2VvLmFsYmVycz1mdW5jdGlvbigpe3JldHVybiBvYS5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWzk2LDBdKS5jZW50ZXIoWy0uNiwzOC43XSkucGFyYWxsZWxzKFsyOS41LDQ1LjVdKS5zY2FsZSgxMDcwKX0sb2EuZ2VvLmFsYmVyc1VzYT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7dmFyIGk9blswXSxhPW5bMV07cmV0dXJuIHQ9bnVsbCxlKGksYSksdHx8KHIoaSxhKSx0KXx8dShpLGEpLHR9dmFyIHQsZSxyLHUsaT1vYS5nZW8uYWxiZXJzKCksYT1vYS5nZW8uY29uaWNFcXVhbEFyZWEoKS5yb3RhdGUoWzE1NCwwXSkuY2VudGVyKFstMiw1OC41XSkucGFyYWxsZWxzKFs1NSw2NV0pLG89b2EuZ2VvLmNvbmljRXF1YWxBcmVhKCkucm90YXRlKFsxNTcsMF0pLmNlbnRlcihbLTMsMTkuOV0pLnBhcmFsbGVscyhbOCwxOF0pLGw9e3BvaW50OmZ1bmN0aW9uKG4sZSl7dD1bbixlXX19O3JldHVybiBuLmludmVydD1mdW5jdGlvbihuKXt2YXIgdD1pLnNjYWxlKCksZT1pLnRyYW5zbGF0ZSgpLHI9KG5bMF0tZVswXSkvdCx1PShuWzFdLWVbMV0pL3Q7cmV0dXJuKHU+PS4xMiYmLjIzND51JiZyPj0tLjQyNSYmLS4yMTQ+cj9hOnU+PS4xNjYmJi4yMzQ+dSYmcj49LS4yMTQmJi0uMTE1PnI/bzppKS5pbnZlcnQobil9LG4uc3RyZWFtPWZ1bmN0aW9uKG4pe3ZhciB0PWkuc3RyZWFtKG4pLGU9YS5zdHJlYW0obikscj1vLnN0cmVhbShuKTtyZXR1cm57cG9pbnQ6ZnVuY3Rpb24obix1KXt0LnBvaW50KG4sdSksZS5wb2ludChuLHUpLHIucG9pbnQobix1KX0sc3BoZXJlOmZ1bmN0aW9uKCl7dC5zcGhlcmUoKSxlLnNwaGVyZSgpLHIuc3BoZXJlKCl9LGxpbmVTdGFydDpmdW5jdGlvbigpe3QubGluZVN0YXJ0KCksZS5saW5lU3RhcnQoKSxyLmxpbmVTdGFydCgpfSxsaW5lRW5kOmZ1bmN0aW9uKCl7dC5saW5lRW5kKCksZS5saW5lRW5kKCksci5saW5lRW5kKCl9LHBvbHlnb25TdGFydDpmdW5jdGlvbigpe3QucG9seWdvblN0YXJ0KCksZS5wb2x5Z29uU3RhcnQoKSxyLnBvbHlnb25TdGFydCgpfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7dC5wb2x5Z29uRW5kKCksZS5wb2x5Z29uRW5kKCksci5wb2x5Z29uRW5kKCl9fX0sbi5wcmVjaXNpb249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGkucHJlY2lzaW9uKHQpLGEucHJlY2lzaW9uKHQpLG8ucHJlY2lzaW9uKHQpLG4pOmkucHJlY2lzaW9uKCl9LG4uc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGkuc2NhbGUodCksYS5zY2FsZSguMzUqdCksby5zY2FsZSh0KSxuLnRyYW5zbGF0ZShpLnRyYW5zbGF0ZSgpKSk6aS5zY2FsZSgpfSxuLnRyYW5zbGF0ZT1mdW5jdGlvbih0KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaS50cmFuc2xhdGUoKTt2YXIgYz1pLnNjYWxlKCkscz0rdFswXSxmPSt0WzFdO3JldHVybiBlPWkudHJhbnNsYXRlKHQpLmNsaXBFeHRlbnQoW1tzLS40NTUqYyxmLS4yMzgqY10sW3MrLjQ1NSpjLGYrLjIzOCpjXV0pLnN0cmVhbShsKS5wb2ludCxyPWEudHJhbnNsYXRlKFtzLS4zMDcqYyxmKy4yMDEqY10pLmNsaXBFeHRlbnQoW1tzLS40MjUqYytQYSxmKy4xMipjK1BhXSxbcy0uMjE0KmMtUGEsZisuMjM0KmMtUGFdXSkuc3RyZWFtKGwpLnBvaW50LHU9by50cmFuc2xhdGUoW3MtLjIwNSpjLGYrLjIxMipjXSkuY2xpcEV4dGVudChbW3MtLjIxNCpjK1BhLGYrLjE2NipjK1BhXSxbcy0uMTE1KmMtUGEsZisuMjM0KmMtUGFdXSkuc3RyZWFtKGwpLnBvaW50LG59LG4uc2NhbGUoMTA3MCl9O3ZhciBPbyxJbyxZbyxabyxWbyxYbywkbz17cG9pbnQ6YixsaW5lU3RhcnQ6YixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7SW89MCwkby5saW5lU3RhcnQ9JHR9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXskby5saW5lU3RhcnQ9JG8ubGluZUVuZD0kby5wb2ludD1iLE9vKz1NYShJby8yKX19LEJvPXtwb2ludDpCdCxsaW5lU3RhcnQ6YixsaW5lRW5kOmIscG9seWdvblN0YXJ0OmIscG9seWdvbkVuZDpifSxXbz17cG9pbnQ6R3QsbGluZVN0YXJ0Okt0LGxpbmVFbmQ6UXQscG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7V28ubGluZVN0YXJ0PW5lfSxwb2x5Z29uRW5kOmZ1bmN0aW9uKCl7V28ucG9pbnQ9R3QsV28ubGluZVN0YXJ0PUt0LFdvLmxpbmVFbmQ9UXR9fTtvYS5nZW8ucGF0aD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7cmV0dXJuIG4mJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiZpLnBvaW50UmFkaXVzKCtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKSksYSYmYS52YWxpZHx8KGE9dShpKSksb2EuZ2VvLnN0cmVhbShuLGEpKSxpLnJlc3VsdCgpfWZ1bmN0aW9uIHQoKXtyZXR1cm4gYT1udWxsLG59dmFyIGUscix1LGksYSxvPTQuNTtyZXR1cm4gbi5hcmVhPWZ1bmN0aW9uKG4pe3JldHVybiBPbz0wLG9hLmdlby5zdHJlYW0obix1KCRvKSksT299LG4uY2VudHJvaWQ9ZnVuY3Rpb24obil7cmV0dXJuIENvPXpvPUxvPXFvPVRvPVJvPURvPVBvPVVvPTAsb2EuZ2VvLnN0cmVhbShuLHUoV28pKSxVbz9bRG8vVW8sUG8vVW9dOlJvP1txby9SbyxUby9Sb106TG8/W0NvL0xvLHpvL0xvXTpbTmFOLE5hTl19LG4uYm91bmRzPWZ1bmN0aW9uKG4pe3JldHVybiBWbz1Ybz0tKFlvPVpvPTEvMCksb2EuZ2VvLnN0cmVhbShuLHUoQm8pKSxbW1lvLFpvXSxbVm8sWG9dXX0sbi5wcm9qZWN0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PShlPW4pP24uc3RyZWFtfHxyZShuKTp5LHQoKSk6ZX0sbi5jb250ZXh0PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW51bGw9PShyPW4pP25ldyBXdDpuZXcgdGUobiksXCJmdW5jdGlvblwiIT10eXBlb2YgbyYmaS5wb2ludFJhZGl1cyhvKSx0KCkpOnJ9LG4ucG9pbnRSYWRpdXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89XCJmdW5jdGlvblwiPT10eXBlb2YgdD90OihpLnBvaW50UmFkaXVzKCt0KSwrdCksbik6b30sbi5wcm9qZWN0aW9uKG9hLmdlby5hbGJlcnNVc2EoKSkuY29udGV4dChudWxsKX0sb2EuZ2VvLnRyYW5zZm9ybT1mdW5jdGlvbihuKXtyZXR1cm57c3RyZWFtOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyB1ZSh0KTtmb3IodmFyIHIgaW4gbillW3JdPW5bcl07cmV0dXJuIGV9fX0sdWUucHJvdG90eXBlPXtwb2ludDpmdW5jdGlvbihuLHQpe3RoaXMuc3RyZWFtLnBvaW50KG4sdCl9LHNwaGVyZTpmdW5jdGlvbigpe3RoaXMuc3RyZWFtLnNwaGVyZSgpfSxsaW5lU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5saW5lU3RhcnQoKX0sbGluZUVuZDpmdW5jdGlvbigpe3RoaXMuc3RyZWFtLmxpbmVFbmQoKX0scG9seWdvblN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5zdHJlYW0ucG9seWdvblN0YXJ0KCl9LHBvbHlnb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLnN0cmVhbS5wb2x5Z29uRW5kKCl9fSxvYS5nZW8ucHJvamVjdGlvbj1hZSxvYS5nZW8ucHJvamVjdGlvbk11dGF0b3I9b2UsKG9hLmdlby5lcXVpcmVjdGFuZ3VsYXI9ZnVuY3Rpb24oKXtyZXR1cm4gYWUoY2UpfSkucmF3PWNlLmludmVydD1jZSxvYS5nZW8ucm90YXRpb249ZnVuY3Rpb24obil7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gdD1uKHRbMF0qSWEsdFsxXSpJYSksdFswXSo9WWEsdFsxXSo9WWEsdH1yZXR1cm4gbj1mZShuWzBdJTM2MCpJYSxuWzFdKklhLG4ubGVuZ3RoPjI/blsyXSpJYTowKSx0LmludmVydD1mdW5jdGlvbih0KXtyZXR1cm4gdD1uLmludmVydCh0WzBdKklhLHRbMV0qSWEpLHRbMF0qPVlhLHRbMV0qPVlhLHR9LHR9LHNlLmludmVydD1jZSxvYS5nZW8uY2lyY2xlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3ZhciBuPVwiZnVuY3Rpb25cIj09dHlwZW9mIHI/ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6cix0PWZlKC1uWzBdKklhLC1uWzFdKklhLDApLmludmVydCx1PVtdO3JldHVybiBlKG51bGwsbnVsbCwxLHtwb2ludDpmdW5jdGlvbihuLGUpe3UucHVzaChuPXQobixlKSksblswXSo9WWEsblsxXSo9WWF9fSkse3R5cGU6XCJQb2x5Z29uXCIsY29vcmRpbmF0ZXM6W3VdfX12YXIgdCxlLHI9WzAsMF0sdT02O3JldHVybiBuLm9yaWdpbj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj10LG4pOnJ9LG4uYW5nbGU9ZnVuY3Rpb24ocil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dmUoKHQ9K3IpKklhLHUqSWEpLG4pOnR9LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKHIpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXZlKHQqSWEsKHU9K3IpKklhKSxuKTp1fSxuLmFuZ2xlKDkwKX0sb2EuZ2VvLmRpc3RhbmNlPWZ1bmN0aW9uKG4sdCl7dmFyIGUscj0odFswXS1uWzBdKSpJYSx1PW5bMV0qSWEsaT10WzFdKklhLGE9TWF0aC5zaW4ociksbz1NYXRoLmNvcyhyKSxsPU1hdGguc2luKHUpLGM9TWF0aC5jb3ModSkscz1NYXRoLnNpbihpKSxmPU1hdGguY29zKGkpO3JldHVybiBNYXRoLmF0YW4yKE1hdGguc3FydCgoZT1mKmEpKmUrKGU9YypzLWwqZipvKSplKSxsKnMrYypmKm8pfSxvYS5nZW8uZ3JhdGljdWxlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbigpe3JldHVybnt0eXBlOlwiTXVsdGlMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6dCgpfX1mdW5jdGlvbiB0KCl7cmV0dXJuIG9hLnJhbmdlKE1hdGguY2VpbChpL2QpKmQsdSxkKS5tYXAoaCkuY29uY2F0KG9hLnJhbmdlKE1hdGguY2VpbChjL20pKm0sbCxtKS5tYXAoZykpLmNvbmNhdChvYS5yYW5nZShNYXRoLmNlaWwoci9wKSpwLGUscCkuZmlsdGVyKGZ1bmN0aW9uKG4pe3JldHVybiBNYShuJWQpPlBhfSkubWFwKHMpKS5jb25jYXQob2EucmFuZ2UoTWF0aC5jZWlsKG8vdikqdixhLHYpLmZpbHRlcihmdW5jdGlvbihuKXtyZXR1cm4gTWEobiVtKT5QYX0pLm1hcChmKSl9dmFyIGUscix1LGksYSxvLGwsYyxzLGYsaCxnLHA9MTAsdj1wLGQ9OTAsbT0zNjAseT0yLjU7cmV0dXJuIG4ubGluZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdCgpLm1hcChmdW5jdGlvbihuKXtyZXR1cm57dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczpufX0pfSxuLm91dGxpbmU9ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczpbaChpKS5jb25jYXQoZyhsKS5zbGljZSgxKSxoKHUpLnJldmVyc2UoKS5zbGljZSgxKSxnKGMpLnJldmVyc2UoKS5zbGljZSgxKSldfX0sbi5leHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bi5tYWpvckV4dGVudCh0KS5taW5vckV4dGVudCh0KTpuLm1pbm9yRXh0ZW50KCl9LG4ubWFqb3JFeHRlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9K3RbMF1bMF0sdT0rdFsxXVswXSxjPSt0WzBdWzFdLGw9K3RbMV1bMV0saT51JiYodD1pLGk9dSx1PXQpLGM+bCYmKHQ9YyxjPWwsbD10KSxuLnByZWNpc2lvbih5KSk6W1tpLGNdLFt1LGxdXX0sbi5taW5vckV4dGVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdFswXVswXSxlPSt0WzFdWzBdLG89K3RbMF1bMV0sYT0rdFsxXVsxXSxyPmUmJih0PXIscj1lLGU9dCksbz5hJiYodD1vLG89YSxhPXQpLG4ucHJlY2lzaW9uKHkpKTpbW3Isb10sW2UsYV1dfSxuLnN0ZXA9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bi5tYWpvclN0ZXAodCkubWlub3JTdGVwKHQpOm4ubWlub3JTdGVwKCl9LG4ubWFqb3JTdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhkPSt0WzBdLG09K3RbMV0sbik6W2QsbV19LG4ubWlub3JTdGVwPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhwPSt0WzBdLHY9K3RbMV0sbik6W3Asdl19LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh5PSt0LHM9bWUobyxhLDkwKSxmPXllKHIsZSx5KSxoPW1lKGMsbCw5MCksZz15ZShpLHUseSksbik6eX0sbi5tYWpvckV4dGVudChbWy0xODAsLTkwK1BhXSxbMTgwLDkwLVBhXV0pLm1pbm9yRXh0ZW50KFtbLTE4MCwtODAtUGFdLFsxODAsODArUGFdXSl9LG9hLmdlby5ncmVhdEFyYz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXtyZXR1cm57dHlwZTpcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczpbdHx8ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZXx8dS5hcHBseSh0aGlzLGFyZ3VtZW50cyldfX12YXIgdCxlLHI9TWUsdT14ZTtyZXR1cm4gbi5kaXN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBvYS5nZW8uZGlzdGFuY2UodHx8ci5hcHBseSh0aGlzLGFyZ3VtZW50cyksZXx8dS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSxuLnNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1lLHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9udWxsOmUsbik6cn0sbi50YXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9dCxlPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/bnVsbDp0LG4pOnV9LG4ucHJlY2lzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/bjowfSxufSxvYS5nZW8uaW50ZXJwb2xhdGU9ZnVuY3Rpb24obix0KXtyZXR1cm4gYmUoblswXSpJYSxuWzFdKklhLHRbMF0qSWEsdFsxXSpJYSl9LG9hLmdlby5sZW5ndGg9ZnVuY3Rpb24obil7cmV0dXJuIEpvPTAsb2EuZ2VvLnN0cmVhbShuLEdvKSxKb307dmFyIEpvLEdvPXtzcGhlcmU6Yixwb2ludDpiLGxpbmVTdGFydDpfZSxsaW5lRW5kOmIscG9seWdvblN0YXJ0OmIscG9seWdvbkVuZDpifSxLbz13ZShmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5zcXJ0KDIvKDErbikpfSxmdW5jdGlvbihuKXtyZXR1cm4gMipNYXRoLmFzaW4obi8yKX0pOyhvYS5nZW8uYXppbXV0aGFsRXF1YWxBcmVhPWZ1bmN0aW9uKCl7cmV0dXJuIGFlKEtvKX0pLnJhdz1Lbzt2YXIgUW89d2UoZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5hY29zKG4pO3JldHVybiB0JiZ0L01hdGguc2luKHQpfSx5KTsob2EuZ2VvLmF6aW11dGhhbEVxdWlkaXN0YW50PWZ1bmN0aW9uKCl7cmV0dXJuIGFlKFFvKX0pLnJhdz1Rbywob2EuZ2VvLmNvbmljQ29uZm9ybWFsPWZ1bmN0aW9uKCl7cmV0dXJuIFZ0KFNlKX0pLnJhdz1TZSwob2EuZ2VvLmNvbmljRXF1aWRpc3RhbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gVnQoa2UpfSkucmF3PWtlO3ZhciBubD13ZShmdW5jdGlvbihuKXtyZXR1cm4gMS9ufSxNYXRoLmF0YW4pOyhvYS5nZW8uZ25vbW9uaWM9ZnVuY3Rpb24oKXtyZXR1cm4gYWUobmwpfSkucmF3PW5sLE5lLmludmVydD1mdW5jdGlvbihuLHQpe3JldHVybltuLDIqTWF0aC5hdGFuKE1hdGguZXhwKHQpKS1PYV19LChvYS5nZW8ubWVyY2F0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gRWUoTmUpfSkucmF3PU5lO3ZhciB0bD13ZShmdW5jdGlvbigpe3JldHVybiAxfSxNYXRoLmFzaW4pOyhvYS5nZW8ub3J0aG9ncmFwaGljPWZ1bmN0aW9uKCl7cmV0dXJuIGFlKHRsKX0pLnJhdz10bDt2YXIgZWw9d2UoZnVuY3Rpb24obil7cmV0dXJuIDEvKDErbil9LGZ1bmN0aW9uKG4pe3JldHVybiAyKk1hdGguYXRhbihuKX0pOyhvYS5nZW8uc3RlcmVvZ3JhcGhpYz1mdW5jdGlvbigpe3JldHVybiBhZShlbCl9KS5yYXc9ZWwsQWUuaW52ZXJ0PWZ1bmN0aW9uKG4sdCl7cmV0dXJuWy10LDIqTWF0aC5hdGFuKE1hdGguZXhwKG4pKS1PYV19LChvYS5nZW8udHJhbnN2ZXJzZU1lcmNhdG9yPWZ1bmN0aW9uKCl7dmFyIG49RWUoQWUpLHQ9bi5jZW50ZXIsZT1uLnJvdGF0ZTtyZXR1cm4gbi5jZW50ZXI9ZnVuY3Rpb24obil7cmV0dXJuIG4/dChbLW5bMV0sblswXV0pOihuPXQoKSxbblsxXSwtblswXV0pfSxuLnJvdGF0ZT1mdW5jdGlvbihuKXtyZXR1cm4gbj9lKFtuWzBdLG5bMV0sbi5sZW5ndGg+Mj9uWzJdKzkwOjkwXSk6KG49ZSgpLFtuWzBdLG5bMV0sblsyXS05MF0pfSxlKFswLDAsOTBdKX0pLnJhdz1BZSxvYS5nZW9tPXt9LG9hLmdlb20uaHVsbD1mdW5jdGlvbihuKXtmdW5jdGlvbiB0KG4pe2lmKG4ubGVuZ3RoPDMpcmV0dXJuW107dmFyIHQsdT1FbihlKSxpPUVuKHIpLGE9bi5sZW5ndGgsbz1bXSxsPVtdO2Zvcih0PTA7YT50O3QrKylvLnB1c2goWyt1LmNhbGwodGhpcyxuW3RdLHQpLCtpLmNhbGwodGhpcyxuW3RdLHQpLHRdKTtmb3Ioby5zb3J0KHFlKSx0PTA7YT50O3QrKylsLnB1c2goW29bdF1bMF0sLW9bdF1bMV1dKTt2YXIgYz1MZShvKSxzPUxlKGwpLGY9c1swXT09PWNbMF0saD1zW3MubGVuZ3RoLTFdPT09Y1tjLmxlbmd0aC0xXSxnPVtdO2Zvcih0PWMubGVuZ3RoLTE7dD49MDstLXQpZy5wdXNoKG5bb1tjW3RdXVsyXV0pO2Zvcih0PStmO3Q8cy5sZW5ndGgtaDsrK3QpZy5wdXNoKG5bb1tzW3RdXVsyXV0pO3JldHVybiBnfXZhciBlPUNlLHI9emU7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dChuKToodC54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPW4sdCk6ZX0sdC55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPW4sdCk6cn0sdCl9LG9hLmdlb20ucG9seWdvbj1mdW5jdGlvbihuKXtyZXR1cm4gU2EobixybCksbn07dmFyIHJsPW9hLmdlb20ucG9seWdvbi5wcm90b3R5cGU9W107cmwuYXJlYT1mdW5jdGlvbigpe2Zvcih2YXIgbix0PS0xLGU9dGhpcy5sZW5ndGgscj10aGlzW2UtMV0sdT0wOysrdDxlOyluPXIscj10aGlzW3RdLHUrPW5bMV0qclswXS1uWzBdKnJbMV07cmV0dXJuLjUqdX0scmwuY2VudHJvaWQ9ZnVuY3Rpb24obil7dmFyIHQsZSxyPS0xLHU9dGhpcy5sZW5ndGgsaT0wLGE9MCxvPXRoaXNbdS0xXTtmb3IoYXJndW1lbnRzLmxlbmd0aHx8KG49LTEvKDYqdGhpcy5hcmVhKCkpKTsrK3I8dTspdD1vLG89dGhpc1tyXSxlPXRbMF0qb1sxXS1vWzBdKnRbMV0saSs9KHRbMF0rb1swXSkqZSxhKz0odFsxXStvWzFdKSplO3JldHVybltpKm4sYSpuXX0scmwuY2xpcD1mdW5jdGlvbihuKXtmb3IodmFyIHQsZSxyLHUsaSxhLG89RGUobiksbD0tMSxjPXRoaXMubGVuZ3RoLURlKHRoaXMpLHM9dGhpc1tjLTFdOysrbDxjOyl7Zm9yKHQ9bi5zbGljZSgpLG4ubGVuZ3RoPTAsdT10aGlzW2xdLGk9dFsocj10Lmxlbmd0aC1vKS0xXSxlPS0xOysrZTxyOylhPXRbZV0sVGUoYSxzLHUpPyhUZShpLHMsdSl8fG4ucHVzaChSZShpLGEscyx1KSksbi5wdXNoKGEpKTpUZShpLHMsdSkmJm4ucHVzaChSZShpLGEscyx1KSksaT1hO28mJm4ucHVzaChuWzBdKSxzPXV9cmV0dXJuIG59O3ZhciB1bCxpbCxhbCxvbCxsbCxjbD1bXSxzbD1bXTtZZS5wcm90b3R5cGUucHJlcGFyZT1mdW5jdGlvbigpe2Zvcih2YXIgbix0PXRoaXMuZWRnZXMsZT10Lmxlbmd0aDtlLS07KW49dFtlXS5lZGdlLG4uYiYmbi5hfHx0LnNwbGljZShlLDEpO3JldHVybiB0LnNvcnQoVmUpLHQubGVuZ3RofSx0ci5wcm90b3R5cGU9e3N0YXJ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRnZS5sPT09dGhpcy5zaXRlP3RoaXMuZWRnZS5hOnRoaXMuZWRnZS5ifSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lZGdlLmw9PT10aGlzLnNpdGU/dGhpcy5lZGdlLmI6dGhpcy5lZGdlLmF9fSxlci5wcm90b3R5cGU9e2luc2VydDpmdW5jdGlvbihuLHQpe3ZhciBlLHIsdTtpZihuKXtpZih0LlA9bix0Lk49bi5OLG4uTiYmKG4uTi5QPXQpLG4uTj10LG4uUil7Zm9yKG49bi5SO24uTDspbj1uLkw7bi5MPXR9ZWxzZSBuLlI9dDtlPW59ZWxzZSB0aGlzLl8/KG49YXIodGhpcy5fKSx0LlA9bnVsbCx0Lk49bixuLlA9bi5MPXQsZT1uKToodC5QPXQuTj1udWxsLHRoaXMuXz10LGU9bnVsbCk7Zm9yKHQuTD10LlI9bnVsbCx0LlU9ZSx0LkM9ITAsbj10O2UmJmUuQzspcj1lLlUsZT09PXIuTD8odT1yLlIsdSYmdS5DPyhlLkM9dS5DPSExLHIuQz0hMCxuPXIpOihuPT09ZS5SJiYodXIodGhpcyxlKSxuPWUsZT1uLlUpLGUuQz0hMSxyLkM9ITAsaXIodGhpcyxyKSkpOih1PXIuTCx1JiZ1LkM/KGUuQz11LkM9ITEsci5DPSEwLG49cik6KG49PT1lLkwmJihpcih0aGlzLGUpLG49ZSxlPW4uVSksZS5DPSExLHIuQz0hMCx1cih0aGlzLHIpKSksZT1uLlU7dGhpcy5fLkM9ITF9LHJlbW92ZTpmdW5jdGlvbihuKXtuLk4mJihuLk4uUD1uLlApLG4uUCYmKG4uUC5OPW4uTiksbi5OPW4uUD1udWxsO3ZhciB0LGUscix1PW4uVSxpPW4uTCxhPW4uUjtpZihlPWk/YT9hcihhKTppOmEsdT91Lkw9PT1uP3UuTD1lOnUuUj1lOnRoaXMuXz1lLGkmJmE/KHI9ZS5DLGUuQz1uLkMsZS5MPWksaS5VPWUsZSE9PWE/KHU9ZS5VLGUuVT1uLlUsbj1lLlIsdS5MPW4sZS5SPWEsYS5VPWUpOihlLlU9dSx1PWUsbj1lLlIpKToocj1uLkMsbj1lKSxuJiYobi5VPXUpLCFyKXtpZihuJiZuLkMpcmV0dXJuIHZvaWQobi5DPSExKTtkb3tpZihuPT09dGhpcy5fKWJyZWFrO2lmKG49PT11Lkwpe2lmKHQ9dS5SLHQuQyYmKHQuQz0hMSx1LkM9ITAsdXIodGhpcyx1KSx0PXUuUiksdC5MJiZ0LkwuQ3x8dC5SJiZ0LlIuQyl7dC5SJiZ0LlIuQ3x8KHQuTC5DPSExLHQuQz0hMCxpcih0aGlzLHQpLHQ9dS5SKSx0LkM9dS5DLHUuQz10LlIuQz0hMSx1cih0aGlzLHUpLG49dGhpcy5fO2JyZWFrfX1lbHNlIGlmKHQ9dS5MLHQuQyYmKHQuQz0hMSx1LkM9ITAsaXIodGhpcyx1KSx0PXUuTCksdC5MJiZ0LkwuQ3x8dC5SJiZ0LlIuQyl7dC5MJiZ0LkwuQ3x8KHQuUi5DPSExLHQuQz0hMCx1cih0aGlzLHQpLHQ9dS5MKSx0LkM9dS5DLHUuQz10LkwuQz0hMSxpcih0aGlzLHUpLG49dGhpcy5fO2JyZWFrfXQuQz0hMCxuPXUsdT11LlV9d2hpbGUoIW4uQyk7biYmKG4uQz0hMSl9fX0sb2EuZ2VvbS52b3Jvbm9pPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQobil7dmFyIHQ9bmV3IEFycmF5KG4ubGVuZ3RoKSxyPW9bMF1bMF0sdT1vWzBdWzFdLGk9b1sxXVswXSxhPW9bMV1bMV07cmV0dXJuIG9yKGUobiksbykuY2VsbHMuZm9yRWFjaChmdW5jdGlvbihlLG8pe3ZhciBsPWUuZWRnZXMsYz1lLnNpdGUscz10W29dPWwubGVuZ3RoP2wubWFwKGZ1bmN0aW9uKG4pe3ZhciB0PW4uc3RhcnQoKTtyZXR1cm5bdC54LHQueV19KTpjLng+PXImJmMueDw9aSYmYy55Pj11JiZjLnk8PWE/W1tyLGFdLFtpLGFdLFtpLHVdLFtyLHVdXTpbXTtzLnBvaW50PW5bb119KSx0fWZ1bmN0aW9uIGUobil7cmV0dXJuIG4ubWFwKGZ1bmN0aW9uKG4sdCl7cmV0dXJue3g6TWF0aC5yb3VuZChpKG4sdCkvUGEpKlBhLHk6TWF0aC5yb3VuZChhKG4sdCkvUGEpKlBhLGk6dH19KX12YXIgcj1DZSx1PXplLGk9cixhPXUsbz1mbDtyZXR1cm4gbj90KG4pOih0LmxpbmtzPWZ1bmN0aW9uKG4pe3JldHVybiBvcihlKG4pKS5lZGdlcy5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuIG4ubCYmbi5yfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybntzb3VyY2U6blt0LmwuaV0sdGFyZ2V0Om5bdC5yLmldfX0pfSx0LnRyaWFuZ2xlcz1mdW5jdGlvbihuKXt2YXIgdD1bXTtyZXR1cm4gb3IoZShuKSkuY2VsbHMuZm9yRWFjaChmdW5jdGlvbihlLHIpe2Zvcih2YXIgdSxpLGE9ZS5zaXRlLG89ZS5lZGdlcy5zb3J0KFZlKSxsPS0xLGM9by5sZW5ndGgscz1vW2MtMV0uZWRnZSxmPXMubD09PWE/cy5yOnMubDsrK2w8YzspdT1zLGk9ZixzPW9bbF0uZWRnZSxmPXMubD09PWE/cy5yOnMubCxyPGkuaSYmcjxmLmkmJmNyKGEsaSxmKTwwJiZ0LnB1c2goW25bcl0sbltpLmldLG5bZi5pXV0pfSksdH0sdC54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPUVuKHI9biksdCk6cn0sdC55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPUVuKHU9biksdCk6dX0sdC5jbGlwRXh0ZW50PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPW51bGw9PW4/Zmw6bix0KTpvPT09Zmw/bnVsbDpvfSx0LnNpemU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dC5jbGlwRXh0ZW50KG4mJltbMCwwXSxuXSk6bz09PWZsP251bGw6byYmb1sxXX0sdCl9O3ZhciBmbD1bWy0xZTYsLTFlNl0sWzFlNiwxZTZdXTtvYS5nZW9tLmRlbGF1bmF5PWZ1bmN0aW9uKG4pe3JldHVybiBvYS5nZW9tLnZvcm9ub2koKS50cmlhbmdsZXMobil9LG9hLmdlb20ucXVhZHRyZWU9ZnVuY3Rpb24obix0LGUscix1KXtmdW5jdGlvbiBpKG4pe2Z1bmN0aW9uIGkobix0LGUscix1LGksYSxvKXtpZighaXNOYU4oZSkmJiFpc05hTihyKSlpZihuLmxlYWYpe3ZhciBsPW4ueCxzPW4ueTtpZihudWxsIT1sKWlmKE1hKGwtZSkrTWEocy1yKTwuMDEpYyhuLHQsZSxyLHUsaSxhLG8pO2Vsc2V7dmFyIGY9bi5wb2ludDtuLng9bi55PW4ucG9pbnQ9bnVsbCxjKG4sZixsLHMsdSxpLGEsbyksYyhuLHQsZSxyLHUsaSxhLG8pfWVsc2Ugbi54PWUsbi55PXIsbi5wb2ludD10fWVsc2UgYyhuLHQsZSxyLHUsaSxhLG8pfWZ1bmN0aW9uIGMobix0LGUscix1LGEsbyxsKXt2YXIgYz0uNSoodStvKSxzPS41KihhK2wpLGY9ZT49YyxoPXI+PXMsZz1oPDwxfGY7bi5sZWFmPSExLG49bi5ub2Rlc1tnXXx8KG4ubm9kZXNbZ109aHIoKSksZj91PWM6bz1jLGg/YT1zOmw9cyxpKG4sdCxlLHIsdSxhLG8sbCl9dmFyIHMsZixoLGcscCx2LGQsbSx5LE09RW4obykseD1FbihsKTtpZihudWxsIT10KXY9dCxkPWUsbT1yLHk9dTtlbHNlIGlmKG09eT0tKHY9ZD0xLzApLGY9W10saD1bXSxwPW4ubGVuZ3RoLGEpZm9yKGc9MDtwPmc7KytnKXM9bltnXSxzLng8diYmKHY9cy54KSxzLnk8ZCYmKGQ9cy55KSxzLng+bSYmKG09cy54KSxzLnk+eSYmKHk9cy55KSxmLnB1c2gocy54KSxoLnB1c2gocy55KTtlbHNlIGZvcihnPTA7cD5nOysrZyl7dmFyIGI9K00ocz1uW2ddLGcpLF89K3gocyxnKTt2PmImJih2PWIpLGQ+XyYmKGQ9XyksYj5tJiYobT1iKSxfPnkmJih5PV8pLGYucHVzaChiKSxoLnB1c2goXyl9dmFyIHc9bS12LFM9eS1kO3c+Uz95PWQrdzptPXYrUzt2YXIgaz1ocigpO2lmKGsuYWRkPWZ1bmN0aW9uKG4pe2koayxuLCtNKG4sKytnKSwreChuLGcpLHYsZCxtLHkpfSxrLnZpc2l0PWZ1bmN0aW9uKG4pe2dyKG4sayx2LGQsbSx5KX0say5maW5kPWZ1bmN0aW9uKG4pe3JldHVybiBwcihrLG5bMF0sblsxXSx2LGQsbSx5KX0sZz0tMSxudWxsPT10KXtmb3IoOysrZzxwOylpKGssbltnXSxmW2ddLGhbZ10sdixkLG0seSk7LS1nfWVsc2Ugbi5mb3JFYWNoKGsuYWRkKTtyZXR1cm4gZj1oPW49cz1udWxsLGt9dmFyIGEsbz1DZSxsPXplO3JldHVybihhPWFyZ3VtZW50cy5sZW5ndGgpPyhvPXNyLGw9ZnIsMz09PWEmJih1PWUscj10LGU9dD0wKSxpKG4pKTooaS54PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPW4saSk6b30saS55PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhsPW4saSk6bH0saS5leHRlbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG51bGw9PW4/dD1lPXI9dT1udWxsOih0PStuWzBdWzBdLGU9K25bMF1bMV0scj0rblsxXVswXSx1PStuWzFdWzFdKSxpKTpudWxsPT10P251bGw6W1t0LGVdLFtyLHVdXX0saS5zaXplPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhudWxsPT1uP3Q9ZT1yPXU9bnVsbDoodD1lPTAscj0rblswXSx1PStuWzFdKSxpKTpudWxsPT10P251bGw6W3ItdCx1LWVdfSxpKX0sb2EuaW50ZXJwb2xhdGVSZ2I9dnIsb2EuaW50ZXJwb2xhdGVPYmplY3Q9ZHIsb2EuaW50ZXJwb2xhdGVOdW1iZXI9bXIsb2EuaW50ZXJwb2xhdGVTdHJpbmc9eXI7dmFyIGhsPS9bLStdPyg/OlxcZCtcXC4/XFxkKnxcXC4/XFxkKykoPzpbZUVdWy0rXT9cXGQrKT8vZyxnbD1uZXcgUmVnRXhwKGhsLnNvdXJjZSxcImdcIik7b2EuaW50ZXJwb2xhdGU9TXIsb2EuaW50ZXJwb2xhdG9ycz1bZnVuY3Rpb24obix0KXt2YXIgZT10eXBlb2YgdDtyZXR1cm4oXCJzdHJpbmdcIj09PWU/dW8uaGFzKHQudG9Mb3dlckNhc2UoKSl8fC9eKCN8cmdiXFwofGhzbFxcKCkvaS50ZXN0KHQpP3ZyOnlyOnQgaW5zdGFuY2VvZiBvbj92cjpBcnJheS5pc0FycmF5KHQpP3hyOlwib2JqZWN0XCI9PT1lJiZpc05hTih0KT9kcjptcikobix0KX1dLG9hLmludGVycG9sYXRlQXJyYXk9eHI7dmFyIHBsPWZ1bmN0aW9uKCl7cmV0dXJuIHl9LHZsPW9hLm1hcCh7bGluZWFyOnBsLHBvbHk6RXIscXVhZDpmdW5jdGlvbigpe3JldHVybiBTcn0sY3ViaWM6ZnVuY3Rpb24oKXtyZXR1cm4ga3J9LHNpbjpmdW5jdGlvbigpe3JldHVybiBBcn0sZXhwOmZ1bmN0aW9uKCl7cmV0dXJuIENyfSxjaXJjbGU6ZnVuY3Rpb24oKXtyZXR1cm4genJ9LGVsYXN0aWM6THIsYmFjazpxcixib3VuY2U6ZnVuY3Rpb24oKXtyZXR1cm4gVHJ9fSksZGw9b2EubWFwKHtcImluXCI6eSxvdXQ6X3IsXCJpbi1vdXRcIjp3cixcIm91dC1pblwiOmZ1bmN0aW9uKG4pe3JldHVybiB3cihfcihuKSl9fSk7b2EuZWFzZT1mdW5jdGlvbihuKXt2YXIgdD1uLmluZGV4T2YoXCItXCIpLGU9dD49MD9uLnNsaWNlKDAsdCk6bixyPXQ+PTA/bi5zbGljZSh0KzEpOlwiaW5cIjtyZXR1cm4gZT12bC5nZXQoZSl8fHBsLHI9ZGwuZ2V0KHIpfHx5LGJyKHIoZS5hcHBseShudWxsLGxhLmNhbGwoYXJndW1lbnRzLDEpKSkpfSxvYS5pbnRlcnBvbGF0ZUhjbD1ScixvYS5pbnRlcnBvbGF0ZUhzbD1EcixvYS5pbnRlcnBvbGF0ZUxhYj1QcixvYS5pbnRlcnBvbGF0ZVJvdW5kPVVyLG9hLnRyYW5zZm9ybT1mdW5jdGlvbihuKXt2YXIgdD1zYS5jcmVhdGVFbGVtZW50TlMob2EubnMucHJlZml4LnN2ZyxcImdcIik7cmV0dXJuKG9hLnRyYW5zZm9ybT1mdW5jdGlvbihuKXtpZihudWxsIT1uKXt0LnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLG4pO3ZhciBlPXQudHJhbnNmb3JtLmJhc2VWYWwuY29uc29saWRhdGUoKX1yZXR1cm4gbmV3IGpyKGU/ZS5tYXRyaXg6bWwpfSkobil9LGpyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwidHJhbnNsYXRlKFwiK3RoaXMudHJhbnNsYXRlK1wiKXJvdGF0ZShcIit0aGlzLnJvdGF0ZStcIilza2V3WChcIit0aGlzLnNrZXcrXCIpc2NhbGUoXCIrdGhpcy5zY2FsZStcIilcIn07dmFyIG1sPXthOjEsYjowLGM6MCxkOjEsZTowLGY6MH07b2EuaW50ZXJwb2xhdGVUcmFuc2Zvcm09JHIsb2EubGF5b3V0PXt9LG9hLmxheW91dC5idW5kbGU9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24obil7Zm9yKHZhciB0PVtdLGU9LTEscj1uLmxlbmd0aDsrK2U8cjspdC5wdXNoKEpyKG5bZV0pKTtyZXR1cm4gdH19LG9hLmxheW91dC5jaG9yZD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt2YXIgbixjLGYsaCxnLHA9e30sdj1bXSxkPW9hLnJhbmdlKGkpLG09W107Zm9yKGU9W10scj1bXSxuPTAsaD0tMTsrK2g8aTspe2ZvcihjPTAsZz0tMTsrK2c8aTspYys9dVtoXVtnXTt2LnB1c2goYyksbS5wdXNoKG9hLnJhbmdlKGkpKSxuKz1jfWZvcihhJiZkLnNvcnQoZnVuY3Rpb24obix0KXtyZXR1cm4gYSh2W25dLHZbdF0pfSksbyYmbS5mb3JFYWNoKGZ1bmN0aW9uKG4sdCl7bi5zb3J0KGZ1bmN0aW9uKG4sZSl7cmV0dXJuIG8odVt0XVtuXSx1W3RdW2VdKX0pfSksbj0oRmEtcyppKS9uLGM9MCxoPS0xOysraDxpOyl7Zm9yKGY9YyxnPS0xOysrZzxpOyl7dmFyIHk9ZFtoXSxNPW1beV1bZ10seD11W3ldW01dLGI9YyxfPWMrPXgqbjtwW3krXCItXCIrTV09e2luZGV4Onksc3ViaW5kZXg6TSxzdGFydEFuZ2xlOmIsZW5kQW5nbGU6Xyx2YWx1ZTp4fX1yW3ldPXtpbmRleDp5LHN0YXJ0QW5nbGU6ZixlbmRBbmdsZTpjLHZhbHVlOnZbeV19LGMrPXN9Zm9yKGg9LTE7KytoPGk7KWZvcihnPWgtMTsrK2c8aTspe3ZhciB3PXBbaCtcIi1cIitnXSxTPXBbZytcIi1cIitoXTsody52YWx1ZXx8Uy52YWx1ZSkmJmUucHVzaCh3LnZhbHVlPFMudmFsdWU/e3NvdXJjZTpTLHRhcmdldDp3fTp7c291cmNlOncsdGFyZ2V0OlN9KX1sJiZ0KCl9ZnVuY3Rpb24gdCgpe2Uuc29ydChmdW5jdGlvbihuLHQpe3JldHVybiBsKChuLnNvdXJjZS52YWx1ZStuLnRhcmdldC52YWx1ZSkvMiwodC5zb3VyY2UudmFsdWUrdC50YXJnZXQudmFsdWUpLzIpfSl9dmFyIGUscix1LGksYSxvLGwsYz17fSxzPTA7cmV0dXJuIGMubWF0cml4PWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPSh1PW4pJiZ1Lmxlbmd0aCxlPXI9bnVsbCxjKTp1fSxjLnBhZGRpbmc9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHM9bixlPXI9bnVsbCxjKTpzfSxjLnNvcnRHcm91cHM9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9bixlPXI9bnVsbCxjKTphfSxjLnNvcnRTdWJncm91cHM9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89bixlPW51bGwsYyk6b30sYy5zb3J0Q2hvcmRzPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhsPW4sZSYmdCgpLGMpOmx9LGMuY2hvcmRzPWZ1bmN0aW9uKCl7cmV0dXJuIGV8fG4oKSxlfSxjLmdyb3Vwcz1mdW5jdGlvbigpe3JldHVybiByfHxuKCkscn0sY30sb2EubGF5b3V0LmZvcmNlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuKXtyZXR1cm4gZnVuY3Rpb24odCxlLHIsdSl7aWYodC5wb2ludCE9PW4pe3ZhciBpPXQuY3gtbi54LGE9dC5jeS1uLnksbz11LWUsbD1pKmkrYSphO2lmKGw+bypvL20pe2lmKHY+bCl7dmFyIGM9dC5jaGFyZ2UvbDtuLnB4LT1pKmMsbi5weS09YSpjfXJldHVybiEwfWlmKHQucG9pbnQmJmwmJnY+bCl7dmFyIGM9dC5wb2ludENoYXJnZS9sO24ucHgtPWkqYyxuLnB5LT1hKmN9fXJldHVybiF0LmNoYXJnZX19ZnVuY3Rpb24gdChuKXtuLnB4PW9hLmV2ZW50Lngsbi5weT1vYS5ldmVudC55LGwucmVzdW1lKCl9dmFyIGUscix1LGksYSxvLGw9e30sYz1vYS5kaXNwYXRjaChcInN0YXJ0XCIsXCJ0aWNrXCIsXCJlbmRcIikscz1bMSwxXSxmPS45LGg9eWwsZz1NbCxwPS0zMCx2PXhsLGQ9LjEsbT0uNjQsTT1bXSx4PVtdO3JldHVybiBsLnRpY2s9ZnVuY3Rpb24oKXtpZigodSo9Ljk5KTwuMDA1KXJldHVybiBlPW51bGwsYy5lbmQoe3R5cGU6XCJlbmRcIixhbHBoYTp1PTB9KSwhMDt2YXIgdCxyLGwsaCxnLHYsbSx5LGIsXz1NLmxlbmd0aCx3PXgubGVuZ3RoO2ZvcihyPTA7dz5yOysrcilsPXhbcl0saD1sLnNvdXJjZSxnPWwudGFyZ2V0LHk9Zy54LWgueCxiPWcueS1oLnksKHY9eSp5K2IqYikmJih2PXUqYVtyXSooKHY9TWF0aC5zcXJ0KHYpKS1pW3JdKS92LHkqPXYsYio9dixnLngtPXkqKG09aC53ZWlnaHQrZy53ZWlnaHQ/aC53ZWlnaHQvKGgud2VpZ2h0K2cud2VpZ2h0KTouNSksZy55LT1iKm0saC54Kz15KihtPTEtbSksaC55Kz1iKm0pO2lmKChtPXUqZCkmJih5PXNbMF0vMixiPXNbMV0vMixyPS0xLG0pKWZvcig7KytyPF87KWw9TVtyXSxsLngrPSh5LWwueCkqbSxsLnkrPShiLWwueSkqbTtpZihwKWZvcihydSh0PW9hLmdlb20ucXVhZHRyZWUoTSksdSxvKSxyPS0xOysrcjxfOykobD1NW3JdKS5maXhlZHx8dC52aXNpdChuKGwpKTtmb3Iocj0tMTsrK3I8XzspbD1NW3JdLGwuZml4ZWQ/KGwueD1sLnB4LGwueT1sLnB5KToobC54LT0obC5weC0obC5weD1sLngpKSpmLGwueS09KGwucHktKGwucHk9bC55KSkqZik7Yy50aWNrKHt0eXBlOlwidGlja1wiLGFscGhhOnV9KX0sbC5ub2Rlcz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oTT1uLGwpOk19LGwubGlua3M9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHg9bixsKTp4fSxsLnNpemU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHM9bixsKTpzfSxsLmxpbmtEaXN0YW5jZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sbCk6aH0sbC5kaXN0YW5jZT1sLmxpbmtEaXN0YW5jZSxsLmxpbmtTdHJlbmd0aD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sbCk6Z30sbC5mcmljdGlvbj1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZj0rbixsKTpmfSxsLmNoYXJnZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP246K24sbCk6cH0sbC5jaGFyZ2VEaXN0YW5jZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odj1uKm4sbCk6TWF0aC5zcXJ0KHYpfSxsLmdyYXZpdHk9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGQ9K24sbCk6ZH0sbC50aGV0YT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obT1uKm4sbCk6TWF0aC5zcXJ0KG0pfSxsLmFscGhhPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPStuLHU/bj4wP3U9bjooZS5jPW51bGwsZS50PU5hTixlPW51bGwsYy5lbmQoe3R5cGU6XCJlbmRcIixhbHBoYTp1PTB9KSk6bj4wJiYoYy5zdGFydCh7dHlwZTpcInN0YXJ0XCIsYWxwaGE6dT1ufSksZT1xbihsLnRpY2spKSxsKTp1fSxsLnN0YXJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHIpe2lmKCFlKXtmb3IoZT1uZXcgQXJyYXkodSksbD0wO3U+bDsrK2wpZVtsXT1bXTtmb3IobD0wO2M+bDsrK2wpe3ZhciBpPXhbbF07ZVtpLnNvdXJjZS5pbmRleF0ucHVzaChpLnRhcmdldCksZVtpLnRhcmdldC5pbmRleF0ucHVzaChpLnNvdXJjZSl9fWZvcih2YXIgYSxvPWVbdF0sbD0tMSxzPW8ubGVuZ3RoOysrbDxzOylpZighaXNOYU4oYT1vW2xdW25dKSlyZXR1cm4gYTtyZXR1cm4gTWF0aC5yYW5kb20oKSpyfXZhciB0LGUscix1PU0ubGVuZ3RoLGM9eC5sZW5ndGgsZj1zWzBdLHY9c1sxXTtmb3IodD0wO3U+dDsrK3QpKHI9TVt0XSkuaW5kZXg9dCxyLndlaWdodD0wO2Zvcih0PTA7Yz50OysrdClyPXhbdF0sXCJudW1iZXJcIj09dHlwZW9mIHIuc291cmNlJiYoci5zb3VyY2U9TVtyLnNvdXJjZV0pLFwibnVtYmVyXCI9PXR5cGVvZiByLnRhcmdldCYmKHIudGFyZ2V0PU1bci50YXJnZXRdKSwrK3Iuc291cmNlLndlaWdodCwrK3IudGFyZ2V0LndlaWdodDtmb3IodD0wO3U+dDsrK3Qpcj1NW3RdLGlzTmFOKHIueCkmJihyLng9bihcInhcIixmKSksaXNOYU4oci55KSYmKHIueT1uKFwieVwiLHYpKSxpc05hTihyLnB4KSYmKHIucHg9ci54KSxpc05hTihyLnB5KSYmKHIucHk9ci55KTtpZihpPVtdLFwiZnVuY3Rpb25cIj09dHlwZW9mIGgpZm9yKHQ9MDtjPnQ7Kyt0KWlbdF09K2guY2FsbCh0aGlzLHhbdF0sdCk7ZWxzZSBmb3IodD0wO2M+dDsrK3QpaVt0XT1oO2lmKGE9W10sXCJmdW5jdGlvblwiPT10eXBlb2YgZylmb3IodD0wO2M+dDsrK3QpYVt0XT0rZy5jYWxsKHRoaXMseFt0XSx0KTtlbHNlIGZvcih0PTA7Yz50OysrdClhW3RdPWc7aWYobz1bXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBwKWZvcih0PTA7dT50OysrdClvW3RdPStwLmNhbGwodGhpcyxNW3RdLHQpO2Vsc2UgZm9yKHQ9MDt1PnQ7Kyt0KW9bdF09cDtyZXR1cm4gbC5yZXN1bWUoKX0sbC5yZXN1bWU9ZnVuY3Rpb24oKXtyZXR1cm4gbC5hbHBoYSguMSl9LGwuc3RvcD1mdW5jdGlvbigpe3JldHVybiBsLmFscGhhKDApfSxsLmRyYWc9ZnVuY3Rpb24oKXtyZXR1cm4gcnx8KHI9b2EuYmVoYXZpb3IuZHJhZygpLm9yaWdpbih5KS5vbihcImRyYWdzdGFydC5mb3JjZVwiLFFyKS5vbihcImRyYWcuZm9yY2VcIix0KS5vbihcImRyYWdlbmQuZm9yY2VcIixudSkpLGFyZ3VtZW50cy5sZW5ndGg/dm9pZCB0aGlzLm9uKFwibW91c2VvdmVyLmZvcmNlXCIsdHUpLm9uKFwibW91c2VvdXQuZm9yY2VcIixldSkuY2FsbChyKTpyfSxvYS5yZWJpbmQobCxjLFwib25cIil9O3ZhciB5bD0yMCxNbD0xLHhsPTEvMDtvYS5sYXlvdXQuaGllcmFyY2h5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih1KXt2YXIgaSxhPVt1XSxvPVtdO2Zvcih1LmRlcHRoPTA7bnVsbCE9KGk9YS5wb3AoKSk7KWlmKG8ucHVzaChpKSwoYz1lLmNhbGwobixpLGkuZGVwdGgpKSYmKGw9Yy5sZW5ndGgpKXtmb3IodmFyIGwsYyxzOy0tbD49MDspYS5wdXNoKHM9Y1tsXSkscy5wYXJlbnQ9aSxzLmRlcHRoPWkuZGVwdGgrMTtyJiYoaS52YWx1ZT0wKSxpLmNoaWxkcmVuPWN9ZWxzZSByJiYoaS52YWx1ZT0rci5jYWxsKG4saSxpLmRlcHRoKXx8MCksZGVsZXRlIGkuY2hpbGRyZW47cmV0dXJuIGF1KHUsZnVuY3Rpb24obil7dmFyIGUsdTt0JiYoZT1uLmNoaWxkcmVuKSYmZS5zb3J0KHQpLHImJih1PW4ucGFyZW50KSYmKHUudmFsdWUrPW4udmFsdWUpfSksb312YXIgdD1jdSxlPW91LHI9bHU7cmV0dXJuIG4uc29ydD1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1lLG4pOnR9LG4uY2hpbGRyZW49ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLnZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPXQsbik6cn0sbi5yZXZhbHVlPWZ1bmN0aW9uKHQpe3JldHVybiByJiYoaXUodCxmdW5jdGlvbihuKXtuLmNoaWxkcmVuJiYobi52YWx1ZT0wKX0pLGF1KHQsZnVuY3Rpb24odCl7dmFyIGU7dC5jaGlsZHJlbnx8KHQudmFsdWU9K3IuY2FsbChuLHQsdC5kZXB0aCl8fDApLChlPXQucGFyZW50KSYmKGUudmFsdWUrPXQudmFsdWUpfSkpLHR9LG59LG9hLmxheW91dC5wYXJ0aXRpb249ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKHQsZSxyLHUpe3ZhciBpPXQuY2hpbGRyZW47aWYodC54PWUsdC55PXQuZGVwdGgqdSx0LmR4PXIsdC5keT11LGkmJihhPWkubGVuZ3RoKSl7dmFyIGEsbyxsLGM9LTE7Zm9yKHI9dC52YWx1ZT9yL3QudmFsdWU6MDsrK2M8YTspbihvPWlbY10sZSxsPW8udmFsdWUqcix1KSxlKz1sfX1mdW5jdGlvbiB0KG4pe3ZhciBlPW4uY2hpbGRyZW4scj0wO2lmKGUmJih1PWUubGVuZ3RoKSlmb3IodmFyIHUsaT0tMTsrK2k8dTspcj1NYXRoLm1heChyLHQoZVtpXSkpO3JldHVybiAxK3J9ZnVuY3Rpb24gZShlLGkpe3ZhciBhPXIuY2FsbCh0aGlzLGUsaSk7cmV0dXJuIG4oYVswXSwwLHVbMF0sdVsxXS90KGFbMF0pKSxhfXZhciByPW9hLmxheW91dC5oaWVyYXJjaHkoKSx1PVsxLDFdO3JldHVybiBlLnNpemU9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHU9bixlKTp1fSx1dShlLHIpfSxvYS5sYXlvdXQucGllPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihhKXt2YXIgbyxsPWEubGVuZ3RoLGM9YS5tYXAoZnVuY3Rpb24oZSxyKXtyZXR1cm4rdC5jYWxsKG4sZSxyKX0pLHM9KyhcImZ1bmN0aW9uXCI9PXR5cGVvZiByP3IuYXBwbHkodGhpcyxhcmd1bWVudHMpOnIpLGY9KFwiZnVuY3Rpb25cIj09dHlwZW9mIHU/dS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dSktcyxoPU1hdGgubWluKE1hdGguYWJzKGYpL2wsKyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpOmkpKSxnPWgqKDA+Zj8tMToxKSxwPW9hLnN1bShjKSx2PXA/KGYtbCpnKS9wOjAsZD1vYS5yYW5nZShsKSxtPVtdO3JldHVybiBudWxsIT1lJiZkLnNvcnQoZT09PWJsP2Z1bmN0aW9uKG4sdCl7cmV0dXJuIGNbdF0tY1tuXX06ZnVuY3Rpb24obix0KXtyZXR1cm4gZShhW25dLGFbdF0pfSksZC5mb3JFYWNoKGZ1bmN0aW9uKG4pe21bbl09e2RhdGE6YVtuXSx2YWx1ZTpvPWNbbl0sc3RhcnRBbmdsZTpzLGVuZEFuZ2xlOnMrPW8qditnLHBhZEFuZ2xlOmh9fSksbX12YXIgdD1OdW1iZXIsZT1ibCxyPTAsdT1GYSxpPTA7cmV0dXJuIG4udmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ZSxuKTp0fSxuLnNvcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLnN0YXJ0QW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCxuKTpyfSxuLmVuZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQsbik6dX0sbi5wYWRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT10LG4pOml9LG59O3ZhciBibD17fTtvYS5sYXlvdXQuc3RhY2s9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG8sbCl7aWYoIShoPW8ubGVuZ3RoKSlyZXR1cm4gbzt2YXIgYz1vLm1hcChmdW5jdGlvbihlLHIpe3JldHVybiB0LmNhbGwobixlLHIpfSkscz1jLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5tYXAoZnVuY3Rpb24odCxlKXtyZXR1cm5baS5jYWxsKG4sdCxlKSxhLmNhbGwobix0LGUpXX0pfSksZj1lLmNhbGwobixzLGwpO2M9b2EucGVybXV0ZShjLGYpLHM9b2EucGVybXV0ZShzLGYpO3ZhciBoLGcscCx2LGQ9ci5jYWxsKG4scyxsKSxtPWNbMF0ubGVuZ3RoO2ZvcihwPTA7bT5wOysrcClmb3IodS5jYWxsKG4sY1swXVtwXSx2PWRbcF0sc1swXVtwXVsxXSksZz0xO2g+ZzsrK2cpdS5jYWxsKG4sY1tnXVtwXSx2Kz1zW2ctMV1bcF1bMV0sc1tnXVtwXVsxXSk7cmV0dXJuIG99dmFyIHQ9eSxlPXB1LHI9dnUsdT1ndSxpPWZ1LGE9aHU7cmV0dXJuIG4udmFsdWVzPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PWUsbik6dH0sbi5vcmRlcj1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6X2wuZ2V0KHQpfHxwdSxuKTplfSxuLm9mZnNldD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6d2wuZ2V0KHQpfHx2dSxuKTpyfSxuLng9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGk9dCxuKTppfSxuLnk9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGE9dCxuKTphfSxuLm91dD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT10LG4pOnV9LG59O3ZhciBfbD1vYS5tYXAoe1wiaW5zaWRlLW91dFwiOmZ1bmN0aW9uKG4pe3ZhciB0LGUscj1uLmxlbmd0aCx1PW4ubWFwKGR1KSxpPW4ubWFwKG11KSxhPW9hLnJhbmdlKHIpLnNvcnQoZnVuY3Rpb24obix0KXtyZXR1cm4gdVtuXS11W3RdfSksbz0wLGw9MCxjPVtdLHM9W107Zm9yKHQ9MDtyPnQ7Kyt0KWU9YVt0XSxsPm8/KG8rPWlbZV0sYy5wdXNoKGUpKToobCs9aVtlXSxzLnB1c2goZSkpO3JldHVybiBzLnJldmVyc2UoKS5jb25jYXQoYyl9LHJldmVyc2U6ZnVuY3Rpb24obil7cmV0dXJuIG9hLnJhbmdlKG4ubGVuZ3RoKS5yZXZlcnNlKCl9LFwiZGVmYXVsdFwiOnB1fSksd2w9b2EubWFwKHtzaWxob3VldHRlOmZ1bmN0aW9uKG4pe3ZhciB0LGUscix1PW4ubGVuZ3RoLGk9blswXS5sZW5ndGgsYT1bXSxvPTAsbD1bXTtmb3IoZT0wO2k+ZTsrK2Upe2Zvcih0PTAscj0wO3U+dDt0Kyspcis9blt0XVtlXVsxXTtyPm8mJihvPXIpLGEucHVzaChyKX1mb3IoZT0wO2k+ZTsrK2UpbFtlXT0oby1hW2VdKS8yO3JldHVybiBsfSx3aWdnbGU6ZnVuY3Rpb24obil7dmFyIHQsZSxyLHUsaSxhLG8sbCxjLHM9bi5sZW5ndGgsZj1uWzBdLGg9Zi5sZW5ndGgsZz1bXTtmb3IoZ1swXT1sPWM9MCxlPTE7aD5lOysrZSl7Zm9yKHQ9MCx1PTA7cz50OysrdCl1Kz1uW3RdW2VdWzFdO2Zvcih0PTAsaT0wLG89ZltlXVswXS1mW2UtMV1bMF07cz50OysrdCl7Zm9yKHI9MCxhPShuW3RdW2VdWzFdLW5bdF1bZS0xXVsxXSkvKDIqbyk7dD5yOysrcilhKz0obltyXVtlXVsxXS1uW3JdW2UtMV1bMV0pL287aSs9YSpuW3RdW2VdWzFdfWdbZV09bC09dT9pL3UqbzowLGM+bCYmKGM9bCl9Zm9yKGU9MDtoPmU7KytlKWdbZV0tPWM7cmV0dXJuIGd9LGV4cGFuZDpmdW5jdGlvbihuKXt2YXIgdCxlLHIsdT1uLmxlbmd0aCxpPW5bMF0ubGVuZ3RoLGE9MS91LG89W107Zm9yKGU9MDtpPmU7KytlKXtmb3IodD0wLHI9MDt1PnQ7dCsrKXIrPW5bdF1bZV1bMV07aWYocilmb3IodD0wO3U+dDt0Kyspblt0XVtlXVsxXS89cjtlbHNlIGZvcih0PTA7dT50O3QrKyluW3RdW2VdWzFdPWF9Zm9yKGU9MDtpPmU7KytlKW9bZV09MDtyZXR1cm4gb30semVybzp2dX0pO29hLmxheW91dC5oaXN0b2dyYW09ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4saSl7Zm9yKHZhciBhLG8sbD1bXSxjPW4ubWFwKGUsdGhpcykscz1yLmNhbGwodGhpcyxjLGkpLGY9dS5jYWxsKHRoaXMscyxjLGkpLGk9LTEsaD1jLmxlbmd0aCxnPWYubGVuZ3RoLTEscD10PzE6MS9oOysraTxnOylhPWxbaV09W10sYS5keD1mW2krMV0tKGEueD1mW2ldKSxhLnk9MDtpZihnPjApZm9yKGk9LTE7KytpPGg7KW89Y1tpXSxvPj1zWzBdJiZvPD1zWzFdJiYoYT1sW29hLmJpc2VjdChmLG8sMSxnKS0xXSxhLnkrPXAsYS5wdXNoKG5baV0pKTtyZXR1cm4gbH12YXIgdD0hMCxlPU51bWJlcixyPWJ1LHU9TXU7cmV0dXJuIG4udmFsdWU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLnJhbmdlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPUVuKHQpLG4pOnJ9LG4uYmlucz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odT1cIm51bWJlclwiPT10eXBlb2YgdD9mdW5jdGlvbihuKXtyZXR1cm4geHUobix0KX06RW4odCksbik6dX0sbi5mcmVxdWVuY3k9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ISFlLG4pOnR9LG59LG9hLmxheW91dC5wYWNrPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLGkpe3ZhciBhPWUuY2FsbCh0aGlzLG4saSksbz1hWzBdLGw9dVswXSxjPXVbMV0scz1udWxsPT10P01hdGguc3FydDpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdH07aWYoby54PW8ueT0wLGF1KG8sZnVuY3Rpb24obil7bi5yPStzKG4udmFsdWUpfSksYXUobyxOdSkscil7dmFyIGY9cioodD8xOk1hdGgubWF4KDIqby5yL2wsMipvLnIvYykpLzI7YXUobyxmdW5jdGlvbihuKXtuLnIrPWZ9KSxhdShvLE51KSxhdShvLGZ1bmN0aW9uKG4pe24uci09Zn0pfXJldHVybiBDdShvLGwvMixjLzIsdD8xOjEvTWF0aC5tYXgoMipvLnIvbCwyKm8uci9jKSksYX12YXIgdCxlPW9hLmxheW91dC5oaWVyYXJjaHkoKS5zb3J0KF91KSxyPTAsdT1bMSwxXTtyZXR1cm4gbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PXQsbik6dX0sbi5yYWRpdXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9bnVsbD09ZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOitlLG4pOnR9LG4ucGFkZGluZz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj0rdCxuKTpyfSx1dShuLGUpfSxvYS5sYXlvdXQudHJlZT1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obix1KXt2YXIgcz1hLmNhbGwodGhpcyxuLHUpLGY9c1swXSxoPXQoZik7aWYoYXUoaCxlKSxoLnBhcmVudC5tPS1oLnosaXUoaCxyKSxjKWl1KGYsaSk7ZWxzZXt2YXIgZz1mLHA9Zix2PWY7aXUoZixmdW5jdGlvbihuKXtuLng8Zy54JiYoZz1uKSxuLng+cC54JiYocD1uKSxuLmRlcHRoPnYuZGVwdGgmJih2PW4pfSk7dmFyIGQ9byhnLHApLzItZy54LG09bFswXS8ocC54K28ocCxnKS8yK2QpLHk9bFsxXS8odi5kZXB0aHx8MSk7aXUoZixmdW5jdGlvbihuKXtuLng9KG4ueCtkKSptLG4ueT1uLmRlcHRoKnl9KX1yZXR1cm4gc31mdW5jdGlvbiB0KG4pe2Zvcih2YXIgdCxlPXtBOm51bGwsY2hpbGRyZW46W25dfSxyPVtlXTtudWxsIT0odD1yLnBvcCgpKTspZm9yKHZhciB1LGk9dC5jaGlsZHJlbixhPTAsbz1pLmxlbmd0aDtvPmE7KythKXIucHVzaCgoaVthXT11PXtfOmlbYV0scGFyZW50OnQsY2hpbGRyZW46KHU9aVthXS5jaGlsZHJlbikmJnUuc2xpY2UoKXx8W10sQTpudWxsLGE6bnVsbCx6OjAsbTowLGM6MCxzOjAsdDpudWxsLGk6YX0pLmE9dSk7cmV0dXJuIGUuY2hpbGRyZW5bMF19ZnVuY3Rpb24gZShuKXt2YXIgdD1uLmNoaWxkcmVuLGU9bi5wYXJlbnQuY2hpbGRyZW4scj1uLmk/ZVtuLmktMV06bnVsbDtpZih0Lmxlbmd0aCl7RHUobik7dmFyIGk9KHRbMF0ueit0W3QubGVuZ3RoLTFdLnopLzI7cj8obi56PXIueitvKG4uXyxyLl8pLG4ubT1uLnotaSk6bi56PWl9ZWxzZSByJiYobi56PXIueitvKG4uXyxyLl8pKTtuLnBhcmVudC5BPXUobixyLG4ucGFyZW50LkF8fGVbMF0pfWZ1bmN0aW9uIHIobil7bi5fLng9bi56K24ucGFyZW50Lm0sbi5tKz1uLnBhcmVudC5tfWZ1bmN0aW9uIHUobix0LGUpe2lmKHQpe2Zvcih2YXIgcix1PW4saT1uLGE9dCxsPXUucGFyZW50LmNoaWxkcmVuWzBdLGM9dS5tLHM9aS5tLGY9YS5tLGg9bC5tO2E9VHUoYSksdT1xdSh1KSxhJiZ1OylsPXF1KGwpLGk9VHUoaSksaS5hPW4scj1hLnorZi11LnotYytvKGEuXyx1Ll8pLHI+MCYmKFJ1KFB1KGEsbixlKSxuLHIpLGMrPXIscys9ciksZis9YS5tLGMrPXUubSxoKz1sLm0scys9aS5tO2EmJiFUdShpKSYmKGkudD1hLGkubSs9Zi1zKSx1JiYhcXUobCkmJihsLnQ9dSxsLm0rPWMtaCxlPW4pfXJldHVybiBlfWZ1bmN0aW9uIGkobil7bi54Kj1sWzBdLG4ueT1uLmRlcHRoKmxbMV19dmFyIGE9b2EubGF5b3V0LmhpZXJhcmNoeSgpLnNvcnQobnVsbCkudmFsdWUobnVsbCksbz1MdSxsPVsxLDFdLGM9bnVsbDtyZXR1cm4gbi5zZXBhcmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPXQsbik6b30sbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPW51bGw9PShsPXQpP2k6bnVsbCxuKTpjP251bGw6bH0sbi5ub2RlU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz1udWxsPT0obD10KT9udWxsOmksbik6Yz9sOm51bGx9LHV1KG4sYSl9LG9hLmxheW91dC5jbHVzdGVyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLGkpe3ZhciBhLG89dC5jYWxsKHRoaXMsbixpKSxsPW9bMF0sYz0wO2F1KGwsZnVuY3Rpb24obil7dmFyIHQ9bi5jaGlsZHJlbjt0JiZ0Lmxlbmd0aD8obi54PWp1KHQpLG4ueT1VdSh0KSk6KG4ueD1hP2MrPWUobixhKTowLG4ueT0wLGE9bil9KTt2YXIgcz1GdShsKSxmPUh1KGwpLGg9cy54LWUocyxmKS8yLGc9Zi54K2UoZixzKS8yO3JldHVybiBhdShsLHU/ZnVuY3Rpb24obil7bi54PShuLngtbC54KSpyWzBdLG4ueT0obC55LW4ueSkqclsxXX06ZnVuY3Rpb24obil7bi54PShuLngtaCkvKGctaCkqclswXSxuLnk9KDEtKGwueT9uLnkvbC55OjEpKSpyWzFdfSksb312YXIgdD1vYS5sYXlvdXQuaGllcmFyY2h5KCkuc29ydChudWxsKS52YWx1ZShudWxsKSxlPUx1LHI9WzEsMV0sdT0hMTtyZXR1cm4gbi5zZXBhcmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhlPXQsbik6ZX0sbi5zaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PW51bGw9PShyPXQpLG4pOnU/bnVsbDpyfSxuLm5vZGVTaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PW51bGwhPShyPXQpLG4pOnU/cjpudWxsfSx1dShuLHQpfSxvYS5sYXlvdXQudHJlZW1hcD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obix0KXtmb3IodmFyIGUscix1PS0xLGk9bi5sZW5ndGg7Kyt1PGk7KXI9KGU9blt1XSkudmFsdWUqKDA+dD8wOnQpLGUuYXJlYT1pc05hTihyKXx8MD49cj8wOnJ9ZnVuY3Rpb24gdChlKXt2YXIgaT1lLmNoaWxkcmVuO2lmKGkmJmkubGVuZ3RoKXt2YXIgYSxvLGwsYz1mKGUpLHM9W10saD1pLnNsaWNlKCkscD0xLzAsdj1cInNsaWNlXCI9PT1nP2MuZHg6XCJkaWNlXCI9PT1nP2MuZHk6XCJzbGljZS1kaWNlXCI9PT1nPzEmZS5kZXB0aD9jLmR5OmMuZHg6TWF0aC5taW4oYy5keCxjLmR5KTtmb3IobihoLGMuZHgqYy5keS9lLnZhbHVlKSxzLmFyZWE9MDsobD1oLmxlbmd0aCk+MDspcy5wdXNoKGE9aFtsLTFdKSxzLmFyZWErPWEuYXJlYSxcInNxdWFyaWZ5XCIhPT1nfHwobz1yKHMsdikpPD1wPyhoLnBvcCgpLHA9byk6KHMuYXJlYS09cy5wb3AoKS5hcmVhLHUocyx2LGMsITEpLHY9TWF0aC5taW4oYy5keCxjLmR5KSxzLmxlbmd0aD1zLmFyZWE9MCxwPTEvMCk7cy5sZW5ndGgmJih1KHMsdixjLCEwKSxzLmxlbmd0aD1zLmFyZWE9MCksaS5mb3JFYWNoKHQpfX1mdW5jdGlvbiBlKHQpe3ZhciByPXQuY2hpbGRyZW47aWYociYmci5sZW5ndGgpe3ZhciBpLGE9Zih0KSxvPXIuc2xpY2UoKSxsPVtdO2ZvcihuKG8sYS5keCphLmR5L3QudmFsdWUpLGwuYXJlYT0wO2k9by5wb3AoKTspbC5wdXNoKGkpLGwuYXJlYSs9aS5hcmVhLG51bGwhPWkueiYmKHUobCxpLno/YS5keDphLmR5LGEsIW8ubGVuZ3RoKSxsLmxlbmd0aD1sLmFyZWE9MCk7ci5mb3JFYWNoKGUpfX1mdW5jdGlvbiByKG4sdCl7Zm9yKHZhciBlLHI9bi5hcmVhLHU9MCxpPTEvMCxhPS0xLG89bi5sZW5ndGg7KythPG87KShlPW5bYV0uYXJlYSkmJihpPmUmJihpPWUpLGU+dSYmKHU9ZSkpO3JldHVybiByKj1yLHQqPXQscj9NYXRoLm1heCh0KnUqcC9yLHIvKHQqaSpwKSk6MS8wfWZ1bmN0aW9uIHUobix0LGUscil7dmFyIHUsaT0tMSxhPW4ubGVuZ3RoLG89ZS54LGM9ZS55LHM9dD9sKG4uYXJlYS90KTowO1xuaWYodD09ZS5keCl7Zm9yKChyfHxzPmUuZHkpJiYocz1lLmR5KTsrK2k8YTspdT1uW2ldLHUueD1vLHUueT1jLHUuZHk9cyxvKz11LmR4PU1hdGgubWluKGUueCtlLmR4LW8scz9sKHUuYXJlYS9zKTowKTt1Lno9ITAsdS5keCs9ZS54K2UuZHgtbyxlLnkrPXMsZS5keS09c31lbHNle2Zvcigocnx8cz5lLmR4KSYmKHM9ZS5keCk7KytpPGE7KXU9bltpXSx1Lng9byx1Lnk9Yyx1LmR4PXMsYys9dS5keT1NYXRoLm1pbihlLnkrZS5keS1jLHM/bCh1LmFyZWEvcyk6MCk7dS56PSExLHUuZHkrPWUueStlLmR5LWMsZS54Kz1zLGUuZHgtPXN9fWZ1bmN0aW9uIGkocil7dmFyIHU9YXx8byhyKSxpPXVbMF07cmV0dXJuIGkueD1pLnk9MCxpLnZhbHVlPyhpLmR4PWNbMF0saS5keT1jWzFdKTppLmR4PWkuZHk9MCxhJiZvLnJldmFsdWUoaSksbihbaV0saS5keCppLmR5L2kudmFsdWUpLChhP2U6dCkoaSksaCYmKGE9dSksdX12YXIgYSxvPW9hLmxheW91dC5oaWVyYXJjaHkoKSxsPU1hdGgucm91bmQsYz1bMSwxXSxzPW51bGwsZj1PdSxoPSExLGc9XCJzcXVhcmlmeVwiLHA9LjUqKDErTWF0aC5zcXJ0KDUpKTtyZXR1cm4gaS5zaXplPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPW4saSk6Y30saS5wYWRkaW5nPWZ1bmN0aW9uKG4pe2Z1bmN0aW9uIHQodCl7dmFyIGU9bi5jYWxsKGksdCx0LmRlcHRoKTtyZXR1cm4gbnVsbD09ZT9PdSh0KTpJdSh0LFwibnVtYmVyXCI9PXR5cGVvZiBlP1tlLGUsZSxlXTplKX1mdW5jdGlvbiBlKHQpe3JldHVybiBJdSh0LG4pfWlmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBzO3ZhciByO3JldHVybiBmPW51bGw9PShzPW4pP091OlwiZnVuY3Rpb25cIj09KHI9dHlwZW9mIG4pP3Q6XCJudW1iZXJcIj09PXI/KG49W24sbixuLG5dLGUpOmUsaX0saS5yb3VuZD1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obD1uP01hdGgucm91bmQ6TnVtYmVyLGkpOmwhPU51bWJlcn0saS5zdGlja3k9ZnVuY3Rpb24obil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGg9bixhPW51bGwsaSk6aH0saS5yYXRpbz1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocD1uLGkpOnB9LGkubW9kZT1mdW5jdGlvbihuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZz1uK1wiXCIsaSk6Z30sdXUoaSxvKX0sb2EucmFuZG9tPXtub3JtYWw6ZnVuY3Rpb24obix0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoO3JldHVybiAyPmUmJih0PTEpLDE+ZSYmKG49MCksZnVuY3Rpb24oKXt2YXIgZSxyLHU7ZG8gZT0yKk1hdGgucmFuZG9tKCktMSxyPTIqTWF0aC5yYW5kb20oKS0xLHU9ZSplK3Iqcjt3aGlsZSghdXx8dT4xKTtyZXR1cm4gbit0KmUqTWF0aC5zcXJ0KC0yKk1hdGgubG9nKHUpL3UpfX0sbG9nTm9ybWFsOmZ1bmN0aW9uKCl7dmFyIG49b2EucmFuZG9tLm5vcm1hbC5hcHBseShvYSxhcmd1bWVudHMpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBNYXRoLmV4cChuKCkpfX0sYmF0ZXM6ZnVuY3Rpb24obil7dmFyIHQ9b2EucmFuZG9tLmlyd2luSGFsbChuKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCgpL259fSxpcndpbkhhbGw6ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wO24+ZTtlKyspdCs9TWF0aC5yYW5kb20oKTtyZXR1cm4gdH19fSxvYS5zY2FsZT17fTt2YXIgU2w9e2Zsb29yOnksY2VpbDp5fTtvYS5zY2FsZS5saW5lYXI9ZnVuY3Rpb24oKXtyZXR1cm4gV3UoWzAsMV0sWzAsMV0sTXIsITEpfTt2YXIga2w9e3M6MSxnOjEscDoxLHI6MSxlOjF9O29hLnNjYWxlLmxvZz1mdW5jdGlvbigpe3JldHVybiByaShvYS5zY2FsZS5saW5lYXIoKS5kb21haW4oWzAsMV0pLDEwLCEwLFsxLDEwXSl9O3ZhciBObD1vYS5mb3JtYXQoXCIuMGVcIiksRWw9e2Zsb29yOmZ1bmN0aW9uKG4pe3JldHVybi1NYXRoLmNlaWwoLW4pfSxjZWlsOmZ1bmN0aW9uKG4pe3JldHVybi1NYXRoLmZsb29yKC1uKX19O29hLnNjYWxlLnBvdz1mdW5jdGlvbigpe3JldHVybiB1aShvYS5zY2FsZS5saW5lYXIoKSwxLFswLDFdKX0sb2Euc2NhbGUuc3FydD1mdW5jdGlvbigpe3JldHVybiBvYS5zY2FsZS5wb3coKS5leHBvbmVudCguNSl9LG9hLnNjYWxlLm9yZGluYWw9ZnVuY3Rpb24oKXtyZXR1cm4gYWkoW10se3Q6XCJyYW5nZVwiLGE6W1tdXX0pfSxvYS5zY2FsZS5jYXRlZ29yeTEwPWZ1bmN0aW9uKCl7cmV0dXJuIG9hLnNjYWxlLm9yZGluYWwoKS5yYW5nZShBbCl9LG9hLnNjYWxlLmNhdGVnb3J5MjA9ZnVuY3Rpb24oKXtyZXR1cm4gb2Euc2NhbGUub3JkaW5hbCgpLnJhbmdlKENsKX0sb2Euc2NhbGUuY2F0ZWdvcnkyMGI9ZnVuY3Rpb24oKXtyZXR1cm4gb2Euc2NhbGUub3JkaW5hbCgpLnJhbmdlKHpsKX0sb2Euc2NhbGUuY2F0ZWdvcnkyMGM9ZnVuY3Rpb24oKXtyZXR1cm4gb2Euc2NhbGUub3JkaW5hbCgpLnJhbmdlKExsKX07dmFyIEFsPVsyMDYyMjYwLDE2NzQ0MjA2LDI5MjQ1ODgsMTQwMzQ3MjgsOTcyNTg4NSw5MTk3MTMxLDE0OTA3MzMwLDgzNTU3MTEsMTIzNjkxODYsMTU1NjE3NV0ubWFwKHhuKSxDbD1bMjA2MjI2MCwxMTQ1NDQ0MCwxNjc0NDIwNiwxNjc1OTY3MiwyOTI0NTg4LDEwMDE4Njk4LDE0MDM0NzI4LDE2NzUwNzQyLDk3MjU4ODUsMTI5NTU4NjEsOTE5NzEzMSwxMjg4NTE0MCwxNDkwNzMzMCwxNjIzNDE5NCw4MzU1NzExLDEzMDkyODA3LDEyMzY5MTg2LDE0NDA4NTg5LDE1NTYxNzUsMTA0MTA3MjVdLm1hcCh4biksemw9WzM3NTA3NzcsNTM5NTYxOSw3MDQwNzE5LDEwMjY0Mjg2LDY1MTkwOTcsOTIxNjU5NCwxMTkxNTExNSwxMzU1NjYzNiw5MjAyOTkzLDEyNDI2ODA5LDE1MTg2NTE0LDE1MTkwOTMyLDg2NjYxNjksMTEzNTY0OTAsMTQwNDk2NDMsMTUxNzczNzIsODA3NzY4MywxMDgzNDMyNCwxMzUyODUwOSwxNDU4OTY1NF0ubWFwKHhuKSxMbD1bMzI0NDczMyw3MDU3MTEwLDEwNDA2NjI1LDEzMDMyNDMxLDE1MDk1MDUzLDE2NjE2NzY0LDE2NjI1MjU5LDE2NjM0MDE4LDMyNTMwNzYsNzY1MjQ3MCwxMDYwNzAwMywxMzEwMTUwNCw3Njk1MjgxLDEwMzk0MzEyLDEyMzY5MzcyLDE0MzQyODkxLDY1MTM1MDcsOTg2ODk1MCwxMjQzNDg3NywxNDI3NzA4MV0ubWFwKHhuKTtvYS5zY2FsZS5xdWFudGlsZT1mdW5jdGlvbigpe3JldHVybiBvaShbXSxbXSl9LG9hLnNjYWxlLnF1YW50aXplPWZ1bmN0aW9uKCl7cmV0dXJuIGxpKDAsMSxbMCwxXSl9LG9hLnNjYWxlLnRocmVzaG9sZD1mdW5jdGlvbigpe3JldHVybiBjaShbLjVdLFswLDFdKX0sb2Euc2NhbGUuaWRlbnRpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gc2koWzAsMV0pfSxvYS5zdmc9e30sb2Euc3ZnLmFyYz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oKXt2YXIgbj1NYXRoLm1heCgwLCtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSksYz1NYXRoLm1heCgwLCtyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkscz1hLmFwcGx5KHRoaXMsYXJndW1lbnRzKS1PYSxmPW8uYXBwbHkodGhpcyxhcmd1bWVudHMpLU9hLGg9TWF0aC5hYnMoZi1zKSxnPXM+Zj8wOjE7aWYobj5jJiYocD1jLGM9bixuPXApLGg+PUhhKXJldHVybiB0KGMsZykrKG4/dChuLDEtZyk6XCJcIikrXCJaXCI7dmFyIHAsdixkLG0seSxNLHgsYixfLHcsUyxrLE49MCxFPTAsQT1bXTtpZigobT0oK2wuYXBwbHkodGhpcyxhcmd1bWVudHMpfHwwKS8yKSYmKGQ9aT09PXFsP01hdGguc3FydChuKm4rYypjKToraS5hcHBseSh0aGlzLGFyZ3VtZW50cyksZ3x8KEUqPS0xKSxjJiYoRT10bihkL2MqTWF0aC5zaW4obSkpKSxuJiYoTj10bihkL24qTWF0aC5zaW4obSkpKSksYyl7eT1jKk1hdGguY29zKHMrRSksTT1jKk1hdGguc2luKHMrRSkseD1jKk1hdGguY29zKGYtRSksYj1jKk1hdGguc2luKGYtRSk7dmFyIEM9TWF0aC5hYnMoZi1zLTIqRSk8PWphPzA6MTtpZihFJiZtaSh5LE0seCxiKT09PWdeQyl7dmFyIHo9KHMrZikvMjt5PWMqTWF0aC5jb3MoeiksTT1jKk1hdGguc2luKHopLHg9Yj1udWxsfX1lbHNlIHk9TT0wO2lmKG4pe189bipNYXRoLmNvcyhmLU4pLHc9bipNYXRoLnNpbihmLU4pLFM9bipNYXRoLmNvcyhzK04pLGs9bipNYXRoLnNpbihzK04pO3ZhciBMPU1hdGguYWJzKHMtZisyKk4pPD1qYT8wOjE7aWYoTiYmbWkoXyx3LFMsayk9PT0xLWdeTCl7dmFyIHE9KHMrZikvMjtfPW4qTWF0aC5jb3MocSksdz1uKk1hdGguc2luKHEpLFM9az1udWxsfX1lbHNlIF89dz0wO2lmKGg+UGEmJihwPU1hdGgubWluKE1hdGguYWJzKGMtbikvMiwrdS5hcHBseSh0aGlzLGFyZ3VtZW50cykpKT4uMDAxKXt2PWM+bl5nPzA6MTt2YXIgVD1wLFI9cDtpZihqYT5oKXt2YXIgRD1udWxsPT1TP1tfLHddOm51bGw9PXg/W3ksTV06UmUoW3ksTV0sW1Msa10sW3gsYl0sW18sd10pLFA9eS1EWzBdLFU9TS1EWzFdLGo9eC1EWzBdLEY9Yi1EWzFdLEg9MS9NYXRoLnNpbihNYXRoLmFjb3MoKFAqaitVKkYpLyhNYXRoLnNxcnQoUCpQK1UqVSkqTWF0aC5zcXJ0KGoqaitGKkYpKSkvMiksTz1NYXRoLnNxcnQoRFswXSpEWzBdK0RbMV0qRFsxXSk7Uj1NYXRoLm1pbihwLChuLU8pLyhILTEpKSxUPU1hdGgubWluKHAsKGMtTykvKEgrMSkpfWlmKG51bGwhPXgpe3ZhciBJPXlpKG51bGw9PVM/W18sd106W1Msa10sW3ksTV0sYyxULGcpLFk9eWkoW3gsYl0sW18sd10sYyxULGcpO3A9PT1UP0EucHVzaChcIk1cIixJWzBdLFwiQVwiLFQsXCIsXCIsVCxcIiAwIDAsXCIsdixcIiBcIixJWzFdLFwiQVwiLGMsXCIsXCIsYyxcIiAwIFwiLDEtZ15taShJWzFdWzBdLElbMV1bMV0sWVsxXVswXSxZWzFdWzFdKSxcIixcIixnLFwiIFwiLFlbMV0sXCJBXCIsVCxcIixcIixULFwiIDAgMCxcIix2LFwiIFwiLFlbMF0pOkEucHVzaChcIk1cIixJWzBdLFwiQVwiLFQsXCIsXCIsVCxcIiAwIDEsXCIsdixcIiBcIixZWzBdKX1lbHNlIEEucHVzaChcIk1cIix5LFwiLFwiLE0pO2lmKG51bGwhPVMpe3ZhciBaPXlpKFt5LE1dLFtTLGtdLG4sLVIsZyksVj15aShbXyx3XSxudWxsPT14P1t5LE1dOlt4LGJdLG4sLVIsZyk7cD09PVI/QS5wdXNoKFwiTFwiLFZbMF0sXCJBXCIsUixcIixcIixSLFwiIDAgMCxcIix2LFwiIFwiLFZbMV0sXCJBXCIsbixcIixcIixuLFwiIDAgXCIsZ15taShWWzFdWzBdLFZbMV1bMV0sWlsxXVswXSxaWzFdWzFdKSxcIixcIiwxLWcsXCIgXCIsWlsxXSxcIkFcIixSLFwiLFwiLFIsXCIgMCAwLFwiLHYsXCIgXCIsWlswXSk6QS5wdXNoKFwiTFwiLFZbMF0sXCJBXCIsUixcIixcIixSLFwiIDAgMCxcIix2LFwiIFwiLFpbMF0pfWVsc2UgQS5wdXNoKFwiTFwiLF8sXCIsXCIsdyl9ZWxzZSBBLnB1c2goXCJNXCIseSxcIixcIixNKSxudWxsIT14JiZBLnB1c2goXCJBXCIsYyxcIixcIixjLFwiIDAgXCIsQyxcIixcIixnLFwiIFwiLHgsXCIsXCIsYiksQS5wdXNoKFwiTFwiLF8sXCIsXCIsdyksbnVsbCE9UyYmQS5wdXNoKFwiQVwiLG4sXCIsXCIsbixcIiAwIFwiLEwsXCIsXCIsMS1nLFwiIFwiLFMsXCIsXCIsayk7cmV0dXJuIEEucHVzaChcIlpcIiksQS5qb2luKFwiXCIpfWZ1bmN0aW9uIHQobix0KXtyZXR1cm5cIk0wLFwiK24rXCJBXCIrbitcIixcIituK1wiIDAgMSxcIit0K1wiIDAsXCIrLW4rXCJBXCIrbitcIixcIituK1wiIDAgMSxcIit0K1wiIDAsXCIrbn12YXIgZT1oaSxyPWdpLHU9ZmksaT1xbCxhPXBpLG89dmksbD1kaTtyZXR1cm4gbi5pbm5lclJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1Fbih0KSxuKTplfSxuLm91dGVyUmFkaXVzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhyPUVuKHQpLG4pOnJ9LG4uY29ybmVyUmFkaXVzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PUVuKHQpLG4pOnV9LG4ucGFkUmFkaXVzPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPXQ9PXFsP3FsOkVuKHQpLG4pOml9LG4uc3RhcnRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT1Fbih0KSxuKTphfSxuLmVuZEFuZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhvPUVuKHQpLG4pOm99LG4ucGFkQW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9RW4odCksbik6bH0sbi5jZW50cm9pZD1mdW5jdGlvbigpe3ZhciBuPSgrZS5hcHBseSh0aGlzLGFyZ3VtZW50cykrICtyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkvMix0PSgrYS5hcHBseSh0aGlzLGFyZ3VtZW50cykrICtvLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkvMi1PYTtyZXR1cm5bTWF0aC5jb3ModCkqbixNYXRoLnNpbih0KSpuXX0sbn07dmFyIHFsPVwiYXV0b1wiO29hLnN2Zy5saW5lPWZ1bmN0aW9uKCl7cmV0dXJuIE1pKHkpfTt2YXIgVGw9b2EubWFwKHtsaW5lYXI6eGksXCJsaW5lYXItY2xvc2VkXCI6Ymksc3RlcDpfaSxcInN0ZXAtYmVmb3JlXCI6d2ksXCJzdGVwLWFmdGVyXCI6U2ksYmFzaXM6emksXCJiYXNpcy1vcGVuXCI6TGksXCJiYXNpcy1jbG9zZWRcIjpxaSxidW5kbGU6VGksY2FyZGluYWw6RWksXCJjYXJkaW5hbC1vcGVuXCI6a2ksXCJjYXJkaW5hbC1jbG9zZWRcIjpOaSxtb25vdG9uZTpGaX0pO1RsLmZvckVhY2goZnVuY3Rpb24obix0KXt0LmtleT1uLHQuY2xvc2VkPS8tY2xvc2VkJC8udGVzdChuKX0pO3ZhciBSbD1bMCwyLzMsMS8zLDBdLERsPVswLDEvMywyLzMsMF0sUGw9WzAsMS82LDIvMywxLzZdO29hLnN2Zy5saW5lLnJhZGlhbD1mdW5jdGlvbigpe3ZhciBuPU1pKEhpKTtyZXR1cm4gbi5yYWRpdXM9bi54LGRlbGV0ZSBuLngsbi5hbmdsZT1uLnksZGVsZXRlIG4ueSxufSx3aS5yZXZlcnNlPVNpLFNpLnJldmVyc2U9d2ksb2Euc3ZnLmFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gT2koeSl9LG9hLnN2Zy5hcmVhLnJhZGlhbD1mdW5jdGlvbigpe3ZhciBuPU9pKEhpKTtyZXR1cm4gbi5yYWRpdXM9bi54LGRlbGV0ZSBuLngsbi5pbm5lclJhZGl1cz1uLngwLGRlbGV0ZSBuLngwLG4ub3V0ZXJSYWRpdXM9bi54MSxkZWxldGUgbi54MSxuLmFuZ2xlPW4ueSxkZWxldGUgbi55LG4uc3RhcnRBbmdsZT1uLnkwLGRlbGV0ZSBuLnkwLG4uZW5kQW5nbGU9bi55MSxkZWxldGUgbi55MSxufSxvYS5zdmcuY2hvcmQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4sbyl7dmFyIGw9dCh0aGlzLGksbixvKSxjPXQodGhpcyxhLG4sbyk7cmV0dXJuXCJNXCIrbC5wMCtyKGwucixsLnAxLGwuYTEtbC5hMCkrKGUobCxjKT91KGwucixsLnAxLGwucixsLnAwKTp1KGwucixsLnAxLGMucixjLnAwKStyKGMucixjLnAxLGMuYTEtYy5hMCkrdShjLnIsYy5wMSxsLnIsbC5wMCkpK1wiWlwifWZ1bmN0aW9uIHQobix0LGUscil7dmFyIHU9dC5jYWxsKG4sZSxyKSxpPW8uY2FsbChuLHUsciksYT1sLmNhbGwobix1LHIpLU9hLHM9Yy5jYWxsKG4sdSxyKS1PYTtyZXR1cm57cjppLGEwOmEsYTE6cyxwMDpbaSpNYXRoLmNvcyhhKSxpKk1hdGguc2luKGEpXSxwMTpbaSpNYXRoLmNvcyhzKSxpKk1hdGguc2luKHMpXX19ZnVuY3Rpb24gZShuLHQpe3JldHVybiBuLmEwPT10LmEwJiZuLmExPT10LmExfWZ1bmN0aW9uIHIobix0LGUpe3JldHVyblwiQVwiK24rXCIsXCIrbitcIiAwIFwiKyArKGU+amEpK1wiLDEgXCIrdH1mdW5jdGlvbiB1KG4sdCxlLHIpe3JldHVyblwiUSAwLDAgXCIrcn12YXIgaT1NZSxhPXhlLG89SWksbD1waSxjPXZpO3JldHVybiBuLnJhZGl1cz1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8obz1Fbih0KSxuKTpvfSxuLnNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT1Fbih0KSxuKTppfSxuLnRhcmdldD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYT1Fbih0KSxuKTphfSxuLnN0YXJ0QW5nbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9RW4odCksbik6bH0sbi5lbmRBbmdsZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYz1Fbih0KSxuKTpjfSxufSxvYS5zdmcuZGlhZ29uYWw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4sdSl7dmFyIGk9dC5jYWxsKHRoaXMsbix1KSxhPWUuY2FsbCh0aGlzLG4sdSksbz0oaS55K2EueSkvMixsPVtpLHt4OmkueCx5Om99LHt4OmEueCx5Om99LGFdO3JldHVybiBsPWwubWFwKHIpLFwiTVwiK2xbMF0rXCJDXCIrbFsxXStcIiBcIitsWzJdK1wiIFwiK2xbM119dmFyIHQ9TWUsZT14ZSxyPVlpO3JldHVybiBuLnNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8odD1FbihlKSxuKTp0fSxuLnRhcmdldD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1Fbih0KSxuKTplfSxuLnByb2plY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHI9dCxuKTpyfSxufSxvYS5zdmcuZGlhZ29uYWwucmFkaWFsPWZ1bmN0aW9uKCl7dmFyIG49b2Euc3ZnLmRpYWdvbmFsKCksdD1ZaSxlPW4ucHJvamVjdGlvbjtyZXR1cm4gbi5wcm9qZWN0aW9uPWZ1bmN0aW9uKG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2UoWmkodD1uKSk6dH0sbn0sb2Euc3ZnLnN5bWJvbD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obixyKXtyZXR1cm4oVWwuZ2V0KHQuY2FsbCh0aGlzLG4scikpfHwkaSkoZS5jYWxsKHRoaXMsbixyKSl9dmFyIHQ9WGksZT1WaTtyZXR1cm4gbi50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh0PUVuKGUpLG4pOnR9LG4uc2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oZT1Fbih0KSxuKTplfSxufTt2YXIgVWw9b2EubWFwKHtjaXJjbGU6JGksY3Jvc3M6ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zcXJ0KG4vNSkvMjtyZXR1cm5cIk1cIistMyp0K1wiLFwiKy10K1wiSFwiKy10K1wiVlwiKy0zKnQrXCJIXCIrdCtcIlZcIistdCtcIkhcIiszKnQrXCJWXCIrdCtcIkhcIit0K1wiVlwiKzMqdCtcIkhcIistdCtcIlZcIit0K1wiSFwiKy0zKnQrXCJaXCJ9LGRpYW1vbmQ6ZnVuY3Rpb24obil7dmFyIHQ9TWF0aC5zcXJ0KG4vKDIqRmwpKSxlPXQqRmw7cmV0dXJuXCJNMCxcIistdCtcIkxcIitlK1wiLDAgMCxcIit0K1wiIFwiKy1lK1wiLDBaXCJ9LHNxdWFyZTpmdW5jdGlvbihuKXt2YXIgdD1NYXRoLnNxcnQobikvMjtyZXR1cm5cIk1cIistdCtcIixcIistdCtcIkxcIit0K1wiLFwiKy10K1wiIFwiK3QrXCIsXCIrdCtcIiBcIistdCtcIixcIit0K1wiWlwifSxcInRyaWFuZ2xlLWRvd25cIjpmdW5jdGlvbihuKXt2YXIgdD1NYXRoLnNxcnQobi9qbCksZT10KmpsLzI7cmV0dXJuXCJNMCxcIitlK1wiTFwiK3QrXCIsXCIrLWUrXCIgXCIrLXQrXCIsXCIrLWUrXCJaXCJ9LFwidHJpYW5nbGUtdXBcIjpmdW5jdGlvbihuKXt2YXIgdD1NYXRoLnNxcnQobi9qbCksZT10KmpsLzI7cmV0dXJuXCJNMCxcIistZStcIkxcIit0K1wiLFwiK2UrXCIgXCIrLXQrXCIsXCIrZStcIlpcIn19KTtvYS5zdmcuc3ltYm9sVHlwZXM9VWwua2V5cygpO3ZhciBqbD1NYXRoLnNxcnQoMyksRmw9TWF0aC50YW4oMzAqSWEpO0FhLnRyYW5zaXRpb249ZnVuY3Rpb24obil7Zm9yKHZhciB0LGUscj1IbHx8KytabCx1PUtpKG4pLGk9W10sYT1PbHx8e3RpbWU6RGF0ZS5ub3coKSxlYXNlOk5yLGRlbGF5OjAsZHVyYXRpb246MjUwfSxvPS0xLGw9dGhpcy5sZW5ndGg7KytvPGw7KXtpLnB1c2godD1bXSk7Zm9yKHZhciBjPXRoaXNbb10scz0tMSxmPWMubGVuZ3RoOysrczxmOykoZT1jW3NdKSYmUWkoZSxzLHUscixhKSx0LnB1c2goZSl9cmV0dXJuIFdpKGksdSxyKX0sQWEuaW50ZXJydXB0PWZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLmVhY2gobnVsbD09bj9JbDpCaShLaShuKSkpfTt2YXIgSGwsT2wsSWw9QmkoS2koKSksWWw9W10sWmw9MDtZbC5jYWxsPUFhLmNhbGwsWWwuZW1wdHk9QWEuZW1wdHksWWwubm9kZT1BYS5ub2RlLFlsLnNpemU9QWEuc2l6ZSxvYS50cmFuc2l0aW9uPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4mJm4udHJhbnNpdGlvbj9IbD9uLnRyYW5zaXRpb24odCk6bjpvYS5zZWxlY3Rpb24oKS50cmFuc2l0aW9uKG4pfSxvYS50cmFuc2l0aW9uLnByb3RvdHlwZT1ZbCxZbC5zZWxlY3Q9ZnVuY3Rpb24obil7dmFyIHQsZSxyLHU9dGhpcy5pZCxpPXRoaXMubmFtZXNwYWNlLGE9W107bj1BKG4pO2Zvcih2YXIgbz0tMSxsPXRoaXMubGVuZ3RoOysrbzxsOyl7YS5wdXNoKHQ9W10pO2Zvcih2YXIgYz10aGlzW29dLHM9LTEsZj1jLmxlbmd0aDsrK3M8ZjspKHI9Y1tzXSkmJihlPW4uY2FsbChyLHIuX19kYXRhX18scyxvKSk/KFwiX19kYXRhX19cImluIHImJihlLl9fZGF0YV9fPXIuX19kYXRhX18pLFFpKGUscyxpLHUscltpXVt1XSksdC5wdXNoKGUpKTp0LnB1c2gobnVsbCl9cmV0dXJuIFdpKGEsaSx1KX0sWWwuc2VsZWN0QWxsPWZ1bmN0aW9uKG4pe3ZhciB0LGUscix1LGksYT10aGlzLmlkLG89dGhpcy5uYW1lc3BhY2UsbD1bXTtuPUMobik7Zm9yKHZhciBjPS0xLHM9dGhpcy5sZW5ndGg7KytjPHM7KWZvcih2YXIgZj10aGlzW2NdLGg9LTEsZz1mLmxlbmd0aDsrK2g8ZzspaWYocj1mW2hdKXtpPXJbb11bYV0sZT1uLmNhbGwocixyLl9fZGF0YV9fLGgsYyksbC5wdXNoKHQ9W10pO2Zvcih2YXIgcD0tMSx2PWUubGVuZ3RoOysrcDx2OykodT1lW3BdKSYmUWkodSxwLG8sYSxpKSx0LnB1c2godSl9cmV0dXJuIFdpKGwsbyxhKX0sWWwuZmlsdGVyPWZ1bmN0aW9uKG4pe3ZhciB0LGUscix1PVtdO1wiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJihuPU8obikpO2Zvcih2YXIgaT0wLGE9dGhpcy5sZW5ndGg7YT5pO2krKyl7dS5wdXNoKHQ9W10pO2Zvcih2YXIgZT10aGlzW2ldLG89MCxsPWUubGVuZ3RoO2w+bztvKyspKHI9ZVtvXSkmJm4uY2FsbChyLHIuX19kYXRhX18sbyxpKSYmdC5wdXNoKHIpfXJldHVybiBXaSh1LHRoaXMubmFtZXNwYWNlLHRoaXMuaWQpfSxZbC50d2Vlbj1mdW5jdGlvbihuLHQpe3ZhciBlPXRoaXMuaWQscj10aGlzLm5hbWVzcGFjZTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP3RoaXMubm9kZSgpW3JdW2VdLnR3ZWVuLmdldChuKTpZKHRoaXMsbnVsbD09dD9mdW5jdGlvbih0KXt0W3JdW2VdLnR3ZWVuLnJlbW92ZShuKX06ZnVuY3Rpb24odSl7dVtyXVtlXS50d2Vlbi5zZXQobix0KX0pfSxZbC5hdHRyPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVtb3ZlQXR0cmlidXRlKG8pfWZ1bmN0aW9uIHIoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKG8uc3BhY2Usby5sb2NhbCl9ZnVuY3Rpb24gdShuKXtyZXR1cm4gbnVsbD09bj9lOihuKz1cIlwiLGZ1bmN0aW9uKCl7dmFyIHQsZT10aGlzLmdldEF0dHJpYnV0ZShvKTtyZXR1cm4gZSE9PW4mJih0PWEoZSxuKSxmdW5jdGlvbihuKXt0aGlzLnNldEF0dHJpYnV0ZShvLHQobikpfSl9KX1mdW5jdGlvbiBpKG4pe3JldHVybiBudWxsPT1uP3I6KG4rPVwiXCIsZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuZ2V0QXR0cmlidXRlTlMoby5zcGFjZSxvLmxvY2FsKTtyZXR1cm4gZSE9PW4mJih0PWEoZSxuKSxmdW5jdGlvbihuKXt0aGlzLnNldEF0dHJpYnV0ZU5TKG8uc3BhY2Usby5sb2NhbCx0KG4pKX0pfSl9aWYoYXJndW1lbnRzLmxlbmd0aDwyKXtmb3IodCBpbiBuKXRoaXMuYXR0cih0LG5bdF0pO3JldHVybiB0aGlzfXZhciBhPVwidHJhbnNmb3JtXCI9PW4/JHI6TXIsbz1vYS5ucy5xdWFsaWZ5KG4pO3JldHVybiBKaSh0aGlzLFwiYXR0ci5cIituLHQsby5sb2NhbD9pOnUpfSxZbC5hdHRyVHdlZW49ZnVuY3Rpb24obix0KXtmdW5jdGlvbiBlKG4sZSl7dmFyIHI9dC5jYWxsKHRoaXMsbixlLHRoaXMuZ2V0QXR0cmlidXRlKHUpKTtyZXR1cm4gciYmZnVuY3Rpb24obil7dGhpcy5zZXRBdHRyaWJ1dGUodSxyKG4pKX19ZnVuY3Rpb24gcihuLGUpe3ZhciByPXQuY2FsbCh0aGlzLG4sZSx0aGlzLmdldEF0dHJpYnV0ZU5TKHUuc3BhY2UsdS5sb2NhbCkpO3JldHVybiByJiZmdW5jdGlvbihuKXt0aGlzLnNldEF0dHJpYnV0ZU5TKHUuc3BhY2UsdS5sb2NhbCxyKG4pKX19dmFyIHU9b2EubnMucXVhbGlmeShuKTtyZXR1cm4gdGhpcy50d2VlbihcImF0dHIuXCIrbix1LmxvY2FsP3I6ZSl9LFlsLnN0eWxlPWZ1bmN0aW9uKG4sZSxyKXtmdW5jdGlvbiB1KCl7dGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShuKX1mdW5jdGlvbiBpKGUpe3JldHVybiBudWxsPT1lP3U6KGUrPVwiXCIsZnVuY3Rpb24oKXt2YXIgdSxpPXQodGhpcykuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLG51bGwpLmdldFByb3BlcnR5VmFsdWUobik7cmV0dXJuIGkhPT1lJiYodT1NcihpLGUpLGZ1bmN0aW9uKHQpe3RoaXMuc3R5bGUuc2V0UHJvcGVydHkobix1KHQpLHIpfSl9KX12YXIgYT1hcmd1bWVudHMubGVuZ3RoO2lmKDM+YSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIG4pezI+YSYmKGU9XCJcIik7Zm9yKHIgaW4gbil0aGlzLnN0eWxlKHIsbltyXSxlKTtyZXR1cm4gdGhpc31yPVwiXCJ9cmV0dXJuIEppKHRoaXMsXCJzdHlsZS5cIituLGUsaSl9LFlsLnN0eWxlVHdlZW49ZnVuY3Rpb24obixlLHIpe2Z1bmN0aW9uIHUodSxpKXt2YXIgYT1lLmNhbGwodGhpcyx1LGksdCh0aGlzKS5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuKSk7cmV0dXJuIGEmJmZ1bmN0aW9uKHQpe3RoaXMuc3R5bGUuc2V0UHJvcGVydHkobixhKHQpLHIpfX1yZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYocj1cIlwiKSx0aGlzLnR3ZWVuKFwic3R5bGUuXCIrbix1KX0sWWwudGV4dD1mdW5jdGlvbihuKXtyZXR1cm4gSmkodGhpcyxcInRleHRcIixuLEdpKX0sWWwucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIG49dGhpcy5uYW1lc3BhY2U7cmV0dXJuIHRoaXMuZWFjaChcImVuZC50cmFuc2l0aW9uXCIsZnVuY3Rpb24oKXt2YXIgdDt0aGlzW25dLmNvdW50PDImJih0PXRoaXMucGFyZW50Tm9kZSkmJnQucmVtb3ZlQ2hpbGQodGhpcyl9KX0sWWwuZWFzZT1mdW5jdGlvbihuKXt2YXIgdD10aGlzLmlkLGU9dGhpcy5uYW1lc3BhY2U7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MT90aGlzLm5vZGUoKVtlXVt0XS5lYXNlOihcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiYobj1vYS5lYXNlLmFwcGx5KG9hLGFyZ3VtZW50cykpLFkodGhpcyxmdW5jdGlvbihyKXtyW2VdW3RdLmVhc2U9bn0pKX0sWWwuZGVsYXk9ZnVuY3Rpb24obil7dmFyIHQ9dGhpcy5pZCxlPXRoaXMubmFtZXNwYWNlO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPDE/dGhpcy5ub2RlKClbZV1bdF0uZGVsYXk6WSh0aGlzLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4/ZnVuY3Rpb24ocix1LGkpe3JbZV1bdF0uZGVsYXk9K24uY2FsbChyLHIuX19kYXRhX18sdSxpKX06KG49K24sZnVuY3Rpb24ocil7cltlXVt0XS5kZWxheT1ufSkpfSxZbC5kdXJhdGlvbj1mdW5jdGlvbihuKXt2YXIgdD10aGlzLmlkLGU9dGhpcy5uYW1lc3BhY2U7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MT90aGlzLm5vZGUoKVtlXVt0XS5kdXJhdGlvbjpZKHRoaXMsXCJmdW5jdGlvblwiPT10eXBlb2Ygbj9mdW5jdGlvbihyLHUsaSl7cltlXVt0XS5kdXJhdGlvbj1NYXRoLm1heCgxLG4uY2FsbChyLHIuX19kYXRhX18sdSxpKSl9OihuPU1hdGgubWF4KDEsbiksZnVuY3Rpb24ocil7cltlXVt0XS5kdXJhdGlvbj1ufSkpfSxZbC5lYWNoPWZ1bmN0aW9uKG4sdCl7dmFyIGU9dGhpcy5pZCxyPXRoaXMubmFtZXNwYWNlO2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7dmFyIHU9T2wsaT1IbDt0cnl7SGw9ZSxZKHRoaXMsZnVuY3Rpb24odCx1LGkpe09sPXRbcl1bZV0sbi5jYWxsKHQsdC5fX2RhdGFfXyx1LGkpfSl9ZmluYWxseXtPbD11LEhsPWl9fWVsc2UgWSh0aGlzLGZ1bmN0aW9uKHUpe3ZhciBpPXVbcl1bZV07KGkuZXZlbnR8fChpLmV2ZW50PW9hLmRpc3BhdGNoKFwic3RhcnRcIixcImVuZFwiLFwiaW50ZXJydXB0XCIpKSkub24obix0KX0pO3JldHVybiB0aGlzfSxZbC50cmFuc2l0aW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciBuLHQsZSxyLHU9dGhpcy5pZCxpPSsrWmwsYT10aGlzLm5hbWVzcGFjZSxvPVtdLGw9MCxjPXRoaXMubGVuZ3RoO2M+bDtsKyspe28ucHVzaChuPVtdKTtmb3IodmFyIHQ9dGhpc1tsXSxzPTAsZj10Lmxlbmd0aDtmPnM7cysrKShlPXRbc10pJiYocj1lW2FdW3VdLFFpKGUscyxhLGkse3RpbWU6ci50aW1lLGVhc2U6ci5lYXNlLGRlbGF5OnIuZGVsYXkrci5kdXJhdGlvbixkdXJhdGlvbjpyLmR1cmF0aW9ufSkpLG4ucHVzaChlKX1yZXR1cm4gV2kobyxhLGkpfSxvYS5zdmcuYXhpcz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4obil7bi5lYWNoKGZ1bmN0aW9uKCl7dmFyIG4sYz1vYS5zZWxlY3QodGhpcykscz10aGlzLl9fY2hhcnRfX3x8ZSxmPXRoaXMuX19jaGFydF9fPWUuY29weSgpLGg9bnVsbD09bD9mLnRpY2tzP2YudGlja3MuYXBwbHkoZixvKTpmLmRvbWFpbigpOmwsZz1udWxsPT10P2YudGlja0Zvcm1hdD9mLnRpY2tGb3JtYXQuYXBwbHkoZixvKTp5OnQscD1jLnNlbGVjdEFsbChcIi50aWNrXCIpLmRhdGEoaCxmKSx2PXAuZW50ZXIoKS5pbnNlcnQoXCJnXCIsXCIuZG9tYWluXCIpLmF0dHIoXCJjbGFzc1wiLFwidGlja1wiKS5zdHlsZShcIm9wYWNpdHlcIixQYSksZD1vYS50cmFuc2l0aW9uKHAuZXhpdCgpKS5zdHlsZShcIm9wYWNpdHlcIixQYSkucmVtb3ZlKCksbT1vYS50cmFuc2l0aW9uKHAub3JkZXIoKSkuc3R5bGUoXCJvcGFjaXR5XCIsMSksTT1NYXRoLm1heCh1LDApK2EseD1adShmKSxiPWMuc2VsZWN0QWxsKFwiLmRvbWFpblwiKS5kYXRhKFswXSksXz0oYi5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsXCJkb21haW5cIiksb2EudHJhbnNpdGlvbihiKSk7di5hcHBlbmQoXCJsaW5lXCIpLHYuYXBwZW5kKFwidGV4dFwiKTt2YXIgdyxTLGssTixFPXYuc2VsZWN0KFwibGluZVwiKSxBPW0uc2VsZWN0KFwibGluZVwiKSxDPXAuc2VsZWN0KFwidGV4dFwiKS50ZXh0KGcpLHo9di5zZWxlY3QoXCJ0ZXh0XCIpLEw9bS5zZWxlY3QoXCJ0ZXh0XCIpLHE9XCJ0b3BcIj09PXJ8fFwibGVmdFwiPT09cj8tMToxO2lmKFwiYm90dG9tXCI9PT1yfHxcInRvcFwiPT09cj8obj1uYSx3PVwieFwiLGs9XCJ5XCIsUz1cIngyXCIsTj1cInkyXCIsQy5hdHRyKFwiZHlcIiwwPnE/XCIwZW1cIjpcIi43MWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIixcIm1pZGRsZVwiKSxfLmF0dHIoXCJkXCIsXCJNXCIreFswXStcIixcIitxKmkrXCJWMEhcIit4WzFdK1wiVlwiK3EqaSkpOihuPXRhLHc9XCJ5XCIsaz1cInhcIixTPVwieTJcIixOPVwieDJcIixDLmF0dHIoXCJkeVwiLFwiLjMyZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLDA+cT9cImVuZFwiOlwic3RhcnRcIiksXy5hdHRyKFwiZFwiLFwiTVwiK3EqaStcIixcIit4WzBdK1wiSDBWXCIreFsxXStcIkhcIitxKmkpKSxFLmF0dHIoTixxKnUpLHouYXR0cihrLHEqTSksQS5hdHRyKFMsMCkuYXR0cihOLHEqdSksTC5hdHRyKHcsMCkuYXR0cihrLHEqTSksZi5yYW5nZUJhbmQpe3ZhciBUPWYsUj1ULnJhbmdlQmFuZCgpLzI7cz1mPWZ1bmN0aW9uKG4pe3JldHVybiBUKG4pK1J9fWVsc2Ugcy5yYW5nZUJhbmQ/cz1mOmQuY2FsbChuLGYscyk7di5jYWxsKG4scyxmKSxtLmNhbGwobixmLGYpfSl9dmFyIHQsZT1vYS5zY2FsZS5saW5lYXIoKSxyPVZsLHU9NixpPTYsYT0zLG89WzEwXSxsPW51bGw7cmV0dXJuIG4uc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGU9dCxuKTplfSxuLm9yaWVudD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocj10IGluIFhsP3QrXCJcIjpWbCxuKTpyfSxuLnRpY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89Y2EoYXJndW1lbnRzKSxuKTpvfSxuLnRpY2tWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGw9dCxuKTpsfSxuLnRpY2tGb3JtYXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHQ9ZSxuKTp0fSxuLnRpY2tTaXplPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg7cmV0dXJuIGU/KHU9K3QsaT0rYXJndW1lbnRzW2UtMV0sbik6dX0sbi5pbm5lclRpY2tTaXplPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh1PSt0LG4pOnV9LG4ub3V0ZXJUaWNrU2l6ZT1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaT0rdCxuKTppfSxuLnRpY2tQYWRkaW5nPWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhhPSt0LG4pOmF9LG4udGlja1N1YmRpdmlkZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiZufSxufTt2YXIgVmw9XCJib3R0b21cIixYbD17dG9wOjEscmlnaHQ6MSxib3R0b206MSxsZWZ0OjF9O29hLnN2Zy5icnVzaD1mdW5jdGlvbigpe2Z1bmN0aW9uIG4odCl7dC5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9b2Euc2VsZWN0KHRoaXMpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcImFsbFwiKS5zdHlsZShcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiLFwicmdiYSgwLDAsMCwwKVwiKS5vbihcIm1vdXNlZG93bi5icnVzaFwiLGkpLm9uKFwidG91Y2hzdGFydC5icnVzaFwiLGkpLGE9dC5zZWxlY3RBbGwoXCIuYmFja2dyb3VuZFwiKS5kYXRhKFswXSk7YS5lbnRlcigpLmFwcGVuZChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsXCJiYWNrZ3JvdW5kXCIpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLnN0eWxlKFwiY3Vyc29yXCIsXCJjcm9zc2hhaXJcIiksdC5zZWxlY3RBbGwoXCIuZXh0ZW50XCIpLmRhdGEoWzBdKS5lbnRlcigpLmFwcGVuZChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsXCJleHRlbnRcIikuc3R5bGUoXCJjdXJzb3JcIixcIm1vdmVcIik7dmFyIG89dC5zZWxlY3RBbGwoXCIucmVzaXplXCIpLmRhdGEodix5KTtvLmV4aXQoKS5yZW1vdmUoKSxvLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihuKXtyZXR1cm5cInJlc2l6ZSBcIitufSkuc3R5bGUoXCJjdXJzb3JcIixmdW5jdGlvbihuKXtyZXR1cm4gJGxbbl19KS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsZnVuY3Rpb24obil7cmV0dXJuL1tld10kLy50ZXN0KG4pPy0zOm51bGx9KS5hdHRyKFwieVwiLGZ1bmN0aW9uKG4pe3JldHVybi9eW25zXS8udGVzdChuKT8tMzpudWxsfSkuYXR0cihcIndpZHRoXCIsNikuYXR0cihcImhlaWdodFwiLDYpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLG8uc3R5bGUoXCJkaXNwbGF5XCIsbi5lbXB0eSgpP1wibm9uZVwiOm51bGwpO3ZhciBsLGY9b2EudHJhbnNpdGlvbih0KSxoPW9hLnRyYW5zaXRpb24oYSk7YyYmKGw9WnUoYyksaC5hdHRyKFwieFwiLGxbMF0pLmF0dHIoXCJ3aWR0aFwiLGxbMV0tbFswXSkscihmKSkscyYmKGw9WnUocyksaC5hdHRyKFwieVwiLGxbMF0pLmF0dHIoXCJoZWlnaHRcIixsWzFdLWxbMF0pLHUoZikpLGUoZil9KX1mdW5jdGlvbiBlKG4pe24uc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24obil7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrZlsrL2UkLy50ZXN0KG4pXStcIixcIitoWysvXnMvLnRlc3QobildK1wiKVwifSl9ZnVuY3Rpb24gcihuKXtuLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInhcIixmWzBdKSxuLnNlbGVjdEFsbChcIi5leHRlbnQsLm4+cmVjdCwucz5yZWN0XCIpLmF0dHIoXCJ3aWR0aFwiLGZbMV0tZlswXSl9ZnVuY3Rpb24gdShuKXtuLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInlcIixoWzBdKSxuLnNlbGVjdEFsbChcIi5leHRlbnQsLmU+cmVjdCwudz5yZWN0XCIpLmF0dHIoXCJoZWlnaHRcIixoWzFdLWhbMF0pfWZ1bmN0aW9uIGkoKXtmdW5jdGlvbiBpKCl7MzI9PW9hLmV2ZW50LmtleUNvZGUmJihDfHwoTT1udWxsLExbMF0tPWZbMV0sTFsxXS09aFsxXSxDPTIpLFMoKSl9ZnVuY3Rpb24gdigpezMyPT1vYS5ldmVudC5rZXlDb2RlJiYyPT1DJiYoTFswXSs9ZlsxXSxMWzFdKz1oWzFdLEM9MCxTKCkpfWZ1bmN0aW9uIGQoKXt2YXIgbj1vYS5tb3VzZShiKSx0PSExO3gmJihuWzBdKz14WzBdLG5bMV0rPXhbMV0pLEN8fChvYS5ldmVudC5hbHRLZXk/KE18fChNPVsoZlswXStmWzFdKS8yLChoWzBdK2hbMV0pLzJdKSxMWzBdPWZbKyhuWzBdPE1bMF0pXSxMWzFdPWhbKyhuWzFdPE1bMV0pXSk6TT1udWxsKSxFJiZtKG4sYywwKSYmKHIoayksdD0hMCksQSYmbShuLHMsMSkmJih1KGspLHQ9ITApLHQmJihlKGspLHcoe3R5cGU6XCJicnVzaFwiLG1vZGU6Qz9cIm1vdmVcIjpcInJlc2l6ZVwifSkpfWZ1bmN0aW9uIG0obix0LGUpe3ZhciByLHUsaT1adSh0KSxsPWlbMF0sYz1pWzFdLHM9TFtlXSx2PWU/aDpmLGQ9dlsxXS12WzBdO3JldHVybiBDJiYobC09cyxjLT1kK3MpLHI9KGU/cDpnKT9NYXRoLm1heChsLE1hdGgubWluKGMsbltlXSkpOm5bZV0sQz91PShyKz1zKStkOihNJiYocz1NYXRoLm1heChsLE1hdGgubWluKGMsMipNW2VdLXIpKSkscj5zPyh1PXIscj1zKTp1PXMpLHZbMF0hPXJ8fHZbMV0hPXU/KGU/bz1udWxsOmE9bnVsbCx2WzBdPXIsdlsxXT11LCEwKTp2b2lkIDB9ZnVuY3Rpb24geSgpe2QoKSxrLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcImFsbFwiKS5zZWxlY3RBbGwoXCIucmVzaXplXCIpLnN0eWxlKFwiZGlzcGxheVwiLG4uZW1wdHkoKT9cIm5vbmVcIjpudWxsKSxvYS5zZWxlY3QoXCJib2R5XCIpLnN0eWxlKFwiY3Vyc29yXCIsbnVsbCkscS5vbihcIm1vdXNlbW92ZS5icnVzaFwiLG51bGwpLm9uKFwibW91c2V1cC5icnVzaFwiLG51bGwpLm9uKFwidG91Y2htb3ZlLmJydXNoXCIsbnVsbCkub24oXCJ0b3VjaGVuZC5icnVzaFwiLG51bGwpLm9uKFwia2V5ZG93bi5icnVzaFwiLG51bGwpLm9uKFwia2V5dXAuYnJ1c2hcIixudWxsKSx6KCksdyh7dHlwZTpcImJydXNoZW5kXCJ9KX12YXIgTSx4LGI9dGhpcyxfPW9hLnNlbGVjdChvYS5ldmVudC50YXJnZXQpLHc9bC5vZihiLGFyZ3VtZW50cyksaz1vYS5zZWxlY3QoYiksTj1fLmRhdHVtKCksRT0hL14obnxzKSQvLnRlc3QoTikmJmMsQT0hL14oZXx3KSQvLnRlc3QoTikmJnMsQz1fLmNsYXNzZWQoXCJleHRlbnRcIiksej1XKGIpLEw9b2EubW91c2UoYikscT1vYS5zZWxlY3QodChiKSkub24oXCJrZXlkb3duLmJydXNoXCIsaSkub24oXCJrZXl1cC5icnVzaFwiLHYpO2lmKG9hLmV2ZW50LmNoYW5nZWRUb3VjaGVzP3Eub24oXCJ0b3VjaG1vdmUuYnJ1c2hcIixkKS5vbihcInRvdWNoZW5kLmJydXNoXCIseSk6cS5vbihcIm1vdXNlbW92ZS5icnVzaFwiLGQpLm9uKFwibW91c2V1cC5icnVzaFwiLHkpLGsuaW50ZXJydXB0KCkuc2VsZWN0QWxsKFwiKlwiKS5pbnRlcnJ1cHQoKSxDKUxbMF09ZlswXS1MWzBdLExbMV09aFswXS1MWzFdO2Vsc2UgaWYoTil7dmFyIFQ9Ky93JC8udGVzdChOKSxSPSsvXm4vLnRlc3QoTik7eD1bZlsxLVRdLUxbMF0saFsxLVJdLUxbMV1dLExbMF09ZltUXSxMWzFdPWhbUl19ZWxzZSBvYS5ldmVudC5hbHRLZXkmJihNPUwuc2xpY2UoKSk7ay5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpLnNlbGVjdEFsbChcIi5yZXNpemVcIikuc3R5bGUoXCJkaXNwbGF5XCIsbnVsbCksb2Euc2VsZWN0KFwiYm9keVwiKS5zdHlsZShcImN1cnNvclwiLF8uc3R5bGUoXCJjdXJzb3JcIikpLHcoe3R5cGU6XCJicnVzaHN0YXJ0XCJ9KSxkKCl9dmFyIGEsbyxsPU4obixcImJydXNoc3RhcnRcIixcImJydXNoXCIsXCJicnVzaGVuZFwiKSxjPW51bGwscz1udWxsLGY9WzAsMF0saD1bMCwwXSxnPSEwLHA9ITAsdj1CbFswXTtyZXR1cm4gbi5ldmVudD1mdW5jdGlvbihuKXtuLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1sLm9mKHRoaXMsYXJndW1lbnRzKSx0PXt4OmYseTpoLGk6YSxqOm99LGU9dGhpcy5fX2NoYXJ0X198fHQ7dGhpcy5fX2NoYXJ0X189dCxIbD9vYS5zZWxlY3QodGhpcykudHJhbnNpdGlvbigpLmVhY2goXCJzdGFydC5icnVzaFwiLGZ1bmN0aW9uKCl7YT1lLmksbz1lLmosZj1lLngsaD1lLnksbih7dHlwZTpcImJydXNoc3RhcnRcIn0pfSkudHdlZW4oXCJicnVzaDpicnVzaFwiLGZ1bmN0aW9uKCl7dmFyIGU9eHIoZix0LngpLHI9eHIoaCx0LnkpO3JldHVybiBhPW89bnVsbCxmdW5jdGlvbih1KXtmPXQueD1lKHUpLGg9dC55PXIodSksbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSl9fSkuZWFjaChcImVuZC5icnVzaFwiLGZ1bmN0aW9uKCl7YT10Lmksbz10Lmosbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSksbih7dHlwZTpcImJydXNoZW5kXCJ9KX0pOihuKHt0eXBlOlwiYnJ1c2hzdGFydFwifSksbih7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSksbih7dHlwZTpcImJydXNoZW5kXCJ9KSl9KX0sbi54PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhjPXQsdj1CbFshYzw8MXwhc10sbik6Y30sbi55PWZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhzPXQsdj1CbFshYzw8MXwhc10sbik6c30sbi5jbGFtcD1mdW5jdGlvbih0KXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYyYmcz8oZz0hIXRbMF0scD0hIXRbMV0pOmM/Zz0hIXQ6cyYmKHA9ISF0KSxuKTpjJiZzP1tnLHBdOmM/ZzpzP3A6bnVsbH0sbi5leHRlbnQ9ZnVuY3Rpb24odCl7dmFyIGUscix1LGksbDtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oYyYmKGU9dFswXSxyPXRbMV0scyYmKGU9ZVswXSxyPXJbMF0pLGE9W2Uscl0sYy5pbnZlcnQmJihlPWMoZSkscj1jKHIpKSxlPnImJihsPWUsZT1yLHI9bCksKGUhPWZbMF18fHIhPWZbMV0pJiYoZj1bZSxyXSkpLHMmJih1PXRbMF0saT10WzFdLGMmJih1PXVbMV0saT1pWzFdKSxvPVt1LGldLHMuaW52ZXJ0JiYodT1zKHUpLGk9cyhpKSksdT5pJiYobD11LHU9aSxpPWwpLCh1IT1oWzBdfHxpIT1oWzFdKSYmKGg9W3UsaV0pKSxuKTooYyYmKGE/KGU9YVswXSxyPWFbMV0pOihlPWZbMF0scj1mWzFdLGMuaW52ZXJ0JiYoZT1jLmludmVydChlKSxyPWMuaW52ZXJ0KHIpKSxlPnImJihsPWUsZT1yLHI9bCkpKSxzJiYobz8odT1vWzBdLGk9b1sxXSk6KHU9aFswXSxpPWhbMV0scy5pbnZlcnQmJih1PXMuaW52ZXJ0KHUpLGk9cy5pbnZlcnQoaSkpLHU+aSYmKGw9dSx1PWksaT1sKSkpLGMmJnM/W1tlLHVdLFtyLGldXTpjP1tlLHJdOnMmJlt1LGldKX0sbi5jbGVhcj1mdW5jdGlvbigpe3JldHVybiBuLmVtcHR5KCl8fChmPVswLDBdLGg9WzAsMF0sYT1vPW51bGwpLG59LG4uZW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4hIWMmJmZbMF09PWZbMV18fCEhcyYmaFswXT09aFsxXX0sb2EucmViaW5kKG4sbCxcIm9uXCIpfTt2YXIgJGw9e246XCJucy1yZXNpemVcIixlOlwiZXctcmVzaXplXCIsczpcIm5zLXJlc2l6ZVwiLHc6XCJldy1yZXNpemVcIixudzpcIm53c2UtcmVzaXplXCIsbmU6XCJuZXN3LXJlc2l6ZVwiLHNlOlwibndzZS1yZXNpemVcIixzdzpcIm5lc3ctcmVzaXplXCJ9LEJsPVtbXCJuXCIsXCJlXCIsXCJzXCIsXCJ3XCIsXCJud1wiLFwibmVcIixcInNlXCIsXCJzd1wiXSxbXCJlXCIsXCJ3XCJdLFtcIm5cIixcInNcIl0sW11dLFdsPWdvLmZvcm1hdD14by50aW1lRm9ybWF0LEpsPVdsLnV0YyxHbD1KbChcIiVZLSVtLSVkVCVIOiVNOiVTLiVMWlwiKTtXbC5pc289RGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcmJituZXcgRGF0ZShcIjIwMDAtMDEtMDFUMDA6MDA6MDAuMDAwWlwiKT9lYTpHbCxlYS5wYXJzZT1mdW5jdGlvbihuKXt2YXIgdD1uZXcgRGF0ZShuKTtyZXR1cm4gaXNOYU4odCk/bnVsbDp0fSxlYS50b1N0cmluZz1HbC50b1N0cmluZyxnby5zZWNvbmQ9T24oZnVuY3Rpb24obil7cmV0dXJuIG5ldyBwbygxZTMqTWF0aC5mbG9vcihuLzFlMykpfSxmdW5jdGlvbihuLHQpe24uc2V0VGltZShuLmdldFRpbWUoKSsxZTMqTWF0aC5mbG9vcih0KSl9LGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldFNlY29uZHMoKX0pLGdvLnNlY29uZHM9Z28uc2Vjb25kLnJhbmdlLGdvLnNlY29uZHMudXRjPWdvLnNlY29uZC51dGMucmFuZ2UsZ28ubWludXRlPU9uKGZ1bmN0aW9uKG4pe3JldHVybiBuZXcgcG8oNmU0Kk1hdGguZmxvb3Iobi82ZTQpKX0sZnVuY3Rpb24obix0KXtuLnNldFRpbWUobi5nZXRUaW1lKCkrNmU0Kk1hdGguZmxvb3IodCkpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNaW51dGVzKCl9KSxnby5taW51dGVzPWdvLm1pbnV0ZS5yYW5nZSxnby5taW51dGVzLnV0Yz1nby5taW51dGUudXRjLnJhbmdlLGdvLmhvdXI9T24oZnVuY3Rpb24obil7dmFyIHQ9bi5nZXRUaW1lem9uZU9mZnNldCgpLzYwO3JldHVybiBuZXcgcG8oMzZlNSooTWF0aC5mbG9vcihuLzM2ZTUtdCkrdCkpfSxmdW5jdGlvbihuLHQpe24uc2V0VGltZShuLmdldFRpbWUoKSszNmU1Kk1hdGguZmxvb3IodCkpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRIb3VycygpfSksZ28uaG91cnM9Z28uaG91ci5yYW5nZSxnby5ob3Vycy51dGM9Z28uaG91ci51dGMucmFuZ2UsZ28ubW9udGg9T24oZnVuY3Rpb24obil7cmV0dXJuIG49Z28uZGF5KG4pLG4uc2V0RGF0ZSgxKSxufSxmdW5jdGlvbihuLHQpe24uc2V0TW9udGgobi5nZXRNb250aCgpK3QpfSxmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNb250aCgpfSksZ28ubW9udGhzPWdvLm1vbnRoLnJhbmdlLGdvLm1vbnRocy51dGM9Z28ubW9udGgudXRjLnJhbmdlO3ZhciBLbD1bMWUzLDVlMywxNWUzLDNlNCw2ZTQsM2U1LDllNSwxOGU1LDM2ZTUsMTA4ZTUsMjE2ZTUsNDMyZTUsODY0ZTUsMTcyOGU1LDYwNDhlNSwyNTkyZTYsNzc3NmU2LDMxNTM2ZTZdLFFsPVtbZ28uc2Vjb25kLDFdLFtnby5zZWNvbmQsNV0sW2dvLnNlY29uZCwxNV0sW2dvLnNlY29uZCwzMF0sW2dvLm1pbnV0ZSwxXSxbZ28ubWludXRlLDVdLFtnby5taW51dGUsMTVdLFtnby5taW51dGUsMzBdLFtnby5ob3VyLDFdLFtnby5ob3VyLDNdLFtnby5ob3VyLDZdLFtnby5ob3VyLDEyXSxbZ28uZGF5LDFdLFtnby5kYXksMl0sW2dvLndlZWssMV0sW2dvLm1vbnRoLDFdLFtnby5tb250aCwzXSxbZ28ueWVhciwxXV0sbmM9V2wubXVsdGkoW1tcIi4lTFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldE1pbGxpc2Vjb25kcygpfV0sW1wiOiVTXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0U2Vjb25kcygpfV0sW1wiJUk6JU1cIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNaW51dGVzKCl9XSxbXCIlSSAlcFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldEhvdXJzKCl9XSxbXCIlYSAlZFwiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldERheSgpJiYxIT1uLmdldERhdGUoKX1dLFtcIiViICVkXCIsZnVuY3Rpb24obil7cmV0dXJuIDEhPW4uZ2V0RGF0ZSgpfV0sW1wiJUJcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRNb250aCgpfV0sW1wiJVlcIix6dF1dKSx0Yz17cmFuZ2U6ZnVuY3Rpb24obix0LGUpe3JldHVybiBvYS5yYW5nZShNYXRoLmNlaWwobi9lKSplLCt0LGUpLm1hcCh1YSl9LGZsb29yOnksY2VpbDp5fTtRbC55ZWFyPWdvLnllYXIsZ28uc2NhbGU9ZnVuY3Rpb24oKXtyZXR1cm4gcmEob2Euc2NhbGUubGluZWFyKCksUWwsbmMpfTt2YXIgZWM9UWwubWFwKGZ1bmN0aW9uKG4pe3JldHVybltuWzBdLnV0YyxuWzFdXX0pLHJjPUpsLm11bHRpKFtbXCIuJUxcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENNaWxsaXNlY29uZHMoKX1dLFtcIjolU1wiLGZ1bmN0aW9uKG4pe3JldHVybiBuLmdldFVUQ1NlY29uZHMoKX1dLFtcIiVJOiVNXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0VVRDTWludXRlcygpfV0sW1wiJUkgJXBcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENIb3VycygpfV0sW1wiJWEgJWRcIixmdW5jdGlvbihuKXtyZXR1cm4gbi5nZXRVVENEYXkoKSYmMSE9bi5nZXRVVENEYXRlKCl9XSxbXCIlYiAlZFwiLGZ1bmN0aW9uKG4pe3JldHVybiAxIT1uLmdldFVUQ0RhdGUoKX1dLFtcIiVCXCIsZnVuY3Rpb24obil7cmV0dXJuIG4uZ2V0VVRDTW9udGgoKX1dLFtcIiVZXCIsenRdXSk7ZWMueWVhcj1nby55ZWFyLnV0Yyxnby5zY2FsZS51dGM9ZnVuY3Rpb24oKXtyZXR1cm4gcmEob2Euc2NhbGUubGluZWFyKCksZWMscmMpfSxvYS50ZXh0PUFuKGZ1bmN0aW9uKG4pe3JldHVybiBuLnJlc3BvbnNlVGV4dH0pLG9hLmpzb249ZnVuY3Rpb24obix0KXtyZXR1cm4gQ24obixcImFwcGxpY2F0aW9uL2pzb25cIixpYSx0KX0sb2EuaHRtbD1mdW5jdGlvbihuLHQpe3JldHVybiBDbihuLFwidGV4dC9odG1sXCIsYWEsdCl9LG9hLnhtbD1BbihmdW5jdGlvbihuKXtyZXR1cm4gbi5yZXNwb25zZVhNTH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD8odGhpcy5kMz1vYSxkZWZpbmUob2EpKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1vYTp0aGlzLmQzPW9hfSgpOyIsIi8vIGQzLnRpcFxuLy8gQ29weXJpZ2h0IChjKSAyMDEzIEp1c3RpbiBQYWxtZXJcbi8vXG4vLyBUb29sdGlwcyBmb3IgZDMuanMgU1ZHIHZpc3VhbGl6YXRpb25zXG5cbihmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlIHdpdGggZDMgYXMgYSBkZXBlbmRlbmN5LlxuICAgIGRlZmluZShbJ2QzJ10sIGZhY3RvcnkpXG4gIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAvLyBDb21tb25KU1xuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZDMpIHtcbiAgICAgIGQzLnRpcCA9IGZhY3RvcnkoZDMpXG4gICAgICByZXR1cm4gZDMudGlwXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEJyb3dzZXIgZ2xvYmFsLlxuICAgIHJvb3QuZDMudGlwID0gZmFjdG9yeShyb290LmQzKVxuICB9XG59KHRoaXMsIGZ1bmN0aW9uIChkMykge1xuXG4gIC8vIFB1YmxpYyAtIGNvbnRydWN0cyBhIG5ldyB0b29sdGlwXG4gIC8vXG4gIC8vIFJldHVybnMgYSB0aXBcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBkaXJlY3Rpb24gPSBkM190aXBfZGlyZWN0aW9uLFxuICAgICAgICBvZmZzZXQgICAgPSBkM190aXBfb2Zmc2V0LFxuICAgICAgICBodG1sICAgICAgPSBkM190aXBfaHRtbCxcbiAgICAgICAgbm9kZSAgICAgID0gaW5pdE5vZGUoKSxcbiAgICAgICAgc3ZnICAgICAgID0gbnVsbCxcbiAgICAgICAgcG9pbnQgICAgID0gbnVsbCxcbiAgICAgICAgdGFyZ2V0ICAgID0gbnVsbFxuXG4gICAgZnVuY3Rpb24gdGlwKHZpcykge1xuICAgICAgc3ZnID0gZ2V0U1ZHTm9kZSh2aXMpXG4gICAgICBwb2ludCA9IHN2Zy5jcmVhdGVTVkdQb2ludCgpXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpXG4gICAgfVxuXG4gICAgLy8gUHVibGljIC0gc2hvdyB0aGUgdG9vbHRpcCBvbiB0aGUgc2NyZWVuXG4gICAgLy9cbiAgICAvLyBSZXR1cm5zIGEgdGlwXG4gICAgdGlwLnNob3cgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICAgaWYoYXJnc1thcmdzLmxlbmd0aCAtIDFdIGluc3RhbmNlb2YgU1ZHRWxlbWVudCkgdGFyZ2V0ID0gYXJncy5wb3AoKVxuXG4gICAgICB2YXIgY29udGVudCA9IGh0bWwuYXBwbHkodGhpcywgYXJncyksXG4gICAgICAgICAgcG9mZnNldCA9IG9mZnNldC5hcHBseSh0aGlzLCBhcmdzKSxcbiAgICAgICAgICBkaXIgICAgID0gZGlyZWN0aW9uLmFwcGx5KHRoaXMsIGFyZ3MpLFxuICAgICAgICAgIG5vZGVsICAgPSBnZXROb2RlRWwoKSxcbiAgICAgICAgICBpICAgICAgID0gZGlyZWN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgY29vcmRzLFxuICAgICAgICAgIHNjcm9sbFRvcCAgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxuICAgICAgICAgIHNjcm9sbExlZnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnRcblxuICAgICAgbm9kZWwuaHRtbChjb250ZW50KVxuICAgICAgICAuc3R5bGUoeyBvcGFjaXR5OiAxLCAncG9pbnRlci1ldmVudHMnOiAnYWxsJyB9KVxuXG4gICAgICB3aGlsZShpLS0pIG5vZGVsLmNsYXNzZWQoZGlyZWN0aW9uc1tpXSwgZmFsc2UpXG4gICAgICBjb29yZHMgPSBkaXJlY3Rpb25fY2FsbGJhY2tzLmdldChkaXIpLmFwcGx5KHRoaXMpXG4gICAgICBub2RlbC5jbGFzc2VkKGRpciwgdHJ1ZSkuc3R5bGUoe1xuICAgICAgICB0b3A6IChjb29yZHMudG9wICsgIHBvZmZzZXRbMF0pICsgc2Nyb2xsVG9wICsgJ3B4JyxcbiAgICAgICAgbGVmdDogKGNvb3Jkcy5sZWZ0ICsgcG9mZnNldFsxXSkgKyBzY3JvbGxMZWZ0ICsgJ3B4J1xuICAgICAgfSlcblxuICAgICAgcmV0dXJuIHRpcFxuICAgIH1cblxuICAgIC8vIFB1YmxpYyAtIGhpZGUgdGhlIHRvb2x0aXBcbiAgICAvL1xuICAgIC8vIFJldHVybnMgYSB0aXBcbiAgICB0aXAuaGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vZGVsID0gZ2V0Tm9kZUVsKClcbiAgICAgIG5vZGVsLnN0eWxlKHsgb3BhY2l0eTogMCwgJ3BvaW50ZXItZXZlbnRzJzogJ25vbmUnIH0pXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljOiBQcm94eSBhdHRyIGNhbGxzIHRvIHRoZSBkMyB0aXAgY29udGFpbmVyLiAgU2V0cyBvciBnZXRzIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAvL1xuICAgIC8vIG4gLSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGVcbiAgICAvLyB2IC0gdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZVxuICAgIC8vXG4gICAgLy8gUmV0dXJucyB0aXAgb3IgYXR0cmlidXRlIHZhbHVlXG4gICAgdGlwLmF0dHIgPSBmdW5jdGlvbihuLCB2KSB7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIgJiYgdHlwZW9mIG4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBnZXROb2RlRWwoKS5hdHRyKG4pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYXJncyA9ICBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgICAgIGQzLnNlbGVjdGlvbi5wcm90b3R5cGUuYXR0ci5hcHBseShnZXROb2RlRWwoKSwgYXJncylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRpcFxuICAgIH1cblxuICAgIC8vIFB1YmxpYzogUHJveHkgc3R5bGUgY2FsbHMgdG8gdGhlIGQzIHRpcCBjb250YWluZXIuICBTZXRzIG9yIGdldHMgYSBzdHlsZSB2YWx1ZS5cbiAgICAvL1xuICAgIC8vIG4gLSBuYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgIC8vIHYgLSB2YWx1ZSBvZiB0aGUgcHJvcGVydHlcbiAgICAvL1xuICAgIC8vIFJldHVybnMgdGlwIG9yIHN0eWxlIHByb3BlcnR5IHZhbHVlXG4gICAgdGlwLnN0eWxlID0gZnVuY3Rpb24obiwgdikge1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyICYmIHR5cGVvZiBuID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZ2V0Tm9kZUVsKCkuc3R5bGUobilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBhcmdzID0gIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cylcbiAgICAgICAgZDMuc2VsZWN0aW9uLnByb3RvdHlwZS5zdHlsZS5hcHBseShnZXROb2RlRWwoKSwgYXJncylcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRpcFxuICAgIH1cblxuICAgIC8vIFB1YmxpYzogU2V0IG9yIGdldCB0aGUgZGlyZWN0aW9uIG9mIHRoZSB0b29sdGlwXG4gICAgLy9cbiAgICAvLyB2IC0gT25lIG9mIG4obm9ydGgpLCBzKHNvdXRoKSwgZShlYXN0KSwgb3Igdyh3ZXN0KSwgbncobm9ydGh3ZXN0KSxcbiAgICAvLyAgICAgc3coc291dGh3ZXN0KSwgbmUobm9ydGhlYXN0KSBvciBzZShzb3V0aGVhc3QpXG4gICAgLy9cbiAgICAvLyBSZXR1cm5zIHRpcCBvciBkaXJlY3Rpb25cbiAgICB0aXAuZGlyZWN0aW9uID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gZGlyZWN0aW9uXG4gICAgICBkaXJlY3Rpb24gPSB2ID09IG51bGwgPyB2IDogZDMuZnVuY3Rvcih2KVxuXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljOiBTZXRzIG9yIGdldHMgdGhlIG9mZnNldCBvZiB0aGUgdGlwXG4gICAgLy9cbiAgICAvLyB2IC0gQXJyYXkgb2YgW3gsIHldIG9mZnNldFxuICAgIC8vXG4gICAgLy8gUmV0dXJucyBvZmZzZXQgb3JcbiAgICB0aXAub2Zmc2V0ID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb2Zmc2V0XG4gICAgICBvZmZzZXQgPSB2ID09IG51bGwgPyB2IDogZDMuZnVuY3Rvcih2KVxuXG4gICAgICByZXR1cm4gdGlwXG4gICAgfVxuXG4gICAgLy8gUHVibGljOiBzZXRzIG9yIGdldHMgdGhlIGh0bWwgdmFsdWUgb2YgdGhlIHRvb2x0aXBcbiAgICAvL1xuICAgIC8vIHYgLSBTdHJpbmcgdmFsdWUgb2YgdGhlIHRpcFxuICAgIC8vXG4gICAgLy8gUmV0dXJucyBodG1sIHZhbHVlIG9yIHRpcFxuICAgIHRpcC5odG1sID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaHRtbFxuICAgICAgaHRtbCA9IHYgPT0gbnVsbCA/IHYgOiBkMy5mdW5jdG9yKHYpXG5cbiAgICAgIHJldHVybiB0aXBcbiAgICB9XG5cbiAgICAvLyBQdWJsaWM6IGRlc3Ryb3lzIHRoZSB0b29sdGlwIGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIERPTVxuICAgIC8vXG4gICAgLy8gUmV0dXJucyBhIHRpcFxuICAgIHRpcC5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZihub2RlKSB7XG4gICAgICAgIGdldE5vZGVFbCgpLnJlbW92ZSgpO1xuICAgICAgICBub2RlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aXA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZDNfdGlwX2RpcmVjdGlvbigpIHsgcmV0dXJuICduJyB9XG4gICAgZnVuY3Rpb24gZDNfdGlwX29mZnNldCgpIHsgcmV0dXJuIFswLCAwXSB9XG4gICAgZnVuY3Rpb24gZDNfdGlwX2h0bWwoKSB7IHJldHVybiAnICcgfVxuXG4gICAgdmFyIGRpcmVjdGlvbl9jYWxsYmFja3MgPSBkMy5tYXAoe1xuICAgICAgbjogIGRpcmVjdGlvbl9uLFxuICAgICAgczogIGRpcmVjdGlvbl9zLFxuICAgICAgZTogIGRpcmVjdGlvbl9lLFxuICAgICAgdzogIGRpcmVjdGlvbl93LFxuICAgICAgbnc6IGRpcmVjdGlvbl9udyxcbiAgICAgIG5lOiBkaXJlY3Rpb25fbmUsXG4gICAgICBzdzogZGlyZWN0aW9uX3N3LFxuICAgICAgc2U6IGRpcmVjdGlvbl9zZVxuICAgIH0pLFxuXG4gICAgZGlyZWN0aW9ucyA9IGRpcmVjdGlvbl9jYWxsYmFja3Mua2V5cygpXG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fbigpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94Lm4ueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm4ueCAtIG5vZGUub2Zmc2V0V2lkdGggLyAyXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX3MoKSB7XG4gICAgICB2YXIgYmJveCA9IGdldFNjcmVlbkJCb3goKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiAgYmJveC5zLnksXG4gICAgICAgIGxlZnQ6IGJib3gucy54IC0gbm9kZS5vZmZzZXRXaWR0aCAvIDJcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fZSgpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94LmUueSAtIG5vZGUub2Zmc2V0SGVpZ2h0IC8gMixcbiAgICAgICAgbGVmdDogYmJveC5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fdygpIHtcbiAgICAgIHZhciBiYm94ID0gZ2V0U2NyZWVuQkJveCgpXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b3A6ICBiYm94LncueSAtIG5vZGUub2Zmc2V0SGVpZ2h0IC8gMixcbiAgICAgICAgbGVmdDogYmJveC53LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX253KCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3gubncueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm53LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX25lKCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3gubmUueSAtIG5vZGUub2Zmc2V0SGVpZ2h0LFxuICAgICAgICBsZWZ0OiBiYm94Lm5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkaXJlY3Rpb25fc3coKSB7XG4gICAgICB2YXIgYmJveCA9IGdldFNjcmVlbkJCb3goKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiAgYmJveC5zdy55LFxuICAgICAgICBsZWZ0OiBiYm94LnN3LnggLSBub2RlLm9mZnNldFdpZHRoXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGlyZWN0aW9uX3NlKCkge1xuICAgICAgdmFyIGJib3ggPSBnZXRTY3JlZW5CQm94KClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogIGJib3guc2UueSxcbiAgICAgICAgbGVmdDogYmJveC5lLnhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0Tm9kZSgpIHtcbiAgICAgIHZhciBub2RlID0gZDMuc2VsZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKVxuICAgICAgbm9kZS5zdHlsZSh7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICdwb2ludGVyLWV2ZW50cyc6ICdub25lJyxcbiAgICAgICAgJ2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCdcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiBub2RlLm5vZGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNWR05vZGUoZWwpIHtcbiAgICAgIGVsID0gZWwubm9kZSgpXG4gICAgICBpZihlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzdmcnKVxuICAgICAgICByZXR1cm4gZWxcblxuICAgICAgcmV0dXJuIGVsLm93bmVyU1ZHRWxlbWVudFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE5vZGVFbCgpIHtcbiAgICAgIGlmKG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgbm9kZSA9IGluaXROb2RlKCk7XG4gICAgICAgIC8vIHJlLWFkZCBub2RlIHRvIERPTVxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBkMy5zZWxlY3Qobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gUHJpdmF0ZSAtIGdldHMgdGhlIHNjcmVlbiBjb29yZGluYXRlcyBvZiBhIHNoYXBlXG4gICAgLy9cbiAgICAvLyBHaXZlbiBhIHNoYXBlIG9uIHRoZSBzY3JlZW4sIHdpbGwgcmV0dXJuIGFuIFNWR1BvaW50IGZvciB0aGUgZGlyZWN0aW9uc1xuICAgIC8vIG4obm9ydGgpLCBzKHNvdXRoKSwgZShlYXN0KSwgdyh3ZXN0KSwgbmUobm9ydGhlYXN0KSwgc2Uoc291dGhlYXN0KSwgbncobm9ydGh3ZXN0KSxcbiAgICAvLyBzdyhzb3V0aHdlc3QpLlxuICAgIC8vXG4gICAgLy8gICAgKy0rLStcbiAgICAvLyAgICB8ICAgfFxuICAgIC8vICAgICsgICArXG4gICAgLy8gICAgfCAgIHxcbiAgICAvLyAgICArLSstK1xuICAgIC8vXG4gICAgLy8gUmV0dXJucyBhbiBPYmplY3Qge24sIHMsIGUsIHcsIG53LCBzdywgbmUsIHNlfVxuICAgIGZ1bmN0aW9uIGdldFNjcmVlbkJCb3goKSB7XG4gICAgICB2YXIgdGFyZ2V0ZWwgICA9IHRhcmdldCB8fCBkMy5ldmVudC50YXJnZXQ7XG5cbiAgICAgIHdoaWxlICgndW5kZWZpbmVkJyA9PT0gdHlwZW9mIHRhcmdldGVsLmdldFNjcmVlbkNUTSAmJiAndW5kZWZpbmVkJyA9PT0gdGFyZ2V0ZWwucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHRhcmdldGVsID0gdGFyZ2V0ZWwucGFyZW50Tm9kZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGJib3ggICAgICAgPSB7fSxcbiAgICAgICAgICBtYXRyaXggICAgID0gdGFyZ2V0ZWwuZ2V0U2NyZWVuQ1RNKCksXG4gICAgICAgICAgdGJib3ggICAgICA9IHRhcmdldGVsLmdldEJCb3goKSxcbiAgICAgICAgICB3aWR0aCAgICAgID0gdGJib3gud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0ICAgICA9IHRiYm94LmhlaWdodCxcbiAgICAgICAgICB4ICAgICAgICAgID0gdGJib3gueCxcbiAgICAgICAgICB5ICAgICAgICAgID0gdGJib3gueVxuXG4gICAgICBwb2ludC54ID0geFxuICAgICAgcG9pbnQueSA9IHlcbiAgICAgIGJib3gubncgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuICAgICAgcG9pbnQueCArPSB3aWR0aFxuICAgICAgYmJveC5uZSA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShtYXRyaXgpXG4gICAgICBwb2ludC55ICs9IGhlaWdodFxuICAgICAgYmJveC5zZSA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShtYXRyaXgpXG4gICAgICBwb2ludC54IC09IHdpZHRoXG4gICAgICBiYm94LnN3ID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKG1hdHJpeClcbiAgICAgIHBvaW50LnkgLT0gaGVpZ2h0IC8gMlxuICAgICAgYmJveC53ICA9IHBvaW50Lm1hdHJpeFRyYW5zZm9ybShtYXRyaXgpXG4gICAgICBwb2ludC54ICs9IHdpZHRoXG4gICAgICBiYm94LmUgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuICAgICAgcG9pbnQueCAtPSB3aWR0aCAvIDJcbiAgICAgIHBvaW50LnkgLT0gaGVpZ2h0IC8gMlxuICAgICAgYmJveC5uID0gcG9pbnQubWF0cml4VHJhbnNmb3JtKG1hdHJpeClcbiAgICAgIHBvaW50LnkgKz0gaGVpZ2h0XG4gICAgICBiYm94LnMgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0obWF0cml4KVxuXG4gICAgICByZXR1cm4gYmJveFxuICAgIH1cblxuICAgIHJldHVybiB0aXBcbiAgfTtcblxufSkpOyIsIi8vIFNWR1BhdGhTZWcgQVBJIHBvbHlmaWxsXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcHJvZ2Vycy9wYXRoc2VnXG4vL1xuLy8gVGhpcyBpcyBhIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIHRoZSBTVkdQYXRoU2VnIGFuZCBTVkdQYXRoU2VnTGlzdCBBUElzIHRoYXQgd2VyZSByZW1vdmVkIGZyb21cbi8vIFNWRzIgKGh0dHBzOi8vbGlzdHMudzMub3JnL0FyY2hpdmVzL1B1YmxpYy93d3ctc3ZnLzIwMTVKdW4vMDA0NC5odG1sKSwgaW5jbHVkaW5nIHRoZSBsYXRlc3Qgc3BlY1xuLy8gY2hhbmdlcyB3aGljaCB3ZXJlIGltcGxlbWVudGVkIGluIEZpcmVmb3ggNDMgYW5kIENocm9tZSA0Ni5cblxuKGZ1bmN0aW9uKCkgeyBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAoIShcIlNWR1BhdGhTZWdcIiBpbiB3aW5kb3cpKSB7XG4gICAgICAgIC8vIFNwZWM6IGh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL3NpbmdsZS1wYWdlLmh0bWwjcGF0aHMtSW50ZXJmYWNlU1ZHUGF0aFNlZ1xuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZyA9IGZ1bmN0aW9uKHR5cGUsIHR5cGVBc0xldHRlciwgb3duaW5nUGF0aFNlZ0xpc3QpIHtcbiAgICAgICAgICAgIHRoaXMucGF0aFNlZ1R5cGUgPSB0eXBlO1xuICAgICAgICAgICAgdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyID0gdHlwZUFzTGV0dGVyO1xuICAgICAgICAgICAgdGhpcy5fb3duaW5nUGF0aFNlZ0xpc3QgPSBvd25pbmdQYXRoU2VnTGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIFNWR1BhdGhTZWcucHJvdG90eXBlLmNsYXNzbmFtZSA9IFwiU1ZHUGF0aFNlZ1wiO1xuXG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19VTktOT1dOID0gMDtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0NMT1NFUEFUSCA9IDE7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19NT1ZFVE9fQUJTID0gMjtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19SRUwgPSAzO1xuICAgICAgICBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX0FCUyA9IDQ7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fUkVMID0gNTtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfQUJTID0gNjtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfUkVMID0gNztcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX0FCUyA9IDg7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19SRUwgPSA5O1xuICAgICAgICBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX0FCUyA9IDEwO1xuICAgICAgICBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX1JFTCA9IDExO1xuICAgICAgICBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX0hPUklaT05UQUxfQUJTID0gMTI7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fSE9SSVpPTlRBTF9SRUwgPSAxMztcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19WRVJUSUNBTF9BQlMgPSAxNDtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19WRVJUSUNBTF9SRUwgPSAxNTtcbiAgICAgICAgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX0FCUyA9IDE2O1xuICAgICAgICBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19DVUJJQ19TTU9PVEhfUkVMID0gMTc7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19TTU9PVEhfQUJTID0gMTg7XG4gICAgICAgIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19TTU9PVEhfUkVMID0gMTk7XG5cbiAgICAgICAgLy8gTm90aWZ5IG93bmluZyBQYXRoU2VnTGlzdCBvbiBhbnkgY2hhbmdlcyBzbyB0aGV5IGNhbiBiZSBzeW5jaHJvbml6ZWQgYmFjayB0byB0aGUgcGF0aCBlbGVtZW50LlxuICAgICAgICBTVkdQYXRoU2VnLnByb3RvdHlwZS5fc2VnbWVudENoYW5nZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25pbmdQYXRoU2VnTGlzdClcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25pbmdQYXRoU2VnTGlzdC5zZWdtZW50Q2hhbmdlZCh0aGlzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnQ2xvc2VQYXRoID0gZnVuY3Rpb24ob3duaW5nUGF0aFNlZ0xpc3QpIHtcbiAgICAgICAgICAgIFNWR1BhdGhTZWcuY2FsbCh0aGlzLCBTVkdQYXRoU2VnLlBBVEhTRUdfQ0xPU0VQQVRILCBcInpcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdDbG9zZVBhdGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTVkdQYXRoU2VnLnByb3RvdHlwZSk7XG4gICAgICAgIFNWR1BhdGhTZWdDbG9zZVBhdGgucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0Nsb3NlUGF0aF1cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnQ2xvc2VQYXRoLnByb3RvdHlwZS5fYXNQYXRoU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhdGhTZWdUeXBlQXNMZXR0ZXI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0Nsb3NlUGF0aC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ2xvc2VQYXRoKHVuZGVmaW5lZCk7IH1cblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ01vdmV0b0FicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4LCB5KSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19BQlMsIFwiTVwiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB5O1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdNb3ZldG9BYnMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTVkdQYXRoU2VnLnByb3RvdHlwZSk7XG4gICAgICAgIFNWR1BhdGhTZWdNb3ZldG9BYnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ01vdmV0b0Fic11cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnTW92ZXRvQWJzLnByb3RvdHlwZS5fYXNQYXRoU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhdGhTZWdUeXBlQXNMZXR0ZXIgKyBcIiBcIiArIHRoaXMuX3ggKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ01vdmV0b0Ficy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTW92ZXRvQWJzKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSk7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdNb3ZldG9BYnMucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ01vdmV0b0Ficy5wcm90b3R5cGUsIFwieVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95OyB9LCBzZXQ6IGZ1bmN0aW9uKHkpIHsgdGhpcy5feSA9IHk7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdNb3ZldG9SZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSkge1xuICAgICAgICAgICAgU1ZHUGF0aFNlZy5jYWxsKHRoaXMsIFNWR1BhdGhTZWcuUEFUSFNFR19NT1ZFVE9fUkVMLCBcIm1cIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnTW92ZXRvUmVsLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnTW92ZXRvUmVsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJbb2JqZWN0IFNWR1BhdGhTZWdNb3ZldG9SZWxdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ01vdmV0b1JlbC5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl94ICsgXCIgXCIgKyB0aGlzLl95OyB9XG4gICAgICAgIFNWR1BhdGhTZWdNb3ZldG9SZWwucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ01vdmV0b1JlbCh1bmRlZmluZWQsIHRoaXMuX3gsIHRoaXMuX3kpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnTW92ZXRvUmVsLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdNb3ZldG9SZWwucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnTGluZXRvQWJzID0gZnVuY3Rpb24ob3duaW5nUGF0aFNlZ0xpc3QsIHgsIHkpIHtcbiAgICAgICAgICAgIFNWR1BhdGhTZWcuY2FsbCh0aGlzLCBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX0FCUywgXCJMXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b0Ficy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b0Ficy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnTGluZXRvQWJzXVwiOyB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9BYnMucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feCArIFwiIFwiICsgdGhpcy5feTsgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9BYnModW5kZWZpbmVkLCB0aGlzLl94LCB0aGlzLl95KTsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0xpbmV0b0Ficy5wcm90b3R5cGUsIFwieFwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94OyB9LCBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGhpcy5feCA9IHg7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnTGluZXRvQWJzLnByb3RvdHlwZSwgXCJ5XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3k7IH0sIHNldDogZnVuY3Rpb24oeSkgeyB0aGlzLl95ID0geTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0xpbmV0b1JlbCA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4LCB5KSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19SRUwsIFwibFwiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB5O1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9SZWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTVkdQYXRoU2VnLnByb3RvdHlwZSk7XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9SZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0xpbmV0b1JlbF1cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvUmVsLnByb3RvdHlwZS5fYXNQYXRoU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhdGhTZWdUeXBlQXNMZXR0ZXIgKyBcIiBcIiArIHRoaXMuX3ggKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b1JlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvUmVsKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSk7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdMaW5ldG9SZWwucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0xpbmV0b1JlbC5wcm90b3R5cGUsIFwieVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95OyB9LCBzZXQ6IGZ1bmN0aW9uKHkpIHsgdGhpcy5feSA9IHk7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNBYnMgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICAgICAgICAgIFNWR1BhdGhTZWcuY2FsbCh0aGlzLCBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19DVUJJQ19BQlMsIFwiQ1wiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB5O1xuICAgICAgICAgICAgdGhpcy5feDEgPSB4MTtcbiAgICAgICAgICAgIHRoaXMuX3kxID0geTE7XG4gICAgICAgICAgICB0aGlzLl94MiA9IHgyO1xuICAgICAgICAgICAgdGhpcy5feTIgPSB5MjtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJbb2JqZWN0IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNBYnNdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY0Ficy5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl94MSArIFwiIFwiICsgdGhpcy5feTEgKyBcIiBcIiArIHRoaXMuX3gyICsgXCIgXCIgKyB0aGlzLl95MiArIFwiIFwiICsgdGhpcy5feCArIFwiIFwiICsgdGhpcy5feTsgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNBYnModW5kZWZpbmVkLCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl94MSwgdGhpcy5feTEsIHRoaXMuX3gyLCB0aGlzLl95Mik7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNBYnMucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY0Ficy5wcm90b3R5cGUsIFwieVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95OyB9LCBzZXQ6IGZ1bmN0aW9uKHkpIHsgdGhpcy5feSA9IHk7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzLnByb3RvdHlwZSwgXCJ4MVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94MTsgfSwgc2V0OiBmdW5jdGlvbih4MSkgeyB0aGlzLl94MSA9IHgxOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY0Ficy5wcm90b3R5cGUsIFwieTFcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTE7IH0sIHNldDogZnVuY3Rpb24oeTEpIHsgdGhpcy5feTEgPSB5MTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNBYnMucHJvdG90eXBlLCBcIngyXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3gyOyB9LCBzZXQ6IGZ1bmN0aW9uKHgyKSB7IHRoaXMuX3gyID0geDI7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzLnByb3RvdHlwZSwgXCJ5MlwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95MjsgfSwgc2V0OiBmdW5jdGlvbih5MikgeyB0aGlzLl95MiA9IHkyOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsID0gZnVuY3Rpb24ob3duaW5nUGF0aFNlZ0xpc3QsIHgsIHksIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfUkVMLCBcImNcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgICAgIHRoaXMuX3gxID0geDE7XG4gICAgICAgICAgICB0aGlzLl95MSA9IHkxO1xuICAgICAgICAgICAgdGhpcy5feDIgPSB4MjtcbiAgICAgICAgICAgIHRoaXMuX3kyID0geTI7XG4gICAgICAgIH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1JlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1JlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsXVwiOyB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNSZWwucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feDEgKyBcIiBcIiArIHRoaXMuX3kxICsgXCIgXCIgKyB0aGlzLl94MiArIFwiIFwiICsgdGhpcy5feTIgKyBcIiBcIiArIHRoaXMuX3ggKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1JlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feDEsIHRoaXMuX3kxLCB0aGlzLl94MiwgdGhpcy5feTIpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNSZWwucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1JlbC5wcm90b3R5cGUsIFwieDFcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDE7IH0sIHNldDogZnVuY3Rpb24oeDEpIHsgdGhpcy5feDEgPSB4MTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNSZWwucHJvdG90eXBlLCBcInkxXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3kxOyB9LCBzZXQ6IGZ1bmN0aW9uKHkxKSB7IHRoaXMuX3kxID0geTE7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsLnByb3RvdHlwZSwgXCJ4MlwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94MjsgfSwgc2V0OiBmdW5jdGlvbih4MikgeyB0aGlzLl94MiA9IHgyOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1JlbC5wcm90b3R5cGUsIFwieTJcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTI7IH0sIHNldDogZnVuY3Rpb24oeTIpIHsgdGhpcy5feTIgPSB5MjsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSwgeDEsIHkxKSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX0FCUywgXCJRXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgICAgICB0aGlzLl94MSA9IHgxO1xuICAgICAgICAgICAgdGhpcy5feTEgPSB5MTtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY0Ficy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnNdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feDEgKyBcIiBcIiArIHRoaXMuX3kxICsgXCIgXCIgKyB0aGlzLl94ICsgXCIgXCIgKyB0aGlzLl95OyB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljQWJzKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feDEsIHRoaXMuX3kxKTsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNBYnMucHJvdG90eXBlLCBcIngxXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3gxOyB9LCBzZXQ6IGZ1bmN0aW9uKHgxKSB7IHRoaXMuX3gxID0geDE7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY0Ficy5wcm90b3R5cGUsIFwieTFcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTE7IH0sIHNldDogZnVuY3Rpb24oeTEpIHsgdGhpcy5feTEgPSB5MTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSwgeDEsIHkxKSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX1JFTCwgXCJxXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgICAgICB0aGlzLl94MSA9IHgxO1xuICAgICAgICAgICAgdGhpcy5feTEgPSB5MTtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1JlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWxdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feDEgKyBcIiBcIiArIHRoaXMuX3kxICsgXCIgXCIgKyB0aGlzLl94ICsgXCIgXCIgKyB0aGlzLl95OyB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljUmVsLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljUmVsKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feDEsIHRoaXMuX3kxKTsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwucHJvdG90eXBlLCBcIngxXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3gxOyB9LCBzZXQ6IGZ1bmN0aW9uKHgxKSB7IHRoaXMuX3gxID0geDE7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1JlbC5wcm90b3R5cGUsIFwieTFcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTE7IH0sIHNldDogZnVuY3Rpb24oeTEpIHsgdGhpcy5feTEgPSB5MTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0FyY0FicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4LCB5LCByMSwgcjIsIGFuZ2xlLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZykge1xuICAgICAgICAgICAgU1ZHUGF0aFNlZy5jYWxsKHRoaXMsIFNWR1BhdGhTZWcuUEFUSFNFR19BUkNfQUJTLCBcIkFcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgICAgIHRoaXMuX3IxID0gcjE7XG4gICAgICAgICAgICB0aGlzLl9yMiA9IHIyO1xuICAgICAgICAgICAgdGhpcy5fYW5nbGUgPSBhbmdsZTtcbiAgICAgICAgICAgIHRoaXMuX2xhcmdlQXJjRmxhZyA9IGxhcmdlQXJjRmxhZztcbiAgICAgICAgICAgIHRoaXMuX3N3ZWVwRmxhZyA9IHN3ZWVwRmxhZztcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJbb2JqZWN0IFNWR1BhdGhTZWdBcmNBYnNdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0FyY0Ficy5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl9yMSArIFwiIFwiICsgdGhpcy5fcjIgKyBcIiBcIiArIHRoaXMuX2FuZ2xlICsgXCIgXCIgKyAodGhpcy5fbGFyZ2VBcmNGbGFnID8gXCIxXCIgOiBcIjBcIikgKyBcIiBcIiArICh0aGlzLl9zd2VlcEZsYWcgPyBcIjFcIiA6IFwiMFwiKSArIFwiIFwiICsgdGhpcy5feCArIFwiIFwiICsgdGhpcy5feTsgfVxuICAgICAgICBTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdBcmNBYnModW5kZWZpbmVkLCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl9yMSwgdGhpcy5fcjIsIHRoaXMuX2FuZ2xlLCB0aGlzLl9sYXJnZUFyY0ZsYWcsIHRoaXMuX3N3ZWVwRmxhZyk7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdBcmNBYnMucHJvdG90eXBlLCBcInhcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDsgfSwgc2V0OiBmdW5jdGlvbih4KSB7IHRoaXMuX3ggPSB4OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0FyY0Ficy5wcm90b3R5cGUsIFwieVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95OyB9LCBzZXQ6IGZ1bmN0aW9uKHkpIHsgdGhpcy5feSA9IHk7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZSwgXCJyMVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl9yMTsgfSwgc2V0OiBmdW5jdGlvbihyMSkgeyB0aGlzLl9yMSA9IHIxOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0FyY0Ficy5wcm90b3R5cGUsIFwicjJcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fcjI7IH0sIHNldDogZnVuY3Rpb24ocjIpIHsgdGhpcy5fcjIgPSByMjsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdBcmNBYnMucHJvdG90eXBlLCBcImFuZ2xlXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX2FuZ2xlOyB9LCBzZXQ6IGZ1bmN0aW9uKGFuZ2xlKSB7IHRoaXMuX2FuZ2xlID0gYW5nbGU7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZSwgXCJsYXJnZUFyY0ZsYWdcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fbGFyZ2VBcmNGbGFnOyB9LCBzZXQ6IGZ1bmN0aW9uKGxhcmdlQXJjRmxhZykgeyB0aGlzLl9sYXJnZUFyY0ZsYWcgPSBsYXJnZUFyY0ZsYWc7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQXJjQWJzLnByb3RvdHlwZSwgXCJzd2VlcEZsYWdcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fc3dlZXBGbGFnOyB9LCBzZXQ6IGZ1bmN0aW9uKHN3ZWVwRmxhZykgeyB0aGlzLl9zd2VlcEZsYWcgPSBzd2VlcEZsYWc7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdBcmNSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSwgcjEsIHIyLCBhbmdsZSwgbGFyZ2VBcmNGbGFnLCBzd2VlcEZsYWcpIHtcbiAgICAgICAgICAgIFNWR1BhdGhTZWcuY2FsbCh0aGlzLCBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX1JFTCwgXCJhXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgICAgICB0aGlzLl9yMSA9IHIxO1xuICAgICAgICAgICAgdGhpcy5fcjIgPSByMjtcbiAgICAgICAgICAgIHRoaXMuX2FuZ2xlID0gYW5nbGU7XG4gICAgICAgICAgICB0aGlzLl9sYXJnZUFyY0ZsYWcgPSBsYXJnZUFyY0ZsYWc7XG4gICAgICAgICAgICB0aGlzLl9zd2VlcEZsYWcgPSBzd2VlcEZsYWc7XG4gICAgICAgIH1cbiAgICAgICAgU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnQXJjUmVsXVwiOyB9XG4gICAgICAgIFNWR1BhdGhTZWdBcmNSZWwucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5fcjEgKyBcIiBcIiArIHRoaXMuX3IyICsgXCIgXCIgKyB0aGlzLl9hbmdsZSArIFwiIFwiICsgKHRoaXMuX2xhcmdlQXJjRmxhZyA/IFwiMVwiIDogXCIwXCIpICsgXCIgXCIgKyAodGhpcy5fc3dlZXBGbGFnID8gXCIxXCIgOiBcIjBcIikgKyBcIiBcIiArIHRoaXMuX3ggKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQXJjUmVsKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSwgdGhpcy5fcjEsIHRoaXMuX3IyLCB0aGlzLl9hbmdsZSwgdGhpcy5fbGFyZ2VBcmNGbGFnLCB0aGlzLl9zd2VlcEZsYWcpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQXJjUmVsLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdBcmNSZWwucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUsIFwicjFcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5fcjE7IH0sIHNldDogZnVuY3Rpb24ocjEpIHsgdGhpcy5fcjEgPSByMTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdBcmNSZWwucHJvdG90eXBlLCBcInIyXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3IyOyB9LCBzZXQ6IGZ1bmN0aW9uKHIyKSB7IHRoaXMuX3IyID0gcjI7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQXJjUmVsLnByb3RvdHlwZSwgXCJhbmdsZVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl9hbmdsZTsgfSwgc2V0OiBmdW5jdGlvbihhbmdsZSkgeyB0aGlzLl9hbmdsZSA9IGFuZ2xlOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUsIFwibGFyZ2VBcmNGbGFnXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX2xhcmdlQXJjRmxhZzsgfSwgc2V0OiBmdW5jdGlvbihsYXJnZUFyY0ZsYWcpIHsgdGhpcy5fbGFyZ2VBcmNGbGFnID0gbGFyZ2VBcmNGbGFnOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0FyY1JlbC5wcm90b3R5cGUsIFwic3dlZXBGbGFnXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3N3ZWVwRmxhZzsgfSwgc2V0OiBmdW5jdGlvbihzd2VlcEZsYWcpIHsgdGhpcy5fc3dlZXBGbGFnID0gc3dlZXBGbGFnOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbEFicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4KSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19IT1JJWk9OVEFMX0FCUywgXCJIXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbEFicy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbEFic11cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbEFicy5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl94OyB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzKHVuZGVmaW5lZCwgdGhpcy5feCk7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0xpbmV0b0hvcml6b250YWxSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCkge1xuICAgICAgICAgICAgU1ZHUGF0aFNlZy5jYWxsKHRoaXMsIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fSE9SSVpPTlRBTF9SRUwsIFwiaFwiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbFJlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b0hvcml6b250YWxSZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0xpbmV0b0hvcml6b250YWxSZWxdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b0hvcml6b250YWxSZWwucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feDsgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbFJlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbFJlbCh1bmRlZmluZWQsIHRoaXMuX3gpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbFJlbC5wcm90b3R5cGUsIFwieFwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94OyB9LCBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGhpcy5feCA9IHg7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbEFicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB5KSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19WRVJUSUNBTF9BQlMsIFwiVlwiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxBYnMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTVkdQYXRoU2VnLnByb3RvdHlwZSk7XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbEFicy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxBYnNdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsQWJzLnByb3RvdHlwZS5fYXNQYXRoU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhdGhTZWdUeXBlQXNMZXR0ZXIgKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbEFicyh1bmRlZmluZWQsIHRoaXMuX3kpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnTGluZXRvVmVydGljYWxBYnMucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnTGluZXRvVmVydGljYWxSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeSkge1xuICAgICAgICAgICAgU1ZHUGF0aFNlZy5jYWxsKHRoaXMsIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fVkVSVElDQUxfUkVMLCBcInZcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgIH1cbiAgICAgICAgU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsUmVsLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxSZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsUmVsXVwiOyB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbFJlbC5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl95OyB9XG4gICAgICAgIFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbFJlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxSZWwodW5kZWZpbmVkLCB0aGlzLl95KTsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsUmVsLnByb3RvdHlwZSwgXCJ5XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3k7IH0sIHNldDogZnVuY3Rpb24oeSkgeyB0aGlzLl95ID0geTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aEFicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4LCB5LCB4MiwgeTIpIHtcbiAgICAgICAgICAgIFNWR1BhdGhTZWcuY2FsbCh0aGlzLCBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19DVUJJQ19TTU9PVEhfQUJTLCBcIlNcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgICAgIHRoaXMuX3gyID0geDI7XG4gICAgICAgICAgICB0aGlzLl95MiA9IHkyO1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTVkdQYXRoU2VnLnByb3RvdHlwZSk7XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnMucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aEFic11cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoQWJzLnByb3RvdHlwZS5fYXNQYXRoU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLnBhdGhTZWdUeXBlQXNMZXR0ZXIgKyBcIiBcIiArIHRoaXMuX3gyICsgXCIgXCIgKyB0aGlzLl95MiArIFwiIFwiICsgdGhpcy5feCArIFwiIFwiICsgdGhpcy5feTsgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnModW5kZWZpbmVkLCB0aGlzLl94LCB0aGlzLl95LCB0aGlzLl94MiwgdGhpcy5feTIpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoQWJzLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnMucHJvdG90eXBlLCBcInlcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feTsgfSwgc2V0OiBmdW5jdGlvbih5KSB7IHRoaXMuX3kgPSB5OyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aEFicy5wcm90b3R5cGUsIFwieDJcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5feDI7IH0sIHNldDogZnVuY3Rpb24oeDIpIHsgdGhpcy5feDIgPSB4MjsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnMucHJvdG90eXBlLCBcInkyXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3kyOyB9LCBzZXQ6IGZ1bmN0aW9uKHkyKSB7IHRoaXMuX3kyID0geTI7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSwgeDIsIHkyKSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX1JFTCwgXCJzXCIsIG93bmluZ1BhdGhTZWdMaXN0KTtcbiAgICAgICAgICAgIHRoaXMuX3ggPSB4O1xuICAgICAgICAgICAgdGhpcy5feSA9IHk7XG4gICAgICAgICAgICB0aGlzLl94MiA9IHgyO1xuICAgICAgICAgICAgdGhpcy5feTIgPSB5MjtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gXCJbb2JqZWN0IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhSZWxdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aFJlbC5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl94MiArIFwiIFwiICsgdGhpcy5feTIgKyBcIiBcIiArIHRoaXMuX3ggKyBcIiBcIiArIHRoaXMuX3k7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aFJlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSwgdGhpcy5feDIsIHRoaXMuX3kyKTsgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aFJlbC5wcm90b3R5cGUsIFwieFwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94OyB9LCBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGhpcy5feCA9IHg7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsLnByb3RvdHlwZSwgXCJ5XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3k7IH0sIHNldDogZnVuY3Rpb24oeSkgeyB0aGlzLl95ID0geTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhSZWwucHJvdG90eXBlLCBcIngyXCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3gyOyB9LCBzZXQ6IGZ1bmN0aW9uKHgyKSB7IHRoaXMuX3gyID0geDI7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsLnByb3RvdHlwZSwgXCJ5MlwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95MjsgfSwgc2V0OiBmdW5jdGlvbih5MikgeyB0aGlzLl95MiA9IHkyOyB0aGlzLl9zZWdtZW50Q2hhbmdlZCgpOyB9LCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXG4gICAgICAgIHdpbmRvdy5TVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aEFicyA9IGZ1bmN0aW9uKG93bmluZ1BhdGhTZWdMaXN0LCB4LCB5KSB7XG4gICAgICAgICAgICBTVkdQYXRoU2VnLmNhbGwodGhpcywgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX1NNT09USF9BQlMsIFwiVFwiLCBvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICB0aGlzLl94ID0geDtcbiAgICAgICAgICAgIHRoaXMuX3kgPSB5O1xuICAgICAgICB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljU21vb3RoQWJzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU1ZHUGF0aFNlZy5wcm90b3R5cGUpO1xuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aEFicy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIFwiW29iamVjdCBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aEFic11cIjsgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aEFicy5wcm90b3R5cGUuX2FzUGF0aFN0cmluZyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnVHlwZUFzTGV0dGVyICsgXCIgXCIgKyB0aGlzLl94ICsgXCIgXCIgKyB0aGlzLl95OyB9XG4gICAgICAgIFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljU21vb3RoQWJzLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljU21vb3RoQWJzKHVuZGVmaW5lZCwgdGhpcy5feCwgdGhpcy5feSk7IH1cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljU21vb3RoQWJzLnByb3RvdHlwZSwgXCJ4XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3g7IH0sIHNldDogZnVuY3Rpb24oeCkgeyB0aGlzLl94ID0geDsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljU21vb3RoQWJzLnByb3RvdHlwZSwgXCJ5XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuX3k7IH0sIHNldDogZnVuY3Rpb24oeSkgeyB0aGlzLl95ID0geTsgdGhpcy5fc2VnbWVudENoYW5nZWQoKTsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICB3aW5kb3cuU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWwgPSBmdW5jdGlvbihvd25pbmdQYXRoU2VnTGlzdCwgeCwgeSkge1xuICAgICAgICAgICAgU1ZHUGF0aFNlZy5jYWxsKHRoaXMsIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19TTU9PVEhfUkVMLCBcInRcIiwgb3duaW5nUGF0aFNlZ0xpc3QpO1xuICAgICAgICAgICAgdGhpcy5feCA9IHg7XG4gICAgICAgICAgICB0aGlzLl95ID0geTtcbiAgICAgICAgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNWR1BhdGhTZWcucHJvdG90eXBlKTtcbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7IHJldHVybiBcIltvYmplY3QgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWxdXCI7IH1cbiAgICAgICAgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWwucHJvdG90eXBlLl9hc1BhdGhTdHJpbmcgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ1R5cGVBc0xldHRlciArIFwiIFwiICsgdGhpcy5feCArIFwiIFwiICsgdGhpcy5feTsgfVxuICAgICAgICBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbCh1bmRlZmluZWQsIHRoaXMuX3gsIHRoaXMuX3kpOyB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbC5wcm90b3R5cGUsIFwieFwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl94OyB9LCBzZXQ6IGZ1bmN0aW9uKHgpIHsgdGhpcy5feCA9IHg7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbC5wcm90b3R5cGUsIFwieVwiLCB7IGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLl95OyB9LCBzZXQ6IGZ1bmN0aW9uKHkpIHsgdGhpcy5feSA9IHk7IHRoaXMuX3NlZ21lbnRDaGFuZ2VkKCk7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG5cbiAgICAgICAgLy8gQWRkIGNyZWF0ZVNWR1BhdGhTZWcqIGZ1bmN0aW9ucyB0byBTVkdQYXRoRWxlbWVudC5cbiAgICAgICAgLy8gU3BlYzogaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvc2luZ2xlLXBhZ2UuaHRtbCNwYXRocy1JbnRlcmZhY2VTVkdQYXRoRWxlbWVudC5cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdDbG9zZVBhdGggPSBmdW5jdGlvbigpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ2xvc2VQYXRoKHVuZGVmaW5lZCk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdNb3ZldG9BYnMgPSBmdW5jdGlvbih4LCB5KSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ01vdmV0b0Ficyh1bmRlZmluZWQsIHgsIHkpOyB9XG4gICAgICAgIFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTVkdQYXRoU2VnTW92ZXRvUmVsID0gZnVuY3Rpb24oeCwgeSkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdNb3ZldG9SZWwodW5kZWZpbmVkLCB4LCB5KTsgfVxuICAgICAgICBTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU1ZHUGF0aFNlZ0xpbmV0b0FicyA9IGZ1bmN0aW9uKHgsIHkpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvQWJzKHVuZGVmaW5lZCwgeCwgeSk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdMaW5ldG9SZWwgPSBmdW5jdGlvbih4LCB5KSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ0xpbmV0b1JlbCh1bmRlZmluZWQsIHgsIHkpOyB9XG4gICAgICAgIFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzID0gZnVuY3Rpb24oeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b0N1YmljQWJzKHVuZGVmaW5lZCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpOyB9XG4gICAgICAgIFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsID0gZnVuY3Rpb24oeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b0N1YmljUmVsKHVuZGVmaW5lZCwgeCwgeSwgeDEsIHkxLCB4MiwgeTIpOyB9XG4gICAgICAgIFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY0FicyA9IGZ1bmN0aW9uKHgsIHksIHgxLCB5MSkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljQWJzKHVuZGVmaW5lZCwgeCwgeSwgeDEsIHkxKTsgfVxuICAgICAgICBTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNSZWwgPSBmdW5jdGlvbih4LCB5LCB4MSwgeTEpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1JlbCh1bmRlZmluZWQsIHgsIHksIHgxLCB5MSk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdBcmNBYnMgPSBmdW5jdGlvbih4LCB5LCByMSwgcjIsIGFuZ2xlLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZykgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdBcmNBYnModW5kZWZpbmVkLCB4LCB5LCByMSwgcjIsIGFuZ2xlLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZyk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdBcmNSZWwgPSBmdW5jdGlvbih4LCB5LCByMSwgcjIsIGFuZ2xlLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZykgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdBcmNSZWwodW5kZWZpbmVkLCB4LCB5LCByMSwgcjIsIGFuZ2xlLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZyk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzKHVuZGVmaW5lZCwgeCk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsUmVsID0gZnVuY3Rpb24oeCkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsUmVsKHVuZGVmaW5lZCwgeCk7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbEFicyA9IGZ1bmN0aW9uKHkpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxBYnModW5kZWZpbmVkLCB5KTsgfVxuICAgICAgICBTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU1ZHUGF0aFNlZ0xpbmV0b1ZlcnRpY2FsUmVsID0gZnVuY3Rpb24oeSkgeyByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbFJlbCh1bmRlZmluZWQsIHkpOyB9XG4gICAgICAgIFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoQWJzID0gZnVuY3Rpb24oeCwgeSwgeDIsIHkyKSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY1Ntb290aEFicyh1bmRlZmluZWQsIHgsIHksIHgyLCB5Mik7IH1cbiAgICAgICAgU1ZHUGF0aEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhSZWwgPSBmdW5jdGlvbih4LCB5LCB4MiwgeTIpIHsgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b0N1YmljU21vb3RoUmVsKHVuZGVmaW5lZCwgeCwgeSwgeDIsIHkyKTsgfVxuICAgICAgICBTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhBYnMgPSBmdW5jdGlvbih4LCB5KSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhBYnModW5kZWZpbmVkLCB4LCB5KTsgfVxuICAgICAgICBTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWwgPSBmdW5jdGlvbih4LCB5KSB7IHJldHVybiBuZXcgU1ZHUGF0aFNlZ0N1cnZldG9RdWFkcmF0aWNTbW9vdGhSZWwodW5kZWZpbmVkLCB4LCB5KTsgfVxuICAgIH1cblxuICAgIGlmICghKFwiU1ZHUGF0aFNlZ0xpc3RcIiBpbiB3aW5kb3cpKSB7XG4gICAgICAgIC8vIFNwZWM6IGh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL3NpbmdsZS1wYWdlLmh0bWwjcGF0aHMtSW50ZXJmYWNlU1ZHUGF0aFNlZ0xpc3RcbiAgICAgICAgd2luZG93LlNWR1BhdGhTZWdMaXN0ID0gZnVuY3Rpb24ocGF0aEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhdGhFbGVtZW50ID0gcGF0aEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLl9saXN0ID0gdGhpcy5fcGFyc2VQYXRoKHRoaXMuX3BhdGhFbGVtZW50LmdldEF0dHJpYnV0ZShcImRcIikpO1xuXG4gICAgICAgICAgICAvLyBVc2UgYSBNdXRhdGlvbk9ic2VydmVyIHRvIGNhdGNoIGNoYW5nZXMgdG8gdGhlIHBhdGgncyBcImRcIiBhdHRyaWJ1dGUuXG4gICAgICAgICAgICB0aGlzLl9tdXRhdGlvbk9ic2VydmVyQ29uZmlnID0geyBcImF0dHJpYnV0ZXNcIjogdHJ1ZSwgXCJhdHRyaWJ1dGVGaWx0ZXJcIjogW1wiZFwiXSB9O1xuICAgICAgICAgICAgdGhpcy5fcGF0aEVsZW1lbnRNdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5fdXBkYXRlTGlzdEZyb21QYXRoTXV0YXRpb25zLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5fcGF0aEVsZW1lbnRNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5fcGF0aEVsZW1lbnQsIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLmNsYXNzbmFtZSA9IFwiU1ZHUGF0aFNlZ0xpc3RcIjtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLCBcIm51bWJlck9mSXRlbXNcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja1BhdGhTeW5jaHJvbml6ZWRUb0xpc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgdGhlIHBhdGhTZWdMaXN0IGFjY2Vzc29ycyB0byBTVkdQYXRoRWxlbWVudC5cbiAgICAgICAgLy8gU3BlYzogaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvc2luZ2xlLXBhZ2UuaHRtbCNwYXRocy1JbnRlcmZhY2VTVkdBbmltYXRlZFBhdGhEYXRhXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUsIFwicGF0aFNlZ0xpc3RcIiwge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3BhdGhTZWdMaXN0KVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYXRoU2VnTGlzdCA9IG5ldyBTVkdQYXRoU2VnTGlzdCh0aGlzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGF0aFNlZ0xpc3Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gRklYTUU6IFRoZSBmb2xsb3dpbmcgYXJlIG5vdCBpbXBsZW1lbnRlZCBhbmQgc2ltcGx5IHJldHVybiBTVkdQYXRoRWxlbWVudC5wYXRoU2VnTGlzdC5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZSwgXCJub3JtYWxpemVkUGF0aFNlZ0xpc3RcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnTGlzdDsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNWR1BhdGhFbGVtZW50LnByb3RvdHlwZSwgXCJhbmltYXRlZFBhdGhTZWdMaXN0XCIsIHsgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMucGF0aFNlZ0xpc3Q7IH0sIGVudW1lcmFibGU6IHRydWUgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTVkdQYXRoRWxlbWVudC5wcm90b3R5cGUsIFwiYW5pbWF0ZWROb3JtYWxpemVkUGF0aFNlZ0xpc3RcIiwgeyBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5wYXRoU2VnTGlzdDsgfSwgZW51bWVyYWJsZTogdHJ1ZSB9KTtcblxuICAgICAgICAvLyBQcm9jZXNzIGFueSBwZW5kaW5nIG11dGF0aW9ucyB0byB0aGUgcGF0aCBlbGVtZW50IGFuZCB1cGRhdGUgdGhlIGxpc3QgYXMgbmVlZGVkLlxuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSB0aGUgZmlyc3QgY2FsbCBvZiBhbGwgcHVibGljIGZ1bmN0aW9ucyBhbmQgaXMgbmVlZGVkIGJlY2F1c2VcbiAgICAgICAgLy8gTXV0YXRpb25PYnNlcnZlcnMgYXJlIG5vdCBzeW5jaHJvbm91cyBzbyB3ZSBjYW4gaGF2ZSBwZW5kaW5nIGFzeW5jaHJvbm91cyBtdXRhdGlvbnMuXG4gICAgICAgIFNWR1BhdGhTZWdMaXN0LnByb3RvdHlwZS5fY2hlY2tQYXRoU3luY2hyb25pemVkVG9MaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVMaXN0RnJvbVBhdGhNdXRhdGlvbnModGhpcy5fcGF0aEVsZW1lbnRNdXRhdGlvbk9ic2VydmVyLnRha2VSZWNvcmRzKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLl91cGRhdGVMaXN0RnJvbVBhdGhNdXRhdGlvbnMgPSBmdW5jdGlvbihtdXRhdGlvblJlY29yZHMpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcGF0aEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIGhhc1BhdGhNdXRhdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgIG11dGF0aW9uUmVjb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKHJlY29yZCkge1xuICAgICAgICAgICAgICAgIGlmIChyZWNvcmQuYXR0cmlidXRlTmFtZSA9PSBcImRcIilcbiAgICAgICAgICAgICAgICAgICAgaGFzUGF0aE11dGF0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChoYXNQYXRoTXV0YXRpb25zKVxuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3QgPSB0aGlzLl9wYXJzZVBhdGgodGhpcy5fcGF0aEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZFwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXJpYWxpemUgdGhlIGxpc3QgYW5kIHVwZGF0ZSB0aGUgcGF0aCdzICdkJyBhdHRyaWJ1dGUuXG4gICAgICAgIFNWR1BhdGhTZWdMaXN0LnByb3RvdHlwZS5fd3JpdGVMaXN0VG9QYXRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRoRWxlbWVudE11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5fcGF0aEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZFwiLCBTVkdQYXRoU2VnTGlzdC5fcGF0aFNlZ0FycmF5QXNTdHJpbmcodGhpcy5fbGlzdCkpO1xuICAgICAgICAgICAgdGhpcy5fcGF0aEVsZW1lbnRNdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5fcGF0aEVsZW1lbnQsIHRoaXMuX211dGF0aW9uT2JzZXJ2ZXJDb25maWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2hlbiBhIHBhdGggc2VnbWVudCBjaGFuZ2VzIHRoZSBsaXN0IG5lZWRzIHRvIGJlIHN5bmNocm9uaXplZCBiYWNrIHRvIHRoZSBwYXRoIGVsZW1lbnQuXG4gICAgICAgIFNWR1BhdGhTZWdMaXN0LnByb3RvdHlwZS5zZWdtZW50Q2hhbmdlZCA9IGZ1bmN0aW9uKHBhdGhTZWcpIHtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlTGlzdFRvUGF0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja1BhdGhTeW5jaHJvbml6ZWRUb0xpc3QoKTtcblxuICAgICAgICAgICAgdGhpcy5fbGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHBhdGhTZWcpIHtcbiAgICAgICAgICAgICAgICBwYXRoU2VnLl9vd25pbmdQYXRoU2VnTGlzdCA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2xpc3QgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlTGlzdFRvUGF0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLmluaXRpYWxpemUgPSBmdW5jdGlvbihuZXdJdGVtKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja1BhdGhTeW5jaHJvbml6ZWRUb0xpc3QoKTtcblxuICAgICAgICAgICAgdGhpcy5fbGlzdCA9IFtuZXdJdGVtXTtcbiAgICAgICAgICAgIG5ld0l0ZW0uX293bmluZ1BhdGhTZWdMaXN0ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlTGlzdFRvUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XG4gICAgICAgIH1cblxuICAgICAgICBTVkdQYXRoU2VnTGlzdC5wcm90b3R5cGUuX2NoZWNrVmFsaWRJbmRleCA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oaW5kZXgpIHx8IGluZGV4IDwgMCB8fCBpbmRleCA+PSB0aGlzLm51bWJlck9mSXRlbXMpXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJJTkRFWF9TSVpFX0VSUlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgU1ZHUGF0aFNlZ0xpc3QucHJvdG90eXBlLmdldEl0ZW0gPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tQYXRoU3luY2hyb25pemVkVG9MaXN0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuX2NoZWNrVmFsaWRJbmRleChpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGlzdFtpbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICBTVkdQYXRoU2VnTGlzdC5wcm90b3R5cGUuaW5zZXJ0SXRlbUJlZm9yZSA9IGZ1bmN0aW9uKG5ld0l0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja1BhdGhTeW5jaHJvbml6ZWRUb0xpc3QoKTtcblxuICAgICAgICAgICAgLy8gU3BlYzogSWYgdGhlIGluZGV4IGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBudW1iZXJPZkl0ZW1zLCB0aGVuIHRoZSBuZXcgaXRlbSBpcyBhcHBlbmRlZCB0byB0aGUgZW5kIG9mIHRoZSBsaXN0LlxuICAgICAgICAgICAgaWYgKGluZGV4ID4gdGhpcy5udW1iZXJPZkl0ZW1zKVxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5udW1iZXJPZkl0ZW1zO1xuICAgICAgICAgICAgaWYgKG5ld0l0ZW0uX293bmluZ1BhdGhTZWdMaXN0KSB7XG4gICAgICAgICAgICAgICAgLy8gU1ZHMiBzcGVjIHNheXMgdG8gbWFrZSBhIGNvcHkuXG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IG5ld0l0ZW0uY2xvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluZGV4LCAwLCBuZXdJdGVtKTtcbiAgICAgICAgICAgIG5ld0l0ZW0uX293bmluZ1BhdGhTZWdMaXN0ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlTGlzdFRvUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XG4gICAgICAgIH1cblxuICAgICAgICBTVkdQYXRoU2VnTGlzdC5wcm90b3R5cGUucmVwbGFjZUl0ZW0gPSBmdW5jdGlvbihuZXdJdGVtLCBpbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tQYXRoU3luY2hyb25pemVkVG9MaXN0KCk7XG5cbiAgICAgICAgICAgIGlmIChuZXdJdGVtLl9vd25pbmdQYXRoU2VnTGlzdCkge1xuICAgICAgICAgICAgICAgIC8vIFNWRzIgc3BlYyBzYXlzIHRvIG1ha2UgYSBjb3B5LlxuICAgICAgICAgICAgICAgIG5ld0l0ZW0gPSBuZXdJdGVtLmNsb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jaGVja1ZhbGlkSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy5fbGlzdFtpbmRleF0gPSBuZXdJdGVtO1xuICAgICAgICAgICAgbmV3SXRlbS5fb3duaW5nUGF0aFNlZ0xpc3QgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5fd3JpdGVMaXN0VG9QYXRoKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIFNWR1BhdGhTZWdMaXN0LnByb3RvdHlwZS5yZW1vdmVJdGVtID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrUGF0aFN5bmNocm9uaXplZFRvTGlzdCgpO1xuXG4gICAgICAgICAgICB0aGlzLl9jaGVja1ZhbGlkSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLl9saXN0W2luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuX2xpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuX3dyaXRlTGlzdFRvUGF0aCgpO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cblxuICAgICAgICBTVkdQYXRoU2VnTGlzdC5wcm90b3R5cGUuYXBwZW5kSXRlbSA9IGZ1bmN0aW9uKG5ld0l0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrUGF0aFN5bmNocm9uaXplZFRvTGlzdCgpO1xuXG4gICAgICAgICAgICBpZiAobmV3SXRlbS5fb3duaW5nUGF0aFNlZ0xpc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBTVkcyIHNwZWMgc2F5cyB0byBtYWtlIGEgY29weS5cbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gbmV3SXRlbS5jbG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fbGlzdC5wdXNoKG5ld0l0ZW0pO1xuICAgICAgICAgICAgbmV3SXRlbS5fb3duaW5nUGF0aFNlZ0xpc3QgPSB0aGlzO1xuICAgICAgICAgICAgLy8gVE9ETzogT3B0aW1pemUgdGhpcyB0byBqdXN0IGFwcGVuZCB0byB0aGUgZXhpc3RpbmcgYXR0cmlidXRlLlxuICAgICAgICAgICAgdGhpcy5fd3JpdGVMaXN0VG9QYXRoKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3SXRlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIFNWR1BhdGhTZWdMaXN0Ll9wYXRoU2VnQXJyYXlBc1N0cmluZyA9IGZ1bmN0aW9uKHBhdGhTZWdBcnJheSkge1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSB0cnVlO1xuICAgICAgICAgICAgcGF0aFNlZ0FycmF5LmZvckVhY2goZnVuY3Rpb24ocGF0aFNlZykge1xuICAgICAgICAgICAgICAgIGlmIChmaXJzdCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gcGF0aFNlZy5fYXNQYXRoU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IFwiIFwiICsgcGF0aFNlZy5fYXNQYXRoU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhpcyBjbG9zZWx5IGZvbGxvd3MgU1ZHUGF0aFBhcnNlcjo6cGFyc2VQYXRoIGZyb20gU291cmNlL2NvcmUvc3ZnL1NWR1BhdGhQYXJzZXIuY3BwLlxuICAgICAgICBTVkdQYXRoU2VnTGlzdC5wcm90b3R5cGUuX3BhcnNlUGF0aCA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgICAgICAgaWYgKCFzdHJpbmcgfHwgc3RyaW5nLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcblxuICAgICAgICAgICAgdmFyIG93bmluZ1BhdGhTZWdMaXN0ID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIEJ1aWxkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhdGhTZWdMaXN0ID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEJ1aWxkZXIucHJvdG90eXBlLmFwcGVuZFNlZ21lbnQgPSBmdW5jdGlvbihwYXRoU2VnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXRoU2VnTGlzdC5wdXNoKHBhdGhTZWcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgU291cmNlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RyaW5nID0gc3RyaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW5kSW5kZXggPSB0aGlzLl9zdHJpbmcubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzQ29tbWFuZCA9IFNWR1BhdGhTZWcuUEFUSFNFR19VTktOT1dOO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fc2tpcE9wdGlvbmFsU3BhY2VzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX2lzQ3VycmVudFNwYWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYXJhY3RlciA9IHRoaXMuX3N0cmluZ1t0aGlzLl9jdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGFyYWN0ZXIgPD0gXCIgXCIgJiYgKGNoYXJhY3RlciA9PSBcIiBcIiB8fCBjaGFyYWN0ZXIgPT0gXCJcXG5cIiB8fCBjaGFyYWN0ZXIgPT0gXCJcXHRcIiB8fCBjaGFyYWN0ZXIgPT0gXCJcXHJcIiB8fCBjaGFyYWN0ZXIgPT0gXCJcXGZcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX3NraXBPcHRpb25hbFNwYWNlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLl9jdXJyZW50SW5kZXggPCB0aGlzLl9lbmRJbmRleCAmJiB0aGlzLl9pc0N1cnJlbnRTcGFjZSgpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudEluZGV4IDwgdGhpcy5fZW5kSW5kZXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX3NraXBPcHRpb25hbFNwYWNlc09yRGVsaW1pdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA8IHRoaXMuX2VuZEluZGV4ICYmICF0aGlzLl9pc0N1cnJlbnRTcGFjZSgpICYmIHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSAhPSBcIixcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9za2lwT3B0aW9uYWxTcGFjZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudEluZGV4IDwgdGhpcy5fZW5kSW5kZXggJiYgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID09IFwiLFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NraXBPcHRpb25hbFNwYWNlcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50SW5kZXggPCB0aGlzLl9lbmRJbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU291cmNlLnByb3RvdHlwZS5oYXNNb3JlRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50SW5kZXggPCB0aGlzLl9lbmRJbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU291cmNlLnByb3RvdHlwZS5wZWVrU2VnbWVudFR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9va2FoZWFkID0gdGhpcy5fc3RyaW5nW3RoaXMuX2N1cnJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhdGhTZWdUeXBlRnJvbUNoYXIobG9va2FoZWFkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU291cmNlLnByb3RvdHlwZS5fcGF0aFNlZ1R5cGVGcm9tQ2hhciA9IGZ1bmN0aW9uKGxvb2thaGVhZCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobG9va2FoZWFkKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwielwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0NMT1NFUEFUSDtcbiAgICAgICAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19BQlM7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19NT1ZFVE9fUkVMO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX0FCUztcbiAgICAgICAgICAgICAgICBjYXNlIFwibFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19SRUw7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkNcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX0NVQklDX0FCUztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfUkVMO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJRXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19RVUFEUkFUSUNfQUJTO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19RVUFEUkFUSUNfUkVMO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJBXCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX0FCUztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0FSQ19SRUw7XG4gICAgICAgICAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fSE9SSVpPTlRBTF9BQlM7XG4gICAgICAgICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fSE9SSVpPTlRBTF9SRUw7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlZcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fVkVSVElDQUxfQUJTO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ2XCI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX1ZFUlRJQ0FMX1JFTDtcbiAgICAgICAgICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX0FCUztcbiAgICAgICAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX1JFTDtcbiAgICAgICAgICAgICAgICBjYXNlIFwiVFwiOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX1NNT09USF9BQlM7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRcIjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19TTU9PVEhfUkVMO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfVU5LTk9XTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX25leHRDb21tYW5kSGVscGVyID0gZnVuY3Rpb24obG9va2FoZWFkLCBwcmV2aW91c0NvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgcmVtYWluaW5nIGNvb3JkaW5hdGVzIGluIHRoZSBjdXJyZW50IGNvbW1hbmQuXG4gICAgICAgICAgICAgICAgaWYgKChsb29rYWhlYWQgPT0gXCIrXCIgfHwgbG9va2FoZWFkID09IFwiLVwiIHx8IGxvb2thaGVhZCA9PSBcIi5cIiB8fCAobG9va2FoZWFkID49IFwiMFwiICYmIGxvb2thaGVhZCA8PSBcIjlcIikpICYmIHByZXZpb3VzQ29tbWFuZCAhPSBTVkdQYXRoU2VnLlBBVEhTRUdfQ0xPU0VQQVRIKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NvbW1hbmQgPT0gU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19BQlMpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19BQlM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NvbW1hbmQgPT0gU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19SRUwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19SRUw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmV2aW91c0NvbW1hbmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBTVkdQYXRoU2VnLlBBVEhTRUdfVU5LTk9XTjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU291cmNlLnByb3RvdHlwZS5pbml0aWFsQ29tbWFuZElzTW92ZVRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHBhdGggaXMgZW1wdHkgaXQgaXMgc3RpbGwgdmFsaWQsIHNvIHJldHVybiB0cnVlLlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNNb3JlRGF0YSgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IHRoaXMucGVla1NlZ21lbnRUeXBlKCk7XG4gICAgICAgICAgICAgICAgLy8gUGF0aCBtdXN0IHN0YXJ0IHdpdGggbW92ZVRvLlxuICAgICAgICAgICAgICAgIHJldHVybiBjb21tYW5kID09IFNWR1BhdGhTZWcuUEFUSFNFR19NT1ZFVE9fQUJTIHx8IGNvbW1hbmQgPT0gU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19SRUw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFBhcnNlIGEgbnVtYmVyIGZyb20gYW4gU1ZHIHBhdGguIFRoaXMgdmVyeSBjbG9zZWx5IGZvbGxvd3MgZ2VuZXJpY1BhcnNlTnVtYmVyKC4uLikgZnJvbSBTb3VyY2UvY29yZS9zdmcvU1ZHUGFyc2VyVXRpbGl0aWVzLmNwcC5cbiAgICAgICAgICAgIC8vIFNwZWM6IGh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL3NpbmdsZS1wYWdlLmh0bWwjcGF0aHMtUGF0aERhdGFCTkZcbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX3BhcnNlTnVtYmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4cG9uZW50ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZWdlciA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGZyYWMgPSAxO1xuICAgICAgICAgICAgICAgIHZhciBkZWNpbWFsID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgc2lnbiA9IDE7XG4gICAgICAgICAgICAgICAgdmFyIGV4cHNpZ24gPSAxO1xuXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLl9jdXJyZW50SW5kZXg7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9za2lwT3B0aW9uYWxTcGFjZXMoKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlYWQgdGhlIHNpZ24uXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA8IHRoaXMuX2VuZEluZGV4ICYmIHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA9PSBcIitcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudEluZGV4Kys7XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fY3VycmVudEluZGV4IDwgdGhpcy5fZW5kSW5kZXggJiYgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICBzaWduID0gLTE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA9PSB0aGlzLl9lbmRJbmRleCB8fCAoKHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA8IFwiMFwiIHx8IHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA+IFwiOVwiKSAmJiB0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCkgIT0gXCIuXCIpKVxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgbnVtYmVyIG11c3QgYmUgb25lIG9mIFswLTkrLS5dLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgaW50ZWdlciBwYXJ0LCBidWlsZCByaWdodC10by1sZWZ0LlxuICAgICAgICAgICAgICAgIHZhciBzdGFydEludFBhcnRJbmRleCA9IHRoaXMuX2N1cnJlbnRJbmRleDtcbiAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5fY3VycmVudEluZGV4IDwgdGhpcy5fZW5kSW5kZXggJiYgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID49IFwiMFwiICYmIHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA8PSBcIjlcIilcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudEluZGV4Kys7IC8vIEFkdmFuY2UgdG8gZmlyc3Qgbm9uLWRpZ2l0LlxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCAhPSBzdGFydEludFBhcnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NhbkludFBhcnRJbmRleCA9IHRoaXMuX2N1cnJlbnRJbmRleCAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gMTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHNjYW5JbnRQYXJ0SW5kZXggPj0gc3RhcnRJbnRQYXJ0SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVnZXIgKz0gbXVsdGlwbGllciAqICh0aGlzLl9zdHJpbmcuY2hhckF0KHNjYW5JbnRQYXJ0SW5kZXgtLSkgLSBcIjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsaWVyICo9IDEwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgZGVjaW1hbHMuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRJbmRleCA8IHRoaXMuX2VuZEluZGV4ICYmIHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA9PSBcIi5cIikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBtdXN0IGJlIGEgbGVhc3Qgb25lIGRpZ2l0IGZvbGxvd2luZyB0aGUgLlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudEluZGV4ID49IHRoaXMuX2VuZEluZGV4IHx8IHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA8IFwiMFwiIHx8IHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA+IFwiOVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2N1cnJlbnRJbmRleCA8IHRoaXMuX2VuZEluZGV4ICYmIHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA+PSBcIjBcIiAmJiB0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCkgPD0gXCI5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsICs9ICh0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCsrKSAtIFwiMFwiKSAqIChmcmFjICo9IDAuMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmVhZCB0aGUgZXhwb25lbnQgcGFydC5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudEluZGV4ICE9IHN0YXJ0SW5kZXggJiYgdGhpcy5fY3VycmVudEluZGV4ICsgMSA8IHRoaXMuX2VuZEluZGV4ICYmICh0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCkgPT0gXCJlXCIgfHwgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID09IFwiRVwiKSAmJiAodGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXggKyAxKSAhPSBcInhcIiAmJiB0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCArIDEpICE9IFwibVwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIHRoZSBzaWduIG9mIHRoZSBleHBvbmVudC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0cmluZy5jaGFyQXQodGhpcy5fY3VycmVudEluZGV4KSA9PSBcIitcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudEluZGV4Kys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cHNpZ24gPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIG11c3QgYmUgYW4gZXhwb25lbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50SW5kZXggPj0gdGhpcy5fZW5kSW5kZXggfHwgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpIDwgXCIwXCIgfHwgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpID4gXCI5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh0aGlzLl9jdXJyZW50SW5kZXggPCB0aGlzLl9lbmRJbmRleCAmJiB0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCkgPj0gXCIwXCIgJiYgdGhpcy5fc3RyaW5nLmNoYXJBdCh0aGlzLl9jdXJyZW50SW5kZXgpIDw9IFwiOVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvbmVudCAqPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cG9uZW50ICs9ICh0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCkgLSBcIjBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW5kZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBudW1iZXIgPSBpbnRlZ2VyICsgZGVjaW1hbDtcbiAgICAgICAgICAgICAgICBudW1iZXIgKj0gc2lnbjtcblxuICAgICAgICAgICAgICAgIGlmIChleHBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyICo9IE1hdGgucG93KDEwLCBleHBzaWduICogZXhwb25lbnQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0SW5kZXggPT0gdGhpcy5fY3VycmVudEluZGV4KVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fc2tpcE9wdGlvbmFsU3BhY2VzT3JEZWxpbWl0ZXIoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFNvdXJjZS5wcm90b3R5cGUuX3BhcnNlQXJjRmxhZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50SW5kZXggPj0gdGhpcy5fZW5kSW5kZXgpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgZmxhZ0NoYXIgPSB0aGlzLl9zdHJpbmcuY2hhckF0KHRoaXMuX2N1cnJlbnRJbmRleCsrKTtcbiAgICAgICAgICAgICAgICBpZiAoZmxhZ0NoYXIgPT0gXCIwXCIpXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChmbGFnQ2hhciA9PSBcIjFcIilcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fc2tpcE9wdGlvbmFsU3BhY2VzT3JEZWxpbWl0ZXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgU291cmNlLnByb3RvdHlwZS5wYXJzZVNlZ21lbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9va2FoZWFkID0gdGhpcy5fc3RyaW5nW3RoaXMuX2N1cnJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1hbmQgPSB0aGlzLl9wYXRoU2VnVHlwZUZyb21DaGFyKGxvb2thaGVhZCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQgPT0gU1ZHUGF0aFNlZy5QQVRIU0VHX1VOS05PV04pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUG9zc2libHkgYW4gaW1wbGljaXQgY29tbWFuZC4gTm90IGFsbG93ZWQgaWYgdGhpcyBpcyB0aGUgZmlyc3QgY29tbWFuZC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZpb3VzQ29tbWFuZCA9PSBTVkdQYXRoU2VnLlBBVEhTRUdfVU5LTk9XTilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjb21tYW5kID0gdGhpcy5fbmV4dENvbW1hbmRIZWxwZXIobG9va2FoZWFkLCB0aGlzLl9wcmV2aW91c0NvbW1hbmQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWFuZCA9PSBTVkdQYXRoU2VnLlBBVEhTRUdfVU5LTk9XTilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRJbmRleCsrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZpb3VzQ29tbWFuZCA9IGNvbW1hbmQ7XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFNWR1BhdGhTZWcuUEFUSFNFR19NT1ZFVE9fUkVMOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdNb3ZldG9SZWwob3duaW5nUGF0aFNlZ0xpc3QsIHRoaXMuX3BhcnNlTnVtYmVyKCksIHRoaXMuX3BhcnNlTnVtYmVyKCkpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX01PVkVUT19BQlM6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGF0aFNlZ01vdmV0b0Ficyhvd25pbmdQYXRoU2VnTGlzdCwgdGhpcy5fcGFyc2VOdW1iZXIoKSwgdGhpcy5fcGFyc2VOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvUmVsKG93bmluZ1BhdGhTZWdMaXN0LCB0aGlzLl9wYXJzZU51bWJlcigpLCB0aGlzLl9wYXJzZU51bWJlcigpKTtcbiAgICAgICAgICAgICAgICBjYXNlIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fQUJTOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9BYnMob3duaW5nUGF0aFNlZ0xpc3QsIHRoaXMuX3BhcnNlTnVtYmVyKCksIHRoaXMuX3BhcnNlTnVtYmVyKCkpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX0xJTkVUT19IT1JJWk9OVEFMX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvSG9yaXpvbnRhbFJlbChvd25pbmdQYXRoU2VnTGlzdCwgdGhpcy5fcGFyc2VOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX0hPUklaT05UQUxfQUJTOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9Ib3Jpem9udGFsQWJzKG93bmluZ1BhdGhTZWdMaXN0LCB0aGlzLl9wYXJzZU51bWJlcigpKTtcbiAgICAgICAgICAgICAgICBjYXNlIFNWR1BhdGhTZWcuUEFUSFNFR19MSU5FVE9fVkVSVElDQUxfUkVMOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdMaW5ldG9WZXJ0aWNhbFJlbChvd25pbmdQYXRoU2VnTGlzdCwgdGhpcy5fcGFyc2VOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfTElORVRPX1ZFUlRJQ0FMX0FCUzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnTGluZXRvVmVydGljYWxBYnMob3duaW5nUGF0aFNlZ0xpc3QsIHRoaXMuX3BhcnNlTnVtYmVyKCkpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX0NMT1NFUEFUSDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2tpcE9wdGlvbmFsU3BhY2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGF0aFNlZ0Nsb3NlUGF0aChvd25pbmdQYXRoU2VnTGlzdCk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19DVUJJQ19SRUw6XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSB7eDE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHkxOiB0aGlzLl9wYXJzZU51bWJlcigpLCB4MjogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTI6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHg6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHk6IHRoaXMuX3BhcnNlTnVtYmVyKCl9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNSZWwob3duaW5nUGF0aFNlZ0xpc3QsIHBvaW50cy54LCBwb2ludHMueSwgcG9pbnRzLngxLCBwb2ludHMueTEsIHBvaW50cy54MiwgcG9pbnRzLnkyKTtcbiAgICAgICAgICAgICAgICBjYXNlIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX0NVQklDX0FCUzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MTogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHgyOiB0aGlzLl9wYXJzZU51bWJlcigpLCB5MjogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeDogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTogdGhpcy5fcGFyc2VOdW1iZXIoKX07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGF0aFNlZ0N1cnZldG9DdWJpY0Ficyhvd25pbmdQYXRoU2VnTGlzdCwgcG9pbnRzLngsIHBvaW50cy55LCBwb2ludHMueDEsIHBvaW50cy55MSwgcG9pbnRzLngyLCBwb2ludHMueTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MjogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTI6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHg6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHk6IHRoaXMuX3BhcnNlTnVtYmVyKCl9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhSZWwob3duaW5nUGF0aFNlZ0xpc3QsIHBvaW50cy54LCBwb2ludHMueSwgcG9pbnRzLngyLCBwb2ludHMueTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fQ1VCSUNfU01PT1RIX0FCUzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MjogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTI6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHg6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHk6IHRoaXMuX3BhcnNlTnVtYmVyKCl9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvQ3ViaWNTbW9vdGhBYnMob3duaW5nUGF0aFNlZ0xpc3QsIHBvaW50cy54LCBwb2ludHMueSwgcG9pbnRzLngyLCBwb2ludHMueTIpO1xuICAgICAgICAgICAgICAgIGNhc2UgU1ZHUGF0aFNlZy5QQVRIU0VHX0NVUlZFVE9fUVVBRFJBVElDX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MTogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHg6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHk6IHRoaXMuX3BhcnNlTnVtYmVyKCl9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNWR1BhdGhTZWdDdXJ2ZXRvUXVhZHJhdGljUmVsKG93bmluZ1BhdGhTZWdMaXN0LCBwb2ludHMueCwgcG9pbnRzLnksIHBvaW50cy54MSwgcG9pbnRzLnkxKTtcbiAgICAgICAgICAgICAgICBjYXNlIFNWR1BhdGhTZWcuUEFUSFNFR19DVVJWRVRPX1FVQURSQVRJQ19BQlM6XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2ludHMgPSB7eDE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIHkxOiB0aGlzLl9wYXJzZU51bWJlcigpLCB4OiB0aGlzLl9wYXJzZU51bWJlcigpLCB5OiB0aGlzLl9wYXJzZU51bWJlcigpfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY0Ficyhvd25pbmdQYXRoU2VnTGlzdCwgcG9pbnRzLngsIHBvaW50cy55LCBwb2ludHMueDEsIHBvaW50cy55MSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19RVUFEUkFUSUNfU01PT1RIX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aFJlbChvd25pbmdQYXRoU2VnTGlzdCwgdGhpcy5fcGFyc2VOdW1iZXIoKSwgdGhpcy5fcGFyc2VOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfQ1VSVkVUT19RVUFEUkFUSUNfU01PT1RIX0FCUzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTVkdQYXRoU2VnQ3VydmV0b1F1YWRyYXRpY1Ntb290aEFicyhvd25pbmdQYXRoU2VnTGlzdCwgdGhpcy5fcGFyc2VOdW1iZXIoKSwgdGhpcy5fcGFyc2VOdW1iZXIoKSk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX1JFTDpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MTogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIGFyY0FuZ2xlOiB0aGlzLl9wYXJzZU51bWJlcigpLCBhcmNMYXJnZTogdGhpcy5fcGFyc2VBcmNGbGFnKCksIGFyY1N3ZWVwOiB0aGlzLl9wYXJzZUFyY0ZsYWcoKSwgeDogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTogdGhpcy5fcGFyc2VOdW1iZXIoKX07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGF0aFNlZ0FyY1JlbChvd25pbmdQYXRoU2VnTGlzdCwgcG9pbnRzLngsIHBvaW50cy55LCBwb2ludHMueDEsIHBvaW50cy55MSwgcG9pbnRzLmFyY0FuZ2xlLCBwb2ludHMuYXJjTGFyZ2UsIHBvaW50cy5hcmNTd2VlcCk7XG4gICAgICAgICAgICAgICAgY2FzZSBTVkdQYXRoU2VnLlBBVEhTRUdfQVJDX0FCUzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IHt4MTogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTE6IHRoaXMuX3BhcnNlTnVtYmVyKCksIGFyY0FuZ2xlOiB0aGlzLl9wYXJzZU51bWJlcigpLCBhcmNMYXJnZTogdGhpcy5fcGFyc2VBcmNGbGFnKCksIGFyY1N3ZWVwOiB0aGlzLl9wYXJzZUFyY0ZsYWcoKSwgeDogdGhpcy5fcGFyc2VOdW1iZXIoKSwgeTogdGhpcy5fcGFyc2VOdW1iZXIoKX07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU1ZHUGF0aFNlZ0FyY0Ficyhvd25pbmdQYXRoU2VnTGlzdCwgcG9pbnRzLngsIHBvaW50cy55LCBwb2ludHMueDEsIHBvaW50cy55MSwgcG9pbnRzLmFyY0FuZ2xlLCBwb2ludHMuYXJjTGFyZ2UsIHBvaW50cy5hcmNTd2VlcCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJVbmtub3duIHBhdGggc2VnIHR5cGUuXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBuZXcgU291cmNlKHN0cmluZyk7XG5cbiAgICAgICAgICAgIGlmICghc291cmNlLmluaXRpYWxDb21tYW5kSXNNb3ZlVG8oKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB3aGlsZSAoc291cmNlLmhhc01vcmVEYXRhKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGF0aFNlZyA9IHNvdXJjZS5wYXJzZVNlZ21lbnQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhdGhTZWcpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICBidWlsZGVyLmFwcGVuZFNlZ21lbnQocGF0aFNlZyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBidWlsZGVyLnBhdGhTZWdMaXN0O1xuICAgICAgICB9XG4gICAgfVxufSgpKTsiLCIhZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhKXt0aGlzLm93bmVyPWF9ZnVuY3Rpb24gYyhhLGIpe2lmKE9iamVjdC5jcmVhdGUpYi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSk7ZWxzZXt2YXIgYz1mdW5jdGlvbigpe307Yy5wcm90b3R5cGU9YS5wcm90b3R5cGUsYi5wcm90b3R5cGU9bmV3IGN9cmV0dXJuIGIucHJvdG90eXBlLmNvbnN0cnVjdG9yPWIsYn1mdW5jdGlvbiBkKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw9bmV3IGUodGhpcyk7Yi5sb2FkQ29uZmlnKGEpLGIuaW5pdCgpLGZ1bmN0aW9uIGMoYSxiLGQpe09iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24oZSl7YltlXT1hW2VdLmJpbmQoZCksT2JqZWN0LmtleXMoYVtlXSkubGVuZ3RoPjAmJmMoYVtlXSxiW2VdLGQpfSl9KGgsdGhpcyx0aGlzKX1mdW5jdGlvbiBlKGIpe3ZhciBjPXRoaXM7Yy5kMz1hLmQzP2EuZDM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHJlcXVpcmU/cmVxdWlyZShcImQzXCIpOnZvaWQgMCxjLmFwaT1iLGMuY29uZmlnPWMuZ2V0RGVmYXVsdENvbmZpZygpLGMuZGF0YT17fSxjLmNhY2hlPXt9LGMuYXhlcz17fX1mdW5jdGlvbiBmKGEpe2IuY2FsbCh0aGlzLGEpfWZ1bmN0aW9uIGcoYSxiKXtmdW5jdGlvbiBjKGEsYil7YS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCJ0cmFuc2xhdGUoXCIrTWF0aC5jZWlsKGIoYSkrdSkrXCIsIDApXCJ9KX1mdW5jdGlvbiBkKGEsYil7YS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCJ0cmFuc2xhdGUoMCxcIitNYXRoLmNlaWwoYihhKSkrXCIpXCJ9KX1mdW5jdGlvbiBlKGEpe3ZhciBiPWFbMF0sYz1hW2EubGVuZ3RoLTFdO3JldHVybiBjPmI/W2IsY106W2MsYl19ZnVuY3Rpb24gZihhKXt2YXIgYixjLGQ9W107aWYoYS50aWNrcylyZXR1cm4gYS50aWNrcy5hcHBseShhLG4pO2ZvcihjPWEuZG9tYWluKCksYj1NYXRoLmNlaWwoY1swXSk7YjxjWzFdO2IrKylkLnB1c2goYik7cmV0dXJuIGQubGVuZ3RoPjAmJmRbMF0+MCYmZC51bnNoaWZ0KGRbMF0tKGRbMV0tZFswXSkpLGR9ZnVuY3Rpb24gZygpe3ZhciBhLGM9cC5jb3B5KCk7cmV0dXJuIGIuaXNDYXRlZ29yeSYmKGE9cC5kb21haW4oKSxjLmRvbWFpbihbYVswXSxhWzFdLTFdKSksY31mdW5jdGlvbiBoKGEpe3ZhciBiPW0/bShhKTphO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6XCJcIn1mdW5jdGlvbiBpKGEpe2lmKHopcmV0dXJuIHo7dmFyIGI9e2g6MTEuNSx3OjUuNX07cmV0dXJuIGEuc2VsZWN0KFwidGV4dFwiKS50ZXh0KGgpLmVhY2goZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxkPWgoYSksZT1jLmhlaWdodCxmPWQ/Yy53aWR0aC9kLmxlbmd0aDp2b2lkIDA7ZSYmZiYmKGIuaD1lLGIudz1mKX0pLnRleHQoXCJcIiksej1iLGJ9ZnVuY3Rpb24gaihjKXtyZXR1cm4gYi53aXRob3V0VHJhbnNpdGlvbj9jOmEudHJhbnNpdGlvbihjKX1mdW5jdGlvbiBrKG0pe20uZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIG0oYSxjKXtmdW5jdGlvbiBkKGEsYil7Zj12b2lkIDA7Zm9yKHZhciBoPTE7aDxiLmxlbmd0aDtoKyspaWYoXCIgXCI9PT1iLmNoYXJBdChoKSYmKGY9aCksZT1iLnN1YnN0cigwLGgrMSksZz1VLncqZS5sZW5ndGgsZz5jKXJldHVybiBkKGEuY29uY2F0KGIuc3Vic3RyKDAsZj9mOmgpKSxiLnNsaWNlKGY/ZisxOmgpKTtyZXR1cm4gYS5jb25jYXQoYil9dmFyIGUsZixnLGk9aChhKSxqPVtdO3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKT9pOigoIWN8fDA+PWMpJiYoYz1YPzk1OmIuaXNDYXRlZ29yeT9NYXRoLmNlaWwoRihHWzFdKS1GKEdbMF0pKS0xMjoxMTApLGQoaixpK1wiXCIpKX1mdW5jdGlvbiBuKGEsYil7dmFyIGM9VS5oO3JldHVybiAwPT09YiYmKGM9XCJsZWZ0XCI9PT1xfHxcInJpZ2h0XCI9PT1xPy0oKFZbYS5pbmRleF0tMSkqKFUuaC8yKS0zKTpcIi43MWVtXCIpLGN9ZnVuY3Rpb24gdihhKXt2YXIgYj1wKGEpKyhvPzA6dSk7cmV0dXJuIExbMF08YiYmYjxMWzFdP3I6MH1mdW5jdGlvbiB3KGEpe3JldHVybiBhP2E+MD9cInN0YXJ0XCI6XCJlbmRcIjpcIm1pZGRsZVwifWZ1bmN0aW9uIHgoYSl7cmV0dXJuIGE/XCJyb3RhdGUoXCIrYStcIilcIjpcIlwifWZ1bmN0aW9uIHkoYSl7cmV0dXJuIGE/OCpNYXRoLnNpbihNYXRoLlBJKihhLzE4MCkpOjB9ZnVuY3Rpb24geihhKXtyZXR1cm4gYT8xMS41LTIuNSooYS8xNSkqKGE+MD8xOi0xKTpXfXZhciBBLEIsQyxEPWsuZz1hLnNlbGVjdCh0aGlzKSxFPXRoaXMuX19jaGFydF9ffHxwLEY9dGhpcy5fX2NoYXJ0X189ZygpLEc9dD90OmYoRiksSD1ELnNlbGVjdEFsbChcIi50aWNrXCIpLmRhdGEoRyxGKSxJPUguZW50ZXIoKS5pbnNlcnQoXCJnXCIsXCIuZG9tYWluXCIpLmF0dHIoXCJjbGFzc1wiLFwidGlja1wiKS5zdHlsZShcIm9wYWNpdHlcIiwxZS02KSxKPUguZXhpdCgpLnJlbW92ZSgpLEs9aihIKS5zdHlsZShcIm9wYWNpdHlcIiwxKSxMPXAucmFuZ2VFeHRlbnQ/cC5yYW5nZUV4dGVudCgpOmUocC5yYW5nZSgpKSxNPUQuc2VsZWN0QWxsKFwiLmRvbWFpblwiKS5kYXRhKFswXSksTj0oTS5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsXCJkb21haW5cIiksaihNKSk7SS5hcHBlbmQoXCJsaW5lXCIpLEkuYXBwZW5kKFwidGV4dFwiKTt2YXIgTz1JLnNlbGVjdChcImxpbmVcIiksUD1LLnNlbGVjdChcImxpbmVcIiksUT1JLnNlbGVjdChcInRleHRcIiksUj1LLnNlbGVjdChcInRleHRcIik7Yi5pc0NhdGVnb3J5Pyh1PU1hdGguY2VpbCgoRigxKS1GKDApKS8yKSxCPW8/MDp1LEM9bz91OjApOnU9Qj0wO3ZhciBTLFQsVT1pKEQuc2VsZWN0KFwiLnRpY2tcIikpLFY9W10sVz1NYXRoLm1heChyLDApK3MsWD1cImxlZnRcIj09PXF8fFwicmlnaHRcIj09PXE7Uz1ILnNlbGVjdChcInRleHRcIiksVD1TLnNlbGVjdEFsbChcInRzcGFuXCIpLmRhdGEoZnVuY3Rpb24oYSxjKXt2YXIgZD1iLnRpY2tNdWx0aWxpbmU/bShhLGIudGlja1dpZHRoKTpbXS5jb25jYXQoaChhKSk7cmV0dXJuIFZbY109ZC5sZW5ndGgsZC5tYXAoZnVuY3Rpb24oYSl7cmV0dXJue2luZGV4OmMsc3BsaXR0ZWQ6YX19KX0pLFQuZW50ZXIoKS5hcHBlbmQoXCJ0c3BhblwiKSxULmV4aXQoKS5yZW1vdmUoKSxULnRleHQoZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3BsaXR0ZWR9KTt2YXIgWT1iLnRpY2tUZXh0Um90YXRlO3N3aXRjaChxKXtjYXNlXCJib3R0b21cIjpBPWMsTy5hdHRyKFwieTJcIixyKSxRLmF0dHIoXCJ5XCIsVyksUC5hdHRyKFwieDFcIixCKS5hdHRyKFwieDJcIixCKS5hdHRyKFwieTJcIix2KSxSLmF0dHIoXCJ4XCIsMCkuYXR0cihcInlcIix6KFkpKS5zdHlsZShcInRleHQtYW5jaG9yXCIsdyhZKSkuYXR0cihcInRyYW5zZm9ybVwiLHgoWSkpLFQuYXR0cihcInhcIiwwKS5hdHRyKFwiZHlcIixuKS5hdHRyKFwiZHhcIix5KFkpKSxOLmF0dHIoXCJkXCIsXCJNXCIrTFswXStcIixcIitsK1wiVjBIXCIrTFsxXStcIlZcIitsKTticmVhaztjYXNlXCJ0b3BcIjpBPWMsTy5hdHRyKFwieTJcIiwtciksUS5hdHRyKFwieVwiLC1XKSxQLmF0dHIoXCJ4MlwiLDApLmF0dHIoXCJ5MlwiLC1yKSxSLmF0dHIoXCJ4XCIsMCkuYXR0cihcInlcIiwtVyksUy5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJtaWRkbGVcIiksVC5hdHRyKFwieFwiLDApLmF0dHIoXCJkeVwiLFwiMGVtXCIpLE4uYXR0cihcImRcIixcIk1cIitMWzBdK1wiLFwiKy1sK1wiVjBIXCIrTFsxXStcIlZcIistbCk7YnJlYWs7Y2FzZVwibGVmdFwiOkE9ZCxPLmF0dHIoXCJ4MlwiLC1yKSxRLmF0dHIoXCJ4XCIsLVcpLFAuYXR0cihcIngyXCIsLXIpLmF0dHIoXCJ5MVwiLEMpLmF0dHIoXCJ5MlwiLEMpLFIuYXR0cihcInhcIiwtVykuYXR0cihcInlcIix1KSxTLnN0eWxlKFwidGV4dC1hbmNob3JcIixcImVuZFwiKSxULmF0dHIoXCJ4XCIsLVcpLmF0dHIoXCJkeVwiLG4pLE4uYXR0cihcImRcIixcIk1cIistbCtcIixcIitMWzBdK1wiSDBWXCIrTFsxXStcIkhcIistbCk7YnJlYWs7Y2FzZVwicmlnaHRcIjpBPWQsTy5hdHRyKFwieDJcIixyKSxRLmF0dHIoXCJ4XCIsVyksUC5hdHRyKFwieDJcIixyKS5hdHRyKFwieTJcIiwwKSxSLmF0dHIoXCJ4XCIsVykuYXR0cihcInlcIiwwKSxTLnN0eWxlKFwidGV4dC1hbmNob3JcIixcInN0YXJ0XCIpLFQuYXR0cihcInhcIixXKS5hdHRyKFwiZHlcIixuKSxOLmF0dHIoXCJkXCIsXCJNXCIrbCtcIixcIitMWzBdK1wiSDBWXCIrTFsxXStcIkhcIitsKX1pZihGLnJhbmdlQmFuZCl7dmFyIFo9RiwkPVoucmFuZ2VCYW5kKCkvMjtFPUY9ZnVuY3Rpb24oYSl7cmV0dXJuIFooYSkrJH19ZWxzZSBFLnJhbmdlQmFuZD9FPUY6Si5jYWxsKEEsRik7SS5jYWxsKEEsRSksSy5jYWxsKEEsRil9KX12YXIgbCxtLG4sbyxwPWEuc2NhbGUubGluZWFyKCkscT1cImJvdHRvbVwiLHI9NixzPTMsdD1udWxsLHU9MCx2PSEwO3JldHVybiBiPWJ8fHt9LGw9Yi53aXRoT3V0ZXJUaWNrPzY6MCxrLnNjYWxlPWZ1bmN0aW9uKGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhwPWEsayk6cH0say5vcmllbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHE9YSBpbnt0b3A6MSxyaWdodDoxLGJvdHRvbToxLGxlZnQ6MX0/YStcIlwiOlwiYm90dG9tXCIsayk6cX0say50aWNrRm9ybWF0PWZ1bmN0aW9uKGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhtPWEsayk6bX0say50aWNrQ2VudGVyZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KG89YSxrKTpvfSxrLnRpY2tPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdX0say50aWNrSW50ZXJ2YWw9ZnVuY3Rpb24oKXt2YXIgYSxjO3JldHVybiBiLmlzQ2F0ZWdvcnk/YT0yKnU6KGM9ay5nLnNlbGVjdChcInBhdGguZG9tYWluXCIpLm5vZGUoKS5nZXRUb3RhbExlbmd0aCgpLTIqbCxhPWMvay5nLnNlbGVjdEFsbChcImxpbmVcIikuc2l6ZSgpKSwxLzA9PT1hPzA6YX0say50aWNrcz1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhuPWFyZ3VtZW50cyxrKTpufSxrLnRpY2tDdWxsaW5nPWZ1bmN0aW9uKGEpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyh2PWEsayk6dn0say50aWNrVmFsdWVzPWZ1bmN0aW9uKGEpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGEpdD1mdW5jdGlvbigpe3JldHVybiBhKHAuZG9tYWluKCkpfTtlbHNle2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0O3Q9YX1yZXR1cm4ga30sa312YXIgaCxpLGosaz17dmVyc2lvbjpcIjAuNC4xMFwifTtrLmdlbmVyYXRlPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZChhKX0say5jaGFydD17Zm46ZC5wcm90b3R5cGUsaW50ZXJuYWw6e2ZuOmUucHJvdG90eXBlLGF4aXM6e2ZuOmYucHJvdG90eXBlfX19LGg9ay5jaGFydC5mbixpPWsuY2hhcnQuaW50ZXJuYWwuZm4saj1rLmNoYXJ0LmludGVybmFsLmF4aXMuZm4saS5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnO2lmKGEuaW5pdFBhcmFtcygpLGIuZGF0YV91cmwpYS5jb252ZXJ0VXJsVG9EYXRhKGIuZGF0YV91cmwsYi5kYXRhX21pbWVUeXBlLGIuZGF0YV9rZXlzLGEuaW5pdFdpdGhEYXRhKTtlbHNlIGlmKGIuZGF0YV9qc29uKWEuaW5pdFdpdGhEYXRhKGEuY29udmVydEpzb25Ub0RhdGEoYi5kYXRhX2pzb24sYi5kYXRhX2tleXMpKTtlbHNlIGlmKGIuZGF0YV9yb3dzKWEuaW5pdFdpdGhEYXRhKGEuY29udmVydFJvd3NUb0RhdGEoYi5kYXRhX3Jvd3MpKTtlbHNle2lmKCFiLmRhdGFfY29sdW1ucyl0aHJvdyBFcnJvcihcInVybCBvciBqc29uIG9yIHJvd3Mgb3IgY29sdW1ucyBpcyByZXF1aXJlZC5cIik7YS5pbml0V2l0aERhdGEoYS5jb252ZXJ0Q29sdW1uc1RvRGF0YShiLmRhdGFfY29sdW1ucykpfX0saS5pbml0UGFyYW1zPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZDMsYz1hLmNvbmZpZzthLmNsaXBJZD1cImMzLVwiKyArbmV3IERhdGUrXCItY2xpcFwiLGEuY2xpcElkRm9yWEF4aXM9YS5jbGlwSWQrXCIteGF4aXNcIixhLmNsaXBJZEZvcllBeGlzPWEuY2xpcElkK1wiLXlheGlzXCIsYS5jbGlwSWRGb3JHcmlkPWEuY2xpcElkK1wiLWdyaWRcIixhLmNsaXBJZEZvclN1YmNoYXJ0PWEuY2xpcElkK1wiLXN1YmNoYXJ0XCIsYS5jbGlwUGF0aD1hLmdldENsaXBQYXRoKGEuY2xpcElkKSxhLmNsaXBQYXRoRm9yWEF4aXM9YS5nZXRDbGlwUGF0aChhLmNsaXBJZEZvclhBeGlzKSxhLmNsaXBQYXRoRm9yWUF4aXM9YS5nZXRDbGlwUGF0aChhLmNsaXBJZEZvcllBeGlzKSxhLmNsaXBQYXRoRm9yR3JpZD1hLmdldENsaXBQYXRoKGEuY2xpcElkRm9yR3JpZCksYS5jbGlwUGF0aEZvclN1YmNoYXJ0PWEuZ2V0Q2xpcFBhdGgoYS5jbGlwSWRGb3JTdWJjaGFydCksYS5kcmFnU3RhcnQ9bnVsbCxhLmRyYWdnaW5nPSExLGEuZmxvd2luZz0hMSxhLmNhbmNlbENsaWNrPSExLGEubW91c2VvdmVyPSExLGEudHJhbnNpdGluZz0hMSxhLmNvbG9yPWEuZ2VuZXJhdGVDb2xvcigpLGEubGV2ZWxDb2xvcj1hLmdlbmVyYXRlTGV2ZWxDb2xvcigpLGEuZGF0YVRpbWVGb3JtYXQ9Yy5kYXRhX3hMb2NhbHRpbWU/Yi50aW1lLmZvcm1hdDpiLnRpbWUuZm9ybWF0LnV0YyxhLmF4aXNUaW1lRm9ybWF0PWMuYXhpc194X2xvY2FsdGltZT9iLnRpbWUuZm9ybWF0OmIudGltZS5mb3JtYXQudXRjLGEuZGVmYXVsdEF4aXNUaW1lRm9ybWF0PWEuYXhpc1RpbWVGb3JtYXQubXVsdGkoW1tcIi4lTFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldE1pbGxpc2Vjb25kcygpfV0sW1wiOiVTXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0U2Vjb25kcygpfV0sW1wiJUk6JU1cIixmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRNaW51dGVzKCl9XSxbXCIlSSAlcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEhvdXJzKCl9XSxbXCIlLW0vJS1kXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0RGF5KCkmJjEhPT1hLmdldERhdGUoKX1dLFtcIiUtbS8lLWRcIixmdW5jdGlvbihhKXtyZXR1cm4gMSE9PWEuZ2V0RGF0ZSgpfV0sW1wiJS1tLyUtZFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldE1vbnRoKCl9XSxbXCIlWS8lLW0vJS1kXCIsZnVuY3Rpb24oKXtyZXR1cm4hMH1dXSksYS5oaWRkZW5UYXJnZXRJZHM9W10sYS5oaWRkZW5MZWdlbmRJZHM9W10sYS5mb2N1c2VkVGFyZ2V0SWRzPVtdLGEuZGVmb2N1c2VkVGFyZ2V0SWRzPVtdLGEueE9yaWVudD1jLmF4aXNfcm90YXRlZD9cImxlZnRcIjpcImJvdHRvbVwiLGEueU9yaWVudD1jLmF4aXNfcm90YXRlZD9jLmF4aXNfeV9pbm5lcj9cInRvcFwiOlwiYm90dG9tXCI6Yy5heGlzX3lfaW5uZXI/XCJyaWdodFwiOlwibGVmdFwiLGEueTJPcmllbnQ9Yy5heGlzX3JvdGF0ZWQ/Yy5heGlzX3kyX2lubmVyP1wiYm90dG9tXCI6XCJ0b3BcIjpjLmF4aXNfeTJfaW5uZXI/XCJsZWZ0XCI6XCJyaWdodFwiLGEuc3ViWE9yaWVudD1jLmF4aXNfcm90YXRlZD9cImxlZnRcIjpcImJvdHRvbVwiLGEuaXNMZWdlbmRSaWdodD1cInJpZ2h0XCI9PT1jLmxlZ2VuZF9wb3NpdGlvbixhLmlzTGVnZW5kSW5zZXQ9XCJpbnNldFwiPT09Yy5sZWdlbmRfcG9zaXRpb24sYS5pc0xlZ2VuZFRvcD1cInRvcC1sZWZ0XCI9PT1jLmxlZ2VuZF9pbnNldF9hbmNob3J8fFwidG9wLXJpZ2h0XCI9PT1jLmxlZ2VuZF9pbnNldF9hbmNob3IsYS5pc0xlZ2VuZExlZnQ9XCJ0b3AtbGVmdFwiPT09Yy5sZWdlbmRfaW5zZXRfYW5jaG9yfHxcImJvdHRvbS1sZWZ0XCI9PT1jLmxlZ2VuZF9pbnNldF9hbmNob3IsYS5sZWdlbmRTdGVwPTAsYS5sZWdlbmRJdGVtV2lkdGg9MCxhLmxlZ2VuZEl0ZW1IZWlnaHQ9MCxhLmN1cnJlbnRNYXhUaWNrV2lkdGhzPXt4OjAseTowLHkyOjB9LGEucm90YXRlZF9wYWRkaW5nX2xlZnQ9MzAsYS5yb3RhdGVkX3BhZGRpbmdfcmlnaHQ9Yy5heGlzX3JvdGF0ZWQmJiFjLmF4aXNfeF9zaG93PzA6MzAsYS5yb3RhdGVkX3BhZGRpbmdfdG9wPTUsYS53aXRob3V0RmFkZUluPXt9LGEuaW50ZXJ2YWxGb3JPYnNlcnZlSW5zZXJ0ZWQ9dm9pZCAwLGEuYXhlcy5zdWJ4PWIuc2VsZWN0QWxsKFtdKX0saS5pbml0Q2hhcnRFbGVtZW50cz1mdW5jdGlvbigpe3RoaXMuaW5pdEJhciYmdGhpcy5pbml0QmFyKCksdGhpcy5pbml0TGluZSYmdGhpcy5pbml0TGluZSgpLHRoaXMuaW5pdEFyYyYmdGhpcy5pbml0QXJjKCksdGhpcy5pbml0R2F1Z2UmJnRoaXMuaW5pdEdhdWdlKCksdGhpcy5pbml0VGV4dCYmdGhpcy5pbml0VGV4dCgpfSxpLmluaXRXaXRoRGF0YT1mdW5jdGlvbihiKXt2YXIgYyxkLGU9dGhpcyxnPWUuZDMsaD1lLmNvbmZpZyxpPSEwO2UuYXhpcz1uZXcgZihlKSxlLmluaXRQaWUmJmUuaW5pdFBpZSgpLGUuaW5pdEJydXNoJiZlLmluaXRCcnVzaCgpLGUuaW5pdFpvb20mJmUuaW5pdFpvb20oKSxlLnNlbGVjdENoYXJ0PWguYmluZHRvP1wiZnVuY3Rpb25cIj09dHlwZW9mIGguYmluZHRvLm5vZGU/aC5iaW5kdG86Zy5zZWxlY3QoaC5iaW5kdG8pOmcuc2VsZWN0QWxsKFtdKSxlLnNlbGVjdENoYXJ0LmVtcHR5KCkmJihlLnNlbGVjdENoYXJ0PWcuc2VsZWN0KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLnN0eWxlKFwib3BhY2l0eVwiLDApLGUub2JzZXJ2ZUluc2VydGVkKGUuc2VsZWN0Q2hhcnQpLGk9ITEpLGUuc2VsZWN0Q2hhcnQuaHRtbChcIlwiKS5jbGFzc2VkKFwiYzNcIiwhMCksZS5kYXRhLnhzPXt9LGUuZGF0YS50YXJnZXRzPWUuY29udmVydERhdGFUb1RhcmdldHMoYiksaC5kYXRhX2ZpbHRlciYmKGUuZGF0YS50YXJnZXRzPWUuZGF0YS50YXJnZXRzLmZpbHRlcihoLmRhdGFfZmlsdGVyKSksaC5kYXRhX2hpZGUmJmUuYWRkSGlkZGVuVGFyZ2V0SWRzKGguZGF0YV9oaWRlPT09ITA/ZS5tYXBUb0lkcyhlLmRhdGEudGFyZ2V0cyk6aC5kYXRhX2hpZGUpLGgubGVnZW5kX2hpZGUmJmUuYWRkSGlkZGVuTGVnZW5kSWRzKGgubGVnZW5kX2hpZGU9PT0hMD9lLm1hcFRvSWRzKGUuZGF0YS50YXJnZXRzKTpoLmxlZ2VuZF9oaWRlKSxlLmhhc1R5cGUoXCJnYXVnZVwiKSYmKGgubGVnZW5kX3Nob3c9ITEpLGUudXBkYXRlU2l6ZXMoKSxlLnVwZGF0ZVNjYWxlcygpLGUueC5kb21haW4oZy5leHRlbnQoZS5nZXRYRG9tYWluKGUuZGF0YS50YXJnZXRzKSkpLGUueS5kb21haW4oZS5nZXRZRG9tYWluKGUuZGF0YS50YXJnZXRzLFwieVwiKSksZS55Mi5kb21haW4oZS5nZXRZRG9tYWluKGUuZGF0YS50YXJnZXRzLFwieTJcIikpLGUuc3ViWC5kb21haW4oZS54LmRvbWFpbigpKSxlLnN1YlkuZG9tYWluKGUueS5kb21haW4oKSksZS5zdWJZMi5kb21haW4oZS55Mi5kb21haW4oKSksZS5vcmdYRG9tYWluPWUueC5kb21haW4oKSxlLmJydXNoJiZlLmJydXNoLnNjYWxlKGUuc3ViWCksaC56b29tX2VuYWJsZWQmJmUuem9vbS5zY2FsZShlLngpLGUuc3ZnPWUuc2VsZWN0Q2hhcnQuYXBwZW5kKFwic3ZnXCIpLnN0eWxlKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKS5vbihcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe3JldHVybiBoLm9ubW91c2VvdmVyLmNhbGwoZSl9KS5vbihcIm1vdXNlbGVhdmVcIixmdW5jdGlvbigpe3JldHVybiBoLm9ubW91c2VvdXQuY2FsbChlKX0pLGM9ZS5zdmcuYXBwZW5kKFwiZGVmc1wiKSxlLmNsaXBDaGFydD1lLmFwcGVuZENsaXAoYyxlLmNsaXBJZCksZS5jbGlwWEF4aXM9ZS5hcHBlbmRDbGlwKGMsZS5jbGlwSWRGb3JYQXhpcyksZS5jbGlwWUF4aXM9ZS5hcHBlbmRDbGlwKGMsZS5jbGlwSWRGb3JZQXhpcyksZS5jbGlwR3JpZD1lLmFwcGVuZENsaXAoYyxlLmNsaXBJZEZvckdyaWQpLGUuY2xpcFN1YmNoYXJ0PWUuYXBwZW5kQ2xpcChjLGUuY2xpcElkRm9yU3ViY2hhcnQpLGUudXBkYXRlU3ZnU2l6ZSgpLGQ9ZS5tYWluPWUuc3ZnLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLGUuZ2V0VHJhbnNsYXRlKFwibWFpblwiKSksZS5pbml0U3ViY2hhcnQmJmUuaW5pdFN1YmNoYXJ0KCksZS5pbml0VG9vbHRpcCYmZS5pbml0VG9vbHRpcCgpLGUuaW5pdExlZ2VuZCYmZS5pbml0TGVnZW5kKCksZC5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJjbGFzc1wiLGwudGV4dCtcIiBcIitsLmVtcHR5KS5hdHRyKFwidGV4dC1hbmNob3JcIixcIm1pZGRsZVwiKS5hdHRyKFwiZG9taW5hbnQtYmFzZWxpbmVcIixcIm1pZGRsZVwiKSxlLmluaXRSZWdpb24oKSxlLmluaXRHcmlkKCksZC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGlwLXBhdGhcIixlLmNsaXBQYXRoKS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0KSxoLmdyaWRfbGluZXNfZnJvbnQmJmUuaW5pdEdyaWRMaW5lcygpLGUuaW5pdEV2ZW50UmVjdCgpLGUuaW5pdENoYXJ0RWxlbWVudHMoKSxkLmluc2VydChcInJlY3RcIixoLnpvb21fcHJpdmlsZWdlZD9udWxsOlwiZy5cIitsLnJlZ2lvbnMpLmF0dHIoXCJjbGFzc1wiLGwuem9vbVJlY3QpLmF0dHIoXCJ3aWR0aFwiLGUud2lkdGgpLmF0dHIoXCJoZWlnaHRcIixlLmhlaWdodCkuc3R5bGUoXCJvcGFjaXR5XCIsMCkub24oXCJkYmxjbGljay56b29tXCIsbnVsbCksaC5heGlzX3hfZXh0ZW50JiZlLmJydXNoLmV4dGVudChlLmdldERlZmF1bHRFeHRlbnQoKSksZS5heGlzLmluaXQoKSxlLnVwZGF0ZVRhcmdldHMoZS5kYXRhLnRhcmdldHMpLGkmJihlLnVwZGF0ZURpbWVuc2lvbigpLGUuY29uZmlnLm9uaW5pdC5jYWxsKGUpLGUucmVkcmF3KHt3aXRoVHJhbnNpdGlvbjohMSx3aXRoVHJhbnNmb3JtOiEwLHdpdGhVcGRhdGVYRG9tYWluOiEwLHdpdGhVcGRhdGVPcmdYRG9tYWluOiEwLHdpdGhUcmFuc2l0aW9uRm9yQXhpczohMX0pKSxudWxsPT1hLm9ucmVzaXplJiYoYS5vbnJlc2l6ZT1lLmdlbmVyYXRlUmVzaXplKCkpLGEub25yZXNpemUuYWRkJiYoYS5vbnJlc2l6ZS5hZGQoZnVuY3Rpb24oKXtoLm9ucmVzaXplLmNhbGwoZSl9KSxhLm9ucmVzaXplLmFkZChmdW5jdGlvbigpe2UuYXBpLmZsdXNoKCl9KSxhLm9ucmVzaXplLmFkZChmdW5jdGlvbigpe2gub25yZXNpemVkLmNhbGwoZSl9KSksZS5hcGkuZWxlbWVudD1lLnNlbGVjdENoYXJ0Lm5vZGUoKX0saS5zbW9vdGhMaW5lcz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7XCJncmlkXCI9PT1iJiZhLmVhY2goZnVuY3Rpb24oKXt2YXIgYT1jLmQzLnNlbGVjdCh0aGlzKSxiPWEuYXR0cihcIngxXCIpLGQ9YS5hdHRyKFwieDJcIiksZT1hLmF0dHIoXCJ5MVwiKSxmPWEuYXR0cihcInkyXCIpO2EuYXR0cih7eDE6TWF0aC5jZWlsKGIpLHgyOk1hdGguY2VpbChkKSx5MTpNYXRoLmNlaWwoZSkseTI6TWF0aC5jZWlsKGYpfSl9KX0saS51cGRhdGVTaXplcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZyxjPWEubGVnZW5kP2EuZ2V0TGVnZW5kSGVpZ2h0KCk6MCxkPWEubGVnZW5kP2EuZ2V0TGVnZW5kV2lkdGgoKTowLGU9YS5pc0xlZ2VuZFJpZ2h0fHxhLmlzTGVnZW5kSW5zZXQ/MDpjLGY9YS5oYXNBcmNUeXBlKCksZz1iLmF4aXNfcm90YXRlZHx8Zj8wOmEuZ2V0SG9yaXpvbnRhbEF4aXNIZWlnaHQoXCJ4XCIpLGg9Yi5zdWJjaGFydF9zaG93JiYhZj9iLnN1YmNoYXJ0X3NpemVfaGVpZ2h0K2c6MDthLmN1cnJlbnRXaWR0aD1hLmdldEN1cnJlbnRXaWR0aCgpLGEuY3VycmVudEhlaWdodD1hLmdldEN1cnJlbnRIZWlnaHQoKSxhLm1hcmdpbj1iLmF4aXNfcm90YXRlZD97dG9wOmEuZ2V0SG9yaXpvbnRhbEF4aXNIZWlnaHQoXCJ5MlwiKSthLmdldEN1cnJlbnRQYWRkaW5nVG9wKCkscmlnaHQ6Zj8wOmEuZ2V0Q3VycmVudFBhZGRpbmdSaWdodCgpLGJvdHRvbTphLmdldEhvcml6b250YWxBeGlzSGVpZ2h0KFwieVwiKStlK2EuZ2V0Q3VycmVudFBhZGRpbmdCb3R0b20oKSxsZWZ0OmgrKGY/MDphLmdldEN1cnJlbnRQYWRkaW5nTGVmdCgpKX06e3RvcDo0K2EuZ2V0Q3VycmVudFBhZGRpbmdUb3AoKSxyaWdodDpmPzA6YS5nZXRDdXJyZW50UGFkZGluZ1JpZ2h0KCksYm90dG9tOmcraCtlK2EuZ2V0Q3VycmVudFBhZGRpbmdCb3R0b20oKSxsZWZ0OmY/MDphLmdldEN1cnJlbnRQYWRkaW5nTGVmdCgpfSxhLm1hcmdpbjI9Yi5heGlzX3JvdGF0ZWQ/e3RvcDphLm1hcmdpbi50b3AscmlnaHQ6MC8wLGJvdHRvbToyMCtlLGxlZnQ6YS5yb3RhdGVkX3BhZGRpbmdfbGVmdH06e3RvcDphLmN1cnJlbnRIZWlnaHQtaC1lLHJpZ2h0OjAvMCxib3R0b206ZytlLGxlZnQ6YS5tYXJnaW4ubGVmdH0sYS5tYXJnaW4zPXt0b3A6MCxyaWdodDowLzAsYm90dG9tOjAsbGVmdDowfSxhLnVwZGF0ZVNpemVGb3JMZWdlbmQmJmEudXBkYXRlU2l6ZUZvckxlZ2VuZChjLGQpLGEud2lkdGg9YS5jdXJyZW50V2lkdGgtYS5tYXJnaW4ubGVmdC1hLm1hcmdpbi5yaWdodCxhLmhlaWdodD1hLmN1cnJlbnRIZWlnaHQtYS5tYXJnaW4udG9wLWEubWFyZ2luLmJvdHRvbSxhLndpZHRoPDAmJihhLndpZHRoPTApLGEuaGVpZ2h0PDAmJihhLmhlaWdodD0wKSxhLndpZHRoMj1iLmF4aXNfcm90YXRlZD9hLm1hcmdpbi5sZWZ0LWEucm90YXRlZF9wYWRkaW5nX2xlZnQtYS5yb3RhdGVkX3BhZGRpbmdfcmlnaHQ6YS53aWR0aCxhLmhlaWdodDI9Yi5heGlzX3JvdGF0ZWQ/YS5oZWlnaHQ6YS5jdXJyZW50SGVpZ2h0LWEubWFyZ2luMi50b3AtYS5tYXJnaW4yLmJvdHRvbSxhLndpZHRoMjwwJiYoYS53aWR0aDI9MCksYS5oZWlnaHQyPDAmJihhLmhlaWdodDI9MCksYS5hcmNXaWR0aD1hLndpZHRoLShhLmlzTGVnZW5kUmlnaHQ/ZCsxMDowKSxhLmFyY0hlaWdodD1hLmhlaWdodC0oYS5pc0xlZ2VuZFJpZ2h0PzA6MTApLGEuaGFzVHlwZShcImdhdWdlXCIpJiYoYS5hcmNIZWlnaHQrPWEuaGVpZ2h0LWEuZ2V0R2F1Z2VMYWJlbEhlaWdodCgpKSxhLnVwZGF0ZVJhZGl1cyYmYS51cGRhdGVSYWRpdXMoKSxhLmlzTGVnZW5kUmlnaHQmJmYmJihhLm1hcmdpbjMubGVmdD1hLmFyY1dpZHRoLzIrMS4xKmEucmFkaXVzRXhwYW5kZWQpfSxpLnVwZGF0ZVRhcmdldHM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnVwZGF0ZVRhcmdldHNGb3JUZXh0KGEpLGIudXBkYXRlVGFyZ2V0c0ZvckJhcihhKSxiLnVwZGF0ZVRhcmdldHNGb3JMaW5lKGEpLGIuaGFzQXJjVHlwZSgpJiZiLnVwZGF0ZVRhcmdldHNGb3JBcmMmJmIudXBkYXRlVGFyZ2V0c0ZvckFyYyhhKSxiLnVwZGF0ZVRhcmdldHNGb3JTdWJjaGFydCYmYi51cGRhdGVUYXJnZXRzRm9yU3ViY2hhcnQoYSksYi5zaG93VGFyZ2V0cygpfSxpLnNob3dUYXJnZXRzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnN2Zy5zZWxlY3RBbGwoXCIuXCIrbC50YXJnZXQpLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gYS5pc1RhcmdldFRvU2hvdyhiLmlkKX0pLnRyYW5zaXRpb24oKS5kdXJhdGlvbihhLmNvbmZpZy50cmFuc2l0aW9uX2R1cmF0aW9uKS5zdHlsZShcIm9wYWNpdHlcIiwxKX0saS5yZWRyYXc9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqLGssbSxuLG8scCxxLHIscyx0LHUsdix4LHkseixBLEIsQyxELEUsRixHLEg9dGhpcyxJPUgubWFpbixKPUguZDMsSz1ILmNvbmZpZyxMPUguZ2V0U2hhcGVJbmRpY2VzKEguaXNBcmVhVHlwZSksTT1ILmdldFNoYXBlSW5kaWNlcyhILmlzQmFyVHlwZSksTj1ILmdldFNoYXBlSW5kaWNlcyhILmlzTGluZVR5cGUpLE89SC5oYXNBcmNUeXBlKCksUD1ILmZpbHRlclRhcmdldHNUb1Nob3coSC5kYXRhLnRhcmdldHMpLFE9SC54di5iaW5kKEgpO2lmKGE9YXx8e30sYz13KGEsXCJ3aXRoWVwiLCEwKSxkPXcoYSxcIndpdGhTdWJjaGFydFwiLCEwKSxlPXcoYSxcIndpdGhUcmFuc2l0aW9uXCIsITApLGg9dyhhLFwid2l0aFRyYW5zZm9ybVwiLCExKSxpPXcoYSxcIndpdGhVcGRhdGVYRG9tYWluXCIsITEpLGo9dyhhLFwid2l0aFVwZGF0ZU9yZ1hEb21haW5cIiwhMSksaz13KGEsXCJ3aXRoVHJpbVhEb21haW5cIiwhMCkscD13KGEsXCJ3aXRoVXBkYXRlWEF4aXNcIixpKSxtPXcoYSxcIndpdGhMZWdlbmRcIiwhMSksbj13KGEsXCJ3aXRoRXZlbnRSZWN0XCIsITApLG89dyhhLFwid2l0aERpbWVuc2lvblwiLCEwKSxmPXcoYSxcIndpdGhUcmFuc2l0aW9uRm9yRXhpdFwiLGUpLGc9dyhhLFwid2l0aFRyYW5zaXRpb25Gb3JBeGlzXCIsZSksdj1lP0sudHJhbnNpdGlvbl9kdXJhdGlvbjowLHg9Zj92OjAseT1nP3Y6MCxiPWJ8fEguYXhpcy5nZW5lcmF0ZVRyYW5zaXRpb25zKHkpLG0mJksubGVnZW5kX3Nob3c/SC51cGRhdGVMZWdlbmQoSC5tYXBUb0lkcyhILmRhdGEudGFyZ2V0cyksYSxiKTpvJiZILnVwZGF0ZURpbWVuc2lvbighMCksSC5pc0NhdGVnb3JpemVkKCkmJjA9PT1QLmxlbmd0aCYmSC54LmRvbWFpbihbMCxILmF4ZXMueC5zZWxlY3RBbGwoXCIudGlja1wiKS5zaXplKCldKSxQLmxlbmd0aD8oSC51cGRhdGVYRG9tYWluKFAsaSxqLGspLEsuYXhpc194X3RpY2tfdmFsdWVzfHwoQj1ILmF4aXMudXBkYXRlWEF4aXNUaWNrVmFsdWVzKFApKSk6KEgueEF4aXMudGlja1ZhbHVlcyhbXSksSC5zdWJYQXhpcy50aWNrVmFsdWVzKFtdKSksSy56b29tX3Jlc2NhbGUmJiFhLmZsb3cmJihFPUgueC5vcmdEb21haW4oKSksSC55LmRvbWFpbihILmdldFlEb21haW4oUCxcInlcIixFKSksSC55Mi5kb21haW4oSC5nZXRZRG9tYWluKFAsXCJ5MlwiLEUpKSwhSy5heGlzX3lfdGlja192YWx1ZXMmJksuYXhpc195X3RpY2tfY291bnQmJkgueUF4aXMudGlja1ZhbHVlcyhILmF4aXMuZ2VuZXJhdGVUaWNrVmFsdWVzKEgueS5kb21haW4oKSxLLmF4aXNfeV90aWNrX2NvdW50KSksIUsuYXhpc195Ml90aWNrX3ZhbHVlcyYmSy5heGlzX3kyX3RpY2tfY291bnQmJkgueTJBeGlzLnRpY2tWYWx1ZXMoSC5heGlzLmdlbmVyYXRlVGlja1ZhbHVlcyhILnkyLmRvbWFpbigpLEsuYXhpc195Ml90aWNrX2NvdW50KSksSC5heGlzLnJlZHJhdyhiLE8pLEguYXhpcy51cGRhdGVMYWJlbHMoZSksKGl8fHApJiZQLmxlbmd0aClpZihLLmF4aXNfeF90aWNrX2N1bGxpbmcmJkIpe2ZvcihDPTE7QzxCLmxlbmd0aDtDKyspaWYoQi5sZW5ndGgvQzxLLmF4aXNfeF90aWNrX2N1bGxpbmdfbWF4KXtEPUM7YnJlYWt9SC5zdmcuc2VsZWN0QWxsKFwiLlwiK2wuYXhpc1grXCIgLnRpY2sgdGV4dFwiKS5lYWNoKGZ1bmN0aW9uKGEpe3ZhciBiPUIuaW5kZXhPZihhKTtiPj0wJiZKLnNlbGVjdCh0aGlzKS5zdHlsZShcImRpc3BsYXlcIixiJUQ/XCJub25lXCI6XCJibG9ja1wiKX0pfWVsc2UgSC5zdmcuc2VsZWN0QWxsKFwiLlwiK2wuYXhpc1grXCIgLnRpY2sgdGV4dFwiKS5zdHlsZShcImRpc3BsYXlcIixcImJsb2NrXCIpO3E9SC5nZW5lcmF0ZURyYXdBcmVhP0guZ2VuZXJhdGVEcmF3QXJlYShMLCExKTp2b2lkIDAscj1ILmdlbmVyYXRlRHJhd0Jhcj9ILmdlbmVyYXRlRHJhd0JhcihNKTp2b2lkIDAscz1ILmdlbmVyYXRlRHJhd0xpbmU/SC5nZW5lcmF0ZURyYXdMaW5lKE4sITEpOnZvaWQgMCx0PUguZ2VuZXJhdGVYWUZvclRleHQoTCxNLE4sITApLHU9SC5nZW5lcmF0ZVhZRm9yVGV4dChMLE0sTiwhMSksYyYmKEguc3ViWS5kb21haW4oSC5nZXRZRG9tYWluKFAsXCJ5XCIpKSxILnN1YlkyLmRvbWFpbihILmdldFlEb21haW4oUCxcInkyXCIpKSksSC50b29sdGlwLnN0eWxlKFwiZGlzcGxheVwiLFwibm9uZVwiKSxILnVwZGF0ZVhncmlkRm9jdXMoKSxJLnNlbGVjdChcInRleHQuXCIrbC50ZXh0K1wiLlwiK2wuZW1wdHkpLmF0dHIoXCJ4XCIsSC53aWR0aC8yKS5hdHRyKFwieVwiLEguaGVpZ2h0LzIpLnRleHQoSy5kYXRhX2VtcHR5X2xhYmVsX3RleHQpLnRyYW5zaXRpb24oKS5zdHlsZShcIm9wYWNpdHlcIixQLmxlbmd0aD8wOjEpLEgudXBkYXRlR3JpZCh2KSxILnVwZGF0ZVJlZ2lvbih2KSxILnVwZGF0ZUJhcih4KSxILnVwZGF0ZUxpbmUoeCksSC51cGRhdGVBcmVhKHgpLEgudXBkYXRlQ2lyY2xlKCksSC5oYXNEYXRhTGFiZWwoKSYmSC51cGRhdGVUZXh0KHgpLEgucmVkcmF3QXJjJiZILnJlZHJhd0FyYyh2LHgsaCksSC5yZWRyYXdTdWJjaGFydCYmSC5yZWRyYXdTdWJjaGFydChkLGIsdix4LEwsTSxOKSxJLnNlbGVjdEFsbChcIi5cIitsLnNlbGVjdGVkQ2lyY2xlcykuZmlsdGVyKEguaXNCYXJUeXBlLmJpbmQoSCkpLnNlbGVjdEFsbChcImNpcmNsZVwiKS5yZW1vdmUoKSxLLmludGVyYWN0aW9uX2VuYWJsZWQmJiFhLmZsb3cmJm4mJihILnJlZHJhd0V2ZW50UmVjdCgpLEgudXBkYXRlWm9vbSYmSC51cGRhdGVab29tKCkpLEgudXBkYXRlQ2lyY2xlWSgpLEY9KEguY29uZmlnLmF4aXNfcm90YXRlZD9ILmNpcmNsZVk6SC5jaXJjbGVYKS5iaW5kKEgpLEc9KEguY29uZmlnLmF4aXNfcm90YXRlZD9ILmNpcmNsZVg6SC5jaXJjbGVZKS5iaW5kKEgpLGEuZmxvdyYmKEE9SC5nZW5lcmF0ZUZsb3coe3RhcmdldHM6UCxmbG93OmEuZmxvdyxkdXJhdGlvbjphLmZsb3cuZHVyYXRpb24sZHJhd0JhcjpyLGRyYXdMaW5lOnMsZHJhd0FyZWE6cSxjeDpGLGN5OkcseHY6USx4Rm9yVGV4dDp0LHlGb3JUZXh0OnV9KSksKHZ8fEEpJiZILmlzVGFiVmlzaWJsZSgpP0oudHJhbnNpdGlvbigpLmR1cmF0aW9uKHYpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1bXTtbSC5yZWRyYXdCYXIociwhMCksSC5yZWRyYXdMaW5lKHMsITApLEgucmVkcmF3QXJlYShxLCEwKSxILnJlZHJhd0NpcmNsZShGLEcsITApLEgucmVkcmF3VGV4dCh0LHUsYS5mbG93LCEwKSxILnJlZHJhd1JlZ2lvbighMCksSC5yZWRyYXdHcmlkKCEwKV0uZm9yRWFjaChmdW5jdGlvbihhKXthLmZvckVhY2goZnVuY3Rpb24oYSl7Yi5wdXNoKGEpfSl9KSx6PUguZ2VuZXJhdGVXYWl0KCksYi5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ouYWRkKGEpfSl9KS5jYWxsKHosZnVuY3Rpb24oKXtBJiZBKCksSy5vbnJlbmRlcmVkJiZLLm9ucmVuZGVyZWQuY2FsbChIKX0pOihILnJlZHJhd0JhcihyKSxILnJlZHJhd0xpbmUocyksSC5yZWRyYXdBcmVhKHEpLEgucmVkcmF3Q2lyY2xlKEYsRyksSC5yZWRyYXdUZXh0KHQsdSxhLmZsb3cpLEgucmVkcmF3UmVnaW9uKCksSC5yZWRyYXdHcmlkKCksSy5vbnJlbmRlcmVkJiZLLm9ucmVuZGVyZWQuY2FsbChIKSksSC5tYXBUb0lkcyhILmRhdGEudGFyZ2V0cykuZm9yRWFjaChmdW5jdGlvbihhKXtILndpdGhvdXRGYWRlSW5bYV09ITB9KX0saS51cGRhdGVBbmRSZWRyYXc9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLGQ9Yy5jb25maWc7YT1hfHx7fSxhLndpdGhUcmFuc2l0aW9uPXcoYSxcIndpdGhUcmFuc2l0aW9uXCIsITApLGEud2l0aFRyYW5zZm9ybT13KGEsXCJ3aXRoVHJhbnNmb3JtXCIsITEpLGEud2l0aExlZ2VuZD13KGEsXCJ3aXRoTGVnZW5kXCIsITEpLGEud2l0aFVwZGF0ZVhEb21haW49ITAsYS53aXRoVXBkYXRlT3JnWERvbWFpbj0hMCxhLndpdGhUcmFuc2l0aW9uRm9yRXhpdD0hMSxhLndpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtPXcoYSxcIndpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtXCIsYS53aXRoVHJhbnNpdGlvbiksYy51cGRhdGVTaXplcygpLGEud2l0aExlZ2VuZCYmZC5sZWdlbmRfc2hvd3x8KGI9Yy5heGlzLmdlbmVyYXRlVHJhbnNpdGlvbnMoYS53aXRoVHJhbnNpdGlvbkZvckF4aXM/ZC50cmFuc2l0aW9uX2R1cmF0aW9uOjApLGMudXBkYXRlU2NhbGVzKCksYy51cGRhdGVTdmdTaXplKCksYy50cmFuc2Zvcm1BbGwoYS53aXRoVHJhbnNpdGlvbkZvclRyYW5zZm9ybSxiKSksYy5yZWRyYXcoYSxiKX0saS5yZWRyYXdXaXRob3V0UmVzY2FsZT1mdW5jdGlvbigpe3RoaXMucmVkcmF3KHt3aXRoWTohMSx3aXRoU3ViY2hhcnQ6ITEsd2l0aEV2ZW50UmVjdDohMSx3aXRoVHJhbnNpdGlvbkZvckF4aXM6ITF9KX0saS5pc1RpbWVTZXJpZXM9ZnVuY3Rpb24oKXtyZXR1cm5cInRpbWVzZXJpZXNcIj09PXRoaXMuY29uZmlnLmF4aXNfeF90eXBlfSxpLmlzQ2F0ZWdvcml6ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcuYXhpc194X3R5cGUuaW5kZXhPZihcImNhdGVnb3JcIik+PTB9LGkuaXNDdXN0b21YPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnO3JldHVybiFhLmlzVGltZVNlcmllcygpJiYoYi5kYXRhX3h8fHYoYi5kYXRhX3hzKSl9LGkuaXNUaW1lU2VyaWVzWT1mdW5jdGlvbigpe3JldHVyblwidGltZXNlcmllc1wiPT09dGhpcy5jb25maWcuYXhpc195X3R5cGV9LGkuZ2V0VHJhbnNsYXRlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLGU9ZC5jb25maWc7cmV0dXJuXCJtYWluXCI9PT1hPyhiPXMoZC5tYXJnaW4ubGVmdCksYz1zKGQubWFyZ2luLnRvcCkpOlwiY29udGV4dFwiPT09YT8oYj1zKGQubWFyZ2luMi5sZWZ0KSxjPXMoZC5tYXJnaW4yLnRvcCkpOlwibGVnZW5kXCI9PT1hPyhiPWQubWFyZ2luMy5sZWZ0LGM9ZC5tYXJnaW4zLnRvcCk6XCJ4XCI9PT1hPyhiPTAsYz1lLmF4aXNfcm90YXRlZD8wOmQuaGVpZ2h0KTpcInlcIj09PWE/KGI9MCxjPWUuYXhpc19yb3RhdGVkP2QuaGVpZ2h0OjApOlwieTJcIj09PWE/KGI9ZS5heGlzX3JvdGF0ZWQ/MDpkLndpZHRoLGM9ZS5heGlzX3JvdGF0ZWQ/MTowKTpcInN1YnhcIj09PWE/KGI9MCxjPWUuYXhpc19yb3RhdGVkPzA6ZC5oZWlnaHQyKTpcImFyY1wiPT09YSYmKGI9ZC5hcmNXaWR0aC8yLGM9ZC5hcmNIZWlnaHQvMiksXCJ0cmFuc2xhdGUoXCIrYitcIixcIitjK1wiKVwifSxpLmluaXRpYWxPcGFjaXR5PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09YS52YWx1ZSYmdGhpcy53aXRob3V0RmFkZUluW2EuaWRdPzE6MH0saS5pbml0aWFsT3BhY2l0eUZvckNpcmNsZT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PWEudmFsdWUmJnRoaXMud2l0aG91dEZhZGVJblthLmlkXT90aGlzLm9wYWNpdHlGb3JDaXJjbGUoYSk6MH0saS5vcGFjaXR5Rm9yQ2lyY2xlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY29uZmlnLnBvaW50X3Nob3c/MTowO3JldHVybiBtKGEudmFsdWUpP3RoaXMuaXNTY2F0dGVyVHlwZShhKT8uNTpiOjB9LGkub3BhY2l0eUZvclRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNEYXRhTGFiZWwoKT8xOjB9LGkueHg9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy54KGEueCk6bnVsbH0saS54dj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9YS52YWx1ZTtyZXR1cm4gYi5pc1RpbWVTZXJpZXMoKT9jPWIucGFyc2VEYXRlKGEudmFsdWUpOmIuaXNDYXRlZ29yaXplZCgpJiZcInN0cmluZ1wiPT10eXBlb2YgYS52YWx1ZSYmKGM9Yi5jb25maWcuYXhpc194X2NhdGVnb3JpZXMuaW5kZXhPZihhLnZhbHVlKSksTWF0aC5jZWlsKGIueChjKSl9LGkueXY9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWEuYXhpcyYmXCJ5MlwiPT09YS5heGlzP2IueTI6Yi55O3JldHVybiBNYXRoLmNlaWwoYyhhLnZhbHVlKSl9LGkuc3VieHg9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5zdWJYKGEueCk6bnVsbH0saS50cmFuc2Zvcm1NYWluPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpcztiJiZiLmF4aXNYP2M9Yi5heGlzWDooYz1mLm1haW4uc2VsZWN0KFwiLlwiK2wuYXhpc1gpLGEmJihjPWMudHJhbnNpdGlvbigpKSksYiYmYi5heGlzWT9kPWIuYXhpc1k6KGQ9Zi5tYWluLnNlbGVjdChcIi5cIitsLmF4aXNZKSxhJiYoZD1kLnRyYW5zaXRpb24oKSkpLGImJmIuYXhpc1kyP2U9Yi5heGlzWTI6KGU9Zi5tYWluLnNlbGVjdChcIi5cIitsLmF4aXNZMiksYSYmKGU9ZS50cmFuc2l0aW9uKCkpKSwoYT9mLm1haW4udHJhbnNpdGlvbigpOmYubWFpbikuYXR0cihcInRyYW5zZm9ybVwiLGYuZ2V0VHJhbnNsYXRlKFwibWFpblwiKSksYy5hdHRyKFwidHJhbnNmb3JtXCIsZi5nZXRUcmFuc2xhdGUoXCJ4XCIpKSxkLmF0dHIoXCJ0cmFuc2Zvcm1cIixmLmdldFRyYW5zbGF0ZShcInlcIikpLGUuYXR0cihcInRyYW5zZm9ybVwiLGYuZ2V0VHJhbnNsYXRlKFwieTJcIikpLGYubWFpbi5zZWxlY3QoXCIuXCIrbC5jaGFydEFyY3MpLmF0dHIoXCJ0cmFuc2Zvcm1cIixmLmdldFRyYW5zbGF0ZShcImFyY1wiKSl9LGkudHJhbnNmb3JtQWxsPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztjLnRyYW5zZm9ybU1haW4oYSxiKSxjLmNvbmZpZy5zdWJjaGFydF9zaG93JiZjLnRyYW5zZm9ybUNvbnRleHQoYSxiKSxjLmxlZ2VuZCYmYy50cmFuc2Zvcm1MZWdlbmQoYSl9LGkudXBkYXRlU3ZnU2l6ZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnN2Zy5zZWxlY3QoXCIuYzMtYnJ1c2ggLmJhY2tncm91bmRcIik7YS5zdmcuYXR0cihcIndpZHRoXCIsYS5jdXJyZW50V2lkdGgpLmF0dHIoXCJoZWlnaHRcIixhLmN1cnJlbnRIZWlnaHQpLGEuc3ZnLnNlbGVjdEFsbChbXCIjXCIrYS5jbGlwSWQsXCIjXCIrYS5jbGlwSWRGb3JHcmlkXSkuc2VsZWN0KFwicmVjdFwiKS5hdHRyKFwid2lkdGhcIixhLndpZHRoKS5hdHRyKFwiaGVpZ2h0XCIsYS5oZWlnaHQpLGEuc3ZnLnNlbGVjdChcIiNcIithLmNsaXBJZEZvclhBeGlzKS5zZWxlY3QoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsYS5nZXRYQXhpc0NsaXBYLmJpbmQoYSkpLmF0dHIoXCJ5XCIsYS5nZXRYQXhpc0NsaXBZLmJpbmQoYSkpLmF0dHIoXCJ3aWR0aFwiLGEuZ2V0WEF4aXNDbGlwV2lkdGguYmluZChhKSkuYXR0cihcImhlaWdodFwiLGEuZ2V0WEF4aXNDbGlwSGVpZ2h0LmJpbmQoYSkpLGEuc3ZnLnNlbGVjdChcIiNcIithLmNsaXBJZEZvcllBeGlzKS5zZWxlY3QoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsYS5nZXRZQXhpc0NsaXBYLmJpbmQoYSkpLmF0dHIoXCJ5XCIsYS5nZXRZQXhpc0NsaXBZLmJpbmQoYSkpLmF0dHIoXCJ3aWR0aFwiLGEuZ2V0WUF4aXNDbGlwV2lkdGguYmluZChhKSkuYXR0cihcImhlaWdodFwiLGEuZ2V0WUF4aXNDbGlwSGVpZ2h0LmJpbmQoYSkpLGEuc3ZnLnNlbGVjdChcIiNcIithLmNsaXBJZEZvclN1YmNoYXJ0KS5zZWxlY3QoXCJyZWN0XCIpLmF0dHIoXCJ3aWR0aFwiLGEud2lkdGgpLmF0dHIoXCJoZWlnaHRcIixiLnNpemUoKT9iLmF0dHIoXCJoZWlnaHRcIik6MCksYS5zdmcuc2VsZWN0KFwiLlwiK2wuem9vbVJlY3QpLmF0dHIoXCJ3aWR0aFwiLGEud2lkdGgpLmF0dHIoXCJoZWlnaHRcIixhLmhlaWdodCksYS5zZWxlY3RDaGFydC5zdHlsZShcIm1heC1oZWlnaHRcIixhLmN1cnJlbnRIZWlnaHQrXCJweFwiKX0saS51cGRhdGVEaW1lbnNpb249ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthfHwoYi5jb25maWcuYXhpc19yb3RhdGVkPyhiLmF4ZXMueC5jYWxsKGIueEF4aXMpLGIuYXhlcy5zdWJ4LmNhbGwoYi5zdWJYQXhpcykpOihiLmF4ZXMueS5jYWxsKGIueUF4aXMpLGIuYXhlcy55Mi5jYWxsKGIueTJBeGlzKSkpLGIudXBkYXRlU2l6ZXMoKSxiLnVwZGF0ZVNjYWxlcygpLGIudXBkYXRlU3ZnU2l6ZSgpLGIudHJhbnNmb3JtQWxsKCExKX0saS5vYnNlcnZlSW5zZXJ0ZWQ9ZnVuY3Rpb24oYil7dmFyIGMsZD10aGlzO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyP3ZvaWQgYS5jb25zb2xlLmVycm9yKFwiTXV0YXRpb25PYnNlcnZlciBub3QgZGVmaW5lZC5cIik6KGM9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiY2hpbGRMaXN0XCI9PT1lLnR5cGUmJmUucHJldmlvdXNTaWJsaW5nJiYoYy5kaXNjb25uZWN0KCksZC5pbnRlcnZhbEZvck9ic2VydmVJbnNlcnRlZD1hLnNldEludGVydmFsKGZ1bmN0aW9uKCl7Yi5ub2RlKCkucGFyZW50Tm9kZSYmKGEuY2xlYXJJbnRlcnZhbChkLmludGVydmFsRm9yT2JzZXJ2ZUluc2VydGVkKSxkLnVwZGF0ZURpbWVuc2lvbigpLGQuY29uZmlnLm9uaW5pdC5jYWxsKGQpLGQucmVkcmF3KHt3aXRoVHJhbnNmb3JtOiEwLHdpdGhVcGRhdGVYRG9tYWluOiEwLHdpdGhVcGRhdGVPcmdYRG9tYWluOiEwLHdpdGhUcmFuc2l0aW9uOiExLHdpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtOiExLHdpdGhMZWdlbmQ6ITB9KSxiLnRyYW5zaXRpb24oKS5zdHlsZShcIm9wYWNpdHlcIiwxKSl9LDEwKSl9KX0pLHZvaWQgYy5vYnNlcnZlKGIubm9kZSgpLHthdHRyaWJ1dGVzOiEwLGNoaWxkTGlzdDohMCxjaGFyYWN0ZXJEYXRhOiEwfSkpfSxpLmdlbmVyYXRlUmVzaXplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2IuZm9yRWFjaChmdW5jdGlvbihhKXthKCl9KX12YXIgYj1bXTtyZXR1cm4gYS5hZGQ9ZnVuY3Rpb24oYSl7Yi5wdXNoKGEpfSxhfSxpLmVuZGFsbD1mdW5jdGlvbihhLGIpe3ZhciBjPTA7YS5lYWNoKGZ1bmN0aW9uKCl7KytjfSkuZWFjaChcImVuZFwiLGZ1bmN0aW9uKCl7LS1jfHxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSxpLmdlbmVyYXRlV2FpdD1mdW5jdGlvbigpe3ZhciBhPVtdLGI9ZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBiPTA7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2lmKGEuZW1wdHkoKSlyZXR1cm4gdm9pZChiKz0xKTt0cnl7YS50cmFuc2l0aW9uKCl9Y2F0Y2goYyl7Yis9MX19KSxiPT09YS5sZW5ndGgmJihjbGVhckludGVydmFsKGQpLGMmJmMoKSl9LDEwKX07cmV0dXJuIGIuYWRkPWZ1bmN0aW9uKGIpe2EucHVzaChiKX0sYn0saS5wYXJzZURhdGU9ZnVuY3Rpb24oYil7dmFyIGMsZD10aGlzO3JldHVybiBiIGluc3RhbmNlb2YgRGF0ZT9jPWI6XCJzdHJpbmdcIj09dHlwZW9mIGI/Yz1kLmRhdGFUaW1lRm9ybWF0KGQuY29uZmlnLmRhdGFfeEZvcm1hdCkucGFyc2UoYik6XCJudW1iZXJcIiE9dHlwZW9mIGImJmlzTmFOKGIpfHwoYz1uZXcgRGF0ZSgrYikpLCghY3x8aXNOYU4oK2MpKSYmYS5jb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIHggJ1wiK2IrXCInIHRvIERhdGUgb2JqZWN0XCIpLGN9LGkuaXNUYWJWaXNpYmxlPWZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50LmhpZGRlbj9hPVwiaGlkZGVuXCI6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50Lm1vekhpZGRlbj9hPVwibW96SGlkZGVuXCI6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50Lm1zSGlkZGVuP2E9XCJtc0hpZGRlblwiOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC53ZWJraXRIaWRkZW4mJihhPVwid2Via2l0SGlkZGVuXCIpLGRvY3VtZW50W2FdPyExOiEwfSxpLmdldERlZmF1bHRDb25maWc9ZnVuY3Rpb24oKXt2YXIgYT17YmluZHRvOlwiI2NoYXJ0XCIsc2l6ZV93aWR0aDp2b2lkIDAsc2l6ZV9oZWlnaHQ6dm9pZCAwLHBhZGRpbmdfbGVmdDp2b2lkIDAscGFkZGluZ19yaWdodDp2b2lkIDAscGFkZGluZ190b3A6dm9pZCAwLHBhZGRpbmdfYm90dG9tOnZvaWQgMCx6b29tX2VuYWJsZWQ6ITEsem9vbV9leHRlbnQ6dm9pZCAwLHpvb21fcHJpdmlsZWdlZDohMSx6b29tX3Jlc2NhbGU6ITEsem9vbV9vbnpvb206ZnVuY3Rpb24oKXt9LHpvb21fb256b29tc3RhcnQ6ZnVuY3Rpb24oKXt9LHpvb21fb256b29tZW5kOmZ1bmN0aW9uKCl7fSxpbnRlcmFjdGlvbl9lbmFibGVkOiEwLG9ubW91c2VvdmVyOmZ1bmN0aW9uKCl7fSxvbm1vdXNlb3V0OmZ1bmN0aW9uKCl7fSxvbnJlc2l6ZTpmdW5jdGlvbigpe30sb25yZXNpemVkOmZ1bmN0aW9uKCl7fSxvbmluaXQ6ZnVuY3Rpb24oKXt9LG9ucmVuZGVyZWQ6ZnVuY3Rpb24oKXt9LHRyYW5zaXRpb25fZHVyYXRpb246MzUwLGRhdGFfeDp2b2lkIDAsZGF0YV94czp7fSxkYXRhX3hGb3JtYXQ6XCIlWS0lbS0lZFwiLGRhdGFfeExvY2FsdGltZTohMCxkYXRhX3hTb3J0OiEwLGRhdGFfaWRDb252ZXJ0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGRhdGFfbmFtZXM6e30sZGF0YV9jbGFzc2VzOnt9LGRhdGFfZ3JvdXBzOltdLGRhdGFfYXhlczp7fSxkYXRhX3R5cGU6dm9pZCAwLGRhdGFfdHlwZXM6e30sZGF0YV9sYWJlbHM6e30sZGF0YV9vcmRlcjpcImRlc2NcIixkYXRhX3JlZ2lvbnM6e30sZGF0YV9jb2xvcjp2b2lkIDAsZGF0YV9jb2xvcnM6e30sZGF0YV9oaWRlOiExLGRhdGFfZmlsdGVyOnZvaWQgMCxkYXRhX3NlbGVjdGlvbl9lbmFibGVkOiExLGRhdGFfc2VsZWN0aW9uX2dyb3VwZWQ6ITEsZGF0YV9zZWxlY3Rpb25faXNzZWxlY3RhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuITB9LGRhdGFfc2VsZWN0aW9uX211bHRpcGxlOiEwLGRhdGFfc2VsZWN0aW9uX2RyYWdnYWJsZTohMSxkYXRhX29uY2xpY2s6ZnVuY3Rpb24oKXt9LGRhdGFfb25tb3VzZW92ZXI6ZnVuY3Rpb24oKXt9LGRhdGFfb25tb3VzZW91dDpmdW5jdGlvbigpe30sZGF0YV9vbnNlbGVjdGVkOmZ1bmN0aW9uKCl7fSxkYXRhX29udW5zZWxlY3RlZDpmdW5jdGlvbigpe30sZGF0YV91cmw6dm9pZCAwLGRhdGFfanNvbjp2b2lkIDAsZGF0YV9yb3dzOnZvaWQgMCxkYXRhX2NvbHVtbnM6dm9pZCAwLGRhdGFfbWltZVR5cGU6dm9pZCAwLGRhdGFfa2V5czp2b2lkIDAsZGF0YV9lbXB0eV9sYWJlbF90ZXh0OlwiXCIsc3ViY2hhcnRfc2hvdzohMSxzdWJjaGFydF9zaXplX2hlaWdodDo2MCxzdWJjaGFydF9vbmJydXNoOmZ1bmN0aW9uKCl7fSxjb2xvcl9wYXR0ZXJuOltdLGNvbG9yX3RocmVzaG9sZDp7fSxsZWdlbmRfc2hvdzohMCxsZWdlbmRfaGlkZTohMSxsZWdlbmRfcG9zaXRpb246XCJib3R0b21cIixsZWdlbmRfaW5zZXRfYW5jaG9yOlwidG9wLWxlZnRcIixsZWdlbmRfaW5zZXRfeDoxMCxsZWdlbmRfaW5zZXRfeTowLGxlZ2VuZF9pbnNldF9zdGVwOnZvaWQgMCxsZWdlbmRfaXRlbV9vbmNsaWNrOnZvaWQgMCxsZWdlbmRfaXRlbV9vbm1vdXNlb3Zlcjp2b2lkIDAsbGVnZW5kX2l0ZW1fb25tb3VzZW91dDp2b2lkIDAsbGVnZW5kX2VxdWFsbHk6ITEsYXhpc19yb3RhdGVkOiExLGF4aXNfeF9zaG93OiEwLGF4aXNfeF90eXBlOlwiaW5kZXhlZFwiLGF4aXNfeF9sb2NhbHRpbWU6ITAsYXhpc194X2NhdGVnb3JpZXM6W10sYXhpc194X3RpY2tfY2VudGVyZWQ6ITEsYXhpc194X3RpY2tfZm9ybWF0OnZvaWQgMCxheGlzX3hfdGlja19jdWxsaW5nOnt9LGF4aXNfeF90aWNrX2N1bGxpbmdfbWF4OjEwLGF4aXNfeF90aWNrX2NvdW50OnZvaWQgMCxheGlzX3hfdGlja19maXQ6ITAsYXhpc194X3RpY2tfdmFsdWVzOm51bGwsYXhpc194X3RpY2tfcm90YXRlOjAsYXhpc194X3RpY2tfb3V0ZXI6ITAsYXhpc194X3RpY2tfbXVsdGlsaW5lOiEwLGF4aXNfeF90aWNrX3dpZHRoOm51bGwsYXhpc194X21heDp2b2lkIDAsYXhpc194X21pbjp2b2lkIDAsYXhpc194X3BhZGRpbmc6e30sYXhpc194X2hlaWdodDp2b2lkIDAsYXhpc194X2V4dGVudDp2b2lkIDAsYXhpc194X2xhYmVsOnt9LGF4aXNfeV9zaG93OiEwLGF4aXNfeV90eXBlOnZvaWQgMCxheGlzX3lfbWF4OnZvaWQgMCxheGlzX3lfbWluOnZvaWQgMCxheGlzX3lfaW52ZXJ0ZWQ6ITEsYXhpc195X2NlbnRlcjp2b2lkIDAsYXhpc195X2lubmVyOnZvaWQgMCxheGlzX3lfbGFiZWw6e30sYXhpc195X3RpY2tfZm9ybWF0OnZvaWQgMCxheGlzX3lfdGlja19vdXRlcjohMCxheGlzX3lfdGlja192YWx1ZXM6bnVsbCxheGlzX3lfdGlja19jb3VudDp2b2lkIDAsYXhpc195X3RpY2tfdGltZV92YWx1ZTp2b2lkIDAsYXhpc195X3RpY2tfdGltZV9pbnRlcnZhbDp2b2lkIDAsYXhpc195X3BhZGRpbmc6e30sYXhpc195X2RlZmF1bHQ6dm9pZCAwLGF4aXNfeTJfc2hvdzohMSxheGlzX3kyX21heDp2b2lkIDAsYXhpc195Ml9taW46dm9pZCAwLGF4aXNfeTJfaW52ZXJ0ZWQ6ITEsYXhpc195Ml9jZW50ZXI6dm9pZCAwLGF4aXNfeTJfaW5uZXI6dm9pZCAwLGF4aXNfeTJfbGFiZWw6e30sYXhpc195Ml90aWNrX2Zvcm1hdDp2b2lkIDAsYXhpc195Ml90aWNrX291dGVyOiEwLGF4aXNfeTJfdGlja192YWx1ZXM6bnVsbCxheGlzX3kyX3RpY2tfY291bnQ6dm9pZCAwLGF4aXNfeTJfcGFkZGluZzp7fSxheGlzX3kyX2RlZmF1bHQ6dm9pZCAwLGdyaWRfeF9zaG93OiExLGdyaWRfeF90eXBlOlwidGlja1wiLGdyaWRfeF9saW5lczpbXSxncmlkX3lfc2hvdzohMSxncmlkX3lfbGluZXM6W10sZ3JpZF95X3RpY2tzOjEwLGdyaWRfZm9jdXNfc2hvdzohMCxncmlkX2xpbmVzX2Zyb250OiEwLHBvaW50X3Nob3c6ITAscG9pbnRfcjoyLjUscG9pbnRfZm9jdXNfZXhwYW5kX2VuYWJsZWQ6ITAscG9pbnRfZm9jdXNfZXhwYW5kX3I6dm9pZCAwLHBvaW50X3NlbGVjdF9yOnZvaWQgMCxsaW5lX2Nvbm5lY3ROdWxsOiExLGxpbmVfc3RlcF90eXBlOlwic3RlcFwiLGJhcl93aWR0aDp2b2lkIDAsYmFyX3dpZHRoX3JhdGlvOi42LGJhcl93aWR0aF9tYXg6dm9pZCAwLGJhcl96ZXJvYmFzZWQ6ITAsYXJlYV96ZXJvYmFzZWQ6ITAscGllX2xhYmVsX3Nob3c6ITAscGllX2xhYmVsX2Zvcm1hdDp2b2lkIDAscGllX2xhYmVsX3RocmVzaG9sZDouMDUscGllX2V4cGFuZDohMCxnYXVnZV9sYWJlbF9zaG93OiEwLGdhdWdlX2xhYmVsX2Zvcm1hdDp2b2lkIDAsZ2F1Z2VfZXhwYW5kOiEwLGdhdWdlX21pbjowLGdhdWdlX21heDoxMDAsZ2F1Z2VfdW5pdHM6dm9pZCAwLGdhdWdlX3dpZHRoOnZvaWQgMCxkb251dF9sYWJlbF9zaG93OiEwLGRvbnV0X2xhYmVsX2Zvcm1hdDp2b2lkIDAsZG9udXRfbGFiZWxfdGhyZXNob2xkOi4wNSxkb251dF93aWR0aDp2b2lkIDAsZG9udXRfZXhwYW5kOiEwLGRvbnV0X3RpdGxlOlwiXCIscmVnaW9uczpbXSx0b29sdGlwX3Nob3c6ITAsdG9vbHRpcF9ncm91cGVkOiEwLHRvb2x0aXBfZm9ybWF0X3RpdGxlOnZvaWQgMCx0b29sdGlwX2Zvcm1hdF9uYW1lOnZvaWQgMCx0b29sdGlwX2Zvcm1hdF92YWx1ZTp2b2lkIDAsdG9vbHRpcF9wb3NpdGlvbjp2b2lkIDAsdG9vbHRpcF9jb250ZW50czpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5nZXRUb29sdGlwQ29udGVudD90aGlzLmdldFRvb2x0aXBDb250ZW50KGEsYixjLGQpOlwiXCJ9LHRvb2x0aXBfaW5pdF9zaG93OiExLHRvb2x0aXBfaW5pdF94OjAsdG9vbHRpcF9pbml0X3Bvc2l0aW9uOnt0b3A6XCIwcHhcIixsZWZ0OlwiNTBweFwifX07cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuYWRkaXRpb25hbENvbmZpZykuZm9yRWFjaChmdW5jdGlvbihiKXthW2JdPXRoaXMuYWRkaXRpb25hbENvbmZpZ1tiXX0sdGhpcyksYX0saS5hZGRpdGlvbmFsQ29uZmlnPXt9LGkubG9hZENvbmZpZz1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKCl7dmFyIGE9ZC5zaGlmdCgpO3JldHVybiBhJiZjJiZcIm9iamVjdFwiPT10eXBlb2YgYyYmYSBpbiBjPyhjPWNbYV0sYigpKTphP3ZvaWQgMDpjfXZhciBjLGQsZSxmPXRoaXMuY29uZmlnO09iamVjdC5rZXlzKGYpLmZvckVhY2goZnVuY3Rpb24oZyl7Yz1hLGQ9Zy5zcGxpdChcIl9cIiksZT1iKCkscShlKSYmKGZbZ109ZSl9KX0saS5nZXRTY2FsZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuKGM/dGhpcy5kMy50aW1lLnNjYWxlKCk6dGhpcy5kMy5zY2FsZS5saW5lYXIoKSkucmFuZ2UoW2EsYl0pfSxpLmdldFg9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZj10aGlzLGc9Zi5nZXRTY2FsZShhLGIsZi5pc1RpbWVTZXJpZXMoKSksaD1jP2cuZG9tYWluKGMpOmc7Zi5pc0NhdGVnb3JpemVkKCk/KGQ9ZHx8ZnVuY3Rpb24oKXtyZXR1cm4gMH0sZz1mdW5jdGlvbihhLGIpe3ZhciBjPWgoYSkrZChhKTtyZXR1cm4gYj9jOk1hdGguY2VpbChjKX0pOmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1oKGEpO3JldHVybiBiP2M6TWF0aC5jZWlsKGMpfTtmb3IoZSBpbiBoKWdbZV09aFtlXTtyZXR1cm4gZy5vcmdEb21haW49ZnVuY3Rpb24oKXtyZXR1cm4gaC5kb21haW4oKX0sZi5pc0NhdGVnb3JpemVkKCkmJihnLmRvbWFpbj1mdW5jdGlvbihhKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oaC5kb21haW4oYSksZyk6KGE9dGhpcy5vcmdEb21haW4oKSxbYVswXSxhWzFdKzFdKX0pLGd9LGkuZ2V0WT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nZXRTY2FsZShhLGIsdGhpcy5pc1RpbWVTZXJpZXNZKCkpO3JldHVybiBjJiZkLmRvbWFpbihjKSxkfSxpLmdldFlTY2FsZT1mdW5jdGlvbihhKXtyZXR1cm5cInkyXCI9PT10aGlzLmF4aXMuZ2V0SWQoYSk/dGhpcy55Mjp0aGlzLnl9LGkuZ2V0U3ViWVNjYWxlPWZ1bmN0aW9uKGEpe3JldHVyblwieTJcIj09PXRoaXMuYXhpcy5nZXRJZChhKT90aGlzLnN1YlkyOnRoaXMuc3ViWX0saS51cGRhdGVTY2FsZXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz0hYS54O2EueE1pbj1iLmF4aXNfcm90YXRlZD8xOjAsYS54TWF4PWIuYXhpc19yb3RhdGVkP2EuaGVpZ2h0OmEud2lkdGgsYS55TWluPWIuYXhpc19yb3RhdGVkPzA6YS5oZWlnaHQsYS55TWF4PWIuYXhpc19yb3RhdGVkP2Eud2lkdGg6MSxhLnN1YlhNaW49YS54TWluLGEuc3ViWE1heD1hLnhNYXgsYS5zdWJZTWluPWIuYXhpc19yb3RhdGVkPzA6YS5oZWlnaHQyLGEuc3ViWU1heD1iLmF4aXNfcm90YXRlZD9hLndpZHRoMjoxLGEueD1hLmdldFgoYS54TWluLGEueE1heCxjP3ZvaWQgMDphLngub3JnRG9tYWluKCksZnVuY3Rpb24oKXtyZXR1cm4gYS54QXhpcy50aWNrT2Zmc2V0KCl9KSxhLnk9YS5nZXRZKGEueU1pbixhLnlNYXgsYz9iLmF4aXNfeV9kZWZhdWx0OmEueS5kb21haW4oKSksYS55Mj1hLmdldFkoYS55TWluLGEueU1heCxjP2IuYXhpc195Ml9kZWZhdWx0OmEueTIuZG9tYWluKCkpLGEuc3ViWD1hLmdldFgoYS54TWluLGEueE1heCxhLm9yZ1hEb21haW4sZnVuY3Rpb24oYil7cmV0dXJuIGIlMT8wOmEuc3ViWEF4aXMudGlja09mZnNldCgpfSksYS5zdWJZPWEuZ2V0WShhLnN1YllNaW4sYS5zdWJZTWF4LGM/Yi5heGlzX3lfZGVmYXVsdDphLnN1YlkuZG9tYWluKCkpLGEuc3ViWTI9YS5nZXRZKGEuc3ViWU1pbixhLnN1YllNYXgsYz9iLmF4aXNfeTJfZGVmYXVsdDphLnN1YlkyLmRvbWFpbigpKSxhLnhBeGlzVGlja0Zvcm1hdD1hLmF4aXMuZ2V0WEF4aXNUaWNrRm9ybWF0KCksYS54QXhpc1RpY2tWYWx1ZXM9YS5heGlzLmdldFhBeGlzVGlja1ZhbHVlcygpLGEueUF4aXNUaWNrVmFsdWVzPWEuYXhpcy5nZXRZQXhpc1RpY2tWYWx1ZXMoKSxhLnkyQXhpc1RpY2tWYWx1ZXM9YS5heGlzLmdldFkyQXhpc1RpY2tWYWx1ZXMoKSxhLnhBeGlzPWEuYXhpcy5nZXRYQXhpcyhhLngsYS54T3JpZW50LGEueEF4aXNUaWNrRm9ybWF0LGEueEF4aXNUaWNrVmFsdWVzLGIuYXhpc194X3RpY2tfb3V0ZXIpLGEuc3ViWEF4aXM9YS5heGlzLmdldFhBeGlzKGEuc3ViWCxhLnN1YlhPcmllbnQsYS54QXhpc1RpY2tGb3JtYXQsYS54QXhpc1RpY2tWYWx1ZXMsYi5heGlzX3hfdGlja19vdXRlciksYS55QXhpcz1hLmF4aXMuZ2V0WUF4aXMoYS55LGEueU9yaWVudCxiLmF4aXNfeV90aWNrX2Zvcm1hdCxhLnlBeGlzVGlja1ZhbHVlcyxiLmF4aXNfeV90aWNrX291dGVyKSxhLnkyQXhpcz1hLmF4aXMuZ2V0WUF4aXMoYS55MixhLnkyT3JpZW50LGIuYXhpc195Ml90aWNrX2Zvcm1hdCxhLnkyQXhpc1RpY2tWYWx1ZXMsYi5heGlzX3kyX3RpY2tfb3V0ZXIpLGN8fChhLmJydXNoJiZhLmJydXNoLnNjYWxlKGEuc3ViWCksYi56b29tX2VuYWJsZWQmJmEuem9vbS5zY2FsZShhLngpKSxhLnVwZGF0ZUFyYyYmYS51cGRhdGVBcmMoKX0saS5nZXRZRG9tYWluTWluPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPXRoaXMsaT1oLmNvbmZpZyxqPWgubWFwVG9JZHMoYSksaz1oLmdldFZhbHVlc0FzSWRLZXllZChhKTtpZihpLmRhdGFfZ3JvdXBzLmxlbmd0aD4wKWZvcihnPWguaGFzTmVnYXRpdmVWYWx1ZUluVGFyZ2V0cyhhKSxiPTA7YjxpLmRhdGFfZ3JvdXBzLmxlbmd0aDtiKyspaWYoZT1pLmRhdGFfZ3JvdXBzW2JdLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gai5pbmRleE9mKGEpPj0wfSksMCE9PWUubGVuZ3RoKWZvcihkPWVbMF0sZyYma1tkXSYma1tkXS5mb3JFYWNoKGZ1bmN0aW9uKGEsYil7a1tkXVtiXT0wPmE/YTowfSksYz0xO2M8ZS5sZW5ndGg7YysrKWY9ZVtjXSxrW2ZdJiZrW2ZdLmZvckVhY2goZnVuY3Rpb24oYSxiKXtoLmF4aXMuZ2V0SWQoZikhPT1oLmF4aXMuZ2V0SWQoZCl8fCFrW2RdfHxnJiYrYT4wfHwoa1tkXVtiXSs9K2EpfSk7cmV0dXJuIGguZDMubWluKE9iamVjdC5rZXlzKGspLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gaC5kMy5taW4oa1thXSl9KSl9LGkuZ2V0WURvbWFpbk1heD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD10aGlzLGk9aC5jb25maWcsaj1oLm1hcFRvSWRzKGEpLGs9aC5nZXRWYWx1ZXNBc0lkS2V5ZWQoYSk7aWYoaS5kYXRhX2dyb3Vwcy5sZW5ndGg+MClmb3IoZz1oLmhhc1Bvc2l0aXZlVmFsdWVJblRhcmdldHMoYSksYj0wO2I8aS5kYXRhX2dyb3Vwcy5sZW5ndGg7YisrKWlmKGU9aS5kYXRhX2dyb3Vwc1tiXS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGouaW5kZXhPZihhKT49MH0pLDAhPT1lLmxlbmd0aClmb3IoZD1lWzBdLGcmJmtbZF0mJmtbZF0uZm9yRWFjaChmdW5jdGlvbihhLGIpe2tbZF1bYl09YT4wP2E6MH0pLGM9MTtjPGUubGVuZ3RoO2MrKylmPWVbY10sa1tmXSYma1tmXS5mb3JFYWNoKGZ1bmN0aW9uKGEsYil7aC5heGlzLmdldElkKGYpIT09aC5heGlzLmdldElkKGQpfHwha1tkXXx8ZyYmMD4rYXx8KGtbZF1bYl0rPSthKX0pO3JldHVybiBoLmQzLm1heChPYmplY3Qua2V5cyhrKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGguZDMubWF4KGtbYV0pfSkpfSxpLmdldFlEb21haW49ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbCxuLG8scD10aGlzLHE9cC5jb25maWcscj1hLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcC5heGlzLmdldElkKGEuaWQpPT09Yn0pLHM9Yz9wLmZpbHRlckJ5WERvbWFpbihyLGMpOnIsdT1cInkyXCI9PT1iP3EuYXhpc195Ml9taW46cS5heGlzX3lfbWluLHc9XCJ5MlwiPT09Yj9xLmF4aXNfeTJfbWF4OnEuYXhpc195X21heCx4PXAuZ2V0WURvbWFpbk1pbihzKSx5PXAuZ2V0WURvbWFpbk1heChzKSx6PVwieTJcIj09PWI/cS5heGlzX3kyX2NlbnRlcjpxLmF4aXNfeV9jZW50ZXIsQT1wLmhhc1R5cGUoXCJiYXJcIixzKSYmcS5iYXJfemVyb2Jhc2VkfHxwLmhhc1R5cGUoXCJhcmVhXCIscykmJnEuYXJlYV96ZXJvYmFzZWQsQj1cInkyXCI9PT1iP3EuYXhpc195Ml9pbnZlcnRlZDpxLmF4aXNfeV9pbnZlcnRlZCxDPXAuaGFzRGF0YUxhYmVsKCkmJnEuYXhpc19yb3RhdGVkLEQ9cC5oYXNEYXRhTGFiZWwoKSYmIXEuYXhpc19yb3RhdGVkO3JldHVybiB4PW0odSk/dTptKHcpP3c+eD94OnctMTA6eCx5PW0odyk/dzptKHUpP3k+dT95OnUrMTA6eSwwPT09cy5sZW5ndGg/XCJ5MlwiPT09Yj9wLnkyLmRvbWFpbigpOnAueS5kb21haW4oKTooaXNOYU4oeCkmJih4PTApLGlzTmFOKHkpJiYoeT14KSx4PT09eSYmKDA+eD95PTA6eD0wKSxuPXg+PTAmJnk+PTAsbz0wPj14JiYwPj15LChtKHUpJiZufHxtKHcpJiZvKSYmKEE9ITEpLEEmJihuJiYoeD0wKSxvJiYoeT0wKSksZT1NYXRoLmFicyh5LXgpLGY9Zz1oPS4xKmUsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHomJihpPU1hdGgubWF4KE1hdGguYWJzKHgpLE1hdGguYWJzKHkpKSx5PXoraSx4PXotaSksQz8oaj1wLmdldERhdGFMYWJlbExlbmd0aCh4LHksXCJ3aWR0aFwiKSxrPXQocC55LnJhbmdlKCkpLGw9W2pbMF0vayxqWzFdL2tdLGcrPWUqKGxbMV0vKDEtbFswXS1sWzFdKSksaCs9ZSoobFswXS8oMS1sWzBdLWxbMV0pKSk6RCYmKGo9cC5nZXREYXRhTGFiZWxMZW5ndGgoeCx5LFwiaGVpZ2h0XCIpLGcrPXAuYXhpcy5jb252ZXJ0UGl4ZWxzVG9BeGlzUGFkZGluZyhqWzFdLGUpLGgrPXAuYXhpcy5jb252ZXJ0UGl4ZWxzVG9BeGlzUGFkZGluZyhqWzBdLGUpKSxcInlcIj09PWImJnYocS5heGlzX3lfcGFkZGluZykmJihnPXAuYXhpcy5nZXRQYWRkaW5nKHEuYXhpc195X3BhZGRpbmcsXCJ0b3BcIixnLGUpLGg9cC5heGlzLmdldFBhZGRpbmcocS5heGlzX3lfcGFkZGluZyxcImJvdHRvbVwiLGgsZSkpLFwieTJcIj09PWImJnYocS5heGlzX3kyX3BhZGRpbmcpJiYoZz1wLmF4aXMuZ2V0UGFkZGluZyhxLmF4aXNfeTJfcGFkZGluZyxcInRvcFwiLGcsZSksaD1wLmF4aXMuZ2V0UGFkZGluZyhxLmF4aXNfeTJfcGFkZGluZyxcImJvdHRvbVwiLGgsZSkpLEEmJihuJiYoaD14KSxvJiYoZz0teSkpLGQ9W3gtaCx5K2ddLEI/ZC5yZXZlcnNlKCk6ZCl9LGkuZ2V0WERvbWFpbk1pbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7cmV0dXJuIHEoYy5heGlzX3hfbWluKT9iLmlzVGltZVNlcmllcygpP3RoaXMucGFyc2VEYXRlKGMuYXhpc194X21pbik6Yy5heGlzX3hfbWluOmIuZDMubWluKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIuZDMubWluKGEudmFsdWVzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnh9KX0pfSxpLmdldFhEb21haW5NYXg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnO3JldHVybiBxKGMuYXhpc194X21heCk/Yi5pc1RpbWVTZXJpZXMoKT90aGlzLnBhcnNlRGF0ZShjLmF4aXNfeF9tYXgpOmMuYXhpc194X21heDpiLmQzLm1heChhLGZ1bmN0aW9uKGEpe3JldHVybiBiLmQzLm1heChhLnZhbHVlcyxmdW5jdGlvbihhKXtyZXR1cm4gYS54fSl9KX0saS5nZXRYRG9tYWluUGFkZGluZz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmPXRoaXMsZz1mLmNvbmZpZyxoPWFbMV0tYVswXTtyZXR1cm4gZi5pc0NhdGVnb3JpemVkKCk/Yz0wOmYuaGFzVHlwZShcImJhclwiKT8oYj1mLmdldE1heERhdGFDb3VudCgpLGM9Yj4xP2gvKGItMSkvMjouNSk6Yz0uMDEqaCxcIm9iamVjdFwiPT10eXBlb2YgZy5heGlzX3hfcGFkZGluZyYmdihnLmF4aXNfeF9wYWRkaW5nKT8oZD1tKGcuYXhpc194X3BhZGRpbmcubGVmdCk/Zy5heGlzX3hfcGFkZGluZy5sZWZ0OmMsZT1tKGcuYXhpc194X3BhZGRpbmcucmlnaHQpP2cuYXhpc194X3BhZGRpbmcucmlnaHQ6Yyk6ZD1lPVwibnVtYmVyXCI9PXR5cGVvZiBnLmF4aXNfeF9wYWRkaW5nP2cuYXhpc194X3BhZGRpbmc6Yyx7bGVmdDpkLHJpZ2h0OmV9fSxpLmdldFhEb21haW49ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPVtiLmdldFhEb21haW5NaW4oYSksYi5nZXRYRG9tYWluTWF4KGEpXSxkPWNbMF0sZT1jWzFdLGY9Yi5nZXRYRG9tYWluUGFkZGluZyhjKSxnPTAsaD0wO1xucmV0dXJuIGQtZSE9PTB8fGIuaXNDYXRlZ29yaXplZCgpfHwoYi5pc1RpbWVTZXJpZXMoKT8oZD1uZXcgRGF0ZSguNSpkLmdldFRpbWUoKSksZT1uZXcgRGF0ZSgxLjUqZS5nZXRUaW1lKCkpKTooZD0wPT09ZD8xOi41KmQsZT0wPT09ZT8tMToxLjUqZSkpLChkfHwwPT09ZCkmJihnPWIuaXNUaW1lU2VyaWVzKCk/bmV3IERhdGUoZC5nZXRUaW1lKCktZi5sZWZ0KTpkLWYubGVmdCksKGV8fDA9PT1lKSYmKGg9Yi5pc1RpbWVTZXJpZXMoKT9uZXcgRGF0ZShlLmdldFRpbWUoKStmLnJpZ2h0KTplK2YucmlnaHQpLFtnLGhdfSxpLnVwZGF0ZVhEb21haW49ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLGc9Zi5jb25maWc7cmV0dXJuIGMmJihmLnguZG9tYWluKGU/ZTpmLmQzLmV4dGVudChmLmdldFhEb21haW4oYSkpKSxmLm9yZ1hEb21haW49Zi54LmRvbWFpbigpLGcuem9vbV9lbmFibGVkJiZmLnpvb20uc2NhbGUoZi54KS51cGRhdGVTY2FsZUV4dGVudCgpLGYuc3ViWC5kb21haW4oZi54LmRvbWFpbigpKSxmLmJydXNoJiZmLmJydXNoLnNjYWxlKGYuc3ViWCkpLGImJihmLnguZG9tYWluKGU/ZTohZi5icnVzaHx8Zi5icnVzaC5lbXB0eSgpP2Yub3JnWERvbWFpbjpmLmJydXNoLmV4dGVudCgpKSxnLnpvb21fZW5hYmxlZCYmZi56b29tLnNjYWxlKGYueCkudXBkYXRlU2NhbGVFeHRlbnQoKSksZCYmZi54LmRvbWFpbihmLnRyaW1YRG9tYWluKGYueC5vcmdEb21haW4oKSkpLGYueC5kb21haW4oKX0saS50cmltWERvbWFpbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBhWzBdPD1iLm9yZ1hEb21haW5bMF0mJihhWzFdPSthWzFdKyhiLm9yZ1hEb21haW5bMF0tYVswXSksYVswXT1iLm9yZ1hEb21haW5bMF0pLGIub3JnWERvbWFpblsxXTw9YVsxXSYmKGFbMF09K2FbMF0tKGFbMV0tYi5vcmdYRG9tYWluWzFdKSxhWzFdPWIub3JnWERvbWFpblsxXSksYX0saS5pc1g9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnO3JldHVybiBjLmRhdGFfeCYmYT09PWMuZGF0YV94fHx2KGMuZGF0YV94cykmJngoYy5kYXRhX3hzLGEpfSxpLmlzTm90WD1mdW5jdGlvbihhKXtyZXR1cm4hdGhpcy5pc1goYSl9LGkuZ2V0WEtleT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7cmV0dXJuIGMuZGF0YV94P2MuZGF0YV94OnYoYy5kYXRhX3hzKT9jLmRhdGFfeHNbYV06bnVsbH0saS5nZXRYVmFsdWVzT2ZYS2V5PWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLGU9YiYmdihiKT9kLm1hcFRvSWRzKGIpOltdO3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oYil7ZC5nZXRYS2V5KGIpPT09YSYmKGM9ZC5kYXRhLnhzW2JdKX0pLGN9LGkuZ2V0SW5kZXhCeVg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuZmlsdGVyQnlYKGIuZGF0YS50YXJnZXRzLGEpO3JldHVybiBjLmxlbmd0aD9jWzBdLmluZGV4Om51bGx9LGkuZ2V0WFZhbHVlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gYSBpbiBjLmRhdGEueHMmJmMuZGF0YS54c1thXSYmbShjLmRhdGEueHNbYV1bYl0pP2MuZGF0YS54c1thXVtiXTpifSxpLmdldE90aGVyVGFyZ2V0WHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9T2JqZWN0LmtleXMoYS5kYXRhLnhzKTtyZXR1cm4gYi5sZW5ndGg/YS5kYXRhLnhzW2JbMF1dOm51bGx9LGkuZ2V0T3RoZXJUYXJnZXRYPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0T3RoZXJUYXJnZXRYcygpO3JldHVybiBiJiZhPGIubGVuZ3RoP2JbYV06bnVsbH0saS5hZGRYcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO09iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24oYyl7Yi5jb25maWcuZGF0YV94c1tjXT1hW2NdfSl9LGkuaGFzTXVsdGlwbGVYPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmQzLnNldChPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuIGFbYl19KSkuc2l6ZSgpPjF9LGkuaXNNdWx0aXBsZVg9ZnVuY3Rpb24oKXtyZXR1cm4gdih0aGlzLmNvbmZpZy5kYXRhX3hzKXx8IXRoaXMuY29uZmlnLmRhdGFfeFNvcnR8fHRoaXMuaGFzVHlwZShcInNjYXR0ZXJcIil9LGkuYWRkTmFtZT1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXM7cmV0dXJuIGEmJihiPWMuY29uZmlnLmRhdGFfbmFtZXNbYS5pZF0sYS5uYW1lPWI/YjphLmlkKSxhfSxpLmdldFZhbHVlT25JbmRleD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4PT09Yn0pO3JldHVybiBjLmxlbmd0aD9jWzBdOm51bGx9LGkudXBkYXRlVGFyZ2V0WD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EudmFsdWVzLmZvckVhY2goZnVuY3Rpb24oZCxlKXtkLng9Yy5nZW5lcmF0ZVRhcmdldFgoYltlXSxhLmlkLGUpfSksYy5kYXRhLnhzW2EuaWRdPWJ9KX0saS51cGRhdGVUYXJnZXRYcz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYS5pZF0mJmMudXBkYXRlVGFyZ2V0WChbYV0sYlthLmlkXSl9KX0saS5nZW5lcmF0ZVRhcmdldFg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpcztyZXR1cm4gZD1lLmlzVGltZVNlcmllcygpP2UucGFyc2VEYXRlKGE/YTplLmdldFhWYWx1ZShiLGMpKTplLmlzQ3VzdG9tWCgpJiYhZS5pc0NhdGVnb3JpemVkKCk/bShhKT8rYTplLmdldFhWYWx1ZShiLGMpOmN9LGkuY2xvbmVUYXJnZXQ9ZnVuY3Rpb24oYSl7cmV0dXJue2lkOmEuaWQsaWRfb3JnOmEuaWRfb3JnLHZhbHVlczphLnZhbHVlcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJue3g6YS54LHZhbHVlOmEudmFsdWUsaWQ6YS5pZH19KX19LGkudXBkYXRlWHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZGF0YS50YXJnZXRzLmxlbmd0aCYmKGEueHM9W10sYS5kYXRhLnRhcmdldHNbMF0udmFsdWVzLmZvckVhY2goZnVuY3Rpb24oYil7YS54c1tiLmluZGV4XT1iLnh9KSl9LGkuZ2V0UHJldlg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy54c1thLTFdO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6bnVsbH0saS5nZXROZXh0WD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnhzW2ErMV07cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGI/YjpudWxsfSxpLmdldE1heERhdGFDb3VudD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuZDMubWF4KGEuZGF0YS50YXJnZXRzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlcy5sZW5ndGh9KX0saS5nZXRNYXhEYXRhQ291bnRUYXJnZXQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLmxlbmd0aCxkPTA7cmV0dXJuIGM+MT9hLmZvckVhY2goZnVuY3Rpb24oYSl7YS52YWx1ZXMubGVuZ3RoPmQmJihiPWEsZD1hLnZhbHVlcy5sZW5ndGgpfSk6Yj1jP2FbMF06bnVsbCxifSxpLmdldEVkZ2VYPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGEubGVuZ3RoP1tiLmQzLm1pbihhLGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlc1swXS54fSksYi5kMy5tYXgoYSxmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZXNbYS52YWx1ZXMubGVuZ3RoLTFdLnh9KV06WzAsMF19LGkubWFwVG9JZHM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlkfSl9LGkubWFwVG9UYXJnZXRJZHM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gYT9vKGEpP1thXTphOmIubWFwVG9JZHMoYi5kYXRhLnRhcmdldHMpfSxpLmhhc1RhcmdldD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5tYXBUb0lkcyhhKTtmb3IoYz0wO2M8ZC5sZW5ndGg7YysrKWlmKGRbY109PT1iKXJldHVybiEwO3JldHVybiExfSxpLmlzVGFyZ2V0VG9TaG93PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhpZGRlblRhcmdldElkcy5pbmRleE9mKGEpPDB9LGkuaXNMZWdlbmRUb1Nob3c9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGlkZGVuTGVnZW5kSWRzLmluZGV4T2YoYSk8MH0saS5maWx0ZXJUYXJnZXRzVG9TaG93PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBiLmlzVGFyZ2V0VG9TaG93KGEuaWQpfSl9LGkubWFwVGFyZ2V0c1RvVW5pcXVlWHM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuZDMuc2V0KGIuZDMubWVyZ2UoYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWVzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4rYS54fSl9KSkpLnZhbHVlcygpO3JldHVybiBjLm1hcChiLmlzVGltZVNlcmllcygpP2Z1bmN0aW9uKGEpe3JldHVybiBuZXcgRGF0ZSgrYSl9OmZ1bmN0aW9uKGEpe3JldHVybithfSl9LGkuYWRkSGlkZGVuVGFyZ2V0SWRzPWZ1bmN0aW9uKGEpe3RoaXMuaGlkZGVuVGFyZ2V0SWRzPXRoaXMuaGlkZGVuVGFyZ2V0SWRzLmNvbmNhdChhKX0saS5yZW1vdmVIaWRkZW5UYXJnZXRJZHM9ZnVuY3Rpb24oYSl7dGhpcy5oaWRkZW5UYXJnZXRJZHM9dGhpcy5oaWRkZW5UYXJnZXRJZHMuZmlsdGVyKGZ1bmN0aW9uKGIpe3JldHVybiBhLmluZGV4T2YoYik8MH0pfSxpLmFkZEhpZGRlbkxlZ2VuZElkcz1mdW5jdGlvbihhKXt0aGlzLmhpZGRlbkxlZ2VuZElkcz10aGlzLmhpZGRlbkxlZ2VuZElkcy5jb25jYXQoYSl9LGkucmVtb3ZlSGlkZGVuTGVnZW5kSWRzPWZ1bmN0aW9uKGEpe3RoaXMuaGlkZGVuTGVnZW5kSWRzPXRoaXMuaGlkZGVuTGVnZW5kSWRzLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gYS5pbmRleE9mKGIpPDB9KX0saS5nZXRWYWx1ZXNBc0lkS2V5ZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIGEuZm9yRWFjaChmdW5jdGlvbihhKXtiW2EuaWRdPVtdLGEudmFsdWVzLmZvckVhY2goZnVuY3Rpb24oYyl7YlthLmlkXS5wdXNoKGMudmFsdWUpfSl9KSxifSxpLmNoZWNrVmFsdWVJblRhcmdldHM9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1PYmplY3Qua2V5cyhhKTtmb3IoYz0wO2M8Zi5sZW5ndGg7YysrKWZvcihlPWFbZltjXV0udmFsdWVzLGQ9MDtkPGUubGVuZ3RoO2QrKylpZihiKGVbZF0udmFsdWUpKXJldHVybiEwO3JldHVybiExfSxpLmhhc05lZ2F0aXZlVmFsdWVJblRhcmdldHM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2hlY2tWYWx1ZUluVGFyZ2V0cyhhLGZ1bmN0aW9uKGEpe3JldHVybiAwPmF9KX0saS5oYXNQb3NpdGl2ZVZhbHVlSW5UYXJnZXRzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNoZWNrVmFsdWVJblRhcmdldHMoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT4wfSl9LGkuaXNPcmRlckRlc2M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbmZpZztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYS5kYXRhX29yZGVyJiZcImRlc2NcIj09PWEuZGF0YV9vcmRlci50b0xvd2VyQ2FzZSgpfSxpLmlzT3JkZXJBc2M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbmZpZztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYS5kYXRhX29yZGVyJiZcImFzY1wiPT09YS5kYXRhX29yZGVyLnRvTG93ZXJDYXNlKCl9LGkub3JkZXJUYXJnZXRzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZyxkPWIuaXNPcmRlckFzYygpLGU9Yi5pc09yZGVyRGVzYygpO3JldHVybiBkfHxlP2Euc29ydChmdW5jdGlvbihhLGIpe3ZhciBjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGErTWF0aC5hYnMoYi52YWx1ZSl9LGU9YS52YWx1ZXMucmVkdWNlKGMsMCksZj1iLnZhbHVlcy5yZWR1Y2UoYywwKTtyZXR1cm4gZD9mLWU6ZS1mfSk6bihjLmRhdGFfb3JkZXIpJiZhLnNvcnQoYy5kYXRhX29yZGVyKSxhfSxpLmZpbHRlckJ5WD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmQzLm1lcmdlKGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlc30pKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEueC1iPT09MH0pfSxpLmZpbHRlclJlbW92ZU51bGw9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBtKGEudmFsdWUpfSl9LGkuZmlsdGVyQnlYRG9tYWluPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe3JldHVybntpZDphLmlkLGlkX29yZzphLmlkX29yZyx2YWx1ZXM6YS52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBiWzBdPD1hLngmJmEueDw9YlsxXX0pfX0pfSxpLmhhc0RhdGFMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uZmlnO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYS5kYXRhX2xhYmVscyYmYS5kYXRhX2xhYmVscz8hMDpcIm9iamVjdFwiPT10eXBlb2YgYS5kYXRhX2xhYmVscyYmdihhLmRhdGFfbGFiZWxzKT8hMDohMX0saS5nZXREYXRhTGFiZWxMZW5ndGg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1bMCwwXSxmPTEuMztyZXR1cm4gZC5zZWxlY3RDaGFydC5zZWxlY3QoXCJzdmdcIikuc2VsZWN0QWxsKFwiLmR1bW15XCIpLmRhdGEoW2EsYl0pLmVudGVyKCkuYXBwZW5kKFwidGV4dFwiKS50ZXh0KGZ1bmN0aW9uKGEpe3JldHVybiBkLmRhdGFMYWJlbEZvcm1hdChhLmlkKShhKX0pLmVhY2goZnVuY3Rpb24oYSxiKXtlW2JdPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbY10qZn0pLnJlbW92ZSgpLGV9LGkuaXNOb25lQXJjPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhhc1RhcmdldCh0aGlzLmRhdGEudGFyZ2V0cyxhLmlkKX0saS5pc0FyYz1mdW5jdGlvbihhKXtyZXR1cm5cImRhdGFcImluIGEmJnRoaXMuaGFzVGFyZ2V0KHRoaXMuZGF0YS50YXJnZXRzLGEuZGF0YS5pZCl9LGkuZmluZFNhbWVYT2ZWYWx1ZXM9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWFbYl0ueCxlPVtdO2ZvcihjPWItMTtjPj0wJiZkPT09YVtjXS54O2MtLSllLnB1c2goYVtjXSk7Zm9yKGM9YjtjPGEubGVuZ3RoJiZkPT09YVtjXS54O2MrKyllLnB1c2goYVtjXSk7cmV0dXJuIGV9LGkuZmluZENsb3Nlc3RGcm9tVGFyZ2V0cz1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcztyZXR1cm4gYz1hLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZC5maW5kQ2xvc2VzdChhLnZhbHVlcyxiKX0pLGQuZmluZENsb3Nlc3QoYyxiKX0saS5maW5kQ2xvc2VzdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcyxlPTEwMDtyZXR1cm4gYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmQuaXNCYXJUeXBlKGEuaWQpfSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1kLm1haW4uc2VsZWN0KFwiLlwiK2wuYmFycytkLmdldFRhcmdldFNlbGVjdG9yU3VmZml4KGEuaWQpK1wiIC5cIitsLmJhcitcIi1cIithLmluZGV4KS5ub2RlKCk7IWMmJmQuaXNXaXRoaW5CYXIoYikmJihjPWEpfSksYS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiFkLmlzQmFyVHlwZShhLmlkKX0pLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGY9ZC5kaXN0KGEsYik7ZT5mJiYoZT1mLGM9YSl9KSxjfSxpLmRpc3Q9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jb25maWcsZT1kLmF4aXNfcm90YXRlZD8xOjAsZj1kLmF4aXNfcm90YXRlZD8wOjEsZz1jLmNpcmNsZVkoYSxhLmluZGV4KSxoPWMueChhLngpO3JldHVybiBNYXRoLnBvdyhoLWJbZV0sMikrTWF0aC5wb3coZy1iW2ZdLDIpfSxpLmNvbnZlcnRWYWx1ZXNUb1N0ZXA9ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXS5jb25jYXQoYSk7aWYoIXRoaXMuaXNDYXRlZ29yaXplZCgpKXJldHVybiBhO2ZvcihiPWEubGVuZ3RoKzE7Yj4wO2ItLSljW2JdPWNbYi0xXTtyZXR1cm4gY1swXT17eDpjWzBdLngtMSx2YWx1ZTpjWzBdLnZhbHVlLGlkOmNbMF0uaWR9LGNbYS5sZW5ndGgrMV09e3g6Y1thLmxlbmd0aF0ueCsxLHZhbHVlOmNbYS5sZW5ndGhdLnZhbHVlLGlkOmNbYS5sZW5ndGhdLmlkfSxjfSxpLnVwZGF0ZURhdGFBdHRyaWJ1dGVzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY29uZmlnLGU9ZFtcImRhdGFfXCIrYV07cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/ZTooT2JqZWN0LmtleXMoYikuZm9yRWFjaChmdW5jdGlvbihhKXtlW2FdPWJbYV19KSxjLnJlZHJhdyh7d2l0aExlZ2VuZDohMH0pLGUpfSxpLmNvbnZlcnRVcmxUb0RhdGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPWI/YjpcImNzdlwiO2UuZDMueGhyKGEsZnVuY3Rpb24oYSxiKXt2YXIgZztpZighYil0aHJvdyBuZXcgRXJyb3IoYS5yZXNwb25zZVVSTCtcIiBcIithLnN0YXR1cytcIiAoXCIrYS5zdGF0dXNUZXh0K1wiKVwiKTtnPVwianNvblwiPT09Zj9lLmNvbnZlcnRKc29uVG9EYXRhKEpTT04ucGFyc2UoYi5yZXNwb25zZSksYyk6XCJ0c3ZcIj09PWY/ZS5jb252ZXJ0VHN2VG9EYXRhKGIucmVzcG9uc2UpOmUuY29udmVydENzdlRvRGF0YShiLnJlc3BvbnNlKSxkLmNhbGwoZSxnKX0pfSxpLmNvbnZlcnRYc3ZUb0RhdGE9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWIucGFyc2VSb3dzKGEpO3JldHVybiAxPT09ZC5sZW5ndGg/KGM9W3t9XSxkWzBdLmZvckVhY2goZnVuY3Rpb24oYSl7Y1swXVthXT1udWxsfSkpOmM9Yi5wYXJzZShhKSxjfSxpLmNvbnZlcnRDc3ZUb0RhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29udmVydFhzdlRvRGF0YShhLHRoaXMuZDMuY3N2KX0saS5jb252ZXJ0VHN2VG9EYXRhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnZlcnRYc3ZUb0RhdGEoYSx0aGlzLmQzLnRzdil9LGkuY29udmVydEpzb25Ub0RhdGE9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9dGhpcyxmPVtdO3JldHVybiBiPyhiLng/KGM9Yi52YWx1ZS5jb25jYXQoYi54KSxlLmNvbmZpZy5kYXRhX3g9Yi54KTpjPWIudmFsdWUsZi5wdXNoKGMpLGEuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1bXTtjLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9cChhW2NdKT9udWxsOmFbY107Yi5wdXNoKGQpfSksZi5wdXNoKGIpfSksZD1lLmNvbnZlcnRSb3dzVG9EYXRhKGYpKTooT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihiKXtmLnB1c2goW2JdLmNvbmNhdChhW2JdKSl9KSxkPWUuY29udmVydENvbHVtbnNUb0RhdGEoZikpLGR9LGkuY29udmVydFJvd3NUb0RhdGE9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWFbMF0sZT17fSxmPVtdO2ZvcihiPTE7YjxhLmxlbmd0aDtiKyspe2ZvcihlPXt9LGM9MDtjPGFbYl0ubGVuZ3RoO2MrKyl7aWYocChhW2JdW2NdKSl0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2UgZGF0YSBpcyBtaXNzaW5nIGEgY29tcG9uZW50IGF0IChcIitiK1wiLFwiK2MrXCIpIVwiKTtlW2RbY11dPWFbYl1bY119Zi5wdXNoKGUpfXJldHVybiBmfSxpLmNvbnZlcnRDb2x1bW5zVG9EYXRhPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPVtdO2ZvcihiPTA7YjxhLmxlbmd0aDtiKyspZm9yKGQ9YVtiXVswXSxjPTE7YzxhW2JdLmxlbmd0aDtjKyspe2lmKHAoZVtjLTFdKSYmKGVbYy0xXT17fSkscChhW2JdW2NdKSl0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2UgZGF0YSBpcyBtaXNzaW5nIGEgY29tcG9uZW50IGF0IChcIitiK1wiLFwiK2MrXCIpIVwiKTtlW2MtMV1bZF09YVtiXVtjXX1yZXR1cm4gZX0saS5jb252ZXJ0RGF0YVRvVGFyZ2V0cz1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcyxlPWQuY29uZmlnLGY9ZC5kMy5rZXlzKGFbMF0pLmZpbHRlcihkLmlzTm90WCxkKSxnPWQuZDMua2V5cyhhWzBdKS5maWx0ZXIoZC5pc1gsZCk7cmV0dXJuIGYuZm9yRWFjaChmdW5jdGlvbihjKXt2YXIgZj1kLmdldFhLZXkoYyk7ZC5pc0N1c3RvbVgoKXx8ZC5pc1RpbWVTZXJpZXMoKT9nLmluZGV4T2YoZik+PTA/ZC5kYXRhLnhzW2NdPShiJiZkLmRhdGEueHNbY10/ZC5kYXRhLnhzW2NdOltdKS5jb25jYXQoYS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGFbZl19KS5maWx0ZXIobSkubWFwKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGQuZ2VuZXJhdGVUYXJnZXRYKGEsYyxiKX0pKTplLmRhdGFfeD9kLmRhdGEueHNbY109ZC5nZXRPdGhlclRhcmdldFhzKCk6dihlLmRhdGFfeHMpJiYoZC5kYXRhLnhzW2NdPWQuZ2V0WFZhbHVlc09mWEtleShmLGQuZGF0YS50YXJnZXRzKSk6ZC5kYXRhLnhzW2NdPWEubWFwKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGJ9KX0pLGYuZm9yRWFjaChmdW5jdGlvbihhKXtpZighZC5kYXRhLnhzW2FdKXRocm93IG5ldyBFcnJvcigneCBpcyBub3QgZGVmaW5lZCBmb3IgaWQgPSBcIicrYSsnXCIuJyl9KSxjPWYubWFwKGZ1bmN0aW9uKGIsYyl7dmFyIGY9ZS5kYXRhX2lkQ29udmVydGVyKGIpO3JldHVybntpZDpmLGlkX29yZzpiLHZhbHVlczphLm1hcChmdW5jdGlvbihhLGcpe3ZhciBoPWQuZ2V0WEtleShiKSxpPWFbaF0saj1kLmdlbmVyYXRlVGFyZ2V0WChpLGIsZyk7cmV0dXJuIGQuaXNDdXN0b21YKCkmJmQuaXNDYXRlZ29yaXplZCgpJiYwPT09YyYmaSYmKDA9PT1nJiYoZS5heGlzX3hfY2F0ZWdvcmllcz1bXSksZS5heGlzX3hfY2F0ZWdvcmllcy5wdXNoKGkpKSwocChhW2JdKXx8ZC5kYXRhLnhzW2JdLmxlbmd0aDw9ZykmJihqPXZvaWQgMCkse3g6aix2YWx1ZTpudWxsPT09YVtiXXx8aXNOYU4oYVtiXSk/bnVsbDorYVtiXSxpZDpmfX0pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcShhLngpfSl9fSksYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBiO2UuZGF0YV94U29ydCYmKGEudmFsdWVzPWEudmFsdWVzLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnh8fDA9PT1hLng/YS54OjEvMCxkPWIueHx8MD09PWIueD9iLng6MS8wO3JldHVybiBjLWR9KSksYj0wLGEudmFsdWVzLmZvckVhY2goZnVuY3Rpb24oYSl7YS5pbmRleD1iKyt9KSxkLmRhdGEueHNbYS5pZF0uc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9KX0pLGUuZGF0YV90eXBlJiZkLnNldFRhcmdldFR5cGUoZC5tYXBUb0lkcyhjKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIShhIGluIGUuZGF0YV90eXBlcyl9KSxlLmRhdGFfdHlwZSksYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2QuYWRkQ2FjaGUoYS5pZF9vcmcsYSl9KSxjfSxpLmxvYWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2EmJihiLmZpbHRlciYmKGE9YS5maWx0ZXIoYi5maWx0ZXIpKSwoYi50eXBlfHxiLnR5cGVzKSYmYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBkPWIudHlwZXMmJmIudHlwZXNbYS5pZF0/Yi50eXBlc1thLmlkXTpiLnR5cGU7Yy5zZXRUYXJnZXRUeXBlKGEuaWQsZCl9KSxjLmRhdGEudGFyZ2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGIuaWQ9PT1hW2NdLmlkKXtiLnZhbHVlcz1hW2NdLnZhbHVlcyxhLnNwbGljZShjLDEpO2JyZWFrfX0pLGMuZGF0YS50YXJnZXRzPWMuZGF0YS50YXJnZXRzLmNvbmNhdChhKSksYy51cGRhdGVUYXJnZXRzKGMuZGF0YS50YXJnZXRzKSxjLnJlZHJhdyh7d2l0aFVwZGF0ZU9yZ1hEb21haW46ITAsd2l0aFVwZGF0ZVhEb21haW46ITAsd2l0aExlZ2VuZDohMH0pLGIuZG9uZSYmYi5kb25lKCl9LGkubG9hZEZyb21BcmdzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YS5kYXRhP2IubG9hZChiLmNvbnZlcnREYXRhVG9UYXJnZXRzKGEuZGF0YSksYSk6YS51cmw/Yi5jb252ZXJ0VXJsVG9EYXRhKGEudXJsLGEubWltZVR5cGUsYS5rZXlzLGZ1bmN0aW9uKGMpe2IubG9hZChiLmNvbnZlcnREYXRhVG9UYXJnZXRzKGMpLGEpfSk6YS5qc29uP2IubG9hZChiLmNvbnZlcnREYXRhVG9UYXJnZXRzKGIuY29udmVydEpzb25Ub0RhdGEoYS5qc29uLGEua2V5cykpLGEpOmEucm93cz9iLmxvYWQoYi5jb252ZXJ0RGF0YVRvVGFyZ2V0cyhiLmNvbnZlcnRSb3dzVG9EYXRhKGEucm93cykpLGEpOmEuY29sdW1ucz9iLmxvYWQoYi5jb252ZXJ0RGF0YVRvVGFyZ2V0cyhiLmNvbnZlcnRDb2x1bW5zVG9EYXRhKGEuY29sdW1ucykpLGEpOmIubG9hZChudWxsLGEpfSxpLnVubG9hZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGJ8fChiPWZ1bmN0aW9uKCl7fSksYT1hLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYy5oYXNUYXJnZXQoYy5kYXRhLnRhcmdldHMsYSl9KSxhJiYwIT09YS5sZW5ndGg/KGMuc3ZnLnNlbGVjdEFsbChhLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYy5zZWxlY3RvclRhcmdldChhKX0pKS50cmFuc2l0aW9uKCkuc3R5bGUoXCJvcGFjaXR5XCIsMCkucmVtb3ZlKCkuY2FsbChjLmVuZGFsbCxiKSx2b2lkIGEuZm9yRWFjaChmdW5jdGlvbihhKXtjLndpdGhvdXRGYWRlSW5bYV09ITEsYy5sZWdlbmQmJmMubGVnZW5kLnNlbGVjdEFsbChcIi5cIitsLmxlZ2VuZEl0ZW0rYy5nZXRUYXJnZXRTZWxlY3RvclN1ZmZpeChhKSkucmVtb3ZlKCksYy5kYXRhLnRhcmdldHM9Yy5kYXRhLnRhcmdldHMuZmlsdGVyKGZ1bmN0aW9uKGIpe3JldHVybiBiLmlkIT09YX0pfSkpOnZvaWQgYigpfSxpLmNhdGVnb3J5TmFtZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNvbmZpZztyZXR1cm4gYTxiLmF4aXNfeF9jYXRlZ29yaWVzLmxlbmd0aD9iLmF4aXNfeF9jYXRlZ29yaWVzW2FdOmF9LGkuaW5pdEV2ZW50UmVjdD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5tYWluLnNlbGVjdChcIi5cIitsLmNoYXJ0KS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwuZXZlbnRSZWN0cykuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwwKX0saS5yZWRyYXdFdmVudFJlY3Q9ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcyxkPWMuY29uZmlnLGU9Yy5pc011bHRpcGxlWCgpLGY9Yy5tYWluLnNlbGVjdChcIi5cIitsLmV2ZW50UmVjdHMpLnN0eWxlKFwiY3Vyc29yXCIsZC56b29tX2VuYWJsZWQ/ZC5heGlzX3JvdGF0ZWQ/XCJucy1yZXNpemVcIjpcImV3LXJlc2l6ZVwiOm51bGwpLmNsYXNzZWQobC5ldmVudFJlY3RzTXVsdGlwbGUsZSkuY2xhc3NlZChsLmV2ZW50UmVjdHNTaW5nbGUsIWUpO2Yuc2VsZWN0QWxsKFwiLlwiK2wuZXZlbnRSZWN0KS5yZW1vdmUoKSxjLmV2ZW50UmVjdD1mLnNlbGVjdEFsbChcIi5cIitsLmV2ZW50UmVjdCksZT8oYT1jLmV2ZW50UmVjdC5kYXRhKFswXSksYy5nZW5lcmF0ZUV2ZW50UmVjdHNGb3JNdWx0aXBsZVhzKGEuZW50ZXIoKSksYy51cGRhdGVFdmVudFJlY3QoYSkpOihiPWMuZ2V0TWF4RGF0YUNvdW50VGFyZ2V0KGMuZGF0YS50YXJnZXRzKSxmLmRhdHVtKGI/Yi52YWx1ZXM6W10pLGMuZXZlbnRSZWN0PWYuc2VsZWN0QWxsKFwiLlwiK2wuZXZlbnRSZWN0KSxhPWMuZXZlbnRSZWN0LmRhdGEoZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxjLmdlbmVyYXRlRXZlbnRSZWN0c0ZvclNpbmdsZVgoYS5lbnRlcigpKSxjLnVwZGF0ZUV2ZW50UmVjdChhKSxhLmV4aXQoKS5yZW1vdmUoKSl9LGkudXBkYXRlRXZlbnRSZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPXRoaXMsaT1oLmNvbmZpZzthPWF8fGguZXZlbnRSZWN0LmRhdGEoZnVuY3Rpb24oYSl7cmV0dXJuIGF9KSxoLmlzTXVsdGlwbGVYKCk/KGI9MCxjPTAsZD1oLndpZHRoLGU9aC5oZWlnaHQpOighaC5pc0N1c3RvbVgoKSYmIWguaXNUaW1lU2VyaWVzKCl8fGguaXNDYXRlZ29yaXplZCgpPyhmPWguZ2V0RXZlbnRSZWN0V2lkdGgoKSxnPWZ1bmN0aW9uKGEpe3JldHVybiBoLngoYS54KS1mLzJ9KTooaC51cGRhdGVYcygpLGY9ZnVuY3Rpb24oYSl7dmFyIGI9aC5nZXRQcmV2WChhLmluZGV4KSxjPWguZ2V0TmV4dFgoYS5pbmRleCk7cmV0dXJuIG51bGw9PT1iJiZudWxsPT09Yz9pLmF4aXNfcm90YXRlZD9oLmhlaWdodDpoLndpZHRoOihudWxsPT09YiYmKGI9aC54LmRvbWFpbigpWzBdKSxudWxsPT09YyYmKGM9aC54LmRvbWFpbigpWzFdKSxNYXRoLm1heCgwLChoLngoYyktaC54KGIpKS8yKSl9LGc9ZnVuY3Rpb24oYSl7dmFyIGI9aC5nZXRQcmV2WChhLmluZGV4KSxjPWguZ2V0TmV4dFgoYS5pbmRleCksZD1oLmRhdGEueHNbYS5pZF1bYS5pbmRleF07cmV0dXJuIG51bGw9PT1iJiZudWxsPT09Yz8wOihudWxsPT09YiYmKGI9aC54LmRvbWFpbigpWzBdKSwoaC54KGQpK2gueChiKSkvMil9KSxiPWkuYXhpc19yb3RhdGVkPzA6ZyxjPWkuYXhpc19yb3RhdGVkP2c6MCxkPWkuYXhpc19yb3RhdGVkP2gud2lkdGg6ZixlPWkuYXhpc19yb3RhdGVkP2Y6aC5oZWlnaHQpLGEuYXR0cihcImNsYXNzXCIsaC5jbGFzc0V2ZW50LmJpbmQoaCkpLmF0dHIoXCJ4XCIsYikuYXR0cihcInlcIixjKS5hdHRyKFwid2lkdGhcIixkKS5hdHRyKFwiaGVpZ2h0XCIsZSl9LGkuZ2VuZXJhdGVFdmVudFJlY3RzRm9yU2luZ2xlWD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5kMyxkPWIuY29uZmlnO2EuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwiY2xhc3NcIixiLmNsYXNzRXZlbnQuYmluZChiKSkuc3R5bGUoXCJjdXJzb3JcIixkLmRhdGFfc2VsZWN0aW9uX2VuYWJsZWQmJmQuZGF0YV9zZWxlY3Rpb25fZ3JvdXBlZD9cInBvaW50ZXJcIjpudWxsKS5vbihcIm1vdXNlb3ZlclwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuaW5kZXg7Yi5kcmFnZ2luZ3x8Yi5mbG93aW5nfHxiLmhhc0FyY1R5cGUoKXx8KGQucG9pbnRfZm9jdXNfZXhwYW5kX2VuYWJsZWQmJmIuZXhwYW5kQ2lyY2xlcyhjLG51bGwsITApLGIuZXhwYW5kQmFycyhjLG51bGwsITApLGIubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZStcIi1cIitjKS5lYWNoKGZ1bmN0aW9uKGEpe2QuZGF0YV9vbm1vdXNlb3Zlci5jYWxsKGIuYXBpLGEpfSkpfSkub24oXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuaW5kZXg7Yi5jb25maWcmJihiLmhhc0FyY1R5cGUoKXx8KGIuaGlkZVhHcmlkRm9jdXMoKSxiLmhpZGVUb29sdGlwKCksYi51bmV4cGFuZENpcmNsZXMoKSxiLnVuZXhwYW5kQmFycygpLGIubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZStcIi1cIitjKS5lYWNoKGZ1bmN0aW9uKGEpe2QuZGF0YV9vbm1vdXNlb3V0LmNhbGwoYi5hcGksYSl9KSkpfSkub24oXCJtb3VzZW1vdmVcIixmdW5jdGlvbihhKXt2YXIgZSxmPWEuaW5kZXgsZz1iLnN2Zy5zZWxlY3QoXCIuXCIrbC5ldmVudFJlY3QrXCItXCIrZik7Yi5kcmFnZ2luZ3x8Yi5mbG93aW5nfHxiLmhhc0FyY1R5cGUoKXx8KGIuaXNTdGVwVHlwZShhKSYmXCJzdGVwLWFmdGVyXCI9PT1iLmNvbmZpZy5saW5lX3N0ZXBfdHlwZSYmYy5tb3VzZSh0aGlzKVswXTxiLngoYi5nZXRYVmFsdWUoYS5pZCxmKSkmJihmLT0xKSxlPWIuZmlsdGVyVGFyZ2V0c1RvU2hvdyhiLmRhdGEudGFyZ2V0cykubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBiLmFkZE5hbWUoYi5nZXRWYWx1ZU9uSW5kZXgoYS52YWx1ZXMsZikpfSksZC50b29sdGlwX2dyb3VwZWQmJihiLnNob3dUb29sdGlwKGUsdGhpcyksYi5zaG93WEdyaWRGb2N1cyhlKSksKCFkLnRvb2x0aXBfZ3JvdXBlZHx8ZC5kYXRhX3NlbGVjdGlvbl9lbmFibGVkJiYhZC5kYXRhX3NlbGVjdGlvbl9ncm91cGVkKSYmYi5tYWluLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlK1wiLVwiK2YpLmVhY2goZnVuY3Rpb24oKXtjLnNlbGVjdCh0aGlzKS5jbGFzc2VkKGwuRVhQQU5ERUQsITApLGQuZGF0YV9zZWxlY3Rpb25fZW5hYmxlZCYmZy5zdHlsZShcImN1cnNvclwiLGQuZGF0YV9zZWxlY3Rpb25fZ3JvdXBlZD9cInBvaW50ZXJcIjpudWxsKSxkLnRvb2x0aXBfZ3JvdXBlZHx8KGIuaGlkZVhHcmlkRm9jdXMoKSxiLmhpZGVUb29sdGlwKCksZC5kYXRhX3NlbGVjdGlvbl9ncm91cGVkfHwoYi51bmV4cGFuZENpcmNsZXMoZiksYi51bmV4cGFuZEJhcnMoZikpKX0pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYi5pc1dpdGhpblNoYXBlKHRoaXMsYSl9KS5lYWNoKGZ1bmN0aW9uKGEpe2QuZGF0YV9zZWxlY3Rpb25fZW5hYmxlZCYmKGQuZGF0YV9zZWxlY3Rpb25fZ3JvdXBlZHx8ZC5kYXRhX3NlbGVjdGlvbl9pc3NlbGVjdGFibGUoYSkpJiZnLnN0eWxlKFwiY3Vyc29yXCIsXCJwb2ludGVyXCIpLGQudG9vbHRpcF9ncm91cGVkfHwoYi5zaG93VG9vbHRpcChbYV0sdGhpcyksYi5zaG93WEdyaWRGb2N1cyhbYV0pLGQucG9pbnRfZm9jdXNfZXhwYW5kX2VuYWJsZWQmJmIuZXhwYW5kQ2lyY2xlcyhmLGEuaWQsITApLGIuZXhwYW5kQmFycyhmLGEuaWQsITApKX0pKX0pLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXt2YXIgZT1hLmluZGV4O2lmKCFiLmhhc0FyY1R5cGUoKSYmYi50b2dnbGVTaGFwZSl7aWYoYi5jYW5jZWxDbGljaylyZXR1cm4gdm9pZChiLmNhbmNlbENsaWNrPSExKTtiLmlzU3RlcFR5cGUoYSkmJlwic3RlcC1hZnRlclwiPT09ZC5saW5lX3N0ZXBfdHlwZSYmYy5tb3VzZSh0aGlzKVswXTxiLngoYi5nZXRYVmFsdWUoYS5pZCxlKSkmJihlLT0xKSxiLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGUrXCItXCIrZSkuZWFjaChmdW5jdGlvbihhKXsoZC5kYXRhX3NlbGVjdGlvbl9ncm91cGVkfHxiLmlzV2l0aGluU2hhcGUodGhpcyxhKSkmJihiLnRvZ2dsZVNoYXBlKHRoaXMsYSxlKSxiLmNvbmZpZy5kYXRhX29uY2xpY2suY2FsbChiLmFwaSxhLHRoaXMpKX0pfX0pLmNhbGwoZC5kYXRhX3NlbGVjdGlvbl9kcmFnZ2FibGUmJmIuZHJhZz9jLmJlaGF2aW9yLmRyYWcoKS5vcmlnaW4oT2JqZWN0KS5vbihcImRyYWdcIixmdW5jdGlvbigpe2IuZHJhZyhjLm1vdXNlKHRoaXMpKX0pLm9uKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oKXtiLmRyYWdzdGFydChjLm1vdXNlKHRoaXMpKX0pLm9uKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7Yi5kcmFnZW5kKCl9KTpmdW5jdGlvbigpe30pfSxpLmdlbmVyYXRlRXZlbnRSZWN0c0Zvck11bHRpcGxlWHM9ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYigpe2Muc3ZnLnNlbGVjdChcIi5cIitsLmV2ZW50UmVjdCkuc3R5bGUoXCJjdXJzb3JcIixudWxsKSxjLmhpZGVYR3JpZEZvY3VzKCksYy5oaWRlVG9vbHRpcCgpLGMudW5leHBhbmRDaXJjbGVzKCksYy51bmV4cGFuZEJhcnMoKX12YXIgYz10aGlzLGQ9Yy5kMyxlPWMuY29uZmlnO2EuYXBwZW5kKFwicmVjdFwiKS5hdHRyKFwieFwiLDApLmF0dHIoXCJ5XCIsMCkuYXR0cihcIndpZHRoXCIsYy53aWR0aCkuYXR0cihcImhlaWdodFwiLGMuaGVpZ2h0KS5hdHRyKFwiY2xhc3NcIixsLmV2ZW50UmVjdCkub24oXCJtb3VzZW91dFwiLGZ1bmN0aW9uKCl7Yy5jb25maWcmJihjLmhhc0FyY1R5cGUoKXx8YigpKX0pLm9uKFwibW91c2Vtb3ZlXCIsZnVuY3Rpb24oKXt2YXIgYSxmLGcsaCxpPWMuZmlsdGVyVGFyZ2V0c1RvU2hvdyhjLmRhdGEudGFyZ2V0cyk7aWYoIWMuZHJhZ2dpbmcmJiFjLmhhc0FyY1R5cGUoaSkpe2lmKGE9ZC5tb3VzZSh0aGlzKSxmPWMuZmluZENsb3Nlc3RGcm9tVGFyZ2V0cyhpLGEpLCFjLm1vdXNlb3Zlcnx8ZiYmZi5pZD09PWMubW91c2VvdmVyLmlkfHwoZS5kYXRhX29ubW91c2VvdXQuY2FsbChjLmFwaSxjLm1vdXNlb3ZlciksYy5tb3VzZW92ZXI9dm9pZCAwKSwhZilyZXR1cm4gdm9pZCBiKCk7Zz1jLmlzU2NhdHRlclR5cGUoZil8fCFlLnRvb2x0aXBfZ3JvdXBlZD9bZl06Yy5maWx0ZXJCeVgoaSxmLngpLGg9Zy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMuYWRkTmFtZShhKX0pLGMuc2hvd1Rvb2x0aXAoaCx0aGlzKSxlLnBvaW50X2ZvY3VzX2V4cGFuZF9lbmFibGVkJiZjLmV4cGFuZENpcmNsZXMoZi5pbmRleCxmLmlkLCEwKSxjLmV4cGFuZEJhcnMoZi5pbmRleCxmLmlkLCEwKSxjLnNob3dYR3JpZEZvY3VzKGgpLChjLmlzQmFyVHlwZShmLmlkKXx8Yy5kaXN0KGYsYSk8MTAwKSYmKGMuc3ZnLnNlbGVjdChcIi5cIitsLmV2ZW50UmVjdCkuc3R5bGUoXCJjdXJzb3JcIixcInBvaW50ZXJcIiksYy5tb3VzZW92ZXJ8fChlLmRhdGFfb25tb3VzZW92ZXIuY2FsbChjLmFwaSxmKSxjLm1vdXNlb3Zlcj1mKSl9fSkub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dmFyIGEsYixmPWMuZmlsdGVyVGFyZ2V0c1RvU2hvdyhjLmRhdGEudGFyZ2V0cyk7Yy5oYXNBcmNUeXBlKGYpfHwoYT1kLm1vdXNlKHRoaXMpLGI9Yy5maW5kQ2xvc2VzdEZyb21UYXJnZXRzKGYsYSksYiYmKGMuaXNCYXJUeXBlKGIuaWQpfHxjLmRpc3QoYixhKTwxMDApJiZjLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGVzK2MuZ2V0VGFyZ2V0U2VsZWN0b3JTdWZmaXgoYi5pZCkpLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlK1wiLVwiK2IuaW5kZXgpLmVhY2goZnVuY3Rpb24oKXsoZS5kYXRhX3NlbGVjdGlvbl9ncm91cGVkfHxjLmlzV2l0aGluU2hhcGUodGhpcyxiKSkmJihjLnRvZ2dsZVNoYXBlKHRoaXMsYixiLmluZGV4KSxjLmNvbmZpZy5kYXRhX29uY2xpY2suY2FsbChjLmFwaSxiLHRoaXMpKX0pKX0pLmNhbGwoZS5kYXRhX3NlbGVjdGlvbl9kcmFnZ2FibGUmJmMuZHJhZz9kLmJlaGF2aW9yLmRyYWcoKS5vcmlnaW4oT2JqZWN0KS5vbihcImRyYWdcIixmdW5jdGlvbigpe2MuZHJhZyhkLm1vdXNlKHRoaXMpKX0pLm9uKFwiZHJhZ3N0YXJ0XCIsZnVuY3Rpb24oKXtjLmRyYWdzdGFydChkLm1vdXNlKHRoaXMpKX0pLm9uKFwiZHJhZ2VuZFwiLGZ1bmN0aW9uKCl7Yy5kcmFnZW5kKCl9KTpmdW5jdGlvbigpe30pfSxpLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXRoaXMsZj1cIi5cIitsLmV2ZW50UmVjdCsoZS5pc011bHRpcGxlWCgpP1wiXCI6XCItXCIrYyksZz1lLm1haW4uc2VsZWN0KGYpLm5vZGUoKSxoPWcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaT1oLmxlZnQrKGQ/ZFswXTowKSxqPWgudG9wKyhkP2RbMV06MCksaz1kb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO2suaW5pdE1vdXNlRXZlbnQoYiwhMCwhMCxhLDAsaSxqLGksaiwhMSwhMSwhMSwhMSwwLG51bGwpLGcuZGlzcGF0Y2hFdmVudChrKX0saS5nZXRDdXJyZW50V2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWc7cmV0dXJuIGIuc2l6ZV93aWR0aD9iLnNpemVfd2lkdGg6YS5nZXRQYXJlbnRXaWR0aCgpfSxpLmdldEN1cnJlbnRIZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz1iLnNpemVfaGVpZ2h0P2Iuc2l6ZV9oZWlnaHQ6YS5nZXRQYXJlbnRIZWlnaHQoKTtyZXR1cm4gYz4wP2M6MzIwLyhhLmhhc1R5cGUoXCJnYXVnZVwiKT8yOjEpfSxpLmdldEN1cnJlbnRQYWRkaW5nVG9wPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25maWc7cmV0dXJuIG0oYS5wYWRkaW5nX3RvcCk/YS5wYWRkaW5nX3RvcDowfSxpLmdldEN1cnJlbnRQYWRkaW5nQm90dG9tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb25maWc7cmV0dXJuIG0oYS5wYWRkaW5nX2JvdHRvbSk/YS5wYWRkaW5nX2JvdHRvbTowfSxpLmdldEN1cnJlbnRQYWRkaW5nTGVmdD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7cmV0dXJuIG0oYy5wYWRkaW5nX2xlZnQpP2MucGFkZGluZ19sZWZ0OmMuYXhpc19yb3RhdGVkP2MuYXhpc194X3Nob3c/TWF0aC5tYXgocihiLmdldEF4aXNXaWR0aEJ5QXhpc0lkKFwieFwiLGEpKSw0MCk6MTohYy5heGlzX3lfc2hvd3x8Yy5heGlzX3lfaW5uZXI/Yi5heGlzLmdldFlBeGlzTGFiZWxQb3NpdGlvbigpLmlzT3V0ZXI/MzA6MTpyKGIuZ2V0QXhpc1dpZHRoQnlBeGlzSWQoXCJ5XCIsYSkpfSxpLmdldEN1cnJlbnRQYWRkaW5nUmlnaHQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz0xMCxkPWEuaXNMZWdlbmRSaWdodD9hLmdldExlZ2VuZFdpZHRoKCkrMjA6MDtyZXR1cm4gbShiLnBhZGRpbmdfcmlnaHQpP2IucGFkZGluZ19yaWdodCsxOmIuYXhpc19yb3RhdGVkP2MrZDohYi5heGlzX3kyX3Nob3d8fGIuYXhpc195Ml9pbm5lcj8yK2QrKGEuYXhpcy5nZXRZMkF4aXNMYWJlbFBvc2l0aW9uKCkuaXNPdXRlcj8yMDowKTpyKGEuZ2V0QXhpc1dpZHRoQnlBeGlzSWQoXCJ5MlwiKSkrZH0saS5nZXRQYXJlbnRSZWN0VmFsdWU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM9dGhpcy5zZWxlY3RDaGFydC5ub2RlKCk7YyYmXCJCT0RZXCIhPT1jLnRhZ05hbWU7KXt0cnl7Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW2FdfWNhdGNoKGQpe1wid2lkdGhcIj09PWEmJihiPWMub2Zmc2V0V2lkdGgpfWlmKGIpYnJlYWs7Yz1jLnBhcmVudE5vZGV9cmV0dXJuIGJ9LGkuZ2V0UGFyZW50V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQYXJlbnRSZWN0VmFsdWUoXCJ3aWR0aFwiKX0saS5nZXRQYXJlbnRIZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdENoYXJ0LnN0eWxlKFwiaGVpZ2h0XCIpO3JldHVybiBhLmluZGV4T2YoXCJweFwiKT4wPythLnJlcGxhY2UoXCJweFwiLFwiXCIpOjB9LGkuZ2V0U3ZnTGVmdD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWcsZD1jLmF4aXNfcm90YXRlZHx8IWMuYXhpc19yb3RhdGVkJiYhYy5heGlzX3lfaW5uZXIsZT1jLmF4aXNfcm90YXRlZD9sLmF4aXNYOmwuYXhpc1ksZj1iLm1haW4uc2VsZWN0KFwiLlwiK2UpLm5vZGUoKSxnPWYmJmQ/Zi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTp7cmlnaHQ6MH0saD1iLnNlbGVjdENoYXJ0Lm5vZGUoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPWIuaGFzQXJjVHlwZSgpLGo9Zy5yaWdodC1oLmxlZnQtKGk/MDpiLmdldEN1cnJlbnRQYWRkaW5nTGVmdChhKSk7cmV0dXJuIGo+MD9qOjB9LGkuZ2V0QXhpc1dpZHRoQnlBeGlzSWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5heGlzLmdldExhYmVsUG9zaXRpb25CeUlkKGEpO3JldHVybiBjLmF4aXMuZ2V0TWF4VGlja1dpZHRoKGEsYikrKGQuaXNJbm5lcj8yMDo0MCl9LGkuZ2V0SG9yaXpvbnRhbEF4aXNIZWlnaHQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnLGQ9MzA7cmV0dXJuXCJ4XCIhPT1hfHxjLmF4aXNfeF9zaG93P1wieFwiPT09YSYmYy5heGlzX3hfaGVpZ2h0P2MuYXhpc194X2hlaWdodDpcInlcIiE9PWF8fGMuYXhpc195X3Nob3c/XCJ5MlwiIT09YXx8Yy5heGlzX3kyX3Nob3c/KFwieFwiPT09YSYmIWMuYXhpc19yb3RhdGVkJiZjLmF4aXNfeF90aWNrX3JvdGF0ZSYmKGQ9MzArYi5heGlzLmdldE1heFRpY2tXaWR0aChhKSpNYXRoLmNvcyhNYXRoLlBJKig5MC1jLmF4aXNfeF90aWNrX3JvdGF0ZSkvMTgwKSksZCsoYi5heGlzLmdldExhYmVsUG9zaXRpb25CeUlkKGEpLmlzSW5uZXI/MDoxMCkrKFwieTJcIj09PWE/LTEwOjApKTpiLnJvdGF0ZWRfcGFkZGluZ190b3A6IWMubGVnZW5kX3Nob3d8fGIuaXNMZWdlbmRSaWdodHx8Yi5pc0xlZ2VuZEluc2V0PzE6MTA6OH0saS5nZXRFdmVudFJlY3RXaWR0aD1mdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCgwLHRoaXMueEF4aXMudGlja0ludGVydmFsKCkpfSxpLmdldFNoYXBlSW5kaWNlcz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcyxlPWQuY29uZmlnLGY9e30sZz0wO3JldHVybiBkLmZpbHRlclRhcmdldHNUb1Nob3coZC5kYXRhLnRhcmdldHMuZmlsdGVyKGEsZCkpLmZvckVhY2goZnVuY3Rpb24oYSl7Zm9yKGI9MDtiPGUuZGF0YV9ncm91cHMubGVuZ3RoO2IrKylpZighKGUuZGF0YV9ncm91cHNbYl0uaW5kZXhPZihhLmlkKTwwKSlmb3IoYz0wO2M8ZS5kYXRhX2dyb3Vwc1tiXS5sZW5ndGg7YysrKWlmKGUuZGF0YV9ncm91cHNbYl1bY11pbiBmKXtmW2EuaWRdPWZbZS5kYXRhX2dyb3Vwc1tiXVtjXV07YnJlYWt9cChmW2EuaWRdKSYmKGZbYS5pZF09ZysrKX0pLGYuX19tYXhfXz1nLTEsZn0saS5nZXRTaGFwZVg9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPWQ/ZS5zdWJYOmUueDtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZC5pZCBpbiBjP2NbZC5pZF06MDtyZXR1cm4gZC54fHwwPT09ZC54P2YoZC54KS1hKihiLzItZSk6MH19LGkuZ2V0U2hhcGVZPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWE/Yi5nZXRTdWJZU2NhbGUoYy5pZCk6Yi5nZXRZU2NhbGUoYy5pZCk7cmV0dXJuIGQoYy52YWx1ZSl9fSxpLmdldFNoYXBlT2Zmc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9ZC5vcmRlclRhcmdldHMoZC5maWx0ZXJUYXJnZXRzVG9TaG93KGQuZGF0YS50YXJnZXRzLmZpbHRlcihhLGQpKSksZj1lLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5pZH0pO3JldHVybiBmdW5jdGlvbihhLGcpe3ZhciBoPWM/ZC5nZXRTdWJZU2NhbGUoYS5pZCk6ZC5nZXRZU2NhbGUoYS5pZCksaT1oKDApLGo9aTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGMpe3ZhciBlPWQuaXNTdGVwVHlwZShhKT9kLmNvbnZlcnRWYWx1ZXNUb1N0ZXAoYy52YWx1ZXMpOmMudmFsdWVzO2MuaWQhPT1hLmlkJiZiW2MuaWRdPT09YlthLmlkXSYmZi5pbmRleE9mKGMuaWQpPGYuaW5kZXhPZihhLmlkKSYmZVtnXS52YWx1ZSphLnZhbHVlPj0wJiYoais9aChlW2ddLnZhbHVlKS1pKX0pLGp9fSxpLmlzV2l0aGluU2hhcGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXRoaXMsZT1kLmQzLnNlbGVjdChhKTtyZXR1cm4gZC5pc1RhcmdldFRvU2hvdyhiLmlkKT9cImNpcmNsZVwiPT09YS5ub2RlTmFtZT9jPWQuaXNTdGVwVHlwZShiKT9kLmlzV2l0aGluU3RlcChhLGQuZ2V0WVNjYWxlKGIuaWQpKGIudmFsdWUpKTpkLmlzV2l0aGluQ2lyY2xlKGEsMS41KmQucG9pbnRTZWxlY3RSKGIpKTpcInBhdGhcIj09PWEubm9kZU5hbWUmJihjPWUuY2xhc3NlZChsLmJhcik/ZC5pc1dpdGhpbkJhcihhKTohMCk6Yz0hMSxjfSxpLmdldEludGVycG9sYXRlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGIuaXNTcGxpbmVUeXBlKGEpP1wiY2FyZGluYWxcIjpiLmlzU3RlcFR5cGUoYSk/Yi5jb25maWcubGluZV9zdGVwX3R5cGU6XCJsaW5lYXJcIn0saS5pbml0TGluZT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5tYWluLnNlbGVjdChcIi5cIitsLmNoYXJ0KS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwuY2hhcnRMaW5lcyl9LGkudXBkYXRlVGFyZ2V0c0ZvckxpbmU9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMsZT1kLmNvbmZpZyxmPWQuY2xhc3NDaGFydExpbmUuYmluZChkKSxnPWQuY2xhc3NMaW5lcy5iaW5kKGQpLGg9ZC5jbGFzc0FyZWFzLmJpbmQoZCksaT1kLmNsYXNzQ2lyY2xlcy5iaW5kKGQpLGo9ZC5jbGFzc0ZvY3VzLmJpbmQoZCk7Yj1kLm1haW4uc2VsZWN0KFwiLlwiK2wuY2hhcnRMaW5lcykuc2VsZWN0QWxsKFwiLlwiK2wuY2hhcnRMaW5lKS5kYXRhKGEpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBmKGEpK2ooYSl9KSxjPWIuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGYpLnN0eWxlKFwib3BhY2l0eVwiLDApLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIiksYy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGcpLGMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixoKSxjLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGQuZ2VuZXJhdGVDbGFzcyhsLnNlbGVjdGVkQ2lyY2xlcyxhLmlkKX0pLGMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixpKS5zdHlsZShcImN1cnNvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBlLmRhdGFfc2VsZWN0aW9uX2lzc2VsZWN0YWJsZShhKT9cInBvaW50ZXJcIjpudWxsfSksYS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2QubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zZWxlY3RlZENpcmNsZXMrZC5nZXRUYXJnZXRTZWxlY3RvclN1ZmZpeChhLmlkKSkuc2VsZWN0QWxsKFwiLlwiK2wuc2VsZWN0ZWRDaXJjbGUpLmVhY2goZnVuY3Rpb24oYil7Yi52YWx1ZT1hLnZhbHVlc1tiLmluZGV4XS52YWx1ZX0pfSl9LGkudXBkYXRlTGluZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubWFpbkxpbmU9Yi5tYWluLnNlbGVjdEFsbChcIi5cIitsLmxpbmVzKS5zZWxlY3RBbGwoXCIuXCIrbC5saW5lKS5kYXRhKGIubGluZURhdGEuYmluZChiKSksYi5tYWluTGluZS5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsYi5jbGFzc0xpbmUuYmluZChiKSkuc3R5bGUoXCJzdHJva2VcIixiLmNvbG9yKSxiLm1haW5MaW5lLnN0eWxlKFwib3BhY2l0eVwiLGIuaW5pdGlhbE9wYWNpdHkuYmluZChiKSkuc3R5bGUoXCJzaGFwZS1yZW5kZXJpbmdcIixmdW5jdGlvbihhKXtyZXR1cm4gYi5pc1N0ZXBUeXBlKGEpP1wiY3Jpc3BFZGdlc1wiOlwiXCJ9KS5hdHRyKFwidHJhbnNmb3JtXCIsbnVsbCksYi5tYWluTGluZS5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwib3BhY2l0eVwiLDApLnJlbW92ZSgpfSxpLnJlZHJhd0xpbmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm5bKGI/dGhpcy5tYWluTGluZS50cmFuc2l0aW9uKCk6dGhpcy5tYWluTGluZSkuYXR0cihcImRcIixhKS5zdHlsZShcInN0cm9rZVwiLHRoaXMuY29sb3IpLnN0eWxlKFwib3BhY2l0eVwiLDEpXX0saS5nZW5lcmF0ZURyYXdMaW5lPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY29uZmlnLGU9Yy5kMy5zdmcubGluZSgpLGY9Yy5nZW5lcmF0ZUdldExpbmVQb2ludHMoYSxiKSxnPWI/Yy5nZXRTdWJZU2NhbGU6Yy5nZXRZU2NhbGUsaD1mdW5jdGlvbihhKXtyZXR1cm4oYj9jLnN1Ynh4OmMueHgpLmNhbGwoYyxhKX0saT1mdW5jdGlvbihhLGIpe3JldHVybiBkLmRhdGFfZ3JvdXBzLmxlbmd0aD4wP2YoYSxiKVswXVsxXTpnLmNhbGwoYyxhLmlkKShhLnZhbHVlKX07cmV0dXJuIGU9ZC5heGlzX3JvdGF0ZWQ/ZS54KGkpLnkoaCk6ZS54KGgpLnkoaSksZC5saW5lX2Nvbm5lY3ROdWxsfHwoZT1lLmRlZmluZWQoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEudmFsdWV9KSksZnVuY3Rpb24oYSl7dmFyIGYsaD1kLmxpbmVfY29ubmVjdE51bGw/Yy5maWx0ZXJSZW1vdmVOdWxsKGEudmFsdWVzKTphLnZhbHVlcyxpPWI/Yy54OmMuc3ViWCxqPWcuY2FsbChjLGEuaWQpLGs9MCxsPTA7cmV0dXJuIGMuaXNMaW5lVHlwZShhKT9kLmRhdGFfcmVnaW9uc1thLmlkXT9mPWMubGluZVdpdGhSZWdpb25zKGgsaSxqLGQuZGF0YV9yZWdpb25zW2EuaWRdKTooYy5pc1N0ZXBUeXBlKGEpJiYoaD1jLmNvbnZlcnRWYWx1ZXNUb1N0ZXAoaCkpLGY9ZS5pbnRlcnBvbGF0ZShjLmdldEludGVycG9sYXRlKGEpKShoKSk6KGhbMF0mJihrPWkoaFswXS54KSxsPWooaFswXS52YWx1ZSkpLGY9ZC5heGlzX3JvdGF0ZWQ/XCJNIFwiK2wrXCIgXCIrazpcIk0gXCIraytcIiBcIitsKSxmP2Y6XCJNIDAgMFwifX0saS5nZW5lcmF0ZUdldExpbmVQb2ludHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jb25maWcsZT1hLl9fbWF4X18rMSxmPWMuZ2V0U2hhcGVYKDAsZSxhLCEhYiksZz1jLmdldFNoYXBlWSghIWIpLGg9Yy5nZXRTaGFwZU9mZnNldChjLmlzTGluZVR5cGUsYSwhIWIpLGk9Yj9jLmdldFN1YllTY2FsZTpjLmdldFlTY2FsZTtyZXR1cm4gZnVuY3Rpb24oYSxiKXt2YXIgZT1pLmNhbGwoYyxhLmlkKSgwKSxqPWgoYSxiKXx8ZSxrPWYoYSksbD1nKGEpO3JldHVybiBkLmF4aXNfcm90YXRlZCYmKDA8YS52YWx1ZSYmZT5sfHxhLnZhbHVlPDAmJmw+ZSkmJihsPWUpLFtbayxsLShlLWopXSxbayxsLShlLWopXSxbayxsLShlLWopXSxbayxsLShlLWopXV19fSxpLmxpbmVXaXRoUmVnaW9ucz1mdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEsYil7dmFyIGM7Zm9yKGM9MDtjPGIubGVuZ3RoO2MrKylpZihiW2NdLnN0YXJ0PGEmJmE8PWJbY10uZW5kKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIGYoYSl7cmV0dXJuXCJNXCIrYVswXVswXStcIiBcIithWzBdWzFdK1wiIFwiK2FbMV1bMF0rXCIgXCIrYVsxXVsxXX12YXIgZyxoLGksaixrLGwsbSxuLG8scixzLHQsdT10aGlzLHY9dS5jb25maWcsdz0tMSx4PVwiTVwiLHk9dS5pc0NhdGVnb3JpemVkKCk/LjU6MCx6PVtdO2lmKHEoZCkpZm9yKGc9MDtnPGQubGVuZ3RoO2crKyl6W2ddPXt9LHpbZ10uc3RhcnQ9cChkW2ddLnN0YXJ0KT9hWzBdLng6dS5pc1RpbWVTZXJpZXMoKT91LnBhcnNlRGF0ZShkW2ddLnN0YXJ0KTpkW2ddLnN0YXJ0LHpbZ10uZW5kPXAoZFtnXS5lbmQpP2FbYS5sZW5ndGgtMV0ueDp1LmlzVGltZVNlcmllcygpP3UucGFyc2VEYXRlKGRbZ10uZW5kKTpkW2ddLmVuZDtmb3Iocz12LmF4aXNfcm90YXRlZD9mdW5jdGlvbihhKXtyZXR1cm4gYyhhLnZhbHVlKX06ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYS54KX0sdD12LmF4aXNfcm90YXRlZD9mdW5jdGlvbihhKXtyZXR1cm4gYihhLngpfTpmdW5jdGlvbihhKXtyZXR1cm4gYyhhLnZhbHVlKX0saT11LmlzVGltZVNlcmllcygpP2Z1bmN0aW9uKGEsZCxlLGcpe3ZhciBoLGk9YS54LmdldFRpbWUoKSxqPWQueC1hLngsbD1uZXcgRGF0ZShpK2oqZSksbT1uZXcgRGF0ZShpK2oqKGUrZykpO3JldHVybiBoPXYuYXhpc19yb3RhdGVkP1tbYyhrKGUpKSxiKGwpXSxbYyhrKGUrZykpLGIobSldXTpbW2IobCksYyhrKGUpKV0sW2IobSksYyhrKGUrZykpXV0sZihoKX06ZnVuY3Rpb24oYSxkLGUsZyl7dmFyIGg7cmV0dXJuIGg9di5heGlzX3JvdGF0ZWQ/W1tjKGsoZSksITApLGIoaihlKSldLFtjKGsoZStnKSwhMCksYihqKGUrZykpXV06W1tiKGooZSksITApLGMoayhlKSldLFtiKGooZStnKSwhMCksYyhrKGUrZykpXV0sZihoKX0sZz0wO2c8YS5sZW5ndGg7ZysrKXtpZihwKHopfHwhZShhW2ddLngseikpeCs9XCIgXCIrcyhhW2ddKStcIiBcIit0KGFbZ10pO2Vsc2UgZm9yKGo9dS5nZXRTY2FsZShhW2ctMV0ueCt5LGFbZ10ueCt5LHUuaXNUaW1lU2VyaWVzKCkpLGs9dS5nZXRTY2FsZShhW2ctMV0udmFsdWUsYVtnXS52YWx1ZSksbD1iKGFbZ10ueCktYihhW2ctMV0ueCksbT1jKGFbZ10udmFsdWUpLWMoYVtnLTFdLnZhbHVlKSxuPU1hdGguc3FydChNYXRoLnBvdyhsLDIpK01hdGgucG93KG0sMikpLG89Mi9uLHI9MipvLGg9bzsxPj1oO2grPXIpeCs9aShhW2ctMV0sYVtnXSxoLG8pO3c9YVtnXS54fXJldHVybiB4fSxpLnVwZGF0ZUFyZWE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuZDM7Yi5tYWluQXJlYT1iLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wuYXJlYXMpLnNlbGVjdEFsbChcIi5cIitsLmFyZWEpLmRhdGEoYi5saW5lRGF0YS5iaW5kKGIpKSxiLm1haW5BcmVhLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIixiLmNsYXNzQXJlYS5iaW5kKGIpKS5zdHlsZShcImZpbGxcIixiLmNvbG9yKS5zdHlsZShcIm9wYWNpdHlcIixmdW5jdGlvbigpe3JldHVybiBiLm9yZ0FyZWFPcGFjaXR5PStjLnNlbGVjdCh0aGlzKS5zdHlsZShcIm9wYWNpdHlcIiksMH0pLGIubWFpbkFyZWEuc3R5bGUoXCJvcGFjaXR5XCIsYi5vcmdBcmVhT3BhY2l0eSksYi5tYWluQXJlYS5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwib3BhY2l0eVwiLDApLnJlbW92ZSgpfSxpLnJlZHJhd0FyZWE9ZnVuY3Rpb24oYSxiKXtyZXR1cm5bKGI/dGhpcy5tYWluQXJlYS50cmFuc2l0aW9uKCk6dGhpcy5tYWluQXJlYSkuYXR0cihcImRcIixhKS5zdHlsZShcImZpbGxcIix0aGlzLmNvbG9yKS5zdHlsZShcIm9wYWNpdHlcIix0aGlzLm9yZ0FyZWFPcGFjaXR5KV19LGkuZ2VuZXJhdGVEcmF3QXJlYT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmNvbmZpZyxlPWMuZDMuc3ZnLmFyZWEoKSxmPWMuZ2VuZXJhdGVHZXRBcmVhUG9pbnRzKGEsYiksZz1iP2MuZ2V0U3ViWVNjYWxlOmMuZ2V0WVNjYWxlLGg9ZnVuY3Rpb24oYSl7cmV0dXJuKGI/Yy5zdWJ4eDpjLnh4KS5jYWxsKGMsYSl9LGk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZC5kYXRhX2dyb3Vwcy5sZW5ndGg+MD9mKGEsYilbMF1bMV06Zy5jYWxsKGMsYS5pZCkoYy5nZXRBcmVhQmFzZVZhbHVlKGEuaWQpKX0saj1mdW5jdGlvbihhLGIpe3JldHVybiBkLmRhdGFfZ3JvdXBzLmxlbmd0aD4wP2YoYSxiKVsxXVsxXTpnLmNhbGwoYyxhLmlkKShhLnZhbHVlKX07cmV0dXJuIGU9ZC5heGlzX3JvdGF0ZWQ/ZS54MChpKS54MShqKS55KGgpOmUueChoKS55MChpKS55MShqKSxkLmxpbmVfY29ubmVjdE51bGx8fChlPWUuZGVmaW5lZChmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PWEudmFsdWV9KSksZnVuY3Rpb24oYSl7dmFyIGIsZj1kLmxpbmVfY29ubmVjdE51bGw/Yy5maWx0ZXJSZW1vdmVOdWxsKGEudmFsdWVzKTphLnZhbHVlcyxnPTAsaD0wO3JldHVybiBjLmlzQXJlYVR5cGUoYSk/KGMuaXNTdGVwVHlwZShhKSYmKGY9Yy5jb252ZXJ0VmFsdWVzVG9TdGVwKGYpKSxiPWUuaW50ZXJwb2xhdGUoYy5nZXRJbnRlcnBvbGF0ZShhKSkoZikpOihmWzBdJiYoZz1jLngoZlswXS54KSxoPWMuZ2V0WVNjYWxlKGEuaWQpKGZbMF0udmFsdWUpKSxiPWQuYXhpc19yb3RhdGVkP1wiTSBcIitoK1wiIFwiK2c6XCJNIFwiK2crXCIgXCIraCksYj9iOlwiTSAwIDBcIn19LGkuZ2V0QXJlYUJhc2VWYWx1ZT1mdW5jdGlvbigpe3JldHVybiAwfSxpLmdlbmVyYXRlR2V0QXJlYVBvaW50cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmNvbmZpZyxlPWEuX19tYXhfXysxLGY9Yy5nZXRTaGFwZVgoMCxlLGEsISFiKSxnPWMuZ2V0U2hhcGVZKCEhYiksaD1jLmdldFNoYXBlT2Zmc2V0KGMuaXNBcmVhVHlwZSxhLCEhYiksaT1iP2MuZ2V0U3ViWVNjYWxlOmMuZ2V0WVNjYWxlO3JldHVybiBmdW5jdGlvbihhLGIpe3ZhciBlPWkuY2FsbChjLGEuaWQpKDApLGo9aChhLGIpfHxlLGs9ZihhKSxsPWcoYSk7cmV0dXJuIGQuYXhpc19yb3RhdGVkJiYoMDxhLnZhbHVlJiZlPmx8fGEudmFsdWU8MCYmbD5lKSYmKGw9ZSksW1trLGpdLFtrLGwtKGUtaildLFtrLGwtKGUtaildLFtrLGpdXX19LGkudXBkYXRlQ2lyY2xlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLm1haW5DaXJjbGU9YS5tYWluLnNlbGVjdEFsbChcIi5cIitsLmNpcmNsZXMpLnNlbGVjdEFsbChcIi5cIitsLmNpcmNsZSkuZGF0YShhLmxpbmVPclNjYXR0ZXJEYXRhLmJpbmQoYSkpLGEubWFpbkNpcmNsZS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIixhLmNsYXNzQ2lyY2xlLmJpbmQoYSkpLmF0dHIoXCJyXCIsYS5wb2ludFIuYmluZChhKSkuc3R5bGUoXCJmaWxsXCIsYS5jb2xvciksYS5tYWluQ2lyY2xlLnN0eWxlKFwib3BhY2l0eVwiLGEuaW5pdGlhbE9wYWNpdHlGb3JDaXJjbGUuYmluZChhKSksYS5tYWluQ2lyY2xlLmV4aXQoKS5yZW1vdmUoKX0saS5yZWRyYXdDaXJjbGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zZWxlY3RlZENpcmNsZSk7cmV0dXJuWyhjP3RoaXMubWFpbkNpcmNsZS50cmFuc2l0aW9uKCk6dGhpcy5tYWluQ2lyY2xlKS5zdHlsZShcIm9wYWNpdHlcIix0aGlzLm9wYWNpdHlGb3JDaXJjbGUuYmluZCh0aGlzKSkuc3R5bGUoXCJmaWxsXCIsdGhpcy5jb2xvcikuYXR0cihcImN4XCIsYSkuYXR0cihcImN5XCIsYiksKGM/ZC50cmFuc2l0aW9uKCk6ZCkuYXR0cihcImN4XCIsYSkuYXR0cihcImN5XCIsYildfSxpLmNpcmNsZVg9ZnVuY3Rpb24oYSl7cmV0dXJuIGEueHx8MD09PWEueD90aGlzLngoYS54KTpudWxsfSxpLnVwZGF0ZUNpcmNsZVk9ZnVuY3Rpb24oKXt2YXIgYSxiLGM9dGhpcztjLmNvbmZpZy5kYXRhX2dyb3Vwcy5sZW5ndGg+MD8oYT1jLmdldFNoYXBlSW5kaWNlcyhjLmlzTGluZVR5cGUpLGI9Yy5nZW5lcmF0ZUdldExpbmVQb2ludHMoYSksYy5jaXJjbGVZPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYSxjKVswXVsxXX0pOmMuY2lyY2xlWT1mdW5jdGlvbihhKXtyZXR1cm4gYy5nZXRZU2NhbGUoYS5pZCkoYS52YWx1ZSl9fSxpLmdldENpcmNsZXM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3JldHVybihiP2MubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5jaXJjbGVzK2MuZ2V0VGFyZ2V0U2VsZWN0b3JTdWZmaXgoYikpOmMubWFpbikuc2VsZWN0QWxsKFwiLlwiK2wuY2lyY2xlKyhtKGEpP1wiLVwiK2E6XCJcIikpfSxpLmV4cGFuZENpcmNsZXM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1kLnBvaW50RXhwYW5kZWRSLmJpbmQoZCk7YyYmZC51bmV4cGFuZENpcmNsZXMoKSxkLmdldENpcmNsZXMoYSxiKS5jbGFzc2VkKGwuRVhQQU5ERUQsITApLmF0dHIoXCJyXCIsZSl9LGkudW5leHBhbmRDaXJjbGVzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnBvaW50Ui5iaW5kKGIpO2IuZ2V0Q2lyY2xlcyhhKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYi5kMy5zZWxlY3QodGhpcykuY2xhc3NlZChsLkVYUEFOREVEKX0pLmNsYXNzZWQobC5FWFBBTkRFRCwhMSkuYXR0cihcInJcIixjKX0saS5wb2ludFI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnO3JldHVybiBiLmlzU3RlcFR5cGUoYSk/MDpuKGMucG9pbnRfcik/Yy5wb2ludF9yKGEpOmMucG9pbnRfcn0saS5wb2ludEV4cGFuZGVkUj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7cmV0dXJuIGMucG9pbnRfZm9jdXNfZXhwYW5kX2VuYWJsZWQ/Yy5wb2ludF9mb2N1c19leHBhbmRfcj9jLnBvaW50X2ZvY3VzX2V4cGFuZF9yOjEuNzUqYi5wb2ludFIoYSk6Yi5wb2ludFIoYSl9LGkucG9pbnRTZWxlY3RSPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZztyZXR1cm4gYy5wb2ludF9zZWxlY3Rfcj9jLnBvaW50X3NlbGVjdF9yOjQqYi5wb2ludFIoYSl9LGkuaXNXaXRoaW5DaXJjbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmQzLGQ9Yy5tb3VzZShhKSxlPWMuc2VsZWN0KGEpLGY9K2UuYXR0cihcImN4XCIpLGc9K2UuYXR0cihcImN5XCIpO3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coZi1kWzBdLDIpK01hdGgucG93KGctZFsxXSwyKSk8Yn0saS5pc1dpdGhpblN0ZXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWF0aC5hYnMoYi10aGlzLmQzLm1vdXNlKGEpWzFdKTwzMH0saS5pbml0QmFyPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLm1haW4uc2VsZWN0KFwiLlwiK2wuY2hhcnQpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsbC5jaGFydEJhcnMpfSxpLnVwZGF0ZVRhcmdldHNGb3JCYXI9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMsZT1kLmNvbmZpZyxmPWQuY2xhc3NDaGFydEJhci5iaW5kKGQpLGc9ZC5jbGFzc0JhcnMuYmluZChkKSxoPWQuY2xhc3NGb2N1cy5iaW5kKGQpO2I9ZC5tYWluLnNlbGVjdChcIi5cIitsLmNoYXJ0QmFycykuc2VsZWN0QWxsKFwiLlwiK2wuY2hhcnRCYXIpLmRhdGEoYSkuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSkraChhKX0pLGM9Yi5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZikuc3R5bGUoXCJvcGFjaXR5XCIsMCkuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLFwibm9uZVwiKSxjLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZykuc3R5bGUoXCJjdXJzb3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZS5kYXRhX3NlbGVjdGlvbl9pc3NlbGVjdGFibGUoYSk/XCJwb2ludGVyXCI6bnVsbH0pfSxpLnVwZGF0ZUJhcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5iYXJEYXRhLmJpbmQoYiksZD1iLmNsYXNzQmFyLmJpbmQoYiksZT1iLmluaXRpYWxPcGFjaXR5LmJpbmQoYiksZj1mdW5jdGlvbihhKXtyZXR1cm4gYi5jb2xvcihhLmlkKX07Yi5tYWluQmFyPWIubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5iYXJzKS5zZWxlY3RBbGwoXCIuXCIrbC5iYXIpLmRhdGEoYyksYi5tYWluQmFyLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIixkKS5zdHlsZShcInN0cm9rZVwiLGYpLnN0eWxlKFwiZmlsbFwiLGYpLGIubWFpbkJhci5zdHlsZShcIm9wYWNpdHlcIixlKSxiLm1haW5CYXIuZXhpdCgpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihhKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5yZW1vdmUoKX0saS5yZWRyYXdCYXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm5bKGI/dGhpcy5tYWluQmFyLnRyYW5zaXRpb24oKTp0aGlzLm1haW5CYXIpLmF0dHIoXCJkXCIsYSkuc3R5bGUoXCJmaWxsXCIsdGhpcy5jb2xvcikuc3R5bGUoXCJvcGFjaXR5XCIsMSldfSxpLmdldEJhclc9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jb25maWcsZT1cIm51bWJlclwiPT10eXBlb2YgZC5iYXJfd2lkdGg/ZC5iYXJfd2lkdGg6Yj9hLnRpY2tJbnRlcnZhbCgpKmQuYmFyX3dpZHRoX3JhdGlvL2I6MDtyZXR1cm4gZC5iYXJfd2lkdGhfbWF4JiZlPmQuYmFyX3dpZHRoX21heD9kLmJhcl93aWR0aF9tYXg6ZX0saS5nZXRCYXJzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4oYj9jLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wuYmFycytjLmdldFRhcmdldFNlbGVjdG9yU3VmZml4KGIpKTpjLm1haW4pLnNlbGVjdEFsbChcIi5cIitsLmJhcisobShhKT9cIi1cIithOlwiXCIpKX0saS5leHBhbmRCYXJzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzO2MmJmQudW5leHBhbmRCYXJzKCksZC5nZXRCYXJzKGEsYikuY2xhc3NlZChsLkVYUEFOREVELCEwKX0saS51bmV4cGFuZEJhcnM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmdldEJhcnMoYSkuY2xhc3NlZChsLkVYUEFOREVELCExKX0saS5nZW5lcmF0ZURyYXdCYXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jb25maWcsZT1jLmdlbmVyYXRlR2V0QmFyUG9pbnRzKGEsYik7cmV0dXJuIGZ1bmN0aW9uKGEsYil7dmFyIGM9ZShhLGIpLGY9ZC5heGlzX3JvdGF0ZWQ/MTowLGc9ZC5heGlzX3JvdGF0ZWQ/MDoxLGg9XCJNIFwiK2NbMF1bZl0rXCIsXCIrY1swXVtnXStcIiBMXCIrY1sxXVtmXStcIixcIitjWzFdW2ddK1wiIExcIitjWzJdW2ZdK1wiLFwiK2NbMl1bZ10rXCIgTFwiK2NbM11bZl0rXCIsXCIrY1szXVtnXStcIiB6XCI7cmV0dXJuIGh9fSxpLmdlbmVyYXRlR2V0QmFyUG9pbnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWI/Yy5zdWJYQXhpczpjLnhBeGlzLGU9YS5fX21heF9fKzEsZj1jLmdldEJhclcoZCxlKSxnPWMuZ2V0U2hhcGVYKGYsZSxhLCEhYiksaD1jLmdldFNoYXBlWSghIWIpLGk9Yy5nZXRTaGFwZU9mZnNldChjLmlzQmFyVHlwZSxhLCEhYiksaj1iP2MuZ2V0U3ViWVNjYWxlOmMuZ2V0WVNjYWxlO1xucmV0dXJuIGZ1bmN0aW9uKGEsYil7dmFyIGQ9ai5jYWxsKGMsYS5pZCkoMCksZT1pKGEsYil8fGQsaz1nKGEpLGw9aChhKTtyZXR1cm4gYy5jb25maWcuYXhpc19yb3RhdGVkJiYoMDxhLnZhbHVlJiZkPmx8fGEudmFsdWU8MCYmbD5kKSYmKGw9ZCksW1trLGVdLFtrLGwtKGQtZSldLFtrK2YsbC0oZC1lKV0sW2srZixlXV19fSxpLmlzV2l0aGluQmFyPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZDMubW91c2UoYSksYz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQ9YS5wYXRoU2VnTGlzdC5nZXRJdGVtKDApLGU9YS5wYXRoU2VnTGlzdC5nZXRJdGVtKDEpLGY9TWF0aC5taW4oZC54LGUueCksZz1NYXRoLm1pbihkLnksZS55KSxoPWMud2lkdGgsaT1jLmhlaWdodCxqPTIsaz1mLWosbD1mK2graixtPWcraStqLG49Zy1qO3JldHVybiBrPGJbMF0mJmJbMF08bCYmbjxiWzFdJiZiWzFdPG19LGkuaW5pdFRleHQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EubWFpbi5zZWxlY3QoXCIuXCIrbC5jaGFydCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0VGV4dHMpLGEubWFpblRleHQ9YS5kMy5zZWxlY3RBbGwoW10pfSxpLnVwZGF0ZVRhcmdldHNGb3JUZXh0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLGU9ZC5jbGFzc0NoYXJ0VGV4dC5iaW5kKGQpLGY9ZC5jbGFzc1RleHRzLmJpbmQoZCksZz1kLmNsYXNzRm9jdXMuYmluZChkKTtiPWQubWFpbi5zZWxlY3QoXCIuXCIrbC5jaGFydFRleHRzKS5zZWxlY3RBbGwoXCIuXCIrbC5jaGFydFRleHQpLmRhdGEoYSkuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSkrZyhhKX0pLGM9Yi5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZSkuc3R5bGUoXCJvcGFjaXR5XCIsMCkuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLFwibm9uZVwiKSxjLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZil9LGkudXBkYXRlVGV4dD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWcsZD1iLmJhck9yTGluZURhdGEuYmluZChiKSxlPWIuY2xhc3NUZXh0LmJpbmQoYik7Yi5tYWluVGV4dD1iLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wudGV4dHMpLnNlbGVjdEFsbChcIi5cIitsLnRleHQpLmRhdGEoZCksYi5tYWluVGV4dC5lbnRlcigpLmFwcGVuZChcInRleHRcIikuYXR0cihcImNsYXNzXCIsZSkuYXR0cihcInRleHQtYW5jaG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGMuYXhpc19yb3RhdGVkP2EudmFsdWU8MD9cImVuZFwiOlwic3RhcnRcIjpcIm1pZGRsZVwifSkuc3R5bGUoXCJzdHJva2VcIixcIm5vbmVcIikuc3R5bGUoXCJmaWxsXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGIuY29sb3IoYSl9KS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLDApLGIubWFpblRleHQudGV4dChmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGIuZGF0YUxhYmVsRm9ybWF0KGEuaWQpKGEudmFsdWUsYS5pZCxjLGQpfSksYi5tYWluVGV4dC5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsMCkucmVtb3ZlKCl9LGkucmVkcmF3VGV4dD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5bKGQ/dGhpcy5tYWluVGV4dC50cmFuc2l0aW9uKCk6dGhpcy5tYWluVGV4dCkuYXR0cihcInhcIixhKS5hdHRyKFwieVwiLGIpLnN0eWxlKFwiZmlsbFwiLHRoaXMuY29sb3IpLnN0eWxlKFwiZmlsbC1vcGFjaXR5XCIsYz8wOnRoaXMub3BhY2l0eUZvclRleHQuYmluZCh0aGlzKSldfSxpLmdldFRleHRSZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLmQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJjM1wiLCEwKSxlPWQuYXBwZW5kKFwic3ZnXCIpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLnN0eWxlKFwicG9zaXRpb25cIixcImZpeGVkXCIpLnN0eWxlKFwidG9wXCIsMCkuc3R5bGUoXCJsZWZ0XCIsMCk7cmV0dXJuIGUuc2VsZWN0QWxsKFwiLmR1bW15XCIpLmRhdGEoW2FdKS5lbnRlcigpLmFwcGVuZChcInRleHRcIikuY2xhc3NlZChiP2I6XCJcIiwhMCkudGV4dChhKS5lYWNoKGZ1bmN0aW9uKCl7Yz10aGlzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfSksZC5yZW1vdmUoKSxjfSxpLmdlbmVyYXRlWFlGb3JUZXh0PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1lLmdlbmVyYXRlR2V0QXJlYVBvaW50cyhhLCExKSxnPWUuZ2VuZXJhdGVHZXRCYXJQb2ludHMoYiwhMSksaD1lLmdlbmVyYXRlR2V0TGluZVBvaW50cyhjLCExKSxpPWQ/ZS5nZXRYRm9yVGV4dDplLmdldFlGb3JUZXh0O3JldHVybiBmdW5jdGlvbihhLGIpe3ZhciBjPWUuaXNBcmVhVHlwZShhKT9mOmUuaXNCYXJUeXBlKGEpP2c6aDtyZXR1cm4gaS5jYWxsKGUsYyhhLGIpLGEsdGhpcyl9fSxpLmdldFhGb3JUZXh0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9dGhpcyxnPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGYuY29uZmlnLmF4aXNfcm90YXRlZD8oZT1mLmlzQmFyVHlwZShiKT80OjYsZD1hWzJdWzFdK2UqKGIudmFsdWU8MD8tMToxKSk6ZD1mLmhhc1R5cGUoXCJiYXJcIik/KGFbMl1bMF0rYVswXVswXSkvMjphWzBdWzBdLG51bGw9PT1iLnZhbHVlJiYoZD5mLndpZHRoP2Q9Zi53aWR0aC1nLndpZHRoOjA+ZCYmKGQ9NCkpLGR9LGkuZ2V0WUZvclRleHQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpcyxmPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIGUuY29uZmlnLmF4aXNfcm90YXRlZD9kPShhWzBdWzBdK2FbMl1bMF0rLjYqZi5oZWlnaHQpLzI6KGQ9YVsyXVsxXSxiLnZhbHVlPDA/KGQrPWYuaGVpZ2h0LGUuaXNCYXJUeXBlKGIpJiZlLmlzU2FmYXJpKCk/ZC09MzohZS5pc0JhclR5cGUoYikmJmUuaXNDaHJvbWUoKSYmKGQrPTMpKTpkKz1lLmlzQmFyVHlwZShiKT8tMzotNiksbnVsbCE9PWIudmFsdWV8fGUuY29uZmlnLmF4aXNfcm90YXRlZHx8KGQ8Zi5oZWlnaHQ/ZD1mLmhlaWdodDpkPnRoaXMuaGVpZ2h0JiYoZD10aGlzLmhlaWdodC00KSksZH0saS5zZXRUYXJnZXRUeXBlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY29uZmlnO2MubWFwVG9UYXJnZXRJZHMoYSkuZm9yRWFjaChmdW5jdGlvbihhKXtjLndpdGhvdXRGYWRlSW5bYV09Yj09PWQuZGF0YV90eXBlc1thXSxkLmRhdGFfdHlwZXNbYV09Yn0pLGF8fChkLmRhdGFfdHlwZT1iKX0saS5oYXNUeXBlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY29uZmlnLmRhdGFfdHlwZXMsZT0hMTtyZXR1cm4gYj1ifHxjLmRhdGEudGFyZ2V0cyxiJiZiLmxlbmd0aD9iLmZvckVhY2goZnVuY3Rpb24oYil7dmFyIGM9ZFtiLmlkXTsoYyYmYy5pbmRleE9mKGEpPj0wfHwhYyYmXCJsaW5lXCI9PT1hKSYmKGU9ITApfSk6T2JqZWN0LmtleXMoZCkubGVuZ3RoP09iamVjdC5rZXlzKGQpLmZvckVhY2goZnVuY3Rpb24oYil7ZFtiXT09PWEmJihlPSEwKX0pOmU9Yy5jb25maWcuZGF0YV90eXBlPT09YSxlfSxpLmhhc0FyY1R5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaGFzVHlwZShcInBpZVwiLGEpfHx0aGlzLmhhc1R5cGUoXCJkb251dFwiLGEpfHx0aGlzLmhhc1R5cGUoXCJnYXVnZVwiLGEpfSxpLmlzTGluZVR5cGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb25maWcsYz1vKGEpP2E6YS5pZDtyZXR1cm4hYi5kYXRhX3R5cGVzW2NdfHxbXCJsaW5lXCIsXCJzcGxpbmVcIixcImFyZWFcIixcImFyZWEtc3BsaW5lXCIsXCJzdGVwXCIsXCJhcmVhLXN0ZXBcIl0uaW5kZXhPZihiLmRhdGFfdHlwZXNbY10pPj0wfSxpLmlzU3RlcFR5cGU9ZnVuY3Rpb24oYSl7dmFyIGI9byhhKT9hOmEuaWQ7cmV0dXJuW1wic3RlcFwiLFwiYXJlYS1zdGVwXCJdLmluZGV4T2YodGhpcy5jb25maWcuZGF0YV90eXBlc1tiXSk+PTB9LGkuaXNTcGxpbmVUeXBlPWZ1bmN0aW9uKGEpe3ZhciBiPW8oYSk/YTphLmlkO3JldHVybltcInNwbGluZVwiLFwiYXJlYS1zcGxpbmVcIl0uaW5kZXhPZih0aGlzLmNvbmZpZy5kYXRhX3R5cGVzW2JdKT49MH0saS5pc0FyZWFUeXBlPWZ1bmN0aW9uKGEpe3ZhciBiPW8oYSk/YTphLmlkO3JldHVybltcImFyZWFcIixcImFyZWEtc3BsaW5lXCIsXCJhcmVhLXN0ZXBcIl0uaW5kZXhPZih0aGlzLmNvbmZpZy5kYXRhX3R5cGVzW2JdKT49MH0saS5pc0JhclR5cGU9ZnVuY3Rpb24oYSl7dmFyIGI9byhhKT9hOmEuaWQ7cmV0dXJuXCJiYXJcIj09PXRoaXMuY29uZmlnLmRhdGFfdHlwZXNbYl19LGkuaXNTY2F0dGVyVHlwZT1mdW5jdGlvbihhKXt2YXIgYj1vKGEpP2E6YS5pZDtyZXR1cm5cInNjYXR0ZXJcIj09PXRoaXMuY29uZmlnLmRhdGFfdHlwZXNbYl19LGkuaXNQaWVUeXBlPWZ1bmN0aW9uKGEpe3ZhciBiPW8oYSk/YTphLmlkO3JldHVyblwicGllXCI9PT10aGlzLmNvbmZpZy5kYXRhX3R5cGVzW2JdfSxpLmlzR2F1Z2VUeXBlPWZ1bmN0aW9uKGEpe3ZhciBiPW8oYSk/YTphLmlkO3JldHVyblwiZ2F1Z2VcIj09PXRoaXMuY29uZmlnLmRhdGFfdHlwZXNbYl19LGkuaXNEb251dFR5cGU9ZnVuY3Rpb24oYSl7dmFyIGI9byhhKT9hOmEuaWQ7cmV0dXJuXCJkb251dFwiPT09dGhpcy5jb25maWcuZGF0YV90eXBlc1tiXX0saS5pc0FyY1R5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNQaWVUeXBlKGEpfHx0aGlzLmlzRG9udXRUeXBlKGEpfHx0aGlzLmlzR2F1Z2VUeXBlKGEpfSxpLmxpbmVEYXRhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzTGluZVR5cGUoYSk/W2FdOltdfSxpLmFyY0RhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNBcmNUeXBlKGEuZGF0YSk/W2FdOltdfSxpLmJhckRhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNCYXJUeXBlKGEpP2EudmFsdWVzOltdfSxpLmxpbmVPclNjYXR0ZXJEYXRhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzTGluZVR5cGUoYSl8fHRoaXMuaXNTY2F0dGVyVHlwZShhKT9hLnZhbHVlczpbXX0saS5iYXJPckxpbmVEYXRhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzQmFyVHlwZShhKXx8dGhpcy5pc0xpbmVUeXBlKGEpP2EudmFsdWVzOltdfSxpLmluaXRHcmlkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGM9YS5kMzthLmdyaWQ9YS5tYWluLmFwcGVuZChcImdcIikuYXR0cihcImNsaXAtcGF0aFwiLGEuY2xpcFBhdGhGb3JHcmlkKS5hdHRyKFwiY2xhc3NcIixsLmdyaWQpLGIuZ3JpZF94X3Nob3cmJmEuZ3JpZC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwueGdyaWRzKSxiLmdyaWRfeV9zaG93JiZhLmdyaWQuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLnlncmlkcyksYi5ncmlkX2ZvY3VzX3Nob3cmJmEuZ3JpZC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwueGdyaWRGb2N1cykuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIixsLnhncmlkRm9jdXMpLGEueGdyaWQ9Yy5zZWxlY3RBbGwoW10pLGIuZ3JpZF9saW5lc19mcm9udHx8YS5pbml0R3JpZExpbmVzKCl9LGkuaW5pdEdyaWRMaW5lcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmQzO2EuZ3JpZExpbmVzPWEubWFpbi5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGlwLXBhdGhcIixhLmNsaXBQYXRoRm9yR3JpZCkuYXR0cihcImNsYXNzXCIsbC5ncmlkK1wiIFwiK2wuZ3JpZExpbmVzKSxhLmdyaWRMaW5lcy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwueGdyaWRMaW5lcyksYS5ncmlkTGluZXMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLnlncmlkTGluZXMpLGEueGdyaWRMaW5lcz1iLnNlbGVjdEFsbChbXSl9LGkudXBkYXRlWEdyaWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnLGQ9Yi5kMyxlPWIuZ2VuZXJhdGVHcmlkRGF0YShjLmdyaWRfeF90eXBlLGIueCksZj1iLmlzQ2F0ZWdvcml6ZWQoKT9iLnhBeGlzLnRpY2tPZmZzZXQoKTowO2IueGdyaWRBdHRyPWMuYXhpc19yb3RhdGVkP3t4MTowLHgyOmIud2lkdGgseTE6ZnVuY3Rpb24oYSl7cmV0dXJuIGIueChhKS1mfSx5MjpmdW5jdGlvbihhKXtyZXR1cm4gYi54KGEpLWZ9fTp7eDE6ZnVuY3Rpb24oYSl7cmV0dXJuIGIueChhKStmfSx4MjpmdW5jdGlvbihhKXtyZXR1cm4gYi54KGEpK2Z9LHkxOjAseTI6Yi5oZWlnaHR9LGIueGdyaWQ9Yi5tYWluLnNlbGVjdChcIi5cIitsLnhncmlkcykuc2VsZWN0QWxsKFwiLlwiK2wueGdyaWQpLmRhdGEoZSksYi54Z3JpZC5lbnRlcigpLmFwcGVuZChcImxpbmVcIikuYXR0cihcImNsYXNzXCIsbC54Z3JpZCksYXx8Yi54Z3JpZC5hdHRyKGIueGdyaWRBdHRyKS5zdHlsZShcIm9wYWNpdHlcIixmdW5jdGlvbigpe3JldHVybitkLnNlbGVjdCh0aGlzKS5hdHRyKGMuYXhpc19yb3RhdGVkP1wieTFcIjpcIngxXCIpPT09KGMuYXhpc19yb3RhdGVkP2IuaGVpZ2h0OjApPzA6MX0pLGIueGdyaWQuZXhpdCgpLnJlbW92ZSgpfSxpLnVwZGF0ZVlHcmlkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGM9YS55QXhpcy50aWNrVmFsdWVzKCl8fGEueS50aWNrcyhiLmdyaWRfeV90aWNrcyk7YS55Z3JpZD1hLm1haW4uc2VsZWN0KFwiLlwiK2wueWdyaWRzKS5zZWxlY3RBbGwoXCIuXCIrbC55Z3JpZCkuZGF0YShjKSxhLnlncmlkLmVudGVyKCkuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIixsLnlncmlkKSxhLnlncmlkLmF0dHIoXCJ4MVwiLGIuYXhpc19yb3RhdGVkP2EueTowKS5hdHRyKFwieDJcIixiLmF4aXNfcm90YXRlZD9hLnk6YS53aWR0aCkuYXR0cihcInkxXCIsYi5heGlzX3JvdGF0ZWQ/MDphLnkpLmF0dHIoXCJ5MlwiLGIuYXhpc19yb3RhdGVkP2EuaGVpZ2h0OmEueSksYS55Z3JpZC5leGl0KCkucmVtb3ZlKCksYS5zbW9vdGhMaW5lcyhhLnlncmlkLFwiZ3JpZFwiKX0saS5ncmlkVGV4dEFuY2hvcj1mdW5jdGlvbihhKXtyZXR1cm4gYS5wb3NpdGlvbj9hLnBvc2l0aW9uOlwiZW5kXCJ9LGkuZ3JpZFRleHREeD1mdW5jdGlvbihhKXtyZXR1cm5cInN0YXJ0XCI9PT1hLnBvc2l0aW9uPzQ6XCJtaWRkbGVcIj09PWEucG9zaXRpb24/MDotNH0saS54R3JpZFRleHRYPWZ1bmN0aW9uKGEpe3JldHVyblwic3RhcnRcIj09PWEucG9zaXRpb24/LXRoaXMuaGVpZ2h0OlwibWlkZGxlXCI9PT1hLnBvc2l0aW9uPy10aGlzLmhlaWdodC8yOjB9LGkueUdyaWRUZXh0WD1mdW5jdGlvbihhKXtyZXR1cm5cInN0YXJ0XCI9PT1hLnBvc2l0aW9uPzA6XCJtaWRkbGVcIj09PWEucG9zaXRpb24/dGhpcy53aWR0aC8yOnRoaXMud2lkdGh9LGkudXBkYXRlR3JpZD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzLGY9ZS5tYWluLGc9ZS5jb25maWc7ZS5ncmlkLnN0eWxlKFwidmlzaWJpbGl0eVwiLGUuaGFzQXJjVHlwZSgpP1wiaGlkZGVuXCI6XCJ2aXNpYmxlXCIpLGYuc2VsZWN0KFwibGluZS5cIitsLnhncmlkRm9jdXMpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLGcuZ3JpZF94X3Nob3cmJmUudXBkYXRlWEdyaWQoKSxlLnhncmlkTGluZXM9Zi5zZWxlY3QoXCIuXCIrbC54Z3JpZExpbmVzKS5zZWxlY3RBbGwoXCIuXCIrbC54Z3JpZExpbmUpLmRhdGEoZy5ncmlkX3hfbGluZXMpLGI9ZS54Z3JpZExpbmVzLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihhKXtyZXR1cm4gbC54Z3JpZExpbmUrKGFbXCJjbGFzc1wiXT9cIiBcIithW1wiY2xhc3NcIl06XCJcIil9KSxiLmFwcGVuZChcImxpbmVcIikuc3R5bGUoXCJvcGFjaXR5XCIsMCksYi5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLGUuZ3JpZFRleHRBbmNob3IpLmF0dHIoXCJ0cmFuc2Zvcm1cIixnLmF4aXNfcm90YXRlZD9cIlwiOlwicm90YXRlKC05MClcIikuYXR0cihcImR4XCIsZS5ncmlkVGV4dER4KS5hdHRyKFwiZHlcIiwtNSkuc3R5bGUoXCJvcGFjaXR5XCIsMCksZS54Z3JpZExpbmVzLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oYSkuc3R5bGUoXCJvcGFjaXR5XCIsMCkucmVtb3ZlKCksZy5ncmlkX3lfc2hvdyYmZS51cGRhdGVZR3JpZCgpLGUueWdyaWRMaW5lcz1mLnNlbGVjdChcIi5cIitsLnlncmlkTGluZXMpLnNlbGVjdEFsbChcIi5cIitsLnlncmlkTGluZSkuZGF0YShnLmdyaWRfeV9saW5lcyksYz1lLnlncmlkTGluZXMuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBsLnlncmlkTGluZSsoYVtcImNsYXNzXCJdP1wiIFwiK2FbXCJjbGFzc1wiXTpcIlwiKX0pLGMuYXBwZW5kKFwibGluZVwiKS5zdHlsZShcIm9wYWNpdHlcIiwwKSxjLmFwcGVuZChcInRleHRcIikuYXR0cihcInRleHQtYW5jaG9yXCIsZS5ncmlkVGV4dEFuY2hvcikuYXR0cihcInRyYW5zZm9ybVwiLGcuYXhpc19yb3RhdGVkP1wicm90YXRlKC05MClcIjpcIlwiKS5hdHRyKFwiZHhcIixlLmdyaWRUZXh0RHgpLmF0dHIoXCJkeVwiLC01KS5zdHlsZShcIm9wYWNpdHlcIiwwKSxkPWUueXYuYmluZChlKSxlLnlncmlkTGluZXMuc2VsZWN0KFwibGluZVwiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oYSkuYXR0cihcIngxXCIsZy5heGlzX3JvdGF0ZWQ/ZDowKS5hdHRyKFwieDJcIixnLmF4aXNfcm90YXRlZD9kOmUud2lkdGgpLmF0dHIoXCJ5MVwiLGcuYXhpc19yb3RhdGVkPzA6ZCkuYXR0cihcInkyXCIsZy5heGlzX3JvdGF0ZWQ/ZS5oZWlnaHQ6ZCkuc3R5bGUoXCJvcGFjaXR5XCIsMSksZS55Z3JpZExpbmVzLnNlbGVjdChcInRleHRcIikudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLmF0dHIoXCJ4XCIsZy5heGlzX3JvdGF0ZWQ/ZS54R3JpZFRleHRYLmJpbmQoZSk6ZS55R3JpZFRleHRYLmJpbmQoZSkpLmF0dHIoXCJ5XCIsZCkudGV4dChmdW5jdGlvbihhKXtyZXR1cm4gYS50ZXh0fSkuc3R5bGUoXCJvcGFjaXR5XCIsMSksZS55Z3JpZExpbmVzLmV4aXQoKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oYSkuc3R5bGUoXCJvcGFjaXR5XCIsMCkucmVtb3ZlKCl9LGkucmVkcmF3R3JpZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWcsZD1iLnh2LmJpbmQoYiksZT1iLnhncmlkTGluZXMuc2VsZWN0KFwibGluZVwiKSxmPWIueGdyaWRMaW5lcy5zZWxlY3QoXCJ0ZXh0XCIpO3JldHVyblsoYT9lLnRyYW5zaXRpb24oKTplKS5hdHRyKFwieDFcIixjLmF4aXNfcm90YXRlZD8wOmQpLmF0dHIoXCJ4MlwiLGMuYXhpc19yb3RhdGVkP2Iud2lkdGg6ZCkuYXR0cihcInkxXCIsYy5heGlzX3JvdGF0ZWQ/ZDowKS5hdHRyKFwieTJcIixjLmF4aXNfcm90YXRlZD9kOmIuaGVpZ2h0KS5zdHlsZShcIm9wYWNpdHlcIiwxKSwoYT9mLnRyYW5zaXRpb24oKTpmKS5hdHRyKFwieFwiLGMuYXhpc19yb3RhdGVkP2IueUdyaWRUZXh0WC5iaW5kKGIpOmIueEdyaWRUZXh0WC5iaW5kKGIpKS5hdHRyKFwieVwiLGQpLnRleHQoZnVuY3Rpb24oYSl7cmV0dXJuIGEudGV4dH0pLnN0eWxlKFwib3BhY2l0eVwiLDEpXX0saS5zaG93WEdyaWRGb2N1cz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWcsZD1hLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYSYmbShhLnZhbHVlKX0pLGU9Yi5tYWluLnNlbGVjdEFsbChcImxpbmUuXCIrbC54Z3JpZEZvY3VzKSxmPWIueHguYmluZChiKTtjLnRvb2x0aXBfc2hvdyYmKGIuaGFzVHlwZShcInNjYXR0ZXJcIil8fGIuaGFzQXJjVHlwZSgpfHwoZS5zdHlsZShcInZpc2liaWxpdHlcIixcInZpc2libGVcIikuZGF0YShbZFswXV0pLmF0dHIoYy5heGlzX3JvdGF0ZWQ/XCJ5MVwiOlwieDFcIixmKS5hdHRyKGMuYXhpc19yb3RhdGVkP1wieTJcIjpcIngyXCIsZiksYi5zbW9vdGhMaW5lcyhlLFwiZ3JpZFwiKSkpfSxpLmhpZGVYR3JpZEZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5tYWluLnNlbGVjdChcImxpbmUuXCIrbC54Z3JpZEZvY3VzKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKX0saS51cGRhdGVYZ3JpZEZvY3VzPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnO2EubWFpbi5zZWxlY3QoXCJsaW5lLlwiK2wueGdyaWRGb2N1cykuYXR0cihcIngxXCIsYi5heGlzX3JvdGF0ZWQ/MDotMTApLmF0dHIoXCJ4MlwiLGIuYXhpc19yb3RhdGVkP2Eud2lkdGg6LTEwKS5hdHRyKFwieTFcIixiLmF4aXNfcm90YXRlZD8tMTA6MCkuYXR0cihcInkyXCIsYi5heGlzX3JvdGF0ZWQ/LTEwOmEuaGVpZ2h0KX0saS5nZW5lcmF0ZUdyaWREYXRhPWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz10aGlzLGg9W10saT1nLm1haW4uc2VsZWN0KFwiLlwiK2wuYXhpc1gpLnNlbGVjdEFsbChcIi50aWNrXCIpLnNpemUoKTtpZihcInllYXJcIj09PWEpZm9yKGM9Zy5nZXRYRG9tYWluKCksZD1jWzBdLmdldEZ1bGxZZWFyKCksZT1jWzFdLmdldEZ1bGxZZWFyKCksZj1kO2U+PWY7ZisrKWgucHVzaChuZXcgRGF0ZShmK1wiLTAxLTAxIDAwOjAwOjAwXCIpKTtlbHNlIGg9Yi50aWNrcygxMCksaC5sZW5ndGg+aSYmKGg9aC5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuKFwiXCIrYSkuaW5kZXhPZihcIi5cIik8MH0pKTtyZXR1cm4gaH0saS5nZXRHcmlkRmlsdGVyVG9SZW1vdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE/ZnVuY3Rpb24oYil7dmFyIGM9ITE7cmV0dXJuW10uY29uY2F0KGEpLmZvckVhY2goZnVuY3Rpb24oYSl7KFwidmFsdWVcImluIGEmJmIudmFsdWU9PT1hLnZhbHVlfHxcImNsYXNzXCJpbiBhJiZiW1wiY2xhc3NcIl09PT1hW1wiY2xhc3NcIl0pJiYoYz0hMCl9KSxjfTpmdW5jdGlvbigpe3JldHVybiEwfX0saS5yZW1vdmVHcmlkTGluZXM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jb25maWcsZT1jLmdldEdyaWRGaWx0ZXJUb1JlbW92ZShhKSxmPWZ1bmN0aW9uKGEpe3JldHVybiFlKGEpfSxnPWI/bC54Z3JpZExpbmVzOmwueWdyaWRMaW5lcyxoPWI/bC54Z3JpZExpbmU6bC55Z3JpZExpbmU7Yy5tYWluLnNlbGVjdChcIi5cIitnKS5zZWxlY3RBbGwoXCIuXCIraCkuZmlsdGVyKGUpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihkLnRyYW5zaXRpb25fZHVyYXRpb24pLnN0eWxlKFwib3BhY2l0eVwiLDApLnJlbW92ZSgpLGI/ZC5ncmlkX3hfbGluZXM9ZC5ncmlkX3hfbGluZXMuZmlsdGVyKGYpOmQuZ3JpZF95X2xpbmVzPWQuZ3JpZF95X2xpbmVzLmZpbHRlcihmKX0saS5pbml0VG9vbHRpcD1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcyxjPWIuY29uZmlnO2lmKGIudG9vbHRpcD1iLnNlbGVjdENoYXJ0LnN0eWxlKFwicG9zaXRpb25cIixcInJlbGF0aXZlXCIpLmFwcGVuZChcImRpdlwiKS5hdHRyKFwiY2xhc3NcIixsLnRvb2x0aXBDb250YWluZXIpLnN0eWxlKFwicG9zaXRpb25cIixcImFic29sdXRlXCIpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIikuc3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpLGMudG9vbHRpcF9pbml0X3Nob3cpe2lmKGIuaXNUaW1lU2VyaWVzKCkmJm8oYy50b29sdGlwX2luaXRfeCkpe2ZvcihjLnRvb2x0aXBfaW5pdF94PWIucGFyc2VEYXRlKGMudG9vbHRpcF9pbml0X3gpLGE9MDthPGIuZGF0YS50YXJnZXRzWzBdLnZhbHVlcy5sZW5ndGgmJmIuZGF0YS50YXJnZXRzWzBdLnZhbHVlc1thXS54LWMudG9vbHRpcF9pbml0X3ghPT0wO2ErKyk7Yy50b29sdGlwX2luaXRfeD1hfWIudG9vbHRpcC5odG1sKGMudG9vbHRpcF9jb250ZW50cy5jYWxsKGIsYi5kYXRhLnRhcmdldHMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBiLmFkZE5hbWUoYS52YWx1ZXNbYy50b29sdGlwX2luaXRfeF0pfSksYi5heGlzLmdldFhBeGlzVGlja0Zvcm1hdCgpLGIuZ2V0WUZvcm1hdChiLmhhc0FyY1R5cGUoKSksYi5jb2xvcikpLGIudG9vbHRpcC5zdHlsZShcInRvcFwiLGMudG9vbHRpcF9pbml0X3Bvc2l0aW9uLnRvcCkuc3R5bGUoXCJsZWZ0XCIsYy50b29sdGlwX2luaXRfcG9zaXRpb24ubGVmdCkuc3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKX19LGkuZ2V0VG9vbHRpcENvbnRlbnQ9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqLGs9dGhpcyxtPWsuY29uZmlnLG49bS50b29sdGlwX2Zvcm1hdF90aXRsZXx8YixvPW0udG9vbHRpcF9mb3JtYXRfbmFtZXx8ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHA9bS50b29sdGlwX2Zvcm1hdF92YWx1ZXx8Yztmb3IoZj0wO2Y8YS5sZW5ndGg7ZisrKWFbZl0mJihhW2ZdLnZhbHVlfHwwPT09YVtmXS52YWx1ZSkmJihlfHwoZz1uP24oYVtmXS54KTphW2ZdLngsZT1cIjx0YWJsZSBjbGFzcz0nXCIrbC50b29sdGlwK1wiJz5cIisoZ3x8MD09PWc/XCI8dHI+PHRoIGNvbHNwYW49JzInPlwiK2crXCI8L3RoPjwvdHI+XCI6XCJcIikpLGg9cChhW2ZdLnZhbHVlLGFbZl0ucmF0aW8sYVtmXS5pZCxhW2ZdLmluZGV4KSx2b2lkIDAhPT1oJiYoaT1vKGFbZl0ubmFtZSxhW2ZdLnJhdGlvLGFbZl0uaWQsYVtmXS5pbmRleCksaj1rLmxldmVsQ29sb3I/ay5sZXZlbENvbG9yKGFbZl0udmFsdWUpOmQoYVtmXS5pZCksZSs9XCI8dHIgY2xhc3M9J1wiK2wudG9vbHRpcE5hbWUrXCItXCIrYVtmXS5pZCtcIic+XCIsZSs9XCI8dGQgY2xhc3M9J25hbWUnPjxzcGFuIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOlwiK2orXCInPjwvc3Bhbj5cIitpK1wiPC90ZD5cIixlKz1cIjx0ZCBjbGFzcz0ndmFsdWUnPlwiK2grXCI8L3RkPlwiLGUrPVwiPC90cj5cIikpO3JldHVybiBlK1wiPC90YWJsZT5cIn0saS50b29sdGlwUG9zaXRpb249ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXRoaXMsaz1qLmNvbmZpZyxsPWouZDMsbT1qLmhhc0FyY1R5cGUoKSxuPWwubW91c2UoZCk7cmV0dXJuIG0/KGY9KGoud2lkdGgtKGouaXNMZWdlbmRSaWdodD9qLmdldExlZ2VuZFdpZHRoKCk6MCkpLzIrblswXSxoPWouaGVpZ2h0LzIrblsxXSsyMCk6KGU9ai5nZXRTdmdMZWZ0KCEwKSxrLmF4aXNfcm90YXRlZD8oZj1lK25bMF0rMTAwLGc9ZitiLGk9ai5jdXJyZW50V2lkdGgtai5nZXRDdXJyZW50UGFkZGluZ1JpZ2h0KCksaD1qLngoYVswXS54KSsyMCk6KGY9ZStqLmdldEN1cnJlbnRQYWRkaW5nTGVmdCghMCkrai54KGFbMF0ueCkrMjAsZz1mK2IsaT1lK2ouY3VycmVudFdpZHRoLWouZ2V0Q3VycmVudFBhZGRpbmdSaWdodCgpLGg9blsxXSsxNSksZz5pJiYoZi09Zy1pKzIwKSxoK2M+ai5jdXJyZW50SGVpZ2h0JiYoaC09YyszMCkpLDA+aCYmKGg9MCkse3RvcDpoLGxlZnQ6Zn19LGkuc2hvd1Rvb2x0aXA9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLGc9Zi5jb25maWcsaD1mLmhhc0FyY1R5cGUoKSxqPWEuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhJiZtKGEudmFsdWUpfSksaz1nLnRvb2x0aXBfcG9zaXRpb258fGkudG9vbHRpcFBvc2l0aW9uOzAhPT1qLmxlbmd0aCYmZy50b29sdGlwX3Nob3cmJihmLnRvb2x0aXAuaHRtbChnLnRvb2x0aXBfY29udGVudHMuY2FsbChmLGEsZi5heGlzLmdldFhBeGlzVGlja0Zvcm1hdCgpLGYuZ2V0WUZvcm1hdChoKSxmLmNvbG9yKSkuc3R5bGUoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxjPWYudG9vbHRpcC5wcm9wZXJ0eShcIm9mZnNldFdpZHRoXCIpLGQ9Zi50b29sdGlwLnByb3BlcnR5KFwib2Zmc2V0SGVpZ2h0XCIpLGU9ay5jYWxsKHRoaXMsaixjLGQsYiksZi50b29sdGlwLnN0eWxlKFwidG9wXCIsZS50b3ArXCJweFwiKS5zdHlsZShcImxlZnRcIixlLmxlZnQrXCJweFwiKSl9LGkuaGlkZVRvb2x0aXA9ZnVuY3Rpb24oKXt0aGlzLnRvb2x0aXAuc3R5bGUoXCJkaXNwbGF5XCIsXCJub25lXCIpfSxpLmluaXRMZWdlbmQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmxlZ2VuZEl0ZW1UZXh0Qm94PXt9LGEubGVnZW5kSGFzUmVuZGVyZWQ9ITEsYS5sZWdlbmQ9YS5zdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsYS5nZXRUcmFuc2xhdGUoXCJsZWdlbmRcIikpLGEuY29uZmlnLmxlZ2VuZF9zaG93P3ZvaWQgYS51cGRhdGVMZWdlbmRXaXRoRGVmYXVsdHMoKTooYS5sZWdlbmQuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsXCJoaWRkZW5cIiksdm9pZChhLmhpZGRlbkxlZ2VuZElkcz1hLm1hcFRvSWRzKGEuZGF0YS50YXJnZXRzKSkpfSxpLnVwZGF0ZUxlZ2VuZFdpdGhEZWZhdWx0cz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS51cGRhdGVMZWdlbmQoYS5tYXBUb0lkcyhhLmRhdGEudGFyZ2V0cykse3dpdGhUcmFuc2Zvcm06ITEsd2l0aFRyYW5zaXRpb25Gb3JUcmFuc2Zvcm06ITEsd2l0aFRyYW5zaXRpb246ITF9KX0saS51cGRhdGVTaXplRm9yTGVnZW5kPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY29uZmlnLGU9e3RvcDpjLmlzTGVnZW5kVG9wP2MuZ2V0Q3VycmVudFBhZGRpbmdUb3AoKStkLmxlZ2VuZF9pbnNldF95KzUuNTpjLmN1cnJlbnRIZWlnaHQtYS1jLmdldEN1cnJlbnRQYWRkaW5nQm90dG9tKCktZC5sZWdlbmRfaW5zZXRfeSxsZWZ0OmMuaXNMZWdlbmRMZWZ0P2MuZ2V0Q3VycmVudFBhZGRpbmdMZWZ0KCkrZC5sZWdlbmRfaW5zZXRfeCsuNTpjLmN1cnJlbnRXaWR0aC1iLWMuZ2V0Q3VycmVudFBhZGRpbmdSaWdodCgpLWQubGVnZW5kX2luc2V0X3grLjV9O2MubWFyZ2luMz17dG9wOmMuaXNMZWdlbmRSaWdodD8wOmMuaXNMZWdlbmRJbnNldD9lLnRvcDpjLmN1cnJlbnRIZWlnaHQtYSxyaWdodDowLzAsYm90dG9tOjAsbGVmdDpjLmlzTGVnZW5kUmlnaHQ/Yy5jdXJyZW50V2lkdGgtYjpjLmlzTGVnZW5kSW5zZXQ/ZS5sZWZ0OjB9fSxpLnRyYW5zZm9ybUxlZ2VuZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzOyhhP2IubGVnZW5kLnRyYW5zaXRpb24oKTpiLmxlZ2VuZCkuYXR0cihcInRyYW5zZm9ybVwiLGIuZ2V0VHJhbnNsYXRlKFwibGVnZW5kXCIpKX0saS51cGRhdGVMZWdlbmRTdGVwPWZ1bmN0aW9uKGEpe3RoaXMubGVnZW5kU3RlcD1hfSxpLnVwZGF0ZUxlZ2VuZEl0ZW1XaWR0aD1mdW5jdGlvbihhKXt0aGlzLmxlZ2VuZEl0ZW1XaWR0aD1hfSxpLnVwZGF0ZUxlZ2VuZEl0ZW1IZWlnaHQ9ZnVuY3Rpb24oYSl7dGhpcy5sZWdlbmRJdGVtSGVpZ2h0PWF9LGkuZ2V0TGVnZW5kV2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmNvbmZpZy5sZWdlbmRfc2hvdz9hLmlzTGVnZW5kUmlnaHR8fGEuaXNMZWdlbmRJbnNldD9hLmxlZ2VuZEl0ZW1XaWR0aCooYS5sZWdlbmRTdGVwKzEpOmEuY3VycmVudFdpZHRoOjB9LGkuZ2V0TGVnZW5kSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPTA7cmV0dXJuIGEuY29uZmlnLmxlZ2VuZF9zaG93JiYoYj1hLmlzTGVnZW5kUmlnaHQ/YS5jdXJyZW50SGVpZ2h0Ok1hdGgubWF4KDIwLGEubGVnZW5kSXRlbUhlaWdodCkqKGEubGVnZW5kU3RlcCsxKSksYn0saS5vcGFjaXR5Rm9yTGVnZW5kPWZ1bmN0aW9uKGEpe3JldHVybiBhLmNsYXNzZWQobC5sZWdlbmRJdGVtSGlkZGVuKT9udWxsOjF9LGkub3BhY2l0eUZvclVuZm9jdXNlZExlZ2VuZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc2VkKGwubGVnZW5kSXRlbUhpZGRlbik/bnVsbDouM30saS50b2dnbGVGb2N1c0xlZ2VuZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7YT1jLm1hcFRvVGFyZ2V0SWRzKGEpLGMubGVnZW5kLnNlbGVjdEFsbChcIi5cIitsLmxlZ2VuZEl0ZW0pLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gYS5pbmRleE9mKGIpPj0wfSkuY2xhc3NlZChsLmxlZ2VuZEl0ZW1Gb2N1c2VkLGIpLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDApLnN0eWxlKFwib3BhY2l0eVwiLGZ1bmN0aW9uKCl7dmFyIGE9Yj9jLm9wYWNpdHlGb3JMZWdlbmQ6Yy5vcGFjaXR5Rm9yVW5mb2N1c2VkTGVnZW5kO3JldHVybiBhLmNhbGwoYyxjLmQzLnNlbGVjdCh0aGlzKSl9KX0saS5yZXZlcnRMZWdlbmQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5kMzthLmxlZ2VuZC5zZWxlY3RBbGwoXCIuXCIrbC5sZWdlbmRJdGVtKS5jbGFzc2VkKGwubGVnZW5kSXRlbUZvY3VzZWQsITEpLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDApLnN0eWxlKFwib3BhY2l0eVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGEub3BhY2l0eUZvckxlZ2VuZChiLnNlbGVjdCh0aGlzKSl9KX0saS5zaG93TGVnZW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZztjLmxlZ2VuZF9zaG93fHwoYy5sZWdlbmRfc2hvdz0hMCxiLmxlZ2VuZC5zdHlsZShcInZpc2liaWxpdHlcIixcInZpc2libGVcIiksYi5sZWdlbmRIYXNSZW5kZXJlZHx8Yi51cGRhdGVMZWdlbmRXaXRoRGVmYXVsdHMoKSksYi5yZW1vdmVIaWRkZW5MZWdlbmRJZHMoYSksYi5sZWdlbmQuc2VsZWN0QWxsKGIuc2VsZWN0b3JMZWdlbmRzKGEpKS5zdHlsZShcInZpc2liaWxpdHlcIixcInZpc2libGVcIikudHJhbnNpdGlvbigpLnN0eWxlKFwib3BhY2l0eVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGIub3BhY2l0eUZvckxlZ2VuZChiLmQzLnNlbGVjdCh0aGlzKSl9KX0saS5oaWRlTGVnZW5kPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZztjLmxlZ2VuZF9zaG93JiZ1KGEpJiYoYy5sZWdlbmRfc2hvdz0hMSxiLmxlZ2VuZC5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKSksYi5hZGRIaWRkZW5MZWdlbmRJZHMoYSksYi5sZWdlbmQuc2VsZWN0QWxsKGIuc2VsZWN0b3JMZWdlbmRzKGEpKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKX0saS5jbGVhckxlZ2VuZEl0ZW1UZXh0Qm94Q2FjaGU9ZnVuY3Rpb24oKXt0aGlzLmxlZ2VuZEl0ZW1UZXh0Qm94PXt9fSxpLnVwZGF0ZUxlZ2VuZD1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVybiB1LmxlZ2VuZEl0ZW1UZXh0Qm94W2JdfHwodS5sZWdlbmRJdGVtVGV4dEJveFtiXT11LmdldFRleHRSZWN0KGEudGV4dENvbnRlbnQsbC5sZWdlbmRJdGVtKSksdS5sZWdlbmRJdGVtVGV4dEJveFtiXX1mdW5jdGlvbiBlKGIsYyxlKXtmdW5jdGlvbiBmKGEsYil7Ynx8KGc9KG8tRC1uKS8yLEI+ZyYmKGc9KG8tbikvMixEPTAsSisrKSksSVthXT1KLEhbSl09dS5pc0xlZ2VuZEluc2V0PzEwOmcsRVthXT1ELEQrPW59dmFyIGcsaCxpPTA9PT1lLGo9ZT09PWEubGVuZ3RoLTEsaz1kKGIsYyksbD1rLndpZHRoK0MrKCFqfHx1LmlzTGVnZW5kUmlnaHR8fHUuaXNMZWdlbmRJbnNldD95OjApLG09ay5oZWlnaHQreCxuPXUuaXNMZWdlbmRSaWdodHx8dS5pc0xlZ2VuZEluc2V0P206bCxvPXUuaXNMZWdlbmRSaWdodHx8dS5pc0xlZ2VuZEluc2V0P3UuZ2V0TGVnZW5kSGVpZ2h0KCk6dS5nZXRMZWdlbmRXaWR0aCgpO3JldHVybiBpJiYoRD0wLEo9MCx6PTAsQT0wKSx2LmxlZ2VuZF9zaG93JiYhdS5pc0xlZ2VuZFRvU2hvdyhjKT92b2lkKEZbY109R1tjXT1JW2NdPUVbY109MCk6KEZbY109bCxHW2NdPW0sKCF6fHxsPj16KSYmKHo9bCksKCFBfHxtPj1BKSYmKEE9bSksaD11LmlzTGVnZW5kUmlnaHR8fHUuaXNMZWdlbmRJbnNldD9BOnosdm9pZCh2LmxlZ2VuZF9lcXVhbGx5PyhPYmplY3Qua2V5cyhGKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0ZbYV09en0pLE9iamVjdC5rZXlzKEcpLmZvckVhY2goZnVuY3Rpb24oYSl7R1thXT1BfSksZz0oby1oKmEubGVuZ3RoKS8yLEI+Zz8oRD0wLEo9MCxhLmZvckVhY2goZnVuY3Rpb24oYSl7ZihhKX0pKTpmKGMsITApKTpmKGMpKSl9dmFyIGYsZyxoLGksaixrLG0sbixvLHAscixzLHQsdT10aGlzLHY9dS5jb25maWcseD00LHk9MTAsej0wLEE9MCxCPTEwLEM9MTUsRD0wLEU9e30sRj17fSxHPXt9LEg9WzBdLEk9e30sSj0wO2I9Ynx8e30sbj13KGIsXCJ3aXRoVHJhbnNpdGlvblwiLCEwKSxvPXcoYixcIndpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtXCIsITApLHUuaXNMZWdlbmRJbnNldCYmKEo9di5sZWdlbmRfaW5zZXRfc3RlcD92LmxlZ2VuZF9pbnNldF9zdGVwOmEubGVuZ3RoLHUudXBkYXRlTGVnZW5kU3RlcChKKSksdS5pc0xlZ2VuZFJpZ2h0PyhmPWZ1bmN0aW9uKGEpe3JldHVybiB6KklbYV19LGk9ZnVuY3Rpb24oYSl7cmV0dXJuIEhbSVthXV0rRVthXX0pOnUuaXNMZWdlbmRJbnNldD8oZj1mdW5jdGlvbihhKXtyZXR1cm4geipJW2FdKzEwfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBIW0lbYV1dK0VbYV19KTooZj1mdW5jdGlvbihhKXtyZXR1cm4gSFtJW2FdXStFW2FdfSxpPWZ1bmN0aW9uKGEpe3JldHVybiBBKklbYV19KSxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSxiKSsxNH0saj1mdW5jdGlvbihhLGIpe3JldHVybiBpKGEsYikrOX0saD1mdW5jdGlvbihhLGIpe3JldHVybiBmKGEsYil9LGs9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gaShhLGIpLTV9LG09dS5sZWdlbmQuc2VsZWN0QWxsKFwiLlwiK2wubGVnZW5kSXRlbSkuZGF0YShhKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsZnVuY3Rpb24oYSl7cmV0dXJuIHUuZ2VuZXJhdGVDbGFzcyhsLmxlZ2VuZEl0ZW0sYSl9KS5zdHlsZShcInZpc2liaWxpdHlcIixmdW5jdGlvbihhKXtyZXR1cm4gdS5pc0xlZ2VuZFRvU2hvdyhhKT9cInZpc2libGVcIjpcImhpZGRlblwifSkuc3R5bGUoXCJjdXJzb3JcIixcInBvaW50ZXJcIikub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe3YubGVnZW5kX2l0ZW1fb25jbGljaz92LmxlZ2VuZF9pdGVtX29uY2xpY2suY2FsbCh1LGEpOnUuZDMuZXZlbnQuYWx0S2V5Pyh1LmFwaS5oaWRlKCksdS5hcGkuc2hvdyhhKSk6KHUuYXBpLnRvZ2dsZShhKSx1LmlzVGFyZ2V0VG9TaG93KGEpP3UuYXBpLmZvY3VzKGEpOnUuYXBpLnJldmVydCgpKX0pLm9uKFwibW91c2VvdmVyXCIsZnVuY3Rpb24oYSl7dS5kMy5zZWxlY3QodGhpcykuY2xhc3NlZChsLmxlZ2VuZEl0ZW1Gb2N1c2VkLCEwKSwhdS50cmFuc2l0aW5nJiZ1LmlzVGFyZ2V0VG9TaG93KGEpJiZ1LmFwaS5mb2N1cyhhKSx2LmxlZ2VuZF9pdGVtX29ubW91c2VvdmVyJiZ2LmxlZ2VuZF9pdGVtX29ubW91c2VvdmVyLmNhbGwodSxhKX0pLm9uKFwibW91c2VvdXRcIixmdW5jdGlvbihhKXt1LmQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKGwubGVnZW5kSXRlbUZvY3VzZWQsITEpLHUuYXBpLnJldmVydCgpLHYubGVnZW5kX2l0ZW1fb25tb3VzZW91dCYmdi5sZWdlbmRfaXRlbV9vbm1vdXNlb3V0LmNhbGwodSxhKX0pLG0uYXBwZW5kKFwidGV4dFwiKS50ZXh0KGZ1bmN0aW9uKGEpe3JldHVybiBxKHYuZGF0YV9uYW1lc1thXSk/di5kYXRhX25hbWVzW2FdOmF9KS5lYWNoKGZ1bmN0aW9uKGEsYil7ZSh0aGlzLGEsYil9KS5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpLmF0dHIoXCJ4XCIsdS5pc0xlZ2VuZFJpZ2h0fHx1LmlzTGVnZW5kSW5zZXQ/ZzotMjAwKS5hdHRyKFwieVwiLHUuaXNMZWdlbmRSaWdodHx8dS5pc0xlZ2VuZEluc2V0Py0yMDA6aiksbS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLGwubGVnZW5kSXRlbUV2ZW50KS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLDApLmF0dHIoXCJ4XCIsdS5pc0xlZ2VuZFJpZ2h0fHx1LmlzTGVnZW5kSW5zZXQ/aDotMjAwKS5hdHRyKFwieVwiLHUuaXNMZWdlbmRSaWdodHx8dS5pc0xlZ2VuZEluc2V0Py0yMDA6ayksbS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLGwubGVnZW5kSXRlbVRpbGUpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIikuc3R5bGUoXCJmaWxsXCIsdS5jb2xvcikuYXR0cihcInhcIix1LmlzTGVnZW5kUmlnaHR8fHUuaXNMZWdlbmRJbnNldD9nOi0yMDApLmF0dHIoXCJ5XCIsdS5pc0xlZ2VuZFJpZ2h0fHx1LmlzTGVnZW5kSW5zZXQ/LTIwMDppKS5hdHRyKFwid2lkdGhcIiwxMCkuYXR0cihcImhlaWdodFwiLDEwKSx0PXUubGVnZW5kLnNlbGVjdChcIi5cIitsLmxlZ2VuZEJhY2tncm91bmQrXCIgcmVjdFwiKSx1LmlzTGVnZW5kSW5zZXQmJno+MCYmMD09PXQuc2l6ZSgpJiYodD11LmxlZ2VuZC5pbnNlcnQoXCJnXCIsXCIuXCIrbC5sZWdlbmRJdGVtKS5hdHRyKFwiY2xhc3NcIixsLmxlZ2VuZEJhY2tncm91bmQpLmFwcGVuZChcInJlY3RcIikpLHA9dS5sZWdlbmQuc2VsZWN0QWxsKFwidGV4dFwiKS5kYXRhKGEpLnRleHQoZnVuY3Rpb24oYSl7cmV0dXJuIHEodi5kYXRhX25hbWVzW2FdKT92LmRhdGFfbmFtZXNbYV06YX0pLmVhY2goZnVuY3Rpb24oYSxiKXtlKHRoaXMsYSxiKX0pLChuP3AudHJhbnNpdGlvbigpOnApLmF0dHIoXCJ4XCIsZykuYXR0cihcInlcIixqKSxyPXUubGVnZW5kLnNlbGVjdEFsbChcInJlY3QuXCIrbC5sZWdlbmRJdGVtRXZlbnQpLmRhdGEoYSksKG4/ci50cmFuc2l0aW9uKCk6cikuYXR0cihcIndpZHRoXCIsZnVuY3Rpb24oYSl7cmV0dXJuIEZbYV19KS5hdHRyKFwiaGVpZ2h0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIEdbYV19KS5hdHRyKFwieFwiLGgpLmF0dHIoXCJ5XCIsaykscz11LmxlZ2VuZC5zZWxlY3RBbGwoXCJyZWN0LlwiK2wubGVnZW5kSXRlbVRpbGUpLmRhdGEoYSksKG4/cy50cmFuc2l0aW9uKCk6cykuc3R5bGUoXCJmaWxsXCIsdS5jb2xvcikuYXR0cihcInhcIixmKS5hdHRyKFwieVwiLGkpLHQmJihuP3QudHJhbnNpdGlvbigpOnQpLmF0dHIoXCJoZWlnaHRcIix1LmdldExlZ2VuZEhlaWdodCgpLTEyKS5hdHRyKFwid2lkdGhcIix6KihKKzEpKzEwKSx1LmxlZ2VuZC5zZWxlY3RBbGwoXCIuXCIrbC5sZWdlbmRJdGVtKS5jbGFzc2VkKGwubGVnZW5kSXRlbUhpZGRlbixmdW5jdGlvbihhKXtyZXR1cm4hdS5pc1RhcmdldFRvU2hvdyhhKX0pLHUudXBkYXRlTGVnZW5kSXRlbVdpZHRoKHopLHUudXBkYXRlTGVnZW5kSXRlbUhlaWdodChBKSx1LnVwZGF0ZUxlZ2VuZFN0ZXAoSiksdS51cGRhdGVTaXplcygpLHUudXBkYXRlU2NhbGVzKCksdS51cGRhdGVTdmdTaXplKCksdS50cmFuc2Zvcm1BbGwobyxjKSx1LmxlZ2VuZEhhc1JlbmRlcmVkPSEwfSxjKGIsZiksZi5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXIsYj1hLmNvbmZpZyxjPWEubWFpbjthLmF4ZXMueD1jLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsbC5heGlzK1wiIFwiK2wuYXhpc1gpLmF0dHIoXCJjbGlwLXBhdGhcIixhLmNsaXBQYXRoRm9yWEF4aXMpLmF0dHIoXCJ0cmFuc2Zvcm1cIixhLmdldFRyYW5zbGF0ZShcInhcIikpLnN0eWxlKFwidmlzaWJpbGl0eVwiLGIuYXhpc194X3Nob3c/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIiksYS5heGVzLnguYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIixsLmF4aXNYTGFiZWwpLmF0dHIoXCJ0cmFuc2Zvcm1cIixiLmF4aXNfcm90YXRlZD9cInJvdGF0ZSgtOTApXCI6XCJcIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLHRoaXMudGV4dEFuY2hvckZvclhBeGlzTGFiZWwuYmluZCh0aGlzKSksYS5heGVzLnk9Yy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwuYXhpcytcIiBcIitsLmF4aXNZKS5hdHRyKFwiY2xpcC1wYXRoXCIsYi5heGlzX3lfaW5uZXI/XCJcIjphLmNsaXBQYXRoRm9yWUF4aXMpLmF0dHIoXCJ0cmFuc2Zvcm1cIixhLmdldFRyYW5zbGF0ZShcInlcIikpLnN0eWxlKFwidmlzaWJpbGl0eVwiLGIuYXhpc195X3Nob3c/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIiksYS5heGVzLnkuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIixsLmF4aXNZTGFiZWwpLmF0dHIoXCJ0cmFuc2Zvcm1cIixiLmF4aXNfcm90YXRlZD9cIlwiOlwicm90YXRlKC05MClcIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLHRoaXMudGV4dEFuY2hvckZvcllBeGlzTGFiZWwuYmluZCh0aGlzKSksYS5heGVzLnkyPWMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLmF4aXMrXCIgXCIrbC5heGlzWTIpLmF0dHIoXCJ0cmFuc2Zvcm1cIixhLmdldFRyYW5zbGF0ZShcInkyXCIpKS5zdHlsZShcInZpc2liaWxpdHlcIixiLmF4aXNfeTJfc2hvdz9cInZpc2libGVcIjpcImhpZGRlblwiKSxhLmF4ZXMueTIuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIixsLmF4aXNZMkxhYmVsKS5hdHRyKFwidHJhbnNmb3JtXCIsYi5heGlzX3JvdGF0ZWQ/XCJcIjpcInJvdGF0ZSgtOTApXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIix0aGlzLnRleHRBbmNob3JGb3JZMkF4aXNMYWJlbC5iaW5kKHRoaXMpKX0sZi5wcm90b3R5cGUuZ2V0WEF4aXM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsaCl7dmFyIGk9dGhpcy5vd25lcixqPWkuY29uZmlnLGs9e2lzQ2F0ZWdvcnk6aS5pc0NhdGVnb3JpemVkKCksd2l0aE91dGVyVGljazplLHRpY2tNdWx0aWxpbmU6ai5heGlzX3hfdGlja19tdWx0aWxpbmUsdGlja1dpZHRoOmouYXhpc194X3RpY2tfd2lkdGgsdGlja1RleHRSb3RhdGU6aD8wOmouYXhpc194X3RpY2tfcm90YXRlLHdpdGhvdXRUcmFuc2l0aW9uOmZ9LGw9ZyhpLmQzLGspLnNjYWxlKGEpLm9yaWVudChiKTtyZXR1cm4gaS5pc1RpbWVTZXJpZXMoKSYmZCYmKGQ9ZC5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGkucGFyc2VEYXRlKGEpfSkpLGwudGlja0Zvcm1hdChjKS50aWNrVmFsdWVzKGQpLGkuaXNDYXRlZ29yaXplZCgpJiYobC50aWNrQ2VudGVyZWQoai5heGlzX3hfdGlja19jZW50ZXJlZCksdShqLmF4aXNfeF90aWNrX2N1bGxpbmcpJiYoai5heGlzX3hfdGlja19jdWxsaW5nPSExKSksbH0sZi5wcm90b3R5cGUudXBkYXRlWEF4aXNUaWNrVmFsdWVzPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLm93bmVyLGU9ZC5jb25maWc7cmV0dXJuKGUuYXhpc194X3RpY2tfZml0fHxlLmF4aXNfeF90aWNrX2NvdW50KSYmKGM9dGhpcy5nZW5lcmF0ZVRpY2tWYWx1ZXMoZC5tYXBUYXJnZXRzVG9VbmlxdWVYcyhhKSxlLmF4aXNfeF90aWNrX2NvdW50LGQuaXNUaW1lU2VyaWVzKCkpKSxiP2IudGlja1ZhbHVlcyhjKTooZC54QXhpcy50aWNrVmFsdWVzKGMpLGQuc3ViWEF4aXMudGlja1ZhbHVlcyhjKSksY30sZi5wcm90b3R5cGUuZ2V0WUF4aXM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBoPXt3aXRoT3V0ZXJUaWNrOmUsd2l0aG91dFRyYW5zaXRpb246Zn0saT10aGlzLm93bmVyLGo9aS5kMyxrPWkuY29uZmlnLGw9ZyhqLGgpLnNjYWxlKGEpLm9yaWVudChiKS50aWNrRm9ybWF0KGMpO3JldHVybiBpLmlzVGltZVNlcmllc1koKT9sLnRpY2tzKGoudGltZVtrLmF4aXNfeV90aWNrX3RpbWVfdmFsdWVdLGsuYXhpc195X3RpY2tfdGltZV9pbnRlcnZhbCk6bC50aWNrVmFsdWVzKGQpLGx9LGYucHJvdG90eXBlLmdldElkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3duZXIuY29uZmlnO3JldHVybiBhIGluIGIuZGF0YV9heGVzP2IuZGF0YV9heGVzW2FdOlwieVwifSxmLnByb3RvdHlwZS5nZXRYQXhpc1RpY2tGb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm93bmVyLGI9YS5jb25maWcsYz1hLmlzVGltZVNlcmllcygpP2EuZGVmYXVsdEF4aXNUaW1lRm9ybWF0OmEuaXNDYXRlZ29yaXplZCgpP2EuY2F0ZWdvcnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiAwPmE/YS50b0ZpeGVkKDApOmF9O3JldHVybiBiLmF4aXNfeF90aWNrX2Zvcm1hdCYmKG4oYi5heGlzX3hfdGlja19mb3JtYXQpP2M9Yi5heGlzX3hfdGlja19mb3JtYXQ6YS5pc1RpbWVTZXJpZXMoKSYmKGM9ZnVuY3Rpb24oYyl7cmV0dXJuIGM/YS5heGlzVGltZUZvcm1hdChiLmF4aXNfeF90aWNrX2Zvcm1hdCkoYyk6XCJcIn0pKSxuKGMpP2Z1bmN0aW9uKGIpe3JldHVybiBjLmNhbGwoYSxiKX06Y30sZi5wcm90b3R5cGUuZ2V0VGlja1ZhbHVlcz1mdW5jdGlvbihhLGIpe3JldHVybiBhP2E6Yj9iLnRpY2tWYWx1ZXMoKTp2b2lkIDB9LGYucHJvdG90eXBlLmdldFhBeGlzVGlja1ZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpY2tWYWx1ZXModGhpcy5vd25lci5jb25maWcuYXhpc194X3RpY2tfdmFsdWVzLHRoaXMub3duZXIueEF4aXMpfSxmLnByb3RvdHlwZS5nZXRZQXhpc1RpY2tWYWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaWNrVmFsdWVzKHRoaXMub3duZXIuY29uZmlnLmF4aXNfeV90aWNrX3ZhbHVlcyx0aGlzLm93bmVyLnlBeGlzKX0sZi5wcm90b3R5cGUuZ2V0WTJBeGlzVGlja1ZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpY2tWYWx1ZXModGhpcy5vd25lci5jb25maWcuYXhpc195Ml90aWNrX3ZhbHVlcyx0aGlzLm93bmVyLnkyQXhpcyl9LGYucHJvdG90eXBlLmdldExhYmVsT3B0aW9uQnlBeGlzSWQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLm93bmVyLGQ9Yy5jb25maWc7cmV0dXJuXCJ5XCI9PT1hP2I9ZC5heGlzX3lfbGFiZWw6XCJ5MlwiPT09YT9iPWQuYXhpc195Ml9sYWJlbDpcInhcIj09PWEmJihiPWQuYXhpc194X2xhYmVsKSxifSxmLnByb3RvdHlwZS5nZXRMYWJlbFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRMYWJlbE9wdGlvbkJ5QXhpc0lkKGEpO3JldHVybiBvKGIpP2I6Yj9iLnRleHQ6bnVsbH0sZi5wcm90b3R5cGUuc2V0TGFiZWxUZXh0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5vd25lcixkPWMuY29uZmlnLGU9dGhpcy5nZXRMYWJlbE9wdGlvbkJ5QXhpc0lkKGEpO28oZSk/XCJ5XCI9PT1hP2QuYXhpc195X2xhYmVsPWI6XCJ5MlwiPT09YT9kLmF4aXNfeTJfbGFiZWw9YjpcInhcIj09PWEmJihkLmF4aXNfeF9sYWJlbD1iKTplJiYoZS50ZXh0PWIpfSxmLnByb3RvdHlwZS5nZXRMYWJlbFBvc2l0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRMYWJlbE9wdGlvbkJ5QXhpc0lkKGEpLGQ9YyYmXCJvYmplY3RcIj09dHlwZW9mIGMmJmMucG9zaXRpb24/Yy5wb3NpdGlvbjpiO3JldHVybntpc0lubmVyOmQuaW5kZXhPZihcImlubmVyXCIpPj0wLGlzT3V0ZXI6ZC5pbmRleE9mKFwib3V0ZXJcIik+PTAsaXNMZWZ0OmQuaW5kZXhPZihcImxlZnRcIik+PTAsaXNDZW50ZXI6ZC5pbmRleE9mKFwiY2VudGVyXCIpPj0wLGlzUmlnaHQ6ZC5pbmRleE9mKFwicmlnaHRcIik+PTAsaXNUb3A6ZC5pbmRleE9mKFwidG9wXCIpPj0wLGlzTWlkZGxlOmQuaW5kZXhPZihcIm1pZGRsZVwiKT49MCxpc0JvdHRvbTpkLmluZGV4T2YoXCJib3R0b21cIik+PTB9fSxmLnByb3RvdHlwZS5nZXRYQXhpc0xhYmVsUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMYWJlbFBvc2l0aW9uKFwieFwiLHRoaXMub3duZXIuY29uZmlnLmF4aXNfcm90YXRlZD9cImlubmVyLXRvcFwiOlwiaW5uZXItcmlnaHRcIil9LGYucHJvdG90eXBlLmdldFlBeGlzTGFiZWxQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhYmVsUG9zaXRpb24oXCJ5XCIsdGhpcy5vd25lci5jb25maWcuYXhpc19yb3RhdGVkP1wiaW5uZXItcmlnaHRcIjpcImlubmVyLXRvcFwiKX0sZi5wcm90b3R5cGUuZ2V0WTJBeGlzTGFiZWxQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhYmVsUG9zaXRpb24oXCJ5MlwiLHRoaXMub3duZXIuY29uZmlnLmF4aXNfcm90YXRlZD9cImlubmVyLXJpZ2h0XCI6XCJpbm5lci10b3BcIil9LGYucHJvdG90eXBlLmdldExhYmVsUG9zaXRpb25CeUlkPWZ1bmN0aW9uKGEpe3JldHVyblwieTJcIj09PWE/dGhpcy5nZXRZMkF4aXNMYWJlbFBvc2l0aW9uKCk6XCJ5XCI9PT1hP3RoaXMuZ2V0WUF4aXNMYWJlbFBvc2l0aW9uKCk6dGhpcy5nZXRYQXhpc0xhYmVsUG9zaXRpb24oKX0sZi5wcm90b3R5cGUudGV4dEZvclhBeGlzTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRMYWJlbFRleHQoXCJ4XCIpfSxmLnByb3RvdHlwZS50ZXh0Rm9yWUF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhYmVsVGV4dChcInlcIil9LGYucHJvdG90eXBlLnRleHRGb3JZMkF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldExhYmVsVGV4dChcInkyXCIpfSxmLnByb3RvdHlwZS54Rm9yQXhpc0xhYmVsPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5vd25lcjtyZXR1cm4gYT9iLmlzTGVmdD8wOmIuaXNDZW50ZXI/Yy53aWR0aC8yOmMud2lkdGg6Yi5pc0JvdHRvbT8tYy5oZWlnaHQ6Yi5pc01pZGRsZT8tYy5oZWlnaHQvMjowfSxmLnByb3RvdHlwZS5keEZvckF4aXNMYWJlbD1mdW5jdGlvbihhLGIpe3JldHVybiBhP2IuaXNMZWZ0P1wiMC41ZW1cIjpiLmlzUmlnaHQ/XCItMC41ZW1cIjpcIjBcIjpiLmlzVG9wP1wiLTAuNWVtXCI6Yi5pc0JvdHRvbT9cIjAuNWVtXCI6XCIwXCJ9LGYucHJvdG90eXBlLnRleHRBbmNob3JGb3JBeGlzTGFiZWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9iLmlzTGVmdD9cInN0YXJ0XCI6Yi5pc0NlbnRlcj9cIm1pZGRsZVwiOlwiZW5kXCI6Yi5pc0JvdHRvbT9cInN0YXJ0XCI6Yi5pc01pZGRsZT9cIm1pZGRsZVwiOlwiZW5kXCJ9LGYucHJvdG90eXBlLnhGb3JYQXhpc0xhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueEZvckF4aXNMYWJlbCghdGhpcy5vd25lci5jb25maWcuYXhpc19yb3RhdGVkLHRoaXMuZ2V0WEF4aXNMYWJlbFBvc2l0aW9uKCkpfSxmLnByb3RvdHlwZS54Rm9yWUF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnhGb3JBeGlzTGFiZWwodGhpcy5vd25lci5jb25maWcuYXhpc19yb3RhdGVkLHRoaXMuZ2V0WUF4aXNMYWJlbFBvc2l0aW9uKCkpfSxmLnByb3RvdHlwZS54Rm9yWTJBeGlzTGFiZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54Rm9yQXhpc0xhYmVsKHRoaXMub3duZXIuY29uZmlnLmF4aXNfcm90YXRlZCx0aGlzLmdldFkyQXhpc0xhYmVsUG9zaXRpb24oKSl9LGYucHJvdG90eXBlLmR4Rm9yWEF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmR4Rm9yQXhpc0xhYmVsKCF0aGlzLm93bmVyLmNvbmZpZy5heGlzX3JvdGF0ZWQsdGhpcy5nZXRYQXhpc0xhYmVsUG9zaXRpb24oKSl9LGYucHJvdG90eXBlLmR4Rm9yWUF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmR4Rm9yQXhpc0xhYmVsKHRoaXMub3duZXIuY29uZmlnLmF4aXNfcm90YXRlZCx0aGlzLmdldFlBeGlzTGFiZWxQb3NpdGlvbigpKX0sZi5wcm90b3R5cGUuZHhGb3JZMkF4aXNMYWJlbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmR4Rm9yQXhpc0xhYmVsKHRoaXMub3duZXIuY29uZmlnLmF4aXNfcm90YXRlZCx0aGlzLmdldFkyQXhpc0xhYmVsUG9zaXRpb24oKSl9LGYucHJvdG90eXBlLmR5Rm9yWEF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXIsYj1hLmNvbmZpZyxjPXRoaXMuZ2V0WEF4aXNMYWJlbFBvc2l0aW9uKCk7cmV0dXJuIGIuYXhpc19yb3RhdGVkP2MuaXNJbm5lcj9cIjEuMmVtXCI6LTI1LXRoaXMuZ2V0TWF4VGlja1dpZHRoKFwieFwiKTpjLmlzSW5uZXI/XCItMC41ZW1cIjpiLmF4aXNfeF9oZWlnaHQ/Yi5heGlzX3hfaGVpZ2h0LTEwOlwiM2VtXCJ9LGYucHJvdG90eXBlLmR5Rm9yWUF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXIsYj10aGlzLmdldFlBeGlzTGFiZWxQb3NpdGlvbigpO3JldHVybiBhLmNvbmZpZy5heGlzX3JvdGF0ZWQ/Yi5pc0lubmVyP1wiLTAuNWVtXCI6XCIzZW1cIjpiLmlzSW5uZXI/XCIxLjJlbVwiOi0xMC0oYS5jb25maWcuYXhpc195X2lubmVyPzA6dGhpcy5nZXRNYXhUaWNrV2lkdGgoXCJ5XCIpKzEwKX0sZi5wcm90b3R5cGUuZHlGb3JZMkF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXIsYj10aGlzLmdldFkyQXhpc0xhYmVsUG9zaXRpb24oKTtyZXR1cm4gYS5jb25maWcuYXhpc19yb3RhdGVkP2IuaXNJbm5lcj9cIjEuMmVtXCI6XCItMi4yZW1cIjpiLmlzSW5uZXI/XCItMC41ZW1cIjoxNSsoYS5jb25maWcuYXhpc195Ml9pbm5lcj8wOnRoaXMuZ2V0TWF4VGlja1dpZHRoKFwieTJcIikrMTUpfSxmLnByb3RvdHlwZS50ZXh0QW5jaG9yRm9yWEF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXI7cmV0dXJuIHRoaXMudGV4dEFuY2hvckZvckF4aXNMYWJlbCghYS5jb25maWcuYXhpc19yb3RhdGVkLHRoaXMuZ2V0WEF4aXNMYWJlbFBvc2l0aW9uKCkpfSxmLnByb3RvdHlwZS50ZXh0QW5jaG9yRm9yWUF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXI7cmV0dXJuIHRoaXMudGV4dEFuY2hvckZvckF4aXNMYWJlbChhLmNvbmZpZy5heGlzX3JvdGF0ZWQsdGhpcy5nZXRZQXhpc0xhYmVsUG9zaXRpb24oKSl9LGYucHJvdG90eXBlLnRleHRBbmNob3JGb3JZMkF4aXNMYWJlbD1mdW5jdGlvbigpe3ZhciBhPXRoaXMub3duZXI7cmV0dXJuIHRoaXMudGV4dEFuY2hvckZvckF4aXNMYWJlbChhLmNvbmZpZy5heGlzX3JvdGF0ZWQsdGhpcy5nZXRZMkF4aXNMYWJlbFBvc2l0aW9uKCkpfSxmLnByb3RvdHlwZS5nZXRNYXhUaWNrV2lkdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnLGg9dGhpcy5vd25lcixpPWguY29uZmlnLGo9MDtyZXR1cm4gYiYmaC5jdXJyZW50TWF4VGlja1dpZHRoc1thXT9oLmN1cnJlbnRNYXhUaWNrV2lkdGhzW2FdOihoLnN2ZyYmKGM9aC5maWx0ZXJUYXJnZXRzVG9TaG93KGguZGF0YS50YXJnZXRzKSxcInlcIj09PWE/KGQ9aC55LmNvcHkoKS5kb21haW4oaC5nZXRZRG9tYWluKGMsXCJ5XCIpKSxlPXRoaXMuZ2V0WUF4aXMoZCxoLnlPcmllbnQsaS5heGlzX3lfdGlja19mb3JtYXQsaC55QXhpc1RpY2tWYWx1ZXMsITEsITApKTpcInkyXCI9PT1hPyhkPWgueTIuY29weSgpLmRvbWFpbihoLmdldFlEb21haW4oYyxcInkyXCIpKSxlPXRoaXMuZ2V0WUF4aXMoZCxoLnkyT3JpZW50LGkuYXhpc195Ml90aWNrX2Zvcm1hdCxoLnkyQXhpc1RpY2tWYWx1ZXMsITEsITApKTooZD1oLnguY29weSgpLmRvbWFpbihoLmdldFhEb21haW4oYykpLGU9dGhpcy5nZXRYQXhpcyhkLGgueE9yaWVudCxoLnhBeGlzVGlja0Zvcm1hdCxoLnhBeGlzVGlja1ZhbHVlcywhMSwhMCwhMCksdGhpcy51cGRhdGVYQXhpc1RpY2tWYWx1ZXMoYyxlKSksZj1oLmQzLnNlbGVjdChcImJvZHlcIikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJjM1wiLCEwKSxnPWYuYXBwZW5kKFwic3ZnXCIpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpLnN0eWxlKFwicG9zaXRpb25cIixcImZpeGVkXCIpLnN0eWxlKFwidG9wXCIsMCkuc3R5bGUoXCJsZWZ0XCIsMCksZy5hcHBlbmQoXCJnXCIpLmNhbGwoZSkuZWFjaChmdW5jdGlvbigpe2guZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbChcInRleHRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ajxhLndpZHRoJiYoaj1hLndpZHRoKX0pLGYucmVtb3ZlKCl9KSksaC5jdXJyZW50TWF4VGlja1dpZHRoc1thXT0wPj1qP2guY3VycmVudE1heFRpY2tXaWR0aHNbYV06aixoLmN1cnJlbnRNYXhUaWNrV2lkdGhzW2FdKX0sZi5wcm90b3R5cGUudXBkYXRlTGFiZWxzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3duZXIsYz1iLm1haW4uc2VsZWN0KFwiLlwiK2wuYXhpc1grXCIgLlwiK2wuYXhpc1hMYWJlbCksZD1iLm1haW4uc2VsZWN0KFwiLlwiK2wuYXhpc1krXCIgLlwiK2wuYXhpc1lMYWJlbCksZT1iLm1haW4uc2VsZWN0KFwiLlwiK2wuYXhpc1kyK1wiIC5cIitsLmF4aXNZMkxhYmVsKTsoYT9jLnRyYW5zaXRpb24oKTpjKS5hdHRyKFwieFwiLHRoaXMueEZvclhBeGlzTGFiZWwuYmluZCh0aGlzKSkuYXR0cihcImR4XCIsdGhpcy5keEZvclhBeGlzTGFiZWwuYmluZCh0aGlzKSkuYXR0cihcImR5XCIsdGhpcy5keUZvclhBeGlzTGFiZWwuYmluZCh0aGlzKSkudGV4dCh0aGlzLnRleHRGb3JYQXhpc0xhYmVsLmJpbmQodGhpcykpLChhP2QudHJhbnNpdGlvbigpOmQpLmF0dHIoXCJ4XCIsdGhpcy54Rm9yWUF4aXNMYWJlbC5iaW5kKHRoaXMpKS5hdHRyKFwiZHhcIix0aGlzLmR4Rm9yWUF4aXNMYWJlbC5iaW5kKHRoaXMpKS5hdHRyKFwiZHlcIix0aGlzLmR5Rm9yWUF4aXNMYWJlbC5iaW5kKHRoaXMpKS50ZXh0KHRoaXMudGV4dEZvcllBeGlzTGFiZWwuYmluZCh0aGlzKSksKGE/ZS50cmFuc2l0aW9uKCk6ZSkuYXR0cihcInhcIix0aGlzLnhGb3JZMkF4aXNMYWJlbC5iaW5kKHRoaXMpKS5hdHRyKFwiZHhcIix0aGlzLmR4Rm9yWTJBeGlzTGFiZWwuYmluZCh0aGlzKSkuYXR0cihcImR5XCIsdGhpcy5keUZvclkyQXhpc0xhYmVsLmJpbmQodGhpcykpLnRleHQodGhpcy50ZXh0Rm9yWTJBeGlzTGFiZWwuYmluZCh0aGlzKSl9LGYucHJvdG90eXBlLmdldFBhZGRpbmc9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIG0oYVtiXSk/XCJyYXRpb1wiPT09YS51bml0P2FbYl0qZDp0aGlzLmNvbnZlcnRQaXhlbHNUb0F4aXNQYWRkaW5nKGFbYl0sZCk6Y30sZi5wcm90b3R5cGUuY29udmVydFBpeGVsc1RvQXhpc1BhZGRpbmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm93bmVyLGQ9Yy5jb25maWcuYXhpc19yb3RhdGVkP2Mud2lkdGg6Yy5oZWlnaHQ7cmV0dXJuIGIqKGEvZCl9LGYucHJvdG90eXBlLmdlbmVyYXRlVGlja1ZhbHVlcz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosaz1hO2lmKGIpaWYoZD1uKGIpP2IoKTpiLDE9PT1kKWs9W2FbMF1dO2Vsc2UgaWYoMj09PWQpaz1bYVswXSxhW2EubGVuZ3RoLTFdXTtlbHNlIGlmKGQ+Mil7Zm9yKGc9ZC0yLGU9YVswXSxmPWFbYS5sZW5ndGgtMV0saD0oZi1lKS8oZysxKSxrPVtlXSxpPTA7Zz5pO2krKylqPStlK2gqKGkrMSksay5wdXNoKGM/bmV3IERhdGUoaik6aik7ay5wdXNoKGYpfXJldHVybiBjfHwoaz1rLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS1ifSkpLGt9LGYucHJvdG90eXBlLmdlbmVyYXRlVHJhbnNpdGlvbnM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vd25lcixjPWIuYXhlcztyZXR1cm57YXhpc1g6YT9jLngudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpOmMueCxheGlzWTphP2MueS50cmFuc2l0aW9uKCkuZHVyYXRpb24oYSk6Yy55LGF4aXNZMjphP2MueTIudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpOmMueTIsYXhpc1N1Ylg6YT9jLnN1YngudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpOmMuc3VieH19LGYucHJvdG90eXBlLnJlZHJhdz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMub3duZXI7Yy5heGVzLnguc3R5bGUoXCJvcGFjaXR5XCIsYj8wOjEpLGMuYXhlcy55LnN0eWxlKFwib3BhY2l0eVwiLGI/MDoxKSxjLmF4ZXMueTIuc3R5bGUoXCJvcGFjaXR5XCIsYj8wOjEpLGMuYXhlcy5zdWJ4LnN0eWxlKFwib3BhY2l0eVwiLGI/MDoxKSxhLmF4aXNYLmNhbGwoYy54QXhpcyksYS5heGlzWS5jYWxsKGMueUF4aXMpLGEuYXhpc1kyLmNhbGwoYy55MkF4aXMpLGEuYXhpc1N1YlguY2FsbChjLnN1YlhBeGlzKX0saS5nZXRDbGlwUGF0aD1mdW5jdGlvbihiKXt2YXIgYz1hLm5hdmlnYXRvci5hcHBWZXJzaW9uLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIm1zaWUgOS5cIik+PTA7cmV0dXJuXCJ1cmwoXCIrKGM/XCJcIjpkb2N1bWVudC5VUkwuc3BsaXQoXCIjXCIpWzBdKStcIiNcIitiK1wiKVwifSxpLmFwcGVuZENsaXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5hcHBlbmQoXCJjbGlwUGF0aFwiKS5hdHRyKFwiaWRcIixiKS5hcHBlbmQoXCJyZWN0XCIpfSxpLmdldEF4aXNDbGlwWD1mdW5jdGlvbihhKXt2YXIgYj1NYXRoLm1heCgzMCx0aGlzLm1hcmdpbi5sZWZ0KTtyZXR1cm4gYT8tKDErYik6LShiLTEpfSxpLmdldEF4aXNDbGlwWT1mdW5jdGlvbihhKXtyZXR1cm4gYT8tMjA6LXRoaXMubWFyZ2luLnRvcH0saS5nZXRYQXhpc0NsaXBYPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5nZXRBeGlzQ2xpcFgoIWEuY29uZmlnLmF4aXNfcm90YXRlZCl9LGkuZ2V0WEF4aXNDbGlwWT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuZ2V0QXhpc0NsaXBZKCFhLmNvbmZpZy5heGlzX3JvdGF0ZWQpfSxpLmdldFlBeGlzQ2xpcFg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmNvbmZpZy5heGlzX3lfaW5uZXI/LTE6YS5nZXRBeGlzQ2xpcFgoYS5jb25maWcuYXhpc19yb3RhdGVkKX0saS5nZXRZQXhpc0NsaXBZPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5nZXRBeGlzQ2xpcFkoYS5jb25maWcuYXhpc19yb3RhdGVkKX0saS5nZXRBeGlzQ2xpcFdpZHRoPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1NYXRoLm1heCgzMCxiLm1hcmdpbi5sZWZ0KSxkPU1hdGgubWF4KDMwLGIubWFyZ2luLnJpZ2h0KTtyZXR1cm4gYT9iLndpZHRoKzIrYytkOmIubWFyZ2luLmxlZnQrMjB9LGkuZ2V0QXhpc0NsaXBIZWlnaHQ9ZnVuY3Rpb24oYSl7cmV0dXJuKGE/dGhpcy5tYXJnaW4uYm90dG9tOnRoaXMubWFyZ2luLnRvcCt0aGlzLmhlaWdodCkrMjB9LGkuZ2V0WEF4aXNDbGlwV2lkdGg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmdldEF4aXNDbGlwV2lkdGgoIWEuY29uZmlnLmF4aXNfcm90YXRlZCl9LGkuZ2V0WEF4aXNDbGlwSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5nZXRBeGlzQ2xpcEhlaWdodCghYS5jb25maWcuYXhpc19yb3RhdGVkKX0saS5nZXRZQXhpc0NsaXBXaWR0aD1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuZ2V0QXhpc0NsaXBXaWR0aChhLmNvbmZpZy5heGlzX3JvdGF0ZWQpKyhhLmNvbmZpZy5heGlzX3lfaW5uZXI/MjA6MCl9LGkuZ2V0WUF4aXNDbGlwSGVpZ2h0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5nZXRBeGlzQ2xpcEhlaWdodChhLmNvbmZpZy5heGlzX3JvdGF0ZWQpfSxpLmluaXRQaWU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5kMyxjPWEuY29uZmlnO2EucGllPWIubGF5b3V0LnBpZSgpLnZhbHVlKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlcy5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYStiLnZhbHVlfSwwKX0pLGMuZGF0YV9vcmRlcnx8YS5waWUuc29ydChudWxsKX0saS51cGRhdGVSYWRpdXM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz1iLmdhdWdlX3dpZHRofHxiLmRvbnV0X3dpZHRoO2EucmFkaXVzRXhwYW5kZWQ9TWF0aC5taW4oYS5hcmNXaWR0aCxhLmFyY0hlaWdodCkvMixhLnJhZGl1cz0uOTUqYS5yYWRpdXNFeHBhbmRlZCxhLmlubmVyUmFkaXVzUmF0aW89Yz8oYS5yYWRpdXMtYykvYS5yYWRpdXM6LjYsYS5pbm5lclJhZGl1cz1hLmhhc1R5cGUoXCJkb251dFwiKXx8YS5oYXNUeXBlKFwiZ2F1Z2VcIik/YS5yYWRpdXMqYS5pbm5lclJhZGl1c1JhdGlvOjB9LGkudXBkYXRlQXJjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnN2Z0FyYz1hLmdldFN2Z0FyYygpLGEuc3ZnQXJjRXhwYW5kZWQ9YS5nZXRTdmdBcmNFeHBhbmRlZCgpLGEuc3ZnQXJjRXhwYW5kZWRTdWI9YS5nZXRTdmdBcmNFeHBhbmRlZCguOTgpfSxpLnVwZGF0ZUFuZ2xlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZD10aGlzLGU9ZC5jb25maWcsZj0hMSxnPTAsaD1lLmdhdWdlX21pbixpPWUuZ2F1Z2VfbWF4O1xucmV0dXJuIGQucGllKGQuZmlsdGVyVGFyZ2V0c1RvU2hvdyhkLmRhdGEudGFyZ2V0cykpLmZvckVhY2goZnVuY3Rpb24oYil7Znx8Yi5kYXRhLmlkIT09YS5kYXRhLmlkfHwoZj0hMCxhPWIsYS5pbmRleD1nKSxnKyt9KSxpc05hTihhLnN0YXJ0QW5nbGUpJiYoYS5zdGFydEFuZ2xlPTApLGlzTmFOKGEuZW5kQW5nbGUpJiYoYS5lbmRBbmdsZT1hLnN0YXJ0QW5nbGUpLGQuaXNHYXVnZVR5cGUoYS5kYXRhKSYmKGI9TWF0aC5QSS8oaS1oKSxjPWEudmFsdWU8aD8wOmEudmFsdWU8aT9hLnZhbHVlLWg6aS1oLGEuc3RhcnRBbmdsZT0tMSooTWF0aC5QSS8yKSxhLmVuZEFuZ2xlPWEuc3RhcnRBbmdsZStiKmMpLGY/YTpudWxsfSxpLmdldFN2Z0FyYz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyhhLnJhZGl1cykuaW5uZXJSYWRpdXMoYS5pbm5lclJhZGl1cyksYz1mdW5jdGlvbihjLGQpe3ZhciBlO3JldHVybiBkP2IoYyk6KGU9YS51cGRhdGVBbmdsZShjKSxlP2IoZSk6XCJNIDAgMFwiKX07cmV0dXJuIGMuY2VudHJvaWQ9Yi5jZW50cm9pZCxjfSxpLmdldFN2Z0FyY0V4cGFuZGVkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyhiLnJhZGl1c0V4cGFuZGVkKihhP2E6MSkpLmlubmVyUmFkaXVzKGIuaW5uZXJSYWRpdXMpO3JldHVybiBmdW5jdGlvbihhKXt2YXIgZD1iLnVwZGF0ZUFuZ2xlKGEpO3JldHVybiBkP2MoZCk6XCJNIDAgMFwifX0saS5nZXRBcmM9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHx0aGlzLmlzQXJjVHlwZShhLmRhdGEpP3RoaXMuc3ZnQXJjKGEsYik6XCJNIDAgMFwifSxpLnRyYW5zZm9ybUZvckFyY0xhYmVsPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZz10aGlzLGg9Zy51cGRhdGVBbmdsZShhKSxpPVwiXCI7cmV0dXJuIGgmJiFnLmhhc1R5cGUoXCJnYXVnZVwiKSYmKGI9dGhpcy5zdmdBcmMuY2VudHJvaWQoaCksYz1pc05hTihiWzBdKT8wOmJbMF0sZD1pc05hTihiWzFdKT8wOmJbMV0sZT1NYXRoLnNxcnQoYypjK2QqZCksZj1nLnJhZGl1cyYmZT8oMzYvZy5yYWRpdXM+LjM3NT8xLjE3NS0zNi9nLnJhZGl1czouOCkqZy5yYWRpdXMvZTowLGk9XCJ0cmFuc2xhdGUoXCIrYypmK1wiLFwiK2QqZitcIilcIiksaX0saS5nZXRBcmNSYXRpbz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5oYXNUeXBlKFwiZ2F1Z2VcIik/TWF0aC5QSToyKk1hdGguUEk7cmV0dXJuIGE/KGEuZW5kQW5nbGUtYS5zdGFydEFuZ2xlKS9jOm51bGx9LGkuY29udmVydFRvQXJjRGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGROYW1lKHtpZDphLmRhdGEuaWQsdmFsdWU6YS52YWx1ZSxyYXRpbzp0aGlzLmdldEFyY1JhdGlvKGEpLGluZGV4OmEuaW5kZXh9KX0saS50ZXh0Rm9yQXJjTGFiZWw9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnPXRoaXM7cmV0dXJuIGcuc2hvdWxkU2hvd0FyY0xhYmVsKCk/KGI9Zy51cGRhdGVBbmdsZShhKSxjPWI/Yi52YWx1ZTpudWxsLGQ9Zy5nZXRBcmNSYXRpbyhiKSxlPWEuZGF0YS5pZCxnLmhhc1R5cGUoXCJnYXVnZVwiKXx8Zy5tZWV0c0FyY0xhYmVsVGhyZXNob2xkKGQpPyhmPWcuZ2V0QXJjTGFiZWxGb3JtYXQoKSxmP2YoYyxkLGUpOmcuZGVmYXVsdEFyY1ZhbHVlRm9ybWF0KGMsZCkpOlwiXCIpOlwiXCJ9LGkuZXhwYW5kQXJjPWZ1bmN0aW9uKGIpe3ZhciBjLGQ9dGhpcztyZXR1cm4gZC50cmFuc2l0aW5nP3ZvaWQoYz1hLnNldEludGVydmFsKGZ1bmN0aW9uKCl7ZC50cmFuc2l0aW5nfHwoYS5jbGVhckludGVydmFsKGMpLGQubGVnZW5kLnNlbGVjdEFsbChcIi5jMy1sZWdlbmQtaXRlbS1mb2N1c2VkXCIpLnNpemUoKT4wJiZkLmV4cGFuZEFyYyhiKSl9LDEwKSk6KGI9ZC5tYXBUb1RhcmdldElkcyhiKSx2b2lkIGQuc3ZnLnNlbGVjdEFsbChkLnNlbGVjdG9yVGFyZ2V0cyhiLFwiLlwiK2wuY2hhcnRBcmMpKS5lYWNoKGZ1bmN0aW9uKGEpe2Quc2hvdWxkRXhwYW5kKGEuZGF0YS5pZCkmJmQuZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbChcInBhdGhcIikudHJhbnNpdGlvbigpLmR1cmF0aW9uKDUwKS5hdHRyKFwiZFwiLGQuc3ZnQXJjRXhwYW5kZWQpLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMDApLmF0dHIoXCJkXCIsZC5zdmdBcmNFeHBhbmRlZFN1YikuZWFjaChmdW5jdGlvbihhKXtkLmlzRG9udXRUeXBlKGEuZGF0YSl9KX0pKX0saS51bmV4cGFuZEFyYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzO2IudHJhbnNpdGluZ3x8KGE9Yi5tYXBUb1RhcmdldElkcyhhKSxiLnN2Zy5zZWxlY3RBbGwoYi5zZWxlY3RvclRhcmdldHMoYSxcIi5cIitsLmNoYXJ0QXJjKSkuc2VsZWN0QWxsKFwicGF0aFwiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNTApLmF0dHIoXCJkXCIsYi5zdmdBcmMpLGIuc3ZnLnNlbGVjdEFsbChcIi5cIitsLmFyYykuc3R5bGUoXCJvcGFjaXR5XCIsMSkpfSxpLnNob3VsZEV4cGFuZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7cmV0dXJuIGIuaXNEb251dFR5cGUoYSkmJmMuZG9udXRfZXhwYW5kfHxiLmlzR2F1Z2VUeXBlKGEpJiZjLmdhdWdlX2V4cGFuZHx8Yi5pc1BpZVR5cGUoYSkmJmMucGllX2V4cGFuZH0saS5zaG91bGRTaG93QXJjTGFiZWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz0hMDtyZXR1cm4gYS5oYXNUeXBlKFwiZG9udXRcIik/Yz1iLmRvbnV0X2xhYmVsX3Nob3c6YS5oYXNUeXBlKFwicGllXCIpJiYoYz1iLnBpZV9sYWJlbF9zaG93KSxjfSxpLm1lZXRzQXJjTGFiZWxUaHJlc2hvbGQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnLGQ9Yi5oYXNUeXBlKFwiZG9udXRcIik/Yy5kb251dF9sYWJlbF90aHJlc2hvbGQ6Yy5waWVfbGFiZWxfdGhyZXNob2xkO3JldHVybiBhPj1kfSxpLmdldEFyY0xhYmVsRm9ybWF0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGM9Yi5waWVfbGFiZWxfZm9ybWF0O3JldHVybiBhLmhhc1R5cGUoXCJnYXVnZVwiKT9jPWIuZ2F1Z2VfbGFiZWxfZm9ybWF0OmEuaGFzVHlwZShcImRvbnV0XCIpJiYoYz1iLmRvbnV0X2xhYmVsX2Zvcm1hdCksY30saS5nZXRBcmNUaXRsZT1mdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuaGFzVHlwZShcImRvbnV0XCIpP2EuY29uZmlnLmRvbnV0X3RpdGxlOlwiXCJ9LGkudXBkYXRlVGFyZ2V0c0ZvckFyYz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9dGhpcyxlPWQubWFpbixmPWQuY2xhc3NDaGFydEFyYy5iaW5kKGQpLGc9ZC5jbGFzc0FyY3MuYmluZChkKSxoPWQuY2xhc3NGb2N1cy5iaW5kKGQpO2I9ZS5zZWxlY3QoXCIuXCIrbC5jaGFydEFyY3MpLnNlbGVjdEFsbChcIi5cIitsLmNoYXJ0QXJjKS5kYXRhKGQucGllKGEpKS5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihhKXtyZXR1cm4gZihhKStoKGEuZGF0YSl9KSxjPWIuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGYpLGMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixnKSxjLmFwcGVuZChcInRleHRcIikuYXR0cihcImR5XCIsZC5oYXNUeXBlKFwiZ2F1Z2VcIik/XCItLjFlbVwiOlwiLjM1ZW1cIikuc3R5bGUoXCJvcGFjaXR5XCIsMCkuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLFwibWlkZGxlXCIpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIil9LGkuaW5pdEFyYz1mdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5hcmNzPWEubWFpbi5zZWxlY3QoXCIuXCIrbC5jaGFydCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0QXJjcykuYXR0cihcInRyYW5zZm9ybVwiLGEuZ2V0VHJhbnNsYXRlKFwiYXJjXCIpKSxhLmFyY3MuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0QXJjc1RpdGxlKS5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJtaWRkbGVcIikudGV4dChhLmdldEFyY1RpdGxlKCkpfSxpLnJlZHJhd0FyYz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLGY9ZS5kMyxnPWUuY29uZmlnLGg9ZS5tYWluO2Q9aC5zZWxlY3RBbGwoXCIuXCIrbC5hcmNzKS5zZWxlY3RBbGwoXCIuXCIrbC5hcmMpLmRhdGEoZS5hcmNEYXRhLmJpbmQoZSkpLGQuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLGUuY2xhc3NBcmMuYmluZChlKSkuc3R5bGUoXCJmaWxsXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGUuY29sb3IoYS5kYXRhKX0pLnN0eWxlKFwiY3Vyc29yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGcuaW50ZXJhY3Rpb25fZW5hYmxlZCYmZy5kYXRhX3NlbGVjdGlvbl9pc3NlbGVjdGFibGUoYSk/XCJwb2ludGVyXCI6bnVsbH0pLnN0eWxlKFwib3BhY2l0eVwiLDApLmVhY2goZnVuY3Rpb24oYSl7ZS5pc0dhdWdlVHlwZShhLmRhdGEpJiYoYS5zdGFydEFuZ2xlPWEuZW5kQW5nbGU9LTEqKE1hdGguUEkvMikpLHRoaXMuX2N1cnJlbnQ9YX0pLGQuYXR0cihcInRyYW5zZm9ybVwiLGZ1bmN0aW9uKGEpe3JldHVybiFlLmlzR2F1Z2VUeXBlKGEuZGF0YSkmJmM/XCJzY2FsZSgwKVwiOlwiXCJ9KS5zdHlsZShcIm9wYWNpdHlcIixmdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXMuX2N1cnJlbnQ/MDoxfSkub24oXCJtb3VzZW92ZXJcIixnLmludGVyYWN0aW9uX2VuYWJsZWQ/ZnVuY3Rpb24oYSl7dmFyIGIsYztlLnRyYW5zaXRpbmd8fChiPWUudXBkYXRlQW5nbGUoYSksYz1lLmNvbnZlcnRUb0FyY0RhdGEoYiksZS5leHBhbmRBcmMoYi5kYXRhLmlkKSxlLmFwaS5mb2N1cyhiLmRhdGEuaWQpLGUudG9nZ2xlRm9jdXNMZWdlbmQoYi5kYXRhLmlkLCEwKSxlLmNvbmZpZy5kYXRhX29ubW91c2VvdmVyKGMsdGhpcykpfTpudWxsKS5vbihcIm1vdXNlbW92ZVwiLGcuaW50ZXJhY3Rpb25fZW5hYmxlZD9mdW5jdGlvbihhKXt2YXIgYj1lLnVwZGF0ZUFuZ2xlKGEpLGM9ZS5jb252ZXJ0VG9BcmNEYXRhKGIpLGQ9W2NdO2Uuc2hvd1Rvb2x0aXAoZCx0aGlzKX06bnVsbCkub24oXCJtb3VzZW91dFwiLGcuaW50ZXJhY3Rpb25fZW5hYmxlZD9mdW5jdGlvbihhKXt2YXIgYixjO2UudHJhbnNpdGluZ3x8KGI9ZS51cGRhdGVBbmdsZShhKSxjPWUuY29udmVydFRvQXJjRGF0YShiKSxlLnVuZXhwYW5kQXJjKGIuZGF0YS5pZCksZS5hcGkucmV2ZXJ0KCksZS5yZXZlcnRMZWdlbmQoKSxlLmhpZGVUb29sdGlwKCksZS5jb25maWcuZGF0YV9vbm1vdXNlb3V0KGMsdGhpcykpfTpudWxsKS5vbihcImNsaWNrXCIsZy5pbnRlcmFjdGlvbl9lbmFibGVkP2Z1bmN0aW9uKGEsYil7dmFyIGM9ZS51cGRhdGVBbmdsZShhKSxkPWUuY29udmVydFRvQXJjRGF0YShjKTtlLnRvZ2dsZVNoYXBlJiZlLnRvZ2dsZVNoYXBlKHRoaXMsZCxiKSxlLmNvbmZpZy5kYXRhX29uY2xpY2suY2FsbChlLmFwaSxkLHRoaXMpfTpudWxsKS5lYWNoKGZ1bmN0aW9uKCl7ZS50cmFuc2l0aW5nPSEwfSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLmF0dHJUd2VlbihcImRcIixmdW5jdGlvbihhKXt2YXIgYixjPWUudXBkYXRlQW5nbGUoYSk7cmV0dXJuIGM/KGlzTmFOKHRoaXMuX2N1cnJlbnQuc3RhcnRBbmdsZSkmJih0aGlzLl9jdXJyZW50LnN0YXJ0QW5nbGU9MCksaXNOYU4odGhpcy5fY3VycmVudC5lbmRBbmdsZSkmJih0aGlzLl9jdXJyZW50LmVuZEFuZ2xlPXRoaXMuX2N1cnJlbnQuc3RhcnRBbmdsZSksYj1mLmludGVycG9sYXRlKHRoaXMuX2N1cnJlbnQsYyksdGhpcy5fY3VycmVudD1iKDApLGZ1bmN0aW9uKGMpe3ZhciBkPWIoYyk7cmV0dXJuIGQuZGF0YT1hLmRhdGEsZS5nZXRBcmMoZCwhMCl9KTpmdW5jdGlvbigpe3JldHVyblwiTSAwIDBcIn19KS5hdHRyKFwidHJhbnNmb3JtXCIsYz9cInNjYWxlKDEpXCI6XCJcIikuc3R5bGUoXCJmaWxsXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGUubGV2ZWxDb2xvcj9lLmxldmVsQ29sb3IoYS5kYXRhLnZhbHVlc1swXS52YWx1ZSk6ZS5jb2xvcihhLmRhdGEuaWQpfSkuc3R5bGUoXCJvcGFjaXR5XCIsMSkuY2FsbChlLmVuZGFsbCxmdW5jdGlvbigpe2UudHJhbnNpdGluZz0hMX0pLGQuZXhpdCgpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihiKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5yZW1vdmUoKSxoLnNlbGVjdEFsbChcIi5cIitsLmNoYXJ0QXJjKS5zZWxlY3QoXCJ0ZXh0XCIpLnN0eWxlKFwib3BhY2l0eVwiLDApLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBlLmlzR2F1Z2VUeXBlKGEuZGF0YSk/bC5nYXVnZVZhbHVlOlwiXCJ9KS50ZXh0KGUudGV4dEZvckFyY0xhYmVsLmJpbmQoZSkpLmF0dHIoXCJ0cmFuc2Zvcm1cIixlLnRyYW5zZm9ybUZvckFyY0xhYmVsLmJpbmQoZSkpLnN0eWxlKFwiZm9udC1zaXplXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGUuaXNHYXVnZVR5cGUoYS5kYXRhKT9NYXRoLnJvdW5kKGUucmFkaXVzLzUpK1wicHhcIjpcIlwifSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwib3BhY2l0eVwiLGZ1bmN0aW9uKGEpe3JldHVybiBlLmlzVGFyZ2V0VG9TaG93KGEuZGF0YS5pZCkmJmUuaXNBcmNUeXBlKGEuZGF0YSk/MTowfSksaC5zZWxlY3QoXCIuXCIrbC5jaGFydEFyY3NUaXRsZSkuc3R5bGUoXCJvcGFjaXR5XCIsZS5oYXNUeXBlKFwiZG9udXRcIil8fGUuaGFzVHlwZShcImdhdWdlXCIpPzE6MCksZS5oYXNUeXBlKFwiZ2F1Z2VcIikmJihlLmFyY3Muc2VsZWN0KFwiLlwiK2wuY2hhcnRBcmNzQmFja2dyb3VuZCkuYXR0cihcImRcIixmdW5jdGlvbigpe3ZhciBhPXtkYXRhOlt7dmFsdWU6Zy5nYXVnZV9tYXh9XSxzdGFydEFuZ2xlOi0xKihNYXRoLlBJLzIpLGVuZEFuZ2xlOk1hdGguUEkvMn07cmV0dXJuIGUuZ2V0QXJjKGEsITAsITApfSksZS5hcmNzLnNlbGVjdChcIi5cIitsLmNoYXJ0QXJjc0dhdWdlVW5pdCkuYXR0cihcImR5XCIsXCIuNzVlbVwiKS50ZXh0KGcuZ2F1Z2VfbGFiZWxfc2hvdz9nLmdhdWdlX3VuaXRzOlwiXCIpLGUuYXJjcy5zZWxlY3QoXCIuXCIrbC5jaGFydEFyY3NHYXVnZU1pbikuYXR0cihcImR4XCIsLTEqKGUuaW5uZXJSYWRpdXMrKGUucmFkaXVzLWUuaW5uZXJSYWRpdXMpLzIpK1wicHhcIikuYXR0cihcImR5XCIsXCIxLjJlbVwiKS50ZXh0KGcuZ2F1Z2VfbGFiZWxfc2hvdz9nLmdhdWdlX21pbjpcIlwiKSxlLmFyY3Muc2VsZWN0KFwiLlwiK2wuY2hhcnRBcmNzR2F1Z2VNYXgpLmF0dHIoXCJkeFwiLGUuaW5uZXJSYWRpdXMrKGUucmFkaXVzLWUuaW5uZXJSYWRpdXMpLzIrXCJweFwiKS5hdHRyKFwiZHlcIixcIjEuMmVtXCIpLnRleHQoZy5nYXVnZV9sYWJlbF9zaG93P2cuZ2F1Z2VfbWF4OlwiXCIpKX0saS5pbml0R2F1Z2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFyY3M7dGhpcy5oYXNUeXBlKFwiZ2F1Z2VcIikmJihhLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsbC5jaGFydEFyY3NCYWNrZ3JvdW5kKSxhLmFwcGVuZChcInRleHRcIikuYXR0cihcImNsYXNzXCIsbC5jaGFydEFyY3NHYXVnZVVuaXQpLnN0eWxlKFwidGV4dC1hbmNob3JcIixcIm1pZGRsZVwiKS5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpLGEuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0QXJjc0dhdWdlTWluKS5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJtaWRkbGVcIikuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLFwibm9uZVwiKSxhLmFwcGVuZChcInRleHRcIikuYXR0cihcImNsYXNzXCIsbC5jaGFydEFyY3NHYXVnZU1heCkuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLFwibWlkZGxlXCIpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIikpfSxpLmdldEdhdWdlTGFiZWxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb25maWcuZ2F1Z2VfbGFiZWxfc2hvdz8yMDowfSxpLmluaXRSZWdpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EucmVnaW9uPWEubWFpbi5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGlwLXBhdGhcIixhLmNsaXBQYXRoKS5hdHRyKFwiY2xhc3NcIixsLnJlZ2lvbnMpfSxpLnVwZGF0ZVJlZ2lvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jb25maWc7Yi5yZWdpb24uc3R5bGUoXCJ2aXNpYmlsaXR5XCIsYi5oYXNBcmNUeXBlKCk/XCJoaWRkZW5cIjpcInZpc2libGVcIiksYi5tYWluUmVnaW9uPWIubWFpbi5zZWxlY3QoXCIuXCIrbC5yZWdpb25zKS5zZWxlY3RBbGwoXCIuXCIrbC5yZWdpb24pLmRhdGEoYy5yZWdpb25zKSxiLm1haW5SZWdpb24uZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGIuY2xhc3NSZWdpb24uYmluZChiKSkuYXBwZW5kKFwicmVjdFwiKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLDApLGIubWFpblJlZ2lvbi5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwib3BhY2l0eVwiLDApLnJlbW92ZSgpfSxpLnJlZHJhd1JlZ2lvbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5tYWluUmVnaW9uLnNlbGVjdEFsbChcInJlY3RcIiksZD1iLnJlZ2lvblguYmluZChiKSxlPWIucmVnaW9uWS5iaW5kKGIpLGY9Yi5yZWdpb25XaWR0aC5iaW5kKGIpLGc9Yi5yZWdpb25IZWlnaHQuYmluZChiKTtyZXR1cm5bKGE/Yy50cmFuc2l0aW9uKCk6YykuYXR0cihcInhcIixkKS5hdHRyKFwieVwiLGUpLmF0dHIoXCJ3aWR0aFwiLGYpLmF0dHIoXCJoZWlnaHRcIixnKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLGZ1bmN0aW9uKGEpe3JldHVybiBtKGEub3BhY2l0eSk/YS5vcGFjaXR5Oi4xfSldfSxpLnJlZ2lvblg9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLGQ9Yy5jb25maWcsZT1cInlcIj09PWEuYXhpcz9jLnk6Yy55MjtyZXR1cm4gYj1cInlcIj09PWEuYXhpc3x8XCJ5MlwiPT09YS5heGlzP2QuYXhpc19yb3RhdGVkJiZcInN0YXJ0XCJpbiBhP2UoYS5zdGFydCk6MDpkLmF4aXNfcm90YXRlZD8wOlwic3RhcnRcImluIGE/Yy54KGMuaXNUaW1lU2VyaWVzKCk/Yy5wYXJzZURhdGUoYS5zdGFydCk6YS5zdGFydCk6MH0saS5yZWdpb25ZPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcyxkPWMuY29uZmlnLGU9XCJ5XCI9PT1hLmF4aXM/Yy55OmMueTI7cmV0dXJuIGI9XCJ5XCI9PT1hLmF4aXN8fFwieTJcIj09PWEuYXhpcz9kLmF4aXNfcm90YXRlZD8wOlwiZW5kXCJpbiBhP2UoYS5lbmQpOjA6ZC5heGlzX3JvdGF0ZWQmJlwic3RhcnRcImluIGE/Yy54KGMuaXNUaW1lU2VyaWVzKCk/Yy5wYXJzZURhdGUoYS5zdGFydCk6YS5zdGFydCk6MH0saS5yZWdpb25XaWR0aD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMsZD1jLmNvbmZpZyxlPWMucmVnaW9uWChhKSxmPVwieVwiPT09YS5heGlzP2MueTpjLnkyO3JldHVybiBiPVwieVwiPT09YS5heGlzfHxcInkyXCI9PT1hLmF4aXM/ZC5heGlzX3JvdGF0ZWQmJlwiZW5kXCJpbiBhP2YoYS5lbmQpOmMud2lkdGg6ZC5heGlzX3JvdGF0ZWQ/Yy53aWR0aDpcImVuZFwiaW4gYT9jLngoYy5pc1RpbWVTZXJpZXMoKT9jLnBhcnNlRGF0ZShhLmVuZCk6YS5lbmQpOmMud2lkdGgsZT5iPzA6Yi1lfSxpLnJlZ2lvbkhlaWdodD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMsZD1jLmNvbmZpZyxlPXRoaXMucmVnaW9uWShhKSxmPVwieVwiPT09YS5heGlzP2MueTpjLnkyO3JldHVybiBiPVwieVwiPT09YS5heGlzfHxcInkyXCI9PT1hLmF4aXM/ZC5heGlzX3JvdGF0ZWQ/Yy5oZWlnaHQ6XCJzdGFydFwiaW4gYT9mKGEuc3RhcnQpOmMuaGVpZ2h0OmQuYXhpc19yb3RhdGVkJiZcImVuZFwiaW4gYT9jLngoYy5pc1RpbWVTZXJpZXMoKT9jLnBhcnNlRGF0ZShhLmVuZCk6YS5lbmQpOmMuaGVpZ2h0LGU+Yj8wOmItZX0saS5pc1JlZ2lvbk9uWD1mdW5jdGlvbihhKXtyZXR1cm4hYS5heGlzfHxcInhcIj09PWEuYXhpc30saS5kcmFnPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaj10aGlzLGs9ai5jb25maWcsbT1qLm1haW4sbj1qLmQzO2ouaGFzQXJjVHlwZSgpfHxrLmRhdGFfc2VsZWN0aW9uX2VuYWJsZWQmJighay56b29tX2VuYWJsZWR8fGouem9vbS5hbHREb21haW4pJiZrLmRhdGFfc2VsZWN0aW9uX211bHRpcGxlJiYoYj1qLmRyYWdTdGFydFswXSxjPWouZHJhZ1N0YXJ0WzFdLGQ9YVswXSxlPWFbMV0sZj1NYXRoLm1pbihiLGQpLGc9TWF0aC5tYXgoYixkKSxoPWsuZGF0YV9zZWxlY3Rpb25fZ3JvdXBlZD9qLm1hcmdpbi50b3A6TWF0aC5taW4oYyxlKSxpPWsuZGF0YV9zZWxlY3Rpb25fZ3JvdXBlZD9qLmhlaWdodDpNYXRoLm1heChjLGUpLG0uc2VsZWN0KFwiLlwiK2wuZHJhZ2FyZWEpLmF0dHIoXCJ4XCIsZikuYXR0cihcInlcIixoKS5hdHRyKFwid2lkdGhcIixnLWYpLmF0dHIoXCJoZWlnaHRcIixpLWgpLG0uc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGVzKS5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBrLmRhdGFfc2VsZWN0aW9uX2lzc2VsZWN0YWJsZShhKX0pLmVhY2goZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsayxtLG8scD1uLnNlbGVjdCh0aGlzKSxxPXAuY2xhc3NlZChsLlNFTEVDVEVEKSxyPXAuY2xhc3NlZChsLklOQ0xVREVEKSxzPSExO2lmKHAuY2xhc3NlZChsLmNpcmNsZSkpYz0xKnAuYXR0cihcImN4XCIpLGQ9MSpwLmF0dHIoXCJjeVwiKSxtPWoudG9nZ2xlUG9pbnQscz1jPmYmJmc+YyYmZD5oJiZpPmQ7ZWxzZXtpZighcC5jbGFzc2VkKGwuYmFyKSlyZXR1cm47bz15KHRoaXMpLGM9by54LGQ9by55LGU9by53aWR0aCxrPW8uaGVpZ2h0LG09ai50b2dnbGVQYXRoLHM9IShjPmd8fGY+YytlfHxkPml8fGg+ZCtrKX1zXnImJihwLmNsYXNzZWQobC5JTkNMVURFRCwhcikscC5jbGFzc2VkKGwuU0VMRUNURUQsIXEpLG0uY2FsbChqLCFxLHAsYSxiKSl9KSl9LGkuZHJhZ3N0YXJ0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZztiLmhhc0FyY1R5cGUoKXx8Yy5kYXRhX3NlbGVjdGlvbl9lbmFibGVkJiYoYi5kcmFnU3RhcnQ9YSxiLm1haW4uc2VsZWN0KFwiLlwiK2wuY2hhcnQpLmFwcGVuZChcInJlY3RcIikuYXR0cihcImNsYXNzXCIsbC5kcmFnYXJlYSkuc3R5bGUoXCJvcGFjaXR5XCIsLjEpLGIuZHJhZ2dpbmc9ITApfSxpLmRyYWdlbmQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWc7YS5oYXNBcmNUeXBlKCl8fGIuZGF0YV9zZWxlY3Rpb25fZW5hYmxlZCYmKGEubWFpbi5zZWxlY3QoXCIuXCIrbC5kcmFnYXJlYSkudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMCkuc3R5bGUoXCJvcGFjaXR5XCIsMCkucmVtb3ZlKCksYS5tYWluLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlKS5jbGFzc2VkKGwuSU5DTFVERUQsITEpLGEuZHJhZ2dpbmc9ITEpfSxpLnNlbGVjdFBvaW50PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9ZC5jb25maWcsZj0oZS5heGlzX3JvdGF0ZWQ/ZC5jaXJjbGVZOmQuY2lyY2xlWCkuYmluZChkKSxnPShlLmF4aXNfcm90YXRlZD9kLmNpcmNsZVg6ZC5jaXJjbGVZKS5iaW5kKGQpLGg9ZC5wb2ludFNlbGVjdFIuYmluZChkKTtlLmRhdGFfb25zZWxlY3RlZC5jYWxsKGQuYXBpLGIsYS5ub2RlKCkpLGQubWFpbi5zZWxlY3QoXCIuXCIrbC5zZWxlY3RlZENpcmNsZXMrZC5nZXRUYXJnZXRTZWxlY3RvclN1ZmZpeChiLmlkKSkuc2VsZWN0QWxsKFwiLlwiK2wuc2VsZWN0ZWRDaXJjbGUrXCItXCIrYykuZGF0YShbYl0pLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGQuZ2VuZXJhdGVDbGFzcyhsLnNlbGVjdGVkQ2lyY2xlLGMpfSkuYXR0cihcImN4XCIsZikuYXR0cihcImN5XCIsZykuYXR0cihcInN0cm9rZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGQuY29sb3IoYil9KS5hdHRyKFwiclwiLGZ1bmN0aW9uKGEpe3JldHVybiAxLjQqZC5wb2ludFNlbGVjdFIoYSl9KS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwKS5hdHRyKFwiclwiLGgpfSxpLnVuc2VsZWN0UG9pbnQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXM7ZC5jb25maWcuZGF0YV9vbnVuc2VsZWN0ZWQoYixhLm5vZGUoKSksZC5tYWluLnNlbGVjdChcIi5cIitsLnNlbGVjdGVkQ2lyY2xlcytkLmdldFRhcmdldFNlbGVjdG9yU3VmZml4KGIuaWQpKS5zZWxlY3RBbGwoXCIuXCIrbC5zZWxlY3RlZENpcmNsZStcIi1cIitjKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwKS5hdHRyKFwiclwiLDApLnJlbW92ZSgpfSxpLnRvZ2dsZVBvaW50PWZ1bmN0aW9uKGEsYixjLGQpe2E/dGhpcy5zZWxlY3RQb2ludChiLGMsZCk6dGhpcy51bnNlbGVjdFBvaW50KGIsYyxkKX0saS5zZWxlY3RQYXRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztjLmNvbmZpZy5kYXRhX29uc2VsZWN0ZWQuY2FsbChjLGIsYS5ub2RlKCkpLGEudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMCkuc3R5bGUoXCJmaWxsXCIsZnVuY3Rpb24oKXtyZXR1cm4gYy5kMy5yZ2IoYy5jb2xvcihiKSkuYnJpZ2h0ZXIoLjc1KX0pfSxpLnVuc2VsZWN0UGF0aD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7Yy5jb25maWcuZGF0YV9vbnVuc2VsZWN0ZWQuY2FsbChjLGIsYS5ub2RlKCkpLGEudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMCkuc3R5bGUoXCJmaWxsXCIsZnVuY3Rpb24oKXtyZXR1cm4gYy5jb2xvcihiKX0pfSxpLnRvZ2dsZVBhdGg9ZnVuY3Rpb24oYSxiLGMsZCl7YT90aGlzLnNlbGVjdFBhdGgoYixjLGQpOnRoaXMudW5zZWxlY3RQYXRoKGIsYyxkKX0saS5nZXRUb2dnbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXRoaXM7cmV0dXJuXCJjaXJjbGVcIj09PWEubm9kZU5hbWU/Yz1kLmlzU3RlcFR5cGUoYik/ZnVuY3Rpb24oKXt9OmQudG9nZ2xlUG9pbnQ6XCJwYXRoXCI9PT1hLm5vZGVOYW1lJiYoYz1kLnRvZ2dsZVBhdGgpLGN9LGkudG9nZ2xlU2hhcGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1kLmQzLGY9ZC5jb25maWcsZz1lLnNlbGVjdChhKSxoPWcuY2xhc3NlZChsLlNFTEVDVEVEKSxpPWQuZ2V0VG9nZ2xlKGEsYikuYmluZChkKTtmLmRhdGFfc2VsZWN0aW9uX2VuYWJsZWQmJmYuZGF0YV9zZWxlY3Rpb25faXNzZWxlY3RhYmxlKGIpJiYoZi5kYXRhX3NlbGVjdGlvbl9tdWx0aXBsZXx8ZC5tYWluLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlcysoZi5kYXRhX3NlbGVjdGlvbl9ncm91cGVkP2QuZ2V0VGFyZ2V0U2VsZWN0b3JTdWZmaXgoYi5pZCk6XCJcIikpLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlKS5lYWNoKGZ1bmN0aW9uKGEsYil7dmFyIGM9ZS5zZWxlY3QodGhpcyk7Yy5jbGFzc2VkKGwuU0VMRUNURUQpJiZpKCExLGMuY2xhc3NlZChsLlNFTEVDVEVELCExKSxhLGIpfSksZy5jbGFzc2VkKGwuU0VMRUNURUQsIWgpLGkoIWgsZyxiLGMpKX0saS5pbml0QnJ1c2g9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5kMzthLmJydXNoPWIuc3ZnLmJydXNoKCkub24oXCJicnVzaFwiLGZ1bmN0aW9uKCl7YS5yZWRyYXdGb3JCcnVzaCgpfSksYS5icnVzaC51cGRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYS5jb250ZXh0JiZhLmNvbnRleHQuc2VsZWN0KFwiLlwiK2wuYnJ1c2gpLmNhbGwodGhpcyksdGhpc30sYS5icnVzaC5zY2FsZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5jb25maWcuYXhpc19yb3RhdGVkP3RoaXMueShiKTp0aGlzLngoYil9fSxpLmluaXRTdWJjaGFydD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZyxjPWEuY29udGV4dD1hLnN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIixhLmdldFRyYW5zbGF0ZShcImNvbnRleHRcIikpO2Muc3R5bGUoXCJ2aXNpYmlsaXR5XCIsYi5zdWJjaGFydF9zaG93P1widmlzaWJsZVwiOlwiaGlkZGVuXCIpLGMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xpcC1wYXRoXCIsYS5jbGlwUGF0aEZvclN1YmNoYXJ0KS5hdHRyKFwiY2xhc3NcIixsLmNoYXJ0KSxjLnNlbGVjdChcIi5cIitsLmNoYXJ0KS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwuY2hhcnRCYXJzKSxjLnNlbGVjdChcIi5cIitsLmNoYXJ0KS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGwuY2hhcnRMaW5lcyksYy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGlwLXBhdGhcIixhLmNsaXBQYXRoKS5hdHRyKFwiY2xhc3NcIixsLmJydXNoKS5jYWxsKGEuYnJ1c2gpLGEuYXhlcy5zdWJ4PWMuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixsLmF4aXNYKS5hdHRyKFwidHJhbnNmb3JtXCIsYS5nZXRUcmFuc2xhdGUoXCJzdWJ4XCIpKS5hdHRyKFwiY2xpcC1wYXRoXCIsYi5heGlzX3JvdGF0ZWQ/XCJcIjphLmNsaXBQYXRoRm9yWEF4aXMpfSxpLnVwZGF0ZVRhcmdldHNGb3JTdWJjaGFydD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmPXRoaXMsZz1mLmNvbnRleHQsaD1mLmNvbmZpZyxpPWYuY2xhc3NDaGFydEJhci5iaW5kKGYpLGo9Zi5jbGFzc0JhcnMuYmluZChmKSxrPWYuY2xhc3NDaGFydExpbmUuYmluZChmKSxtPWYuY2xhc3NMaW5lcy5iaW5kKGYpLG49Zi5jbGFzc0FyZWFzLmJpbmQoZik7aC5zdWJjaGFydF9zaG93JiYoZT1nLnNlbGVjdChcIi5cIitsLmNoYXJ0QmFycykuc2VsZWN0QWxsKFwiLlwiK2wuY2hhcnRCYXIpLmRhdGEoYSkuYXR0cihcImNsYXNzXCIsaSksZD1lLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5hdHRyKFwiY2xhc3NcIixpKSxkLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsaiksYz1nLnNlbGVjdChcIi5cIitsLmNoYXJ0TGluZXMpLnNlbGVjdEFsbChcIi5cIitsLmNoYXJ0TGluZSkuZGF0YShhKS5hdHRyKFwiY2xhc3NcIixrKSxiPWMuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLnN0eWxlKFwib3BhY2l0eVwiLDApLmF0dHIoXCJjbGFzc1wiLGspLGIuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIixtKSxiLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsbiksZy5zZWxlY3RBbGwoXCIuXCIrbC5icnVzaCtcIiByZWN0XCIpLmF0dHIoaC5heGlzX3JvdGF0ZWQ/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsaC5heGlzX3JvdGF0ZWQ/Zi53aWR0aDI6Zi5oZWlnaHQyKSl9LGkudXBkYXRlQmFyRm9yU3ViY2hhcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmNvbnRleHRCYXI9Yi5jb250ZXh0LnNlbGVjdEFsbChcIi5cIitsLmJhcnMpLnNlbGVjdEFsbChcIi5cIitsLmJhcikuZGF0YShiLmJhckRhdGEuYmluZChiKSksYi5jb250ZXh0QmFyLmVudGVyKCkuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIixiLmNsYXNzQmFyLmJpbmQoYikpLnN0eWxlKFwic3Ryb2tlXCIsXCJub25lXCIpLnN0eWxlKFwiZmlsbFwiLGIuY29sb3IpLGIuY29udGV4dEJhci5zdHlsZShcIm9wYWNpdHlcIixiLmluaXRpYWxPcGFjaXR5LmJpbmQoYikpLGIuY29udGV4dEJhci5leGl0KCkudHJhbnNpdGlvbigpLmR1cmF0aW9uKGEpLnN0eWxlKFwib3BhY2l0eVwiLDApLnJlbW92ZSgpfSxpLnJlZHJhd0JhckZvclN1YmNoYXJ0PWZ1bmN0aW9uKGEsYixjKXsoYj90aGlzLmNvbnRleHRCYXIudHJhbnNpdGlvbigpLmR1cmF0aW9uKGMpOnRoaXMuY29udGV4dEJhcikuYXR0cihcImRcIixhKS5zdHlsZShcIm9wYWNpdHlcIiwxKX0saS51cGRhdGVMaW5lRm9yU3ViY2hhcnQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmNvbnRleHRMaW5lPWIuY29udGV4dC5zZWxlY3RBbGwoXCIuXCIrbC5saW5lcykuc2VsZWN0QWxsKFwiLlwiK2wubGluZSkuZGF0YShiLmxpbmVEYXRhLmJpbmQoYikpLGIuY29udGV4dExpbmUuZW50ZXIoKS5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLGIuY2xhc3NMaW5lLmJpbmQoYikpLnN0eWxlKFwic3Ryb2tlXCIsYi5jb2xvciksYi5jb250ZXh0TGluZS5zdHlsZShcIm9wYWNpdHlcIixiLmluaXRpYWxPcGFjaXR5LmJpbmQoYikpLGIuY29udGV4dExpbmUuZXhpdCgpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihhKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5yZW1vdmUoKX0saS5yZWRyYXdMaW5lRm9yU3ViY2hhcnQ9ZnVuY3Rpb24oYSxiLGMpeyhiP3RoaXMuY29udGV4dExpbmUudHJhbnNpdGlvbigpLmR1cmF0aW9uKGMpOnRoaXMuY29udGV4dExpbmUpLmF0dHIoXCJkXCIsYSkuc3R5bGUoXCJvcGFjaXR5XCIsMSl9LGkudXBkYXRlQXJlYUZvclN1YmNoYXJ0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmQzO2IuY29udGV4dEFyZWE9Yi5jb250ZXh0LnNlbGVjdEFsbChcIi5cIitsLmFyZWFzKS5zZWxlY3RBbGwoXCIuXCIrbC5hcmVhKS5kYXRhKGIubGluZURhdGEuYmluZChiKSksYi5jb250ZXh0QXJlYS5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsYi5jbGFzc0FyZWEuYmluZChiKSkuc3R5bGUoXCJmaWxsXCIsYi5jb2xvcikuc3R5bGUoXCJvcGFjaXR5XCIsZnVuY3Rpb24oKXtyZXR1cm4gYi5vcmdBcmVhT3BhY2l0eT0rYy5zZWxlY3QodGhpcykuc3R5bGUoXCJvcGFjaXR5XCIpLDB9KSxiLmNvbnRleHRBcmVhLnN0eWxlKFwib3BhY2l0eVwiLDApLGIuY29udGV4dEFyZWEuZXhpdCgpLnRyYW5zaXRpb24oKS5kdXJhdGlvbihhKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5yZW1vdmUoKX0saS5yZWRyYXdBcmVhRm9yU3ViY2hhcnQ9ZnVuY3Rpb24oYSxiLGMpeyhiP3RoaXMuY29udGV4dEFyZWEudHJhbnNpdGlvbigpLmR1cmF0aW9uKGMpOnRoaXMuY29udGV4dEFyZWEpLmF0dHIoXCJkXCIsYSkuc3R5bGUoXCJmaWxsXCIsdGhpcy5jb2xvcikuc3R5bGUoXCJvcGFjaXR5XCIsdGhpcy5vcmdBcmVhT3BhY2l0eSl9LGkucmVkcmF3U3ViY2hhcnQ9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGgsaSxqLGs9dGhpcyxsPWsuZDMsbT1rLmNvbmZpZztrLmNvbnRleHQuc3R5bGUoXCJ2aXNpYmlsaXR5XCIsbS5zdWJjaGFydF9zaG93P1widmlzaWJsZVwiOlwiaGlkZGVuXCIpLG0uc3ViY2hhcnRfc2hvdyYmKGwuZXZlbnQmJlwiem9vbVwiPT09bC5ldmVudC50eXBlJiZrLmJydXNoLmV4dGVudChrLngub3JnRG9tYWluKCkpLnVwZGF0ZSgpLGEmJihrLmJydXNoLmVtcHR5KCl8fGsuYnJ1c2guZXh0ZW50KGsueC5vcmdEb21haW4oKSkudXBkYXRlKCksaD1rLmdlbmVyYXRlRHJhd0FyZWEoZSwhMCksaT1rLmdlbmVyYXRlRHJhd0JhcihmLCEwKSxqPWsuZ2VuZXJhdGVEcmF3TGluZShnLCEwKSxrLnVwZGF0ZUJhckZvclN1YmNoYXJ0KGMpLGsudXBkYXRlTGluZUZvclN1YmNoYXJ0KGMpLGsudXBkYXRlQXJlYUZvclN1YmNoYXJ0KGMpLGsucmVkcmF3QmFyRm9yU3ViY2hhcnQoaSxjLGMpLGsucmVkcmF3TGluZUZvclN1YmNoYXJ0KGosYyxjKSxrLnJlZHJhd0FyZWFGb3JTdWJjaGFydChoLGMsYykpKX0saS5yZWRyYXdGb3JCcnVzaD1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLng7YS5yZWRyYXcoe3dpdGhUcmFuc2l0aW9uOiExLHdpdGhZOmEuY29uZmlnLnpvb21fcmVzY2FsZSx3aXRoU3ViY2hhcnQ6ITEsd2l0aFVwZGF0ZVhEb21haW46ITAsd2l0aERpbWVuc2lvbjohMX0pLGEuY29uZmlnLnN1YmNoYXJ0X29uYnJ1c2guY2FsbChhLmFwaSxiLm9yZ0RvbWFpbigpKX0saS50cmFuc2Zvcm1Db250ZXh0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzO2ImJmIuYXhpc1N1Ylg/Yz1iLmF4aXNTdWJYOihjPWQuY29udGV4dC5zZWxlY3QoXCIuXCIrbC5heGlzWCksYSYmKGM9Yy50cmFuc2l0aW9uKCkpKSxkLmNvbnRleHQuYXR0cihcInRyYW5zZm9ybVwiLGQuZ2V0VHJhbnNsYXRlKFwiY29udGV4dFwiKSksYy5hdHRyKFwidHJhbnNmb3JtXCIsZC5nZXRUcmFuc2xhdGUoXCJzdWJ4XCIpKX0saS5nZXREZWZhdWx0RXh0ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY29uZmlnLGM9bihiLmF4aXNfeF9leHRlbnQpP2IuYXhpc194X2V4dGVudChhLmdldFhEb21haW4oYS5kYXRhLnRhcmdldHMpKTpiLmF4aXNfeF9leHRlbnQ7cmV0dXJuIGEuaXNUaW1lU2VyaWVzKCkmJihjPVthLnBhcnNlRGF0ZShjWzBdKSxhLnBhcnNlRGF0ZShjWzFdKV0pLGN9LGkuaW5pdFpvb209ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMsYz1iLmQzLGQ9Yi5jb25maWc7Yi56b29tPWMuYmVoYXZpb3Iuem9vbSgpLm9uKFwiem9vbXN0YXJ0XCIsZnVuY3Rpb24oKXthPWMuZXZlbnQuc291cmNlRXZlbnQsYi56b29tLmFsdERvbWFpbj1jLmV2ZW50LnNvdXJjZUV2ZW50LmFsdEtleT9iLngub3JnRG9tYWluKCk6bnVsbCxkLnpvb21fb256b29tc3RhcnQuY2FsbChiLmFwaSxjLmV2ZW50LnNvdXJjZUV2ZW50KX0pLm9uKFwiem9vbVwiLGZ1bmN0aW9uKCl7Yi5yZWRyYXdGb3Jab29tLmNhbGwoYil9KS5vbihcInpvb21lbmRcIixmdW5jdGlvbigpe3ZhciBlPWMuZXZlbnQuc291cmNlRXZlbnQ7ZSYmYS5jbGllbnRYPT09ZS5jbGllbnRYJiZhLmNsaWVudFk9PT1lLmNsaWVudFl8fChiLnJlZHJhd0V2ZW50UmVjdCgpLGIudXBkYXRlWm9vbSgpLGQuem9vbV9vbnpvb21lbmQuY2FsbChiLmFwaSxiLngub3JnRG9tYWluKCkpKX0pLGIuem9vbS5zY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gZC5heGlzX3JvdGF0ZWQ/dGhpcy55KGEpOnRoaXMueChhKX0sYi56b29tLm9yZ1NjYWxlRXh0ZW50PWZ1bmN0aW9uKCl7dmFyIGE9ZC56b29tX2V4dGVudD9kLnpvb21fZXh0ZW50OlsxLDEwXTtyZXR1cm5bYVswXSxNYXRoLm1heChiLmdldE1heERhdGFDb3VudCgpL2FbMV0sYVsxXSldfSxiLnpvb20udXBkYXRlU2NhbGVFeHRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10KGIueC5vcmdEb21haW4oKSkvdChiLm9yZ1hEb21haW4pLGM9dGhpcy5vcmdTY2FsZUV4dGVudCgpO3JldHVybiB0aGlzLnNjYWxlRXh0ZW50KFtjWzBdKmEsY1sxXSphXSksdGhpc319LGkudXBkYXRlWm9vbT1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZy56b29tX2VuYWJsZWQ/YS56b29tOmZ1bmN0aW9uKCl7fTthLm1haW4uc2VsZWN0KFwiLlwiK2wuem9vbVJlY3QpLmNhbGwoYikub24oXCJkYmxjbGljay56b29tXCIsbnVsbCksYS5tYWluLnNlbGVjdEFsbChcIi5cIitsLmV2ZW50UmVjdCkuY2FsbChiKS5vbihcImRibGNsaWNrLnpvb21cIixudWxsKX0saS5yZWRyYXdGb3Jab29tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZDMsYz1hLmNvbmZpZyxkPWEuem9vbSxlPWEueDtpZihjLnpvb21fZW5hYmxlZCYmMCE9PWEuZmlsdGVyVGFyZ2V0c1RvU2hvdyhhLmRhdGEudGFyZ2V0cykubGVuZ3RoKXtpZihcIm1vdXNlbW92ZVwiPT09Yi5ldmVudC5zb3VyY2VFdmVudC50eXBlJiZkLmFsdERvbWFpbilyZXR1cm4gZS5kb21haW4oZC5hbHREb21haW4pLHZvaWQgZC5zY2FsZShlKS51cGRhdGVTY2FsZUV4dGVudCgpO2EuaXNDYXRlZ29yaXplZCgpJiZlLm9yZ0RvbWFpbigpWzBdPT09YS5vcmdYRG9tYWluWzBdJiZlLmRvbWFpbihbYS5vcmdYRG9tYWluWzBdLTFlLTEwLGUub3JnRG9tYWluKClbMV1dKSxhLnJlZHJhdyh7d2l0aFRyYW5zaXRpb246ITEsd2l0aFk6Yy56b29tX3Jlc2NhbGUsd2l0aFN1YmNoYXJ0OiExLHdpdGhFdmVudFJlY3Q6ITEsd2l0aERpbWVuc2lvbjohMX0pLFwibW91c2Vtb3ZlXCI9PT1iLmV2ZW50LnNvdXJjZUV2ZW50LnR5cGUmJihhLmNhbmNlbENsaWNrPSEwKSxjLnpvb21fb256b29tLmNhbGwoYS5hcGksZS5vcmdEb21haW4oKSl9fSxpLmdlbmVyYXRlQ29sb3I9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jb25maWcsYz1hLmQzLGQ9Yi5kYXRhX2NvbG9ycyxlPXYoYi5jb2xvcl9wYXR0ZXJuKT9iLmNvbG9yX3BhdHRlcm46Yy5zY2FsZS5jYXRlZ29yeTEwKCkucmFuZ2UoKSxmPWIuZGF0YV9jb2xvcixnPVtdO3JldHVybiBmdW5jdGlvbihhKXt2YXIgYixjPWEuaWR8fGEuZGF0YSYmYS5kYXRhLmlkfHxhO3JldHVybiBkW2NdaW5zdGFuY2VvZiBGdW5jdGlvbj9iPWRbY10oYSk6ZFtjXT9iPWRbY106KGcuaW5kZXhPZihjKTwwJiZnLnB1c2goYyksYj1lW2cuaW5kZXhPZihjKSVlLmxlbmd0aF0sZFtjXT1iKSxmIGluc3RhbmNlb2YgRnVuY3Rpb24/ZihiLGEpOmJ9fSxpLmdlbmVyYXRlTGV2ZWxDb2xvcj1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbmZpZyxjPWIuY29sb3JfcGF0dGVybixkPWIuY29sb3JfdGhyZXNob2xkLGU9XCJ2YWx1ZVwiPT09ZC51bml0LGY9ZC52YWx1ZXMmJmQudmFsdWVzLmxlbmd0aD9kLnZhbHVlczpbXSxnPWQubWF4fHwxMDA7cmV0dXJuIHYoYi5jb2xvcl90aHJlc2hvbGQpP2Z1bmN0aW9uKGEpe3ZhciBiLGQsaD1jW2MubGVuZ3RoLTFdO2ZvcihiPTA7YjxmLmxlbmd0aDtiKyspaWYoZD1lP2E6MTAwKmEvZyxkPGZbYl0pe2g9Y1tiXTticmVha31yZXR1cm4gaH06bnVsbH0saS5nZXRZRm9ybWF0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1hJiYhYi5oYXNUeXBlKFwiZ2F1Z2VcIik/Yi5kZWZhdWx0QXJjVmFsdWVGb3JtYXQ6Yi55Rm9ybWF0LGQ9YSYmIWIuaGFzVHlwZShcImdhdWdlXCIpP2IuZGVmYXVsdEFyY1ZhbHVlRm9ybWF0OmIueTJGb3JtYXQ7cmV0dXJuIGZ1bmN0aW9uKGEsZSxmKXt2YXIgZz1cInkyXCI9PT1iLmF4aXMuZ2V0SWQoZik/ZDpjO3JldHVybiBnLmNhbGwoYixhLGUpfX0saS55Rm9ybWF0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZyxkPWMuYXhpc195X3RpY2tfZm9ybWF0P2MuYXhpc195X3RpY2tfZm9ybWF0OmIuZGVmYXVsdFZhbHVlRm9ybWF0O3JldHVybiBkKGEpfSxpLnkyRm9ybWF0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZyxkPWMuYXhpc195Ml90aWNrX2Zvcm1hdD9jLmF4aXNfeTJfdGlja19mb3JtYXQ6Yi5kZWZhdWx0VmFsdWVGb3JtYXQ7cmV0dXJuIGQoYSl9LGkuZGVmYXVsdFZhbHVlRm9ybWF0PWZ1bmN0aW9uKGEpe3JldHVybiBtKGEpPythOlwiXCJ9LGkuZGVmYXVsdEFyY1ZhbHVlRm9ybWF0PWZ1bmN0aW9uKGEsYil7cmV0dXJuKDEwMCpiKS50b0ZpeGVkKDEpK1wiJVwifSxpLmRhdGFMYWJlbEZvcm1hdD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMsZD1jLmNvbmZpZy5kYXRhX2xhYmVscyxlPWZ1bmN0aW9uKGEpe3JldHVybiBtKGEpPythOlwiXCJ9O3JldHVybiBiPVwiZnVuY3Rpb25cIj09dHlwZW9mIGQuZm9ybWF0P2QuZm9ybWF0Olwib2JqZWN0XCI9PXR5cGVvZiBkLmZvcm1hdD9kLmZvcm1hdFthXT9kLmZvcm1hdFthXT09PSEwP2U6ZC5mb3JtYXRbYV06ZnVuY3Rpb24oKXtyZXR1cm5cIlwifTplfSxpLmhhc0NhY2hlcz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKylpZighKGFbYl1pbiB0aGlzLmNhY2hlKSlyZXR1cm4hMTtyZXR1cm4hMH0saS5hZGRDYWNoZT1mdW5jdGlvbihhLGIpe3RoaXMuY2FjaGVbYV09dGhpcy5jbG9uZVRhcmdldChiKX0saS5nZXRDYWNoZXM9ZnVuY3Rpb24oYSl7dmFyIGIsYz1bXTtmb3IoYj0wO2I8YS5sZW5ndGg7YisrKWFbYl1pbiB0aGlzLmNhY2hlJiZjLnB1c2godGhpcy5jbG9uZVRhcmdldCh0aGlzLmNhY2hlW2FbYl1dKSk7cmV0dXJuIGN9O3ZhciBsPWkuQ0xBU1M9e3RhcmdldDpcImMzLXRhcmdldFwiLGNoYXJ0OlwiYzMtY2hhcnRcIixjaGFydExpbmU6XCJjMy1jaGFydC1saW5lXCIsY2hhcnRMaW5lczpcImMzLWNoYXJ0LWxpbmVzXCIsY2hhcnRCYXI6XCJjMy1jaGFydC1iYXJcIixjaGFydEJhcnM6XCJjMy1jaGFydC1iYXJzXCIsY2hhcnRUZXh0OlwiYzMtY2hhcnQtdGV4dFwiLGNoYXJ0VGV4dHM6XCJjMy1jaGFydC10ZXh0c1wiLGNoYXJ0QXJjOlwiYzMtY2hhcnQtYXJjXCIsY2hhcnRBcmNzOlwiYzMtY2hhcnQtYXJjc1wiLGNoYXJ0QXJjc1RpdGxlOlwiYzMtY2hhcnQtYXJjcy10aXRsZVwiLGNoYXJ0QXJjc0JhY2tncm91bmQ6XCJjMy1jaGFydC1hcmNzLWJhY2tncm91bmRcIixjaGFydEFyY3NHYXVnZVVuaXQ6XCJjMy1jaGFydC1hcmNzLWdhdWdlLXVuaXRcIixjaGFydEFyY3NHYXVnZU1heDpcImMzLWNoYXJ0LWFyY3MtZ2F1Z2UtbWF4XCIsY2hhcnRBcmNzR2F1Z2VNaW46XCJjMy1jaGFydC1hcmNzLWdhdWdlLW1pblwiLHNlbGVjdGVkQ2lyY2xlOlwiYzMtc2VsZWN0ZWQtY2lyY2xlXCIsc2VsZWN0ZWRDaXJjbGVzOlwiYzMtc2VsZWN0ZWQtY2lyY2xlc1wiLGV2ZW50UmVjdDpcImMzLWV2ZW50LXJlY3RcIixldmVudFJlY3RzOlwiYzMtZXZlbnQtcmVjdHNcIixldmVudFJlY3RzU2luZ2xlOlwiYzMtZXZlbnQtcmVjdHMtc2luZ2xlXCIsZXZlbnRSZWN0c011bHRpcGxlOlwiYzMtZXZlbnQtcmVjdHMtbXVsdGlwbGVcIix6b29tUmVjdDpcImMzLXpvb20tcmVjdFwiLGJydXNoOlwiYzMtYnJ1c2hcIixmb2N1c2VkOlwiYzMtZm9jdXNlZFwiLGRlZm9jdXNlZDpcImMzLWRlZm9jdXNlZFwiLHJlZ2lvbjpcImMzLXJlZ2lvblwiLHJlZ2lvbnM6XCJjMy1yZWdpb25zXCIsdG9vbHRpcENvbnRhaW5lcjpcImMzLXRvb2x0aXAtY29udGFpbmVyXCIsdG9vbHRpcDpcImMzLXRvb2x0aXBcIix0b29sdGlwTmFtZTpcImMzLXRvb2x0aXAtbmFtZVwiLHNoYXBlOlwiYzMtc2hhcGVcIixzaGFwZXM6XCJjMy1zaGFwZXNcIixsaW5lOlwiYzMtbGluZVwiLGxpbmVzOlwiYzMtbGluZXNcIixiYXI6XCJjMy1iYXJcIixiYXJzOlwiYzMtYmFyc1wiLGNpcmNsZTpcImMzLWNpcmNsZVwiLGNpcmNsZXM6XCJjMy1jaXJjbGVzXCIsYXJjOlwiYzMtYXJjXCIsYXJjczpcImMzLWFyY3NcIixhcmVhOlwiYzMtYXJlYVwiLGFyZWFzOlwiYzMtYXJlYXNcIixlbXB0eTpcImMzLWVtcHR5XCIsdGV4dDpcImMzLXRleHRcIix0ZXh0czpcImMzLXRleHRzXCIsZ2F1Z2VWYWx1ZTpcImMzLWdhdWdlLXZhbHVlXCIsZ3JpZDpcImMzLWdyaWRcIixncmlkTGluZXM6XCJjMy1ncmlkLWxpbmVzXCIseGdyaWQ6XCJjMy14Z3JpZFwiLHhncmlkczpcImMzLXhncmlkc1wiLHhncmlkTGluZTpcImMzLXhncmlkLWxpbmVcIix4Z3JpZExpbmVzOlwiYzMteGdyaWQtbGluZXNcIix4Z3JpZEZvY3VzOlwiYzMteGdyaWQtZm9jdXNcIix5Z3JpZDpcImMzLXlncmlkXCIseWdyaWRzOlwiYzMteWdyaWRzXCIseWdyaWRMaW5lOlwiYzMteWdyaWQtbGluZVwiLHlncmlkTGluZXM6XCJjMy15Z3JpZC1saW5lc1wiLGF4aXM6XCJjMy1heGlzXCIsYXhpc1g6XCJjMy1heGlzLXhcIixheGlzWExhYmVsOlwiYzMtYXhpcy14LWxhYmVsXCIsYXhpc1k6XCJjMy1heGlzLXlcIixheGlzWUxhYmVsOlwiYzMtYXhpcy15LWxhYmVsXCIsYXhpc1kyOlwiYzMtYXhpcy15MlwiLGF4aXNZMkxhYmVsOlwiYzMtYXhpcy15Mi1sYWJlbFwiLGxlZ2VuZEJhY2tncm91bmQ6XCJjMy1sZWdlbmQtYmFja2dyb3VuZFwiLGxlZ2VuZEl0ZW06XCJjMy1sZWdlbmQtaXRlbVwiLGxlZ2VuZEl0ZW1FdmVudDpcImMzLWxlZ2VuZC1pdGVtLWV2ZW50XCIsbGVnZW5kSXRlbVRpbGU6XCJjMy1sZWdlbmQtaXRlbS10aWxlXCIsbGVnZW5kSXRlbUhpZGRlbjpcImMzLWxlZ2VuZC1pdGVtLWhpZGRlblwiLGxlZ2VuZEl0ZW1Gb2N1c2VkOlwiYzMtbGVnZW5kLWl0ZW0tZm9jdXNlZFwiLGRyYWdhcmVhOlwiYzMtZHJhZ2FyZWFcIixFWFBBTkRFRDpcIl9leHBhbmRlZF9cIixTRUxFQ1RFRDpcIl9zZWxlY3RlZF9cIixJTkNMVURFRDpcIl9pbmNsdWRlZF9cIn07aS5nZW5lcmF0ZUNsYXNzPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCIgXCIrYStcIiBcIithK3RoaXMuZ2V0VGFyZ2V0U2VsZWN0b3JTdWZmaXgoYil9LGkuY2xhc3NUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdlbmVyYXRlQ2xhc3MobC50ZXh0LGEuaW5kZXgpfSxpLmNsYXNzVGV4dHM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVDbGFzcyhsLnRleHRzLGEuaWQpfSxpLmNsYXNzU2hhcGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2VuZXJhdGVDbGFzcyhsLnNoYXBlLGEuaW5kZXgpfSxpLmNsYXNzU2hhcGVzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdlbmVyYXRlQ2xhc3MobC5zaGFwZXMsYS5pZCl9LGkuY2xhc3NMaW5lPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGUoYSkrdGhpcy5nZW5lcmF0ZUNsYXNzKGwubGluZSxhLmlkKX0saS5jbGFzc0xpbmVzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGVzKGEpK3RoaXMuZ2VuZXJhdGVDbGFzcyhsLmxpbmVzLGEuaWQpfSxpLmNsYXNzQ2lyY2xlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGUoYSkrdGhpcy5nZW5lcmF0ZUNsYXNzKGwuY2lyY2xlLGEuaW5kZXgpfSxpLmNsYXNzQ2lyY2xlcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jbGFzc1NoYXBlcyhhKSt0aGlzLmdlbmVyYXRlQ2xhc3MobC5jaXJjbGVzLGEuaWQpfSxpLmNsYXNzQmFyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGUoYSkrdGhpcy5nZW5lcmF0ZUNsYXNzKGwuYmFyLGEuaW5kZXgpfSxpLmNsYXNzQmFycz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jbGFzc1NoYXBlcyhhKSt0aGlzLmdlbmVyYXRlQ2xhc3MobC5iYXJzLGEuaWQpfSxpLmNsYXNzQXJjPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGUoYS5kYXRhKSt0aGlzLmdlbmVyYXRlQ2xhc3MobC5hcmMsYS5kYXRhLmlkKX0saS5jbGFzc0FyY3M9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xhc3NTaGFwZXMoYS5kYXRhKSt0aGlzLmdlbmVyYXRlQ2xhc3MobC5hcmNzLGEuZGF0YS5pZCl9LGkuY2xhc3NBcmVhPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGUoYSkrdGhpcy5nZW5lcmF0ZUNsYXNzKGwuYXJlYSxhLmlkKX0saS5jbGFzc0FyZWFzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzU2hhcGVzKGEpK3RoaXMuZ2VuZXJhdGVDbGFzcyhsLmFyZWFzLGEuaWQpfSxpLmNsYXNzUmVnaW9uPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2VuZXJhdGVDbGFzcyhsLnJlZ2lvbixiKStcIiBcIisoXCJjbGFzc1wiaW4gYT9hW1wiY2xhc3NcIl06XCJcIil9LGkuY2xhc3NFdmVudD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZW5lcmF0ZUNsYXNzKGwuZXZlbnRSZWN0LGEuaW5kZXgpfSxpLmNsYXNzVGFyZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNvbmZpZy5kYXRhX2NsYXNzZXNbYV0sZD1cIlwiO3JldHVybiBjJiYoZD1cIiBcIitsLnRhcmdldCtcIi1cIitjKSxiLmdlbmVyYXRlQ2xhc3MobC50YXJnZXQsYSkrZH0saS5jbGFzc0ZvY3VzPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsYXNzRm9jdXNlZChhKSt0aGlzLmNsYXNzRGVmb2N1c2VkKGEpfSxpLmNsYXNzRm9jdXNlZD1mdW5jdGlvbihhKXtyZXR1cm5cIiBcIisodGhpcy5mb2N1c2VkVGFyZ2V0SWRzLmluZGV4T2YoYS5pZCk+PTA/bC5mb2N1c2VkOlwiXCIpfSxpLmNsYXNzRGVmb2N1c2VkPWZ1bmN0aW9uKGEpe3JldHVyblwiIFwiKyh0aGlzLmRlZm9jdXNlZFRhcmdldElkcy5pbmRleE9mKGEuaWQpPj0wP2wuZGVmb2N1c2VkOlwiXCIpfSxpLmNsYXNzQ2hhcnRUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiBsLmNoYXJ0VGV4dCt0aGlzLmNsYXNzVGFyZ2V0KGEuaWQpfSxpLmNsYXNzQ2hhcnRMaW5lPWZ1bmN0aW9uKGEpe3JldHVybiBsLmNoYXJ0TGluZSt0aGlzLmNsYXNzVGFyZ2V0KGEuaWQpfSxpLmNsYXNzQ2hhcnRCYXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGwuY2hhcnRCYXIrdGhpcy5jbGFzc1RhcmdldChhLmlkKX0saS5jbGFzc0NoYXJ0QXJjPWZ1bmN0aW9uKGEpe3JldHVybiBsLmNoYXJ0QXJjK3RoaXMuY2xhc3NUYXJnZXQoYS5kYXRhLmlkKX0saS5nZXRUYXJnZXRTZWxlY3RvclN1ZmZpeD1mdW5jdGlvbihhKXtyZXR1cm4gYXx8MD09PWE/KFwiLVwiK2EpLnJlcGxhY2UoL1tcXHM/IUAjJCVeJiooKV89KywuPD4nXCI6O1xcW1xcXVxcL3x+YHt9XFxcXF0vZyxcIi1cIik6XCJcIn0saS5zZWxlY3RvclRhcmdldD1mdW5jdGlvbihhLGIpe3JldHVybihifHxcIlwiKStcIi5cIitsLnRhcmdldCt0aGlzLmdldFRhcmdldFNlbGVjdG9yU3VmZml4KGEpfSxpLnNlbGVjdG9yVGFyZ2V0cz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGE9YXx8W10sYS5sZW5ndGg/YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGMuc2VsZWN0b3JUYXJnZXQoYSxiKX0pOm51bGx9LGkuc2VsZWN0b3JMZWdlbmQ9ZnVuY3Rpb24oYSl7cmV0dXJuXCIuXCIrbC5sZWdlbmRJdGVtK3RoaXMuZ2V0VGFyZ2V0U2VsZWN0b3JTdWZmaXgoYSl9LGkuc2VsZWN0b3JMZWdlbmRzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7cmV0dXJuIGEmJmEubGVuZ3RoP2EubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBiLnNlbGVjdG9yTGVnZW5kKGEpfSk6bnVsbH07dmFyIG09aS5pc1ZhbHVlPWZ1bmN0aW9uKGEpe3JldHVybiBhfHwwPT09YX0sbj1pLmlzRnVuY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYX0sbz1pLmlzU3RyaW5nPWZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfSxwPWkuaXNVbmRlZmluZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGF9LHE9aS5pc0RlZmluZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGF9LHI9aS5jZWlsMTA9ZnVuY3Rpb24oYSl7cmV0dXJuIDEwKk1hdGguY2VpbChhLzEwKX0scz1pLmFzSGFsZlBpeGVsPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmNlaWwoYSkrLjV9LHQ9aS5kaWZmRG9tYWluPWZ1bmN0aW9uKGEpe3JldHVybiBhWzFdLWFbMF19LHU9aS5pc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHxvKGEpJiYwPT09YS5sZW5ndGh8fFwib2JqZWN0XCI9PXR5cGVvZiBhJiYwPT09T2JqZWN0LmtleXMoYSkubGVuZ3RofSx2PWkubm90RW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5rZXlzKGEpLmxlbmd0aD4wfSx3PWkuZ2V0T3B0aW9uPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gcShhW2JdKT9hW2JdOmN9LHg9aS5oYXNWYWx1ZT1mdW5jdGlvbihhLGIpe3ZhciBjPSExO3JldHVybiBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGQpe2FbZF09PT1iJiYoYz0hMCl9KSxjfSx5PWkuZ2V0UGF0aEJveD1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9W2EucGF0aFNlZ0xpc3QuZ2V0SXRlbSgwKSxhLnBhdGhTZWdMaXN0LmdldEl0ZW0oMSldLGQ9Y1swXS54LGU9TWF0aC5taW4oY1swXS55LGNbMV0ueSk7cmV0dXJue3g6ZCx5OmUsd2lkdGg6Yi53aWR0aCxoZWlnaHQ6Yi5oZWlnaHR9fTtoLmZvY3VzPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5pbnRlcm5hbDthPWMubWFwVG9UYXJnZXRJZHMoYSksYj1jLnN2Zy5zZWxlY3RBbGwoYy5zZWxlY3RvclRhcmdldHMoYS5maWx0ZXIoYy5pc1RhcmdldFRvU2hvdyxjKSkpLHRoaXMucmV2ZXJ0KCksdGhpcy5kZWZvY3VzKCksYi5jbGFzc2VkKGwuZm9jdXNlZCwhMCkuY2xhc3NlZChsLmRlZm9jdXNlZCwhMSksYy5oYXNBcmNUeXBlKCkmJmMuZXhwYW5kQXJjKGEpLGMudG9nZ2xlRm9jdXNMZWdlbmQoYSwhMCksYy5mb2N1c2VkVGFyZ2V0SWRzPWEsYy5kZWZvY3VzZWRUYXJnZXRJZHM9Yy5kZWZvY3VzZWRUYXJnZXRJZHMuZmlsdGVyKGZ1bmN0aW9uKGIpe3JldHVybiBhLmluZGV4T2YoYik8MH0pfSxoLmRlZm9jdXM9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmludGVybmFsO2E9Yy5tYXBUb1RhcmdldElkcyhhKSxiPWMuc3ZnLnNlbGVjdEFsbChjLnNlbGVjdG9yVGFyZ2V0cyhhLmZpbHRlcihjLmlzVGFyZ2V0VG9TaG93LGMpKSksYi5jbGFzc2VkKGwuZm9jdXNlZCwhMSkuY2xhc3NlZChsLmRlZm9jdXNlZCwhMCksYy5oYXNBcmNUeXBlKCkmJmMudW5leHBhbmRBcmMoYSksYy50b2dnbGVGb2N1c0xlZ2VuZChhLCExKSxjLmZvY3VzZWRUYXJnZXRJZHM9Yy5mb2N1c2VkVGFyZ2V0SWRzLmZpbHRlcihmdW5jdGlvbihiKXtyZXR1cm4gYS5pbmRleE9mKGIpPDB9KSxjLmRlZm9jdXNlZFRhcmdldElkcz1hfSxoLnJldmVydD1mdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuaW50ZXJuYWw7YT1jLm1hcFRvVGFyZ2V0SWRzKGEpLGI9Yy5zdmcuc2VsZWN0QWxsKGMuc2VsZWN0b3JUYXJnZXRzKGEpKSxiLmNsYXNzZWQobC5mb2N1c2VkLCExKS5jbGFzc2VkKGwuZGVmb2N1c2VkLCExKSxjLmhhc0FyY1R5cGUoKSYmYy51bmV4cGFuZEFyYyhhKSxjLmNvbmZpZy5sZWdlbmRfc2hvdyYmKGMuc2hvd0xlZ2VuZChhLmZpbHRlcihjLmlzTGVnZW5kVG9TaG93LmJpbmQoYykpKSxjLmxlZ2VuZC5zZWxlY3RBbGwoYy5zZWxlY3RvckxlZ2VuZHMoYSkpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBjLmQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKGwubGVnZW5kSXRlbUZvY3VzZWQpfSkuY2xhc3NlZChsLmxlZ2VuZEl0ZW1Gb2N1c2VkLCExKSksYy5mb2N1c2VkVGFyZ2V0SWRzPVtdLGMuZGVmb2N1c2VkVGFyZ2V0SWRzPVtdfSxoLnNob3c9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXRoaXMuaW50ZXJuYWw7YT1kLm1hcFRvVGFyZ2V0SWRzKGEpLGI9Ynx8e30sZC5yZW1vdmVIaWRkZW5UYXJnZXRJZHMoYSksYz1kLnN2Zy5zZWxlY3RBbGwoZC5zZWxlY3RvclRhcmdldHMoYSkpLGMudHJhbnNpdGlvbigpLnN0eWxlKFwib3BhY2l0eVwiLDEsXCJpbXBvcnRhbnRcIikuY2FsbChkLmVuZGFsbCxmdW5jdGlvbigpe2Muc3R5bGUoXCJvcGFjaXR5XCIsbnVsbCkuc3R5bGUoXCJvcGFjaXR5XCIsMSl9KSxiLndpdGhMZWdlbmQmJmQuc2hvd0xlZ2VuZChhKSxkLnJlZHJhdyh7d2l0aFVwZGF0ZU9yZ1hEb21haW46ITAsd2l0aFVwZGF0ZVhEb21haW46ITAsd2l0aExlZ2VuZDohMH0pfSxoLmhpZGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPXRoaXMuaW50ZXJuYWw7YT1kLm1hcFRvVGFyZ2V0SWRzKGEpLGI9Ynx8e30sZC5hZGRIaWRkZW5UYXJnZXRJZHMoYSksYz1kLnN2Zy5zZWxlY3RBbGwoZC5zZWxlY3RvclRhcmdldHMoYSkpLGMudHJhbnNpdGlvbigpLnN0eWxlKFwib3BhY2l0eVwiLDAsXCJpbXBvcnRhbnRcIikuY2FsbChkLmVuZGFsbCxmdW5jdGlvbigpe2Muc3R5bGUoXCJvcGFjaXR5XCIsbnVsbCkuc3R5bGUoXCJvcGFjaXR5XCIsMCl9KSxiLndpdGhMZWdlbmQmJmQuaGlkZUxlZ2VuZChhKSxkLnJlZHJhdyh7d2l0aFVwZGF0ZU9yZ1hEb21haW46ITAsd2l0aFVwZGF0ZVhEb21haW46ITAsd2l0aExlZ2VuZDohMH0pfSxoLnRvZ2dsZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLmludGVybmFsO2QubWFwVG9UYXJnZXRJZHMoYSkuZm9yRWFjaChmdW5jdGlvbihhKXtkLmlzVGFyZ2V0VG9TaG93KGEpP2MuaGlkZShhLGIpOmMuc2hvdyhhLGIpfSl9LGguem9vbT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsO3JldHVybiBhJiYoYi5pc1RpbWVTZXJpZXMoKSYmKGE9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGIucGFyc2VEYXRlKGEpfSkpLGIuYnJ1c2guZXh0ZW50KGEpLGIucmVkcmF3KHt3aXRoVXBkYXRlWERvbWFpbjohMCx3aXRoWTpiLmNvbmZpZy56b29tX3Jlc2NhbGV9KSxiLmNvbmZpZy56b29tX29uem9vbS5jYWxsKHRoaXMsYi54Lm9yZ0RvbWFpbigpKSksYi5icnVzaC5leHRlbnQoKX0saC56b29tLmVuYWJsZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsO2IuY29uZmlnLnpvb21fZW5hYmxlZD1hLGIudXBkYXRlQW5kUmVkcmF3KCl9LGgudW56b29tPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbnRlcm5hbDthLmJydXNoLmNsZWFyKCkudXBkYXRlKCksYS5yZWRyYXcoe3dpdGhVcGRhdGVYRG9tYWluOiEwfSl9LGgubG9hZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIGEueHMmJmIuYWRkWHMoYS54cyksXCJjbGFzc2VzXCJpbiBhJiZPYmplY3Qua2V5cyhhLmNsYXNzZXMpLmZvckVhY2goZnVuY3Rpb24oYil7Yy5kYXRhX2NsYXNzZXNbYl09YS5jbGFzc2VzW2JdfSksXCJjYXRlZ29yaWVzXCJpbiBhJiZiLmlzQ2F0ZWdvcml6ZWQoKSYmKGMuYXhpc194X2NhdGVnb3JpZXM9YS5jYXRlZ29yaWVzKSxcImF4ZXNcImluIGEmJk9iamVjdC5rZXlzKGEuYXhlcykuZm9yRWFjaChmdW5jdGlvbihiKXtjLmRhdGFfYXhlc1tiXT1hLmF4ZXNbYl19KSxcImNvbG9yc1wiaW4gYSYmT2JqZWN0LmtleXMoYS5jb2xvcnMpLmZvckVhY2goZnVuY3Rpb24oYil7Yy5kYXRhX2NvbG9yc1tiXT1hLmNvbG9yc1tiXX0pLFwiY2FjaGVJZHNcImluIGEmJmIuaGFzQ2FjaGVzKGEuY2FjaGVJZHMpP3ZvaWQgYi5sb2FkKGIuZ2V0Q2FjaGVzKGEuY2FjaGVJZHMpLGEuZG9uZSk6dm9pZChcInVubG9hZFwiaW4gYT9iLnVubG9hZChiLm1hcFRvVGFyZ2V0SWRzKFwiYm9vbGVhblwiPT10eXBlb2YgYS51bmxvYWQmJmEudW5sb2FkP251bGw6YS51bmxvYWQpLGZ1bmN0aW9uKCl7Yi5sb2FkRnJvbUFyZ3MoYSl9KTpiLmxvYWRGcm9tQXJncyhhKSl9LGgudW5sb2FkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw7YT1hfHx7fSxhIGluc3RhbmNlb2YgQXJyYXk/YT17aWRzOmF9Olwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT17aWRzOlthXX0pLGIudW5sb2FkKGIubWFwVG9UYXJnZXRJZHMoYS5pZHMpLGZ1bmN0aW9uKCl7Yi5yZWRyYXcoe3dpdGhVcGRhdGVPcmdYRG9tYWluOiEwLHdpdGhVcGRhdGVYRG9tYWluOiEwLHdpdGhMZWdlbmQ6ITB9KSxhLmRvbmUmJmEuZG9uZSgpfSl9LGguZmxvdz1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGo9dGhpcy5pbnRlcm5hbCxrPVtdLGw9ai5nZXRNYXhEYXRhQ291bnQoKSxuPTAsbz0wO2lmKGEuanNvbiljPWouY29udmVydEpzb25Ub0RhdGEoYS5qc29uLGEua2V5cyk7ZWxzZSBpZihhLnJvd3MpYz1qLmNvbnZlcnRSb3dzVG9EYXRhKGEucm93cyk7ZWxzZXtpZighYS5jb2x1bW5zKXJldHVybjtjPWouY29udmVydENvbHVtbnNUb0RhdGEoYS5jb2x1bW5zKX1iPWouY29udmVydERhdGFUb1RhcmdldHMoYywhMCksai5kYXRhLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYyxkLGU9ITE7Zm9yKGM9MDtjPGIubGVuZ3RoO2MrKylpZihhLmlkPT09YltjXS5pZCl7Zm9yKGU9ITAsYS52YWx1ZXNbYS52YWx1ZXMubGVuZ3RoLTFdJiYobz1hLnZhbHVlc1thLnZhbHVlcy5sZW5ndGgtMV0uaW5kZXgrMSksbj1iW2NdLnZhbHVlcy5sZW5ndGgsZD0wO24+ZDtkKyspYltjXS52YWx1ZXNbZF0uaW5kZXg9bytkLGouaXNUaW1lU2VyaWVzKCl8fChiW2NdLnZhbHVlc1tkXS54PW8rZCk7YS52YWx1ZXM9YS52YWx1ZXMuY29uY2F0KGJbY10udmFsdWVzKSxiLnNwbGljZShjLDEpO2JyZWFrfWV8fGsucHVzaChhLmlkKX0pLGouZGF0YS50YXJnZXRzLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGIsYztmb3IoYj0wO2I8ay5sZW5ndGg7YisrKWlmKGEuaWQ9PT1rW2JdKWZvcihvPWEudmFsdWVzW2EudmFsdWVzLmxlbmd0aC0xXS5pbmRleCsxLGM9MDtuPmM7YysrKWEudmFsdWVzLnB1c2goe2lkOmEuaWQsaW5kZXg6bytjLHg6ai5pc1RpbWVTZXJpZXMoKT9qLmdldE90aGVyVGFyZ2V0WChvK2MpOm8rYyx2YWx1ZTpudWxsfSl9KSxqLmRhdGEudGFyZ2V0cy5sZW5ndGgmJmIuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYixjPVtdO2ZvcihiPWouZGF0YS50YXJnZXRzWzBdLnZhbHVlc1swXS5pbmRleDtvPmI7YisrKWMucHVzaCh7aWQ6YS5pZCxpbmRleDpiLHg6ai5pc1RpbWVTZXJpZXMoKT9qLmdldE90aGVyVGFyZ2V0WChiKTpiLHZhbHVlOm51bGx9KTthLnZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuaW5kZXgrPW8sai5pc1RpbWVTZXJpZXMoKXx8KGEueCs9byl9KSxhLnZhbHVlcz1jLmNvbmNhdChhLnZhbHVlcyl9KSxqLmRhdGEudGFyZ2V0cz1qLmRhdGEudGFyZ2V0cy5jb25jYXQoYiksZD1qLmdldE1heERhdGFDb3VudCgpLGY9ai5kYXRhLnRhcmdldHNbMF0sZz1mLnZhbHVlc1swXSxxKGEudG8pPyhuPTAsaT1qLmlzVGltZVNlcmllcygpP2oucGFyc2VEYXRlKGEudG8pOmEudG8sZi52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihhKXthLng8aSYmbisrfSkpOnEoYS5sZW5ndGgpJiYobj1hLmxlbmd0aCksbD8xPT09bCYmai5pc1RpbWVTZXJpZXMoKSYmKGg9KGYudmFsdWVzW2YudmFsdWVzLmxlbmd0aC0xXS54LWcueCkvMixlPVtuZXcgRGF0ZSgrZy54LWgpLG5ldyBEYXRlKCtnLngraCldLGoudXBkYXRlWERvbWFpbihudWxsLCEwLCEwLCExLGUpKTooaD1qLmlzVGltZVNlcmllcygpP2YudmFsdWVzLmxlbmd0aD4xP2YudmFsdWVzW2YudmFsdWVzLmxlbmd0aC0xXS54LWcueDpnLngtai5nZXRYRG9tYWluKGouZGF0YS50YXJnZXRzKVswXToxLGU9W2cueC1oLGcueF0sai51cGRhdGVYRG9tYWluKG51bGwsITAsITAsITEsZSkpLGoudXBkYXRlVGFyZ2V0cyhqLmRhdGEudGFyZ2V0cyksai5yZWRyYXcoe2Zsb3c6e2luZGV4OmcuaW5kZXgsbGVuZ3RoOm4sZHVyYXRpb246bShhLmR1cmF0aW9uKT9hLmR1cmF0aW9uOmouY29uZmlnLnRyYW5zaXRpb25fZHVyYXRpb24sZG9uZTphLmRvbmUsb3JnRGF0YUNvdW50Omx9LHdpdGhMZWdlbmQ6ITAsd2l0aFRyYW5zaXRpb246bD4xLHdpdGhUcmltWERvbWFpbjohMSx3aXRoVXBkYXRlWEF4aXM6ITB9KX0saS5nZW5lcmF0ZUZsb3c9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY29uZmlnLGQ9Yi5kMztyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZSxmLGcsaD1hLnRhcmdldHMsaT1hLmZsb3csaj1hLmRyYXdCYXIsaz1hLmRyYXdMaW5lLG09YS5kcmF3QXJlYSxuPWEuY3gsbz1hLmN5LHA9YS54dixxPWEueEZvclRleHQscj1hLnlGb3JUZXh0LHM9YS5kdXJhdGlvbix1PTEsdj1pLmluZGV4LHc9aS5sZW5ndGgseD1iLmdldFZhbHVlT25JbmRleChiLmRhdGEudGFyZ2V0c1swXS52YWx1ZXMsdikseT1iLmdldFZhbHVlT25JbmRleChiLmRhdGEudGFyZ2V0c1swXS52YWx1ZXMsdit3KSx6PWIueC5kb21haW4oKSxBPWkuZHVyYXRpb258fHMsQj1pLmRvbmV8fGZ1bmN0aW9uKCl7fSxDPWIuZ2VuZXJhdGVXYWl0KCksRD1iLnhncmlkfHxkLnNlbGVjdEFsbChbXSksRT1iLnhncmlkTGluZXN8fGQuc2VsZWN0QWxsKFtdKSxGPWIubWFpblJlZ2lvbnx8ZC5zZWxlY3RBbGwoW10pLEc9Yi5tYWluVGV4dHx8ZC5zZWxlY3RBbGwoW10pLEg9Yi5tYWluQmFyfHxkLnNlbGVjdEFsbChbXSksST1iLm1haW5MaW5lfHxkLnNlbGVjdEFsbChbXSksSj1iLm1haW5BcmVhfHxkLnNlbGVjdEFsbChbXSksSz1iLm1haW5DaXJjbGV8fGQuc2VsZWN0QWxsKFtdKTtiLmZsb3dpbmc9ITAsYi5kYXRhLnRhcmdldHMuZm9yRWFjaChmdW5jdGlvbihhKXthLnZhbHVlcy5zcGxpY2UoMCx3KX0pLGc9Yi51cGRhdGVYRG9tYWluKGgsITAsITApLGIudXBkYXRlWEdyaWQmJmIudXBkYXRlWEdyaWQoITApLGkub3JnRGF0YUNvdW50P2U9MT09PWkub3JnRGF0YUNvdW50fHx4Lng9PT15Lng/Yi54KHpbMF0pLWIueChnWzBdKTpiLmlzVGltZVNlcmllcygpP2IueCh6WzBdKS1iLngoZ1swXSk6Yi54KHgueCktYi54KHkueCk6MSE9PWIuZGF0YS50YXJnZXRzWzBdLnZhbHVlcy5sZW5ndGg/ZT1iLngoelswXSktYi54KGdbMF0pOmIuaXNUaW1lU2VyaWVzKCk/KHg9Yi5nZXRWYWx1ZU9uSW5kZXgoYi5kYXRhLnRhcmdldHNbMF0udmFsdWVzLDApLHk9Yi5nZXRWYWx1ZU9uSW5kZXgoYi5kYXRhLnRhcmdldHNbMF0udmFsdWVzLGIuZGF0YS50YXJnZXRzWzBdLnZhbHVlcy5sZW5ndGgtMSksZT1iLngoeC54KS1iLngoeS54KSk6ZT10KGcpLzIsdT10KHopL3QoZyksZj1cInRyYW5zbGF0ZShcIitlK1wiLDApIHNjYWxlKFwiK3UrXCIsMSlcIixiLmhpZGVYR3JpZEZvY3VzKCksYi5oaWRlVG9vbHRpcCgpLGQudHJhbnNpdGlvbigpLmVhc2UoXCJsaW5lYXJcIikuZHVyYXRpb24oQSkuZWFjaChmdW5jdGlvbigpe0MuYWRkKGIuYXhlcy54LnRyYW5zaXRpb24oKS5jYWxsKGIueEF4aXMpKSxDLmFkZChILnRyYW5zaXRpb24oKS5hdHRyKFwidHJhbnNmb3JtXCIsZikpLEMuYWRkKEkudHJhbnNpdGlvbigpLmF0dHIoXCJ0cmFuc2Zvcm1cIixmKSksQy5hZGQoSi50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLGYpKSxDLmFkZChLLnRyYW5zaXRpb24oKS5hdHRyKFwidHJhbnNmb3JtXCIsZikpLEMuYWRkKEcudHJhbnNpdGlvbigpLmF0dHIoXCJ0cmFuc2Zvcm1cIixmKSksQy5hZGQoRi5maWx0ZXIoYi5pc1JlZ2lvbk9uWCkudHJhbnNpdGlvbigpLmF0dHIoXCJ0cmFuc2Zvcm1cIixmKSksQy5hZGQoRC50cmFuc2l0aW9uKCkuYXR0cihcInRyYW5zZm9ybVwiLGYpKSxDLmFkZChFLnRyYW5zaXRpb24oKS5hdHRyKFwidHJhbnNmb3JtXCIsZikpXG59KS5jYWxsKEMsZnVuY3Rpb24oKXt2YXIgYSxkPVtdLGU9W10sZj1bXTtpZih3KXtmb3IoYT0wO3c+YTthKyspZC5wdXNoKFwiLlwiK2wuc2hhcGUrXCItXCIrKHYrYSkpLGUucHVzaChcIi5cIitsLnRleHQrXCItXCIrKHYrYSkpLGYucHVzaChcIi5cIitsLmV2ZW50UmVjdCtcIi1cIisodithKSk7Yi5zdmcuc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGVzKS5zZWxlY3RBbGwoZCkucmVtb3ZlKCksYi5zdmcuc2VsZWN0QWxsKFwiLlwiK2wudGV4dHMpLnNlbGVjdEFsbChlKS5yZW1vdmUoKSxiLnN2Zy5zZWxlY3RBbGwoXCIuXCIrbC5ldmVudFJlY3RzKS5zZWxlY3RBbGwoZikucmVtb3ZlKCksYi5zdmcuc2VsZWN0KFwiLlwiK2wueGdyaWQpLnJlbW92ZSgpfUQuYXR0cihcInRyYW5zZm9ybVwiLG51bGwpLmF0dHIoYi54Z3JpZEF0dHIpLEUuYXR0cihcInRyYW5zZm9ybVwiLG51bGwpLEUuc2VsZWN0KFwibGluZVwiKS5hdHRyKFwieDFcIixjLmF4aXNfcm90YXRlZD8wOnApLmF0dHIoXCJ4MlwiLGMuYXhpc19yb3RhdGVkP2Iud2lkdGg6cCksRS5zZWxlY3QoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsYy5heGlzX3JvdGF0ZWQ/Yi53aWR0aDowKS5hdHRyKFwieVwiLHApLEguYXR0cihcInRyYW5zZm9ybVwiLG51bGwpLmF0dHIoXCJkXCIsaiksSS5hdHRyKFwidHJhbnNmb3JtXCIsbnVsbCkuYXR0cihcImRcIixrKSxKLmF0dHIoXCJ0cmFuc2Zvcm1cIixudWxsKS5hdHRyKFwiZFwiLG0pLEsuYXR0cihcInRyYW5zZm9ybVwiLG51bGwpLmF0dHIoXCJjeFwiLG4pLmF0dHIoXCJjeVwiLG8pLEcuYXR0cihcInRyYW5zZm9ybVwiLG51bGwpLmF0dHIoXCJ4XCIscSkuYXR0cihcInlcIixyKS5zdHlsZShcImZpbGwtb3BhY2l0eVwiLGIub3BhY2l0eUZvclRleHQuYmluZChiKSksRi5hdHRyKFwidHJhbnNmb3JtXCIsbnVsbCksRi5zZWxlY3QoXCJyZWN0XCIpLmZpbHRlcihiLmlzUmVnaW9uT25YKS5hdHRyKFwieFwiLGIucmVnaW9uWC5iaW5kKGIpKS5hdHRyKFwid2lkdGhcIixiLnJlZ2lvbldpZHRoLmJpbmQoYikpLGMuaW50ZXJhY3Rpb25fZW5hYmxlZCYmYi5yZWRyYXdFdmVudFJlY3QoKSxCKCksYi5mbG93aW5nPSExfSl9fSxoLnNlbGVjdGVkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWwsYz1iLmQzO3JldHVybiBjLm1lcmdlKGIubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZXMrYi5nZXRUYXJnZXRTZWxlY3RvclN1ZmZpeChhKSkuc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGUpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBjLnNlbGVjdCh0aGlzKS5jbGFzc2VkKGwuU0VMRUNURUQpfSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLm1hcChmdW5jdGlvbihhKXt2YXIgYj1hLl9fZGF0YV9fO3JldHVybiBiLmRhdGE/Yi5kYXRhOmJ9KX0pKX0saC5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuaW50ZXJuYWwsZT1kLmQzLGY9ZC5jb25maWc7Zi5kYXRhX3NlbGVjdGlvbl9lbmFibGVkJiZkLm1haW4uc2VsZWN0QWxsKFwiLlwiK2wuc2hhcGVzKS5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZSkuZWFjaChmdW5jdGlvbihnLGgpe3ZhciBpPWUuc2VsZWN0KHRoaXMpLGo9Zy5kYXRhP2cuZGF0YS5pZDpnLmlkLGs9ZC5nZXRUb2dnbGUodGhpcyxnKS5iaW5kKGQpLG09Zi5kYXRhX3NlbGVjdGlvbl9ncm91cGVkfHwhYXx8YS5pbmRleE9mKGopPj0wLG49IWJ8fGIuaW5kZXhPZihoKT49MCxvPWkuY2xhc3NlZChsLlNFTEVDVEVEKTtpLmNsYXNzZWQobC5saW5lKXx8aS5jbGFzc2VkKGwuYXJlYSl8fChtJiZuP2YuZGF0YV9zZWxlY3Rpb25faXNzZWxlY3RhYmxlKGcpJiYhbyYmayghMCxpLmNsYXNzZWQobC5TRUxFQ1RFRCwhMCksZyxoKTpxKGMpJiZjJiZvJiZrKCExLGkuY2xhc3NlZChsLlNFTEVDVEVELCExKSxnLGgpKX0pfSxoLnVuc2VsZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5pbnRlcm5hbCxkPWMuZDMsZT1jLmNvbmZpZztlLmRhdGFfc2VsZWN0aW9uX2VuYWJsZWQmJmMubWFpbi5zZWxlY3RBbGwoXCIuXCIrbC5zaGFwZXMpLnNlbGVjdEFsbChcIi5cIitsLnNoYXBlKS5lYWNoKGZ1bmN0aW9uKGYsZyl7dmFyIGg9ZC5zZWxlY3QodGhpcyksaT1mLmRhdGE/Zi5kYXRhLmlkOmYuaWQsaj1jLmdldFRvZ2dsZSh0aGlzLGYpLmJpbmQoYyksaz1lLmRhdGFfc2VsZWN0aW9uX2dyb3VwZWR8fCFhfHxhLmluZGV4T2YoaSk+PTAsbT0hYnx8Yi5pbmRleE9mKGcpPj0wLG49aC5jbGFzc2VkKGwuU0VMRUNURUQpO2guY2xhc3NlZChsLmxpbmUpfHxoLmNsYXNzZWQobC5hcmVhKXx8ayYmbSYmZS5kYXRhX3NlbGVjdGlvbl9pc3NlbGVjdGFibGUoZikmJm4mJmooITEsaC5jbGFzc2VkKGwuU0VMRUNURUQsITEpLGYsZyl9KX0saC50cmFuc2Zvcm09ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmludGVybmFsLGQ9W1wicGllXCIsXCJkb251dFwiXS5pbmRleE9mKGEpPj0wP3t3aXRoVHJhbnNmb3JtOiEwfTpudWxsO2MudHJhbnNmb3JtVG8oYixhLGQpfSxpLnRyYW5zZm9ybVRvPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9IWQuaGFzQXJjVHlwZSgpLGY9Y3x8e3dpdGhUcmFuc2l0aW9uRm9yQXhpczplfTtmLndpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtPSExLGQudHJhbnNpdGluZz0hMSxkLnNldFRhcmdldFR5cGUoYSxiKSxkLnVwZGF0ZVRhcmdldHMoZC5kYXRhLnRhcmdldHMpLGQudXBkYXRlQW5kUmVkcmF3KGYpfSxoLmdyb3Vwcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIHAoYSk/Yy5kYXRhX2dyb3VwczooYy5kYXRhX2dyb3Vwcz1hLGIucmVkcmF3KCksYy5kYXRhX2dyb3Vwcyl9LGgueGdyaWRzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWwsYz1iLmNvbmZpZztyZXR1cm4gYT8oYy5ncmlkX3hfbGluZXM9YSxiLnJlZHJhd1dpdGhvdXRSZXNjYWxlKCksYy5ncmlkX3hfbGluZXMpOmMuZ3JpZF94X2xpbmVzfSxoLnhncmlkcy5hZGQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbDtyZXR1cm4gdGhpcy54Z3JpZHMoYi5jb25maWcuZ3JpZF94X2xpbmVzLmNvbmNhdChhP2E6W10pKX0saC54Z3JpZHMucmVtb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw7Yi5yZW1vdmVHcmlkTGluZXMoYSwhMCl9LGgueWdyaWRzPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWwsYz1iLmNvbmZpZztyZXR1cm4gYT8oYy5ncmlkX3lfbGluZXM9YSxiLnJlZHJhd1dpdGhvdXRSZXNjYWxlKCksYy5ncmlkX3lfbGluZXMpOmMuZ3JpZF95X2xpbmVzfSxoLnlncmlkcy5hZGQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbDtyZXR1cm4gdGhpcy55Z3JpZHMoYi5jb25maWcuZ3JpZF95X2xpbmVzLmNvbmNhdChhP2E6W10pKX0saC55Z3JpZHMucmVtb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw7Yi5yZW1vdmVHcmlkTGluZXMoYSwhMSl9LGgucmVnaW9ucz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIGE/KGMucmVnaW9ucz1hLGIucmVkcmF3V2l0aG91dFJlc2NhbGUoKSxjLnJlZ2lvbnMpOmMucmVnaW9uc30saC5yZWdpb25zLmFkZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIGE/KGMucmVnaW9ucz1jLnJlZ2lvbnMuY29uY2F0KGEpLGIucmVkcmF3V2l0aG91dFJlc2NhbGUoKSxjLnJlZ2lvbnMpOmMucmVnaW9uc30saC5yZWdpb25zLnJlbW92ZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzLmludGVybmFsLGY9ZS5jb25maWc7cmV0dXJuIGE9YXx8e30sYj1lLmdldE9wdGlvbihhLFwiZHVyYXRpb25cIixmLnRyYW5zaXRpb25fZHVyYXRpb24pLGM9ZS5nZXRPcHRpb24oYSxcImNsYXNzZXNcIixbbC5yZWdpb25dKSxkPWUubWFpbi5zZWxlY3QoXCIuXCIrbC5yZWdpb25zKS5zZWxlY3RBbGwoYy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuXCIuXCIrYX0pKSwoYj9kLnRyYW5zaXRpb24oKS5kdXJhdGlvbihiKTpkKS5zdHlsZShcIm9wYWNpdHlcIiwwKS5yZW1vdmUoKSxmLnJlZ2lvbnM9Zi5yZWdpb25zLmZpbHRlcihmdW5jdGlvbihhKXt2YXIgYj0hMTtyZXR1cm4gYVtcImNsYXNzXCJdPyhhW1wiY2xhc3NcIl0uc3BsaXQoXCIgXCIpLmZvckVhY2goZnVuY3Rpb24oYSl7Yy5pbmRleE9mKGEpPj0wJiYoYj0hMCl9KSwhYik6ITB9KSxmLnJlZ2lvbnN9LGguZGF0YT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLmRhdGEudGFyZ2V0cztyZXR1cm5cInVuZGVmaW5lZFwiPT10eXBlb2YgYT9iOmIuZmlsdGVyKGZ1bmN0aW9uKGIpe3JldHVybltdLmNvbmNhdChhKS5pbmRleE9mKGIuaWQpPj0wfSl9LGguZGF0YS5zaG93bj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnRlcm5hbC5maWx0ZXJUYXJnZXRzVG9TaG93KHRoaXMuZGF0YShhKSl9LGguZGF0YS52YWx1ZXM9ZnVuY3Rpb24oYSl7dmFyIGIsYz1udWxsO3JldHVybiBhJiYoYj10aGlzLmRhdGEoYSksYz1iWzBdP2JbMF0udmFsdWVzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS52YWx1ZX0pOm51bGwpLGN9LGguZGF0YS5uYW1lcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnRlcm5hbC5jbGVhckxlZ2VuZEl0ZW1UZXh0Qm94Q2FjaGUoKSx0aGlzLmludGVybmFsLnVwZGF0ZURhdGFBdHRyaWJ1dGVzKFwibmFtZXNcIixhKX0saC5kYXRhLmNvbG9ycz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnRlcm5hbC51cGRhdGVEYXRhQXR0cmlidXRlcyhcImNvbG9yc1wiLGEpfSxoLmRhdGEuYXhlcz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnRlcm5hbC51cGRhdGVEYXRhQXR0cmlidXRlcyhcImF4ZXNcIixhKX0saC5jYXRlZ29yeT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaW50ZXJuYWwsZD1jLmNvbmZpZztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4xJiYoZC5heGlzX3hfY2F0ZWdvcmllc1thXT1iLGMucmVkcmF3KCkpLGQuYXhpc194X2NhdGVnb3JpZXNbYV19LGguY2F0ZWdvcmllcz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KGMuYXhpc194X2NhdGVnb3JpZXM9YSxiLnJlZHJhdygpLGMuYXhpc194X2NhdGVnb3JpZXMpOmMuYXhpc194X2NhdGVnb3JpZXN9LGguY29sb3I9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbDtyZXR1cm4gYi5jb2xvcihhKX0saC54PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJihiLnVwZGF0ZVRhcmdldFgoYi5kYXRhLnRhcmdldHMsYSksYi5yZWRyYXcoe3dpdGhVcGRhdGVPcmdYRG9tYWluOiEwLHdpdGhVcGRhdGVYRG9tYWluOiEwfSkpLGIuZGF0YS54c30saC54cz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsO3JldHVybiBhcmd1bWVudHMubGVuZ3RoJiYoYi51cGRhdGVUYXJnZXRYcyhiLmRhdGEudGFyZ2V0cyxhKSxiLnJlZHJhdyh7d2l0aFVwZGF0ZU9yZ1hEb21haW46ITAsd2l0aFVwZGF0ZVhEb21haW46ITB9KSksYi5kYXRhLnhzfSxoLmF4aXM9ZnVuY3Rpb24oKXt9LGguYXhpcy5sYWJlbHM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbDthcmd1bWVudHMubGVuZ3RoJiYoT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihjKXtiLmF4aXMuc2V0TGFiZWxUZXh0KGMsYVtjXSl9KSxiLmF4aXMudXBkYXRlTGFiZWxzKCkpfSxoLmF4aXMubWF4PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWwsYz1iLmNvbmZpZztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8oXCJvYmplY3RcIj09dHlwZW9mIGE/KG0oYS54KSYmKGMuYXhpc194X21heD1hLngpLG0oYS55KSYmKGMuYXhpc195X21heD1hLnkpLG0oYS55MikmJihjLmF4aXNfeTJfbWF4PWEueTIpKTpjLmF4aXNfeV9tYXg9Yy5heGlzX3kyX21heD1hLHZvaWQgYi5yZWRyYXcoe3dpdGhVcGRhdGVPcmdYRG9tYWluOiEwLHdpdGhVcGRhdGVYRG9tYWluOiEwfSkpOnt4OmMuYXhpc194X21heCx5OmMuYXhpc195X21heCx5MjpjLmF4aXNfeTJfbWF4fX0saC5heGlzLm1pbj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmludGVybmFsLGM9Yi5jb25maWc7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KFwib2JqZWN0XCI9PXR5cGVvZiBhPyhtKGEueCkmJihjLmF4aXNfeF9taW49YS54KSxtKGEueSkmJihjLmF4aXNfeV9taW49YS55KSxtKGEueTIpJiYoYy5heGlzX3kyX21pbj1hLnkyKSk6Yy5heGlzX3lfbWluPWMuYXhpc195Ml9taW49YSx2b2lkIGIucmVkcmF3KHt3aXRoVXBkYXRlT3JnWERvbWFpbjohMCx3aXRoVXBkYXRlWERvbWFpbjohMH0pKTp7eDpjLmF4aXNfeF9taW4seTpjLmF4aXNfeV9taW4seTI6Yy5heGlzX3kyX21pbn19LGguYXhpcy5yYW5nZT1mdW5jdGlvbihhKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD8ocShhLm1heCkmJnRoaXMuYXhpcy5tYXgoYS5tYXgpLHZvaWQocShhLm1pbikmJnRoaXMuYXhpcy5taW4oYS5taW4pKSk6e21heDp0aGlzLmF4aXMubWF4KCksbWluOnRoaXMuYXhpcy5taW4oKX19LGgubGVnZW5kPWZ1bmN0aW9uKCl7fSxoLmxlZ2VuZC5zaG93PWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW50ZXJuYWw7Yi5zaG93TGVnZW5kKGIubWFwVG9UYXJnZXRJZHMoYSkpLGIudXBkYXRlQW5kUmVkcmF3KHt3aXRoTGVnZW5kOiEwfSl9LGgubGVnZW5kLmhpZGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbDtiLmhpZGVMZWdlbmQoYi5tYXBUb1RhcmdldElkcyhhKSksYi51cGRhdGVBbmRSZWRyYXcoe3dpdGhMZWdlbmQ6ITB9KX0saC5yZXNpemU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnRlcm5hbCxjPWIuY29uZmlnO2Muc2l6ZV93aWR0aD1hP2Eud2lkdGg6bnVsbCxjLnNpemVfaGVpZ2h0PWE/YS5oZWlnaHQ6bnVsbCx0aGlzLmZsdXNoKCl9LGguZmx1c2g9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmludGVybmFsO2EudXBkYXRlQW5kUmVkcmF3KHt3aXRoTGVnZW5kOiEwLHdpdGhUcmFuc2l0aW9uOiExLHdpdGhUcmFuc2l0aW9uRm9yVHJhbnNmb3JtOiExfSl9LGguZGVzdHJveT1mdW5jdGlvbigpe3ZhciBiPXRoaXMuaW50ZXJuYWw7cmV0dXJuIGEuY2xlYXJJbnRlcnZhbChiLmludGVydmFsRm9yT2JzZXJ2ZUluc2VydGVkKSxhLm9ucmVzaXplPW51bGwsYi5zZWxlY3RDaGFydC5jbGFzc2VkKFwiYzNcIiwhMSkuaHRtbChcIlwiKSxPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2JbYV09bnVsbH0pLG51bGx9LGgudG9vbHRpcD1mdW5jdGlvbigpe30saC50b29sdGlwLnNob3c9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMuaW50ZXJuYWw7YS5tb3VzZSYmKGM9YS5tb3VzZSksYS5kYXRhP2QuaXNNdWx0aXBsZVgoKT8oYz1bZC54KGEuZGF0YS54KSxkLmdldFlTY2FsZShhLmRhdGEuaWQpKGEuZGF0YS52YWx1ZSldLGI9bnVsbCk6Yj1tKGEuZGF0YS5pbmRleCk/YS5kYXRhLmluZGV4OmQuZ2V0SW5kZXhCeVgoYS5kYXRhLngpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBhLng/Yj1kLmdldEluZGV4QnlYKGEueCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuaW5kZXgmJihiPWEuaW5kZXgpLGQuZGlzcGF0Y2hFdmVudChcIm1vdXNlb3ZlclwiLGIsYyksZC5kaXNwYXRjaEV2ZW50KFwibW91c2Vtb3ZlXCIsYixjKX0saC50b29sdGlwLmhpZGU9ZnVuY3Rpb24oKXt0aGlzLmludGVybmFsLmRpc3BhdGNoRXZlbnQoXCJtb3VzZW91dFwiLDApfTt2YXIgejtpLmlzU2FmYXJpPWZ1bmN0aW9uKCl7dmFyIGI9YS5uYXZpZ2F0b3IudXNlckFnZW50O3JldHVybiBiLmluZGV4T2YoXCJTYWZhcmlcIik+PTAmJmIuaW5kZXhPZihcIkNocm9tZVwiKTwwfSxpLmlzQ2hyb21lPWZ1bmN0aW9uKCl7dmFyIGI9YS5uYXZpZ2F0b3IudXNlckFnZW50O3JldHVybiBiLmluZGV4T2YoXCJDaHJvbWVcIik+PTB9LEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oYSl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgLSB3aGF0IGlzIHRyeWluZyB0byBiZSBib3VuZCBpcyBub3QgY2FsbGFibGVcIik7dmFyIGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGM9dGhpcyxkPWZ1bmN0aW9uKCl7fSxlPWZ1bmN0aW9uKCl7cmV0dXJuIGMuYXBwbHkodGhpcyBpbnN0YW5jZW9mIGQ/dGhpczphLGIuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpKX07cmV0dXJuIGQucHJvdG90eXBlPXRoaXMucHJvdG90eXBlLGUucHJvdG90eXBlPW5ldyBkLGV9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiYzNcIixbXCJkM1wiXSxrKTpcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1rOmEuYzM9a30od2luZG93KTsiLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4pe2Z1bmN0aW9uIHQodCxyLGUsdSxpLG8pe2Zvcig7aT49MCYmbz5pO2krPW4pe3ZhciBhPXU/dVtpXTppO2U9cihlLHRbYV0sYSx0KX1yZXR1cm4gZX1yZXR1cm4gZnVuY3Rpb24ocixlLHUsaSl7ZT1iKGUsaSw0KTt2YXIgbz0hayhyKSYmbS5rZXlzKHIpLGE9KG98fHIpLmxlbmd0aCxjPW4+MD8wOmEtMTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwzJiYodT1yW28/b1tjXTpjXSxjKz1uKSx0KHIsZSx1LG8sYyxhKX19ZnVuY3Rpb24gdChuKXtyZXR1cm4gZnVuY3Rpb24odCxyLGUpe3I9eChyLGUpO2Zvcih2YXIgdT1PKHQpLGk9bj4wPzA6dS0xO2k+PTAmJnU+aTtpKz1uKWlmKHIodFtpXSxpLHQpKXJldHVybiBpO3JldHVybi0xfX1mdW5jdGlvbiByKG4sdCxyKXtyZXR1cm4gZnVuY3Rpb24oZSx1LGkpe3ZhciBvPTAsYT1PKGUpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBpKW4+MD9vPWk+PTA/aTpNYXRoLm1heChpK2Esbyk6YT1pPj0wP01hdGgubWluKGkrMSxhKTppK2ErMTtlbHNlIGlmKHImJmkmJmEpcmV0dXJuIGk9cihlLHUpLGVbaV09PT11P2k6LTE7aWYodSE9PXUpcmV0dXJuIGk9dChsLmNhbGwoZSxvLGEpLG0uaXNOYU4pLGk+PTA/aStvOi0xO2ZvcihpPW4+MD9vOmEtMTtpPj0wJiZhPmk7aSs9bilpZihlW2ldPT09dSlyZXR1cm4gaTtyZXR1cm4tMX19ZnVuY3Rpb24gZShuLHQpe3ZhciByPUkubGVuZ3RoLGU9bi5jb25zdHJ1Y3Rvcix1PW0uaXNGdW5jdGlvbihlKSYmZS5wcm90b3R5cGV8fGEsaT1cImNvbnN0cnVjdG9yXCI7Zm9yKG0uaGFzKG4saSkmJiFtLmNvbnRhaW5zKHQsaSkmJnQucHVzaChpKTtyLS07KWk9SVtyXSxpIGluIG4mJm5baV0hPT11W2ldJiYhbS5jb250YWlucyh0LGkpJiZ0LnB1c2goaSl9dmFyIHU9dGhpcyxpPXUuXyxvPUFycmF5LnByb3RvdHlwZSxhPU9iamVjdC5wcm90b3R5cGUsYz1GdW5jdGlvbi5wcm90b3R5cGUsZj1vLnB1c2gsbD1vLnNsaWNlLHM9YS50b1N0cmluZyxwPWEuaGFzT3duUHJvcGVydHksaD1BcnJheS5pc0FycmF5LHY9T2JqZWN0LmtleXMsZz1jLmJpbmQseT1PYmplY3QuY3JlYXRlLGQ9ZnVuY3Rpb24oKXt9LG09ZnVuY3Rpb24obil7cmV0dXJuIG4gaW5zdGFuY2VvZiBtP246dGhpcyBpbnN0YW5jZW9mIG0/dm9pZCh0aGlzLl93cmFwcGVkPW4pOm5ldyBtKG4pfTtcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cz8oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMmJihleHBvcnRzPW1vZHVsZS5leHBvcnRzPW0pLGV4cG9ydHMuXz1tKTp1Ll89bSxtLlZFUlNJT049XCIxLjguM1wiO3ZhciBiPWZ1bmN0aW9uKG4sdCxyKXtpZih0PT09dm9pZCAwKXJldHVybiBuO3N3aXRjaChudWxsPT1yPzM6cil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbi5jYWxsKHQscil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24ocixlKXtyZXR1cm4gbi5jYWxsKHQscixlKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihyLGUsdSl7cmV0dXJuIG4uY2FsbCh0LHIsZSx1KX07Y2FzZSA0OnJldHVybiBmdW5jdGlvbihyLGUsdSxpKXtyZXR1cm4gbi5jYWxsKHQscixlLHUsaSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KHQsYXJndW1lbnRzKX19LHg9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT1uP20uaWRlbnRpdHk6bS5pc0Z1bmN0aW9uKG4pP2Iobix0LHIpOm0uaXNPYmplY3Qobik/bS5tYXRjaGVyKG4pOm0ucHJvcGVydHkobil9O20uaXRlcmF0ZWU9ZnVuY3Rpb24obix0KXtyZXR1cm4geChuLHQsMS8wKX07dmFyIF89ZnVuY3Rpb24obix0KXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDtpZigyPmV8fG51bGw9PXIpcmV0dXJuIHI7Zm9yKHZhciB1PTE7ZT51O3UrKylmb3IodmFyIGk9YXJndW1lbnRzW3VdLG89bihpKSxhPW8ubGVuZ3RoLGM9MDthPmM7YysrKXt2YXIgZj1vW2NdO3QmJnJbZl0hPT12b2lkIDB8fChyW2ZdPWlbZl0pfXJldHVybiByfX0saj1mdW5jdGlvbihuKXtpZighbS5pc09iamVjdChuKSlyZXR1cm57fTtpZih5KXJldHVybiB5KG4pO2QucHJvdG90eXBlPW47dmFyIHQ9bmV3IGQ7cmV0dXJuIGQucHJvdG90eXBlPW51bGwsdH0sdz1mdW5jdGlvbihuKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbbl19fSxBPU1hdGgucG93KDIsNTMpLTEsTz13KFwibGVuZ3RoXCIpLGs9ZnVuY3Rpb24obil7dmFyIHQ9TyhuKTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmdD49MCYmQT49dH07bS5lYWNoPW0uZm9yRWFjaD1mdW5jdGlvbihuLHQscil7dD1iKHQscik7dmFyIGUsdTtpZihrKG4pKWZvcihlPTAsdT1uLmxlbmd0aDt1PmU7ZSsrKXQobltlXSxlLG4pO2Vsc2V7dmFyIGk9bS5rZXlzKG4pO2ZvcihlPTAsdT1pLmxlbmd0aDt1PmU7ZSsrKXQobltpW2VdXSxpW2VdLG4pfXJldHVybiBufSxtLm1hcD1tLmNvbGxlY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKXt2YXIgYT1lP2Vbb106bztpW29dPXQoblthXSxhLG4pfXJldHVybiBpfSxtLnJlZHVjZT1tLmZvbGRsPW0uaW5qZWN0PW4oMSksbS5yZWR1Y2VSaWdodD1tLmZvbGRyPW4oLTEpLG0uZmluZD1tLmRldGVjdD1mdW5jdGlvbihuLHQscil7dmFyIGU7cmV0dXJuIGU9ayhuKT9tLmZpbmRJbmRleChuLHQscik6bS5maW5kS2V5KG4sdCxyKSxlIT09dm9pZCAwJiZlIT09LTE/bltlXTp2b2lkIDB9LG0uZmlsdGVyPW0uc2VsZWN0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1bXTtyZXR1cm4gdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLHUpe3QobixyLHUpJiZlLnB1c2gobil9KSxlfSxtLnJlamVjdD1mdW5jdGlvbihuLHQscil7cmV0dXJuIG0uZmlsdGVyKG4sbS5uZWdhdGUoeCh0KSkscil9LG0uZXZlcnk9bS5hbGw9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYoIXQobltvXSxvLG4pKXJldHVybiExfXJldHVybiEwfSxtLnNvbWU9bS5hbnk9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZT0hayhuKSYmbS5rZXlzKG4pLHU9KGV8fG4pLmxlbmd0aCxpPTA7dT5pO2krKyl7dmFyIG89ZT9lW2ldOmk7aWYodChuW29dLG8sbikpcmV0dXJuITB9cmV0dXJuITF9LG0uY29udGFpbnM9bS5pbmNsdWRlcz1tLmluY2x1ZGU9ZnVuY3Rpb24obix0LHIsZSl7cmV0dXJuIGsobil8fChuPW0udmFsdWVzKG4pKSwoXCJudW1iZXJcIiE9dHlwZW9mIHJ8fGUpJiYocj0wKSxtLmluZGV4T2Yobix0LHIpPj0wfSxtLmludm9rZT1mdW5jdGlvbihuLHQpe3ZhciByPWwuY2FsbChhcmd1bWVudHMsMiksZT1tLmlzRnVuY3Rpb24odCk7cmV0dXJuIG0ubWFwKG4sZnVuY3Rpb24obil7dmFyIHU9ZT90Om5bdF07cmV0dXJuIG51bGw9PXU/dTp1LmFwcGx5KG4scil9KX0sbS5wbHVjaz1mdW5jdGlvbihuLHQpe3JldHVybiBtLm1hcChuLG0ucHJvcGVydHkodCkpfSxtLndoZXJlPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG0uZmlsdGVyKG4sbS5tYXRjaGVyKHQpKX0sbS5maW5kV2hlcmU9ZnVuY3Rpb24obix0KXtyZXR1cm4gbS5maW5kKG4sbS5tYXRjaGVyKHQpKX0sbS5tYXg9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT0tMS8wLG89LTEvMDtpZihudWxsPT10JiZudWxsIT1uKXtuPWsobik/bjptLnZhbHVlcyhuKTtmb3IodmFyIGE9MCxjPW4ubGVuZ3RoO2M+YTthKyspZT1uW2FdLGU+aSYmKGk9ZSl9ZWxzZSB0PXgodCxyKSxtLmVhY2gobixmdW5jdGlvbihuLHIsZSl7dT10KG4scixlKSwodT5vfHx1PT09LTEvMCYmaT09PS0xLzApJiYoaT1uLG89dSl9KTtyZXR1cm4gaX0sbS5taW49ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT0xLzAsbz0xLzA7aWYobnVsbD09dCYmbnVsbCE9bil7bj1rKG4pP246bS52YWx1ZXMobik7Zm9yKHZhciBhPTAsYz1uLmxlbmd0aDtjPmE7YSsrKWU9blthXSxpPmUmJihpPWUpfWVsc2UgdD14KHQsciksbS5lYWNoKG4sZnVuY3Rpb24obixyLGUpe3U9dChuLHIsZSksKG8+dXx8MS8wPT09dSYmMS8wPT09aSkmJihpPW4sbz11KX0pO3JldHVybiBpfSxtLnNodWZmbGU9ZnVuY3Rpb24obil7Zm9yKHZhciB0LHI9ayhuKT9uOm0udmFsdWVzKG4pLGU9ci5sZW5ndGgsdT1BcnJheShlKSxpPTA7ZT5pO2krKyl0PW0ucmFuZG9tKDAsaSksdCE9PWkmJih1W2ldPXVbdF0pLHVbdF09cltpXTtyZXR1cm4gdX0sbS5zYW1wbGU9ZnVuY3Rpb24obix0LHIpe3JldHVybiBudWxsPT10fHxyPyhrKG4pfHwobj1tLnZhbHVlcyhuKSksblttLnJhbmRvbShuLmxlbmd0aC0xKV0pOm0uc2h1ZmZsZShuKS5zbGljZSgwLE1hdGgubWF4KDAsdCkpfSxtLnNvcnRCeT1mdW5jdGlvbihuLHQscil7cmV0dXJuIHQ9eCh0LHIpLG0ucGx1Y2sobS5tYXAobixmdW5jdGlvbihuLHIsZSl7cmV0dXJue3ZhbHVlOm4saW5kZXg6cixjcml0ZXJpYTp0KG4scixlKX19KS5zb3J0KGZ1bmN0aW9uKG4sdCl7dmFyIHI9bi5jcml0ZXJpYSxlPXQuY3JpdGVyaWE7aWYociE9PWUpe2lmKHI+ZXx8cj09PXZvaWQgMClyZXR1cm4gMTtpZihlPnJ8fGU9PT12b2lkIDApcmV0dXJuLTF9cmV0dXJuIG4uaW5kZXgtdC5pbmRleH0pLFwidmFsdWVcIil9O3ZhciBGPWZ1bmN0aW9uKG4pe3JldHVybiBmdW5jdGlvbih0LHIsZSl7dmFyIHU9e307cmV0dXJuIHI9eChyLGUpLG0uZWFjaCh0LGZ1bmN0aW9uKGUsaSl7dmFyIG89cihlLGksdCk7bih1LGUsbyl9KSx1fX07bS5ncm91cEJ5PUYoZnVuY3Rpb24obix0LHIpe20uaGFzKG4scik/bltyXS5wdXNoKHQpOm5bcl09W3RdfSksbS5pbmRleEJ5PUYoZnVuY3Rpb24obix0LHIpe25bcl09dH0pLG0uY291bnRCeT1GKGZ1bmN0aW9uKG4sdCxyKXttLmhhcyhuLHIpP25bcl0rKzpuW3JdPTF9KSxtLnRvQXJyYXk9ZnVuY3Rpb24obil7cmV0dXJuIG4/bS5pc0FycmF5KG4pP2wuY2FsbChuKTprKG4pP20ubWFwKG4sbS5pZGVudGl0eSk6bS52YWx1ZXMobik6W119LG0uc2l6ZT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8wOmsobik/bi5sZW5ndGg6bS5rZXlzKG4pLmxlbmd0aH0sbS5wYXJ0aXRpb249ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO3ZhciBlPVtdLHU9W107cmV0dXJuIG0uZWFjaChuLGZ1bmN0aW9uKG4scixpKXsodChuLHIsaSk/ZTp1KS5wdXNoKG4pfSksW2UsdV19LG0uZmlyc3Q9bS5oZWFkPW0udGFrZT1mdW5jdGlvbihuLHQscil7cmV0dXJuIG51bGw9PW4/dm9pZCAwOm51bGw9PXR8fHI/blswXTptLmluaXRpYWwobixuLmxlbmd0aC10KX0sbS5pbml0aWFsPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbC5jYWxsKG4sMCxNYXRoLm1heCgwLG4ubGVuZ3RoLShudWxsPT10fHxyPzE6dCkpKX0sbS5sYXN0PWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gbnVsbD09bj92b2lkIDA6bnVsbD09dHx8cj9uW24ubGVuZ3RoLTFdOm0ucmVzdChuLE1hdGgubWF4KDAsbi5sZW5ndGgtdCkpfSxtLnJlc3Q9bS50YWlsPW0uZHJvcD1mdW5jdGlvbihuLHQscil7cmV0dXJuIGwuY2FsbChuLG51bGw9PXR8fHI/MTp0KX0sbS5jb21wYWN0PWZ1bmN0aW9uKG4pe3JldHVybiBtLmZpbHRlcihuLG0uaWRlbnRpdHkpfTt2YXIgUz1mdW5jdGlvbihuLHQscixlKXtmb3IodmFyIHU9W10saT0wLG89ZXx8MCxhPU8obik7YT5vO28rKyl7dmFyIGM9bltvXTtpZihrKGMpJiYobS5pc0FycmF5KGMpfHxtLmlzQXJndW1lbnRzKGMpKSl7dHx8KGM9UyhjLHQscikpO3ZhciBmPTAsbD1jLmxlbmd0aDtmb3IodS5sZW5ndGgrPWw7bD5mOyl1W2krK109Y1tmKytdfWVsc2Ugcnx8KHVbaSsrXT1jKX1yZXR1cm4gdX07bS5mbGF0dGVuPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIFMobix0LCExKX0sbS53aXRob3V0PWZ1bmN0aW9uKG4pe3JldHVybiBtLmRpZmZlcmVuY2UobixsLmNhbGwoYXJndW1lbnRzLDEpKX0sbS51bmlxPW0udW5pcXVlPWZ1bmN0aW9uKG4sdCxyLGUpe20uaXNCb29sZWFuKHQpfHwoZT1yLHI9dCx0PSExKSxudWxsIT1yJiYocj14KHIsZSkpO2Zvcih2YXIgdT1bXSxpPVtdLG89MCxhPU8obik7YT5vO28rKyl7dmFyIGM9bltvXSxmPXI/cihjLG8sbik6Yzt0PyhvJiZpPT09Znx8dS5wdXNoKGMpLGk9Zik6cj9tLmNvbnRhaW5zKGksZil8fChpLnB1c2goZiksdS5wdXNoKGMpKTptLmNvbnRhaW5zKHUsYyl8fHUucHVzaChjKX1yZXR1cm4gdX0sbS51bmlvbj1mdW5jdGlvbigpe3JldHVybiBtLnVuaXEoUyhhcmd1bWVudHMsITAsITApKX0sbS5pbnRlcnNlY3Rpb249ZnVuY3Rpb24obil7Zm9yKHZhciB0PVtdLHI9YXJndW1lbnRzLmxlbmd0aCxlPTAsdT1PKG4pO3U+ZTtlKyspe3ZhciBpPW5bZV07aWYoIW0uY29udGFpbnModCxpKSl7Zm9yKHZhciBvPTE7cj5vJiZtLmNvbnRhaW5zKGFyZ3VtZW50c1tvXSxpKTtvKyspO289PT1yJiZ0LnB1c2goaSl9fXJldHVybiB0fSxtLmRpZmZlcmVuY2U9ZnVuY3Rpb24obil7dmFyIHQ9Uyhhcmd1bWVudHMsITAsITAsMSk7cmV0dXJuIG0uZmlsdGVyKG4sZnVuY3Rpb24obil7cmV0dXJuIW0uY29udGFpbnModCxuKX0pfSxtLnppcD1mdW5jdGlvbigpe3JldHVybiBtLnVuemlwKGFyZ3VtZW50cyl9LG0udW56aXA9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW4mJm0ubWF4KG4sTykubGVuZ3RofHwwLHI9QXJyYXkodCksZT0wO3Q+ZTtlKyspcltlXT1tLnBsdWNrKG4sZSk7cmV0dXJuIHJ9LG0ub2JqZWN0PWZ1bmN0aW9uKG4sdCl7Zm9yKHZhciByPXt9LGU9MCx1PU8obik7dT5lO2UrKyl0P3JbbltlXV09dFtlXTpyW25bZV1bMF1dPW5bZV1bMV07cmV0dXJuIHJ9LG0uZmluZEluZGV4PXQoMSksbS5maW5kTGFzdEluZGV4PXQoLTEpLG0uc29ydGVkSW5kZXg9ZnVuY3Rpb24obix0LHIsZSl7cj14KHIsZSwxKTtmb3IodmFyIHU9cih0KSxpPTAsbz1PKG4pO28+aTspe3ZhciBhPU1hdGguZmxvb3IoKGkrbykvMik7cihuW2FdKTx1P2k9YSsxOm89YX1yZXR1cm4gaX0sbS5pbmRleE9mPXIoMSxtLmZpbmRJbmRleCxtLnNvcnRlZEluZGV4KSxtLmxhc3RJbmRleE9mPXIoLTEsbS5maW5kTGFzdEluZGV4KSxtLnJhbmdlPWZ1bmN0aW9uKG4sdCxyKXtudWxsPT10JiYodD1ufHwwLG49MCkscj1yfHwxO2Zvcih2YXIgZT1NYXRoLm1heChNYXRoLmNlaWwoKHQtbikvciksMCksdT1BcnJheShlKSxpPTA7ZT5pO2krKyxuKz1yKXVbaV09bjtyZXR1cm4gdX07dmFyIEU9ZnVuY3Rpb24obix0LHIsZSx1KXtpZighKGUgaW5zdGFuY2VvZiB0KSlyZXR1cm4gbi5hcHBseShyLHUpO3ZhciBpPWoobi5wcm90b3R5cGUpLG89bi5hcHBseShpLHUpO3JldHVybiBtLmlzT2JqZWN0KG8pP286aX07bS5iaW5kPWZ1bmN0aW9uKG4sdCl7aWYoZyYmbi5iaW5kPT09ZylyZXR1cm4gZy5hcHBseShuLGwuY2FsbChhcmd1bWVudHMsMSkpO2lmKCFtLmlzRnVuY3Rpb24obikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkJpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvblwiKTt2YXIgcj1sLmNhbGwoYXJndW1lbnRzLDIpLGU9ZnVuY3Rpb24oKXtyZXR1cm4gRShuLGUsdCx0aGlzLHIuY29uY2F0KGwuY2FsbChhcmd1bWVudHMpKSl9O3JldHVybiBlfSxtLnBhcnRpYWw9ZnVuY3Rpb24obil7dmFyIHQ9bC5jYWxsKGFyZ3VtZW50cywxKSxyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdT10Lmxlbmd0aCxpPUFycmF5KHUpLG89MDt1Pm87bysrKWlbb109dFtvXT09PW0/YXJndW1lbnRzW2UrK106dFtvXTtmb3IoO2U8YXJndW1lbnRzLmxlbmd0aDspaS5wdXNoKGFyZ3VtZW50c1tlKytdKTtyZXR1cm4gRShuLHIsdGhpcyx0aGlzLGkpfTtyZXR1cm4gcn0sbS5iaW5kQWxsPWZ1bmN0aW9uKG4pe3ZhciB0LHIsZT1hcmd1bWVudHMubGVuZ3RoO2lmKDE+PWUpdGhyb3cgbmV3IEVycm9yKFwiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lc1wiKTtmb3IodD0xO2U+dDt0Kyspcj1hcmd1bWVudHNbdF0sbltyXT1tLmJpbmQobltyXSxuKTtyZXR1cm4gbn0sbS5tZW1vaXplPWZ1bmN0aW9uKG4sdCl7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHU9ci5jYWNoZSxpPVwiXCIrKHQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZSk7cmV0dXJuIG0uaGFzKHUsaSl8fCh1W2ldPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpKSx1W2ldfTtyZXR1cm4gci5jYWNoZT17fSxyfSxtLmRlbGF5PWZ1bmN0aW9uKG4sdCl7dmFyIHI9bC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KG51bGwscil9LHQpfSxtLmRlZmVyPW0ucGFydGlhbChtLmRlbGF5LG0sMSksbS50aHJvdHRsZT1mdW5jdGlvbihuLHQscil7dmFyIGUsdSxpLG89bnVsbCxhPTA7cnx8KHI9e30pO3ZhciBjPWZ1bmN0aW9uKCl7YT1yLmxlYWRpbmc9PT0hMT8wOm0ubm93KCksbz1udWxsLGk9bi5hcHBseShlLHUpLG98fChlPXU9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBmPW0ubm93KCk7YXx8ci5sZWFkaW5nIT09ITF8fChhPWYpO3ZhciBsPXQtKGYtYSk7cmV0dXJuIGU9dGhpcyx1PWFyZ3VtZW50cywwPj1sfHxsPnQ/KG8mJihjbGVhclRpbWVvdXQobyksbz1udWxsKSxhPWYsaT1uLmFwcGx5KGUsdSksb3x8KGU9dT1udWxsKSk6b3x8ci50cmFpbGluZz09PSExfHwobz1zZXRUaW1lb3V0KGMsbCkpLGl9fSxtLmRlYm91bmNlPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZSx1LGksbyxhLGM9ZnVuY3Rpb24oKXt2YXIgZj1tLm5vdygpLW87dD5mJiZmPj0wP2U9c2V0VGltZW91dChjLHQtZik6KGU9bnVsbCxyfHwoYT1uLmFwcGx5KGksdSksZXx8KGk9dT1udWxsKSkpfTtyZXR1cm4gZnVuY3Rpb24oKXtpPXRoaXMsdT1hcmd1bWVudHMsbz1tLm5vdygpO3ZhciBmPXImJiFlO3JldHVybiBlfHwoZT1zZXRUaW1lb3V0KGMsdCkpLGYmJihhPW4uYXBwbHkoaSx1KSxpPXU9bnVsbCksYX19LG0ud3JhcD1mdW5jdGlvbihuLHQpe3JldHVybiBtLnBhcnRpYWwodCxuKX0sbS5uZWdhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sbS5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIG49YXJndW1lbnRzLHQ9bi5sZW5ndGgtMTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHI9dCxlPW5bdF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ItLTspZT1uW3JdLmNhbGwodGhpcyxlKTtyZXR1cm4gZX19LG0uYWZ0ZXI9ZnVuY3Rpb24obix0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLW48MT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSxtLmJlZm9yZT1mdW5jdGlvbihuLHQpe3ZhciByO3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tbj4wJiYocj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksMT49biYmKHQ9bnVsbCkscn19LG0ub25jZT1tLnBhcnRpYWwobS5iZWZvcmUsMik7dmFyIE09IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZShcInRvU3RyaW5nXCIpLEk9W1widmFsdWVPZlwiLFwiaXNQcm90b3R5cGVPZlwiLFwidG9TdHJpbmdcIixcInByb3BlcnR5SXNFbnVtZXJhYmxlXCIsXCJoYXNPd25Qcm9wZXJ0eVwiLFwidG9Mb2NhbGVTdHJpbmdcIl07bS5rZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO2lmKHYpcmV0dXJuIHYobik7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5oYXMobixyKSYmdC5wdXNoKHIpO3JldHVybiBNJiZlKG4sdCksdH0sbS5hbGxLZXlzPWZ1bmN0aW9uKG4pe2lmKCFtLmlzT2JqZWN0KG4pKXJldHVybltdO3ZhciB0PVtdO2Zvcih2YXIgciBpbiBuKXQucHVzaChyKTtyZXR1cm4gTSYmZShuLHQpLHR9LG0udmFsdWVzPWZ1bmN0aW9uKG4pe2Zvcih2YXIgdD1tLmtleXMobikscj10Lmxlbmd0aCxlPUFycmF5KHIpLHU9MDtyPnU7dSsrKWVbdV09blt0W3VdXTtyZXR1cm4gZX0sbS5tYXBPYmplY3Q9ZnVuY3Rpb24obix0LHIpe3Q9eCh0LHIpO2Zvcih2YXIgZSx1PW0ua2V5cyhuKSxpPXUubGVuZ3RoLG89e30sYT0wO2k+YTthKyspZT11W2FdLG9bZV09dChuW2VdLGUsbik7cmV0dXJuIG99LG0ucGFpcnM9ZnVuY3Rpb24obil7Zm9yKHZhciB0PW0ua2V5cyhuKSxyPXQubGVuZ3RoLGU9QXJyYXkociksdT0wO3I+dTt1KyspZVt1XT1bdFt1XSxuW3RbdV1dXTtyZXR1cm4gZX0sbS5pbnZlcnQ9ZnVuY3Rpb24obil7Zm9yKHZhciB0PXt9LHI9bS5rZXlzKG4pLGU9MCx1PXIubGVuZ3RoO3U+ZTtlKyspdFtuW3JbZV1dXT1yW2VdO3JldHVybiB0fSxtLmZ1bmN0aW9ucz1tLm1ldGhvZHM9ZnVuY3Rpb24obil7dmFyIHQ9W107Zm9yKHZhciByIGluIG4pbS5pc0Z1bmN0aW9uKG5bcl0pJiZ0LnB1c2gocik7cmV0dXJuIHQuc29ydCgpfSxtLmV4dGVuZD1fKG0uYWxsS2V5cyksbS5leHRlbmRPd249bS5hc3NpZ249XyhtLmtleXMpLG0uZmluZEtleT1mdW5jdGlvbihuLHQscil7dD14KHQscik7Zm9yKHZhciBlLHU9bS5rZXlzKG4pLGk9MCxvPXUubGVuZ3RoO28+aTtpKyspaWYoZT11W2ldLHQobltlXSxlLG4pKXJldHVybiBlfSxtLnBpY2s9ZnVuY3Rpb24obix0LHIpe3ZhciBlLHUsaT17fSxvPW47aWYobnVsbD09bylyZXR1cm4gaTttLmlzRnVuY3Rpb24odCk/KHU9bS5hbGxLZXlzKG8pLGU9Yih0LHIpKToodT1TKGFyZ3VtZW50cywhMSwhMSwxKSxlPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdCBpbiByfSxvPU9iamVjdChvKSk7Zm9yKHZhciBhPTAsYz11Lmxlbmd0aDtjPmE7YSsrKXt2YXIgZj11W2FdLGw9b1tmXTtlKGwsZixvKSYmKGlbZl09bCl9cmV0dXJuIGl9LG0ub21pdD1mdW5jdGlvbihuLHQscil7aWYobS5pc0Z1bmN0aW9uKHQpKXQ9bS5uZWdhdGUodCk7ZWxzZXt2YXIgZT1tLm1hcChTKGFyZ3VtZW50cywhMSwhMSwxKSxTdHJpbmcpO3Q9ZnVuY3Rpb24obix0KXtyZXR1cm4hbS5jb250YWlucyhlLHQpfX1yZXR1cm4gbS5waWNrKG4sdCxyKX0sbS5kZWZhdWx0cz1fKG0uYWxsS2V5cywhMCksbS5jcmVhdGU9ZnVuY3Rpb24obix0KXt2YXIgcj1qKG4pO3JldHVybiB0JiZtLmV4dGVuZE93bihyLHQpLHJ9LG0uY2xvbmU9ZnVuY3Rpb24obil7cmV0dXJuIG0uaXNPYmplY3Qobik/bS5pc0FycmF5KG4pP24uc2xpY2UoKTptLmV4dGVuZCh7fSxuKTpufSxtLnRhcD1mdW5jdGlvbihuLHQpe3JldHVybiB0KG4pLG59LG0uaXNNYXRjaD1mdW5jdGlvbihuLHQpe3ZhciByPW0ua2V5cyh0KSxlPXIubGVuZ3RoO2lmKG51bGw9PW4pcmV0dXJuIWU7Zm9yKHZhciB1PU9iamVjdChuKSxpPTA7ZT5pO2krKyl7dmFyIG89cltpXTtpZih0W29dIT09dVtvXXx8IShvIGluIHUpKXJldHVybiExfXJldHVybiEwfTt2YXIgTj1mdW5jdGlvbihuLHQscixlKXtpZihuPT09dClyZXR1cm4gMCE9PW58fDEvbj09PTEvdDtpZihudWxsPT1ufHxudWxsPT10KXJldHVybiBuPT09dDtuIGluc3RhbmNlb2YgbSYmKG49bi5fd3JhcHBlZCksdCBpbnN0YW5jZW9mIG0mJih0PXQuX3dyYXBwZWQpO3ZhciB1PXMuY2FsbChuKTtpZih1IT09cy5jYWxsKHQpKXJldHVybiExO3N3aXRjaCh1KXtjYXNlXCJbb2JqZWN0IFJlZ0V4cF1cIjpjYXNlXCJbb2JqZWN0IFN0cmluZ11cIjpyZXR1cm5cIlwiK249PVwiXCIrdDtjYXNlXCJbb2JqZWN0IE51bWJlcl1cIjpyZXR1cm4rbiE9PStuPyt0IT09K3Q6MD09PStuPzEvK249PT0xL3Q6K249PT0rdDtjYXNlXCJbb2JqZWN0IERhdGVdXCI6Y2FzZVwiW29iamVjdCBCb29sZWFuXVwiOnJldHVybituPT09K3R9dmFyIGk9XCJbb2JqZWN0IEFycmF5XVwiPT09dTtpZighaSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIG58fFwib2JqZWN0XCIhPXR5cGVvZiB0KXJldHVybiExO3ZhciBvPW4uY29uc3RydWN0b3IsYT10LmNvbnN0cnVjdG9yO2lmKG8hPT1hJiYhKG0uaXNGdW5jdGlvbihvKSYmbyBpbnN0YW5jZW9mIG8mJm0uaXNGdW5jdGlvbihhKSYmYSBpbnN0YW5jZW9mIGEpJiZcImNvbnN0cnVjdG9yXCJpbiBuJiZcImNvbnN0cnVjdG9yXCJpbiB0KXJldHVybiExfXI9cnx8W10sZT1lfHxbXTtmb3IodmFyIGM9ci5sZW5ndGg7Yy0tOylpZihyW2NdPT09bilyZXR1cm4gZVtjXT09PXQ7aWYoci5wdXNoKG4pLGUucHVzaCh0KSxpKXtpZihjPW4ubGVuZ3RoLGMhPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO2MtLTspaWYoIU4obltjXSx0W2NdLHIsZSkpcmV0dXJuITF9ZWxzZXt2YXIgZixsPW0ua2V5cyhuKTtpZihjPWwubGVuZ3RoLG0ua2V5cyh0KS5sZW5ndGghPT1jKXJldHVybiExO2Zvcig7Yy0tOylpZihmPWxbY10sIW0uaGFzKHQsZil8fCFOKG5bZl0sdFtmXSxyLGUpKXJldHVybiExfXJldHVybiByLnBvcCgpLGUucG9wKCksITB9O20uaXNFcXVhbD1mdW5jdGlvbihuLHQpe3JldHVybiBOKG4sdCl9LG0uaXNFbXB0eT1mdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8hMDprKG4pJiYobS5pc0FycmF5KG4pfHxtLmlzU3RyaW5nKG4pfHxtLmlzQXJndW1lbnRzKG4pKT8wPT09bi5sZW5ndGg6MD09PW0ua2V5cyhuKS5sZW5ndGh9LG0uaXNFbGVtZW50PWZ1bmN0aW9uKG4pe3JldHVybiEoIW58fDEhPT1uLm5vZGVUeXBlKX0sbS5pc0FycmF5PWh8fGZ1bmN0aW9uKG4pe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXMuY2FsbChuKX0sbS5pc09iamVjdD1mdW5jdGlvbihuKXt2YXIgdD10eXBlb2YgbjtyZXR1cm5cImZ1bmN0aW9uXCI9PT10fHxcIm9iamVjdFwiPT09dCYmISFufSxtLmVhY2goW1wiQXJndW1lbnRzXCIsXCJGdW5jdGlvblwiLFwiU3RyaW5nXCIsXCJOdW1iZXJcIixcIkRhdGVcIixcIlJlZ0V4cFwiLFwiRXJyb3JcIl0sZnVuY3Rpb24obil7bVtcImlzXCIrbl09ZnVuY3Rpb24odCl7cmV0dXJuIHMuY2FsbCh0KT09PVwiW29iamVjdCBcIituK1wiXVwifX0pLG0uaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KG0uaXNBcmd1bWVudHM9ZnVuY3Rpb24obil7cmV0dXJuIG0uaGFzKG4sXCJjYWxsZWVcIil9KSxcImZ1bmN0aW9uXCIhPXR5cGVvZi8uLyYmXCJvYmplY3RcIiE9dHlwZW9mIEludDhBcnJheSYmKG0uaXNGdW5jdGlvbj1mdW5jdGlvbihuKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBufHwhMX0pLG0uaXNGaW5pdGU9ZnVuY3Rpb24obil7cmV0dXJuIGlzRmluaXRlKG4pJiYhaXNOYU4ocGFyc2VGbG9hdChuKSl9LG0uaXNOYU49ZnVuY3Rpb24obil7cmV0dXJuIG0uaXNOdW1iZXIobikmJm4hPT0rbn0sbS5pc0Jvb2xlYW49ZnVuY3Rpb24obil7cmV0dXJuIG49PT0hMHx8bj09PSExfHxcIltvYmplY3QgQm9vbGVhbl1cIj09PXMuY2FsbChuKX0sbS5pc051bGw9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PT1ufSxtLmlzVW5kZWZpbmVkPWZ1bmN0aW9uKG4pe3JldHVybiBuPT09dm9pZCAwfSxtLmhhcz1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsIT1uJiZwLmNhbGwobix0KX0sbS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHUuXz1pLHRoaXN9LG0uaWRlbnRpdHk9ZnVuY3Rpb24obil7cmV0dXJuIG59LG0uY29uc3RhbnQ9ZnVuY3Rpb24obil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG59fSxtLm5vb3A9ZnVuY3Rpb24oKXt9LG0ucHJvcGVydHk9dyxtLnByb3BlcnR5T2Y9ZnVuY3Rpb24obil7cmV0dXJuIG51bGw9PW4/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKHQpe3JldHVybiBuW3RdfX0sbS5tYXRjaGVyPW0ubWF0Y2hlcz1mdW5jdGlvbihuKXtyZXR1cm4gbj1tLmV4dGVuZE93bih7fSxuKSxmdW5jdGlvbih0KXtyZXR1cm4gbS5pc01hdGNoKHQsbil9fSxtLnRpbWVzPWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1BcnJheShNYXRoLm1heCgwLG4pKTt0PWIodCxyLDEpO2Zvcih2YXIgdT0wO24+dTt1KyspZVt1XT10KHUpO3JldHVybiBlfSxtLnJhbmRvbT1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsPT10JiYodD1uLG49MCksbitNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtbisxKSl9LG0ubm93PURhdGUubm93fHxmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpfTt2YXIgQj17XCImXCI6XCImYW1wO1wiLFwiPFwiOlwiJmx0O1wiLFwiPlwiOlwiJmd0O1wiLCdcIic6XCImcXVvdDtcIixcIidcIjpcIiYjeDI3O1wiLFwiYFwiOlwiJiN4NjA7XCJ9LFQ9bS5pbnZlcnQoQiksUj1mdW5jdGlvbihuKXt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4gblt0XX0scj1cIig/OlwiK20ua2V5cyhuKS5qb2luKFwifFwiKStcIilcIixlPVJlZ0V4cChyKSx1PVJlZ0V4cChyLFwiZ1wiKTtyZXR1cm4gZnVuY3Rpb24obil7cmV0dXJuIG49bnVsbD09bj9cIlwiOlwiXCIrbixlLnRlc3Qobik/bi5yZXBsYWNlKHUsdCk6bn19O20uZXNjYXBlPVIoQiksbS51bmVzY2FwZT1SKFQpLG0ucmVzdWx0PWZ1bmN0aW9uKG4sdCxyKXt2YXIgZT1udWxsPT1uP3ZvaWQgMDpuW3RdO3JldHVybiBlPT09dm9pZCAwJiYoZT1yKSxtLmlzRnVuY3Rpb24oZSk/ZS5jYWxsKG4pOmV9O3ZhciBxPTA7bS51bmlxdWVJZD1mdW5jdGlvbihuKXt2YXIgdD0rK3ErXCJcIjtyZXR1cm4gbj9uK3Q6dH0sbS50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xcc1xcU10rPyklPi9nLGludGVycG9sYXRlOi88JT0oW1xcc1xcU10rPyklPi9nLGVzY2FwZTovPCUtKFtcXHNcXFNdKz8pJT4vZ307dmFyIEs9LyguKV4vLHo9e1wiJ1wiOlwiJ1wiLFwiXFxcXFwiOlwiXFxcXFwiLFwiXFxyXCI6XCJyXCIsXCJcXG5cIjpcIm5cIixcIlxcdTIwMjhcIjpcInUyMDI4XCIsXCJcXHUyMDI5XCI6XCJ1MjAyOVwifSxEPS9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZyxMPWZ1bmN0aW9uKG4pe3JldHVyblwiXFxcXFwiK3pbbl19O20udGVtcGxhdGU9ZnVuY3Rpb24obix0LHIpeyF0JiZyJiYodD1yKSx0PW0uZGVmYXVsdHMoe30sdCxtLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciBlPVJlZ0V4cChbKHQuZXNjYXBlfHxLKS5zb3VyY2UsKHQuaW50ZXJwb2xhdGV8fEspLnNvdXJjZSwodC5ldmFsdWF0ZXx8Sykuc291cmNlXS5qb2luKFwifFwiKStcInwkXCIsXCJnXCIpLHU9MCxpPVwiX19wKz0nXCI7bi5yZXBsYWNlKGUsZnVuY3Rpb24odCxyLGUsbyxhKXtyZXR1cm4gaSs9bi5zbGljZSh1LGEpLnJlcGxhY2UoRCxMKSx1PWErdC5sZW5ndGgscj9pKz1cIicrXFxuKChfX3Q9KFwiK3IrXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI6ZT9pKz1cIicrXFxuKChfX3Q9KFwiK2UrXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjpvJiYoaSs9XCInO1xcblwiK28rXCJcXG5fX3ArPSdcIiksdH0pLGkrPVwiJztcXG5cIix0LnZhcmlhYmxlfHwoaT1cIndpdGgob2JqfHx7fSl7XFxuXCIraStcIn1cXG5cIiksaT1cInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIitcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIraStcInJldHVybiBfX3A7XFxuXCI7dHJ5e3ZhciBvPW5ldyBGdW5jdGlvbih0LnZhcmlhYmxlfHxcIm9ialwiLFwiX1wiLGkpfWNhdGNoKGEpe3Rocm93IGEuc291cmNlPWksYX12YXIgYz1mdW5jdGlvbihuKXtyZXR1cm4gby5jYWxsKHRoaXMsbixtKX0sZj10LnZhcmlhYmxlfHxcIm9ialwiO3JldHVybiBjLnNvdXJjZT1cImZ1bmN0aW9uKFwiK2YrXCIpe1xcblwiK2krXCJ9XCIsY30sbS5jaGFpbj1mdW5jdGlvbihuKXt2YXIgdD1tKG4pO3JldHVybiB0Ll9jaGFpbj0hMCx0fTt2YXIgUD1mdW5jdGlvbihuLHQpe3JldHVybiBuLl9jaGFpbj9tKHQpLmNoYWluKCk6dH07bS5taXhpbj1mdW5jdGlvbihuKXttLmVhY2gobS5mdW5jdGlvbnMobiksZnVuY3Rpb24odCl7dmFyIHI9bVt0XT1uW3RdO20ucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIG49W3RoaXMuX3dyYXBwZWRdO3JldHVybiBmLmFwcGx5KG4sYXJndW1lbnRzKSxQKHRoaXMsci5hcHBseShtLG4pKX19KX0sbS5taXhpbihtKSxtLmVhY2goW1wicG9wXCIsXCJwdXNoXCIsXCJyZXZlcnNlXCIsXCJzaGlmdFwiLFwic29ydFwiLFwic3BsaWNlXCIsXCJ1bnNoaWZ0XCJdLGZ1bmN0aW9uKG4pe3ZhciB0PW9bbl07bS5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgcj10aGlzLl93cmFwcGVkO3JldHVybiB0LmFwcGx5KHIsYXJndW1lbnRzKSxcInNoaWZ0XCIhPT1uJiZcInNwbGljZVwiIT09bnx8MCE9PXIubGVuZ3RofHxkZWxldGUgclswXSxQKHRoaXMscil9fSksbS5lYWNoKFtcImNvbmNhdFwiLFwiam9pblwiLFwic2xpY2VcIl0sZnVuY3Rpb24obil7dmFyIHQ9b1tuXTttLnByb3RvdHlwZVtuXT1mdW5jdGlvbigpe3JldHVybiBQKHRoaXMsdC5hcHBseSh0aGlzLl93cmFwcGVkLGFyZ3VtZW50cykpfX0pLG0ucHJvdG90eXBlLnZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dyYXBwZWR9LG0ucHJvdG90eXBlLnZhbHVlT2Y9bS5wcm90b3R5cGUudG9KU09OPW0ucHJvdG90eXBlLnZhbHVlLG0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJcIit0aGlzLl93cmFwcGVkfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcInVuZGVyc2NvcmVcIixbXSxmdW5jdGlvbigpe3JldHVybiBtfSl9KS5jYWxsKHRoaXMpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5kZXJzY29yZS1taW4ubWFwIiwiLy8gbnVtZXJhbC5qc1xuLy8gdmVyc2lvbiA6IDEuNC41XG4vLyBhdXRob3IgOiBBZGFtIERyYXBlclxuLy8gbGljZW5zZSA6IE1JVFxuLy8gaHR0cDovL2FkYW13ZHJhcGVyLmdpdGh1Yi5jb20vTnVtZXJhbC1qcy9cbihmdW5jdGlvbigpe2Z1bmN0aW9uIG8oZSl7dGhpcy5fbj1lfWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciByPU1hdGgucG93KDEwLHQpLGk7aT0oTWF0aC5yb3VuZChlKnIpL3IpLnRvRml4ZWQodCk7aWYobil7dmFyIHM9bmV3IFJlZ0V4cChcIjB7MSxcIituK1wifSRcIik7aT1pLnJlcGxhY2UocyxcIlwiKX1yZXR1cm4gaX1mdW5jdGlvbiBhKGUsdCl7dmFyIG47dC5pbmRleE9mKFwiJFwiKT4tMT9uPWwoZSx0KTp0LmluZGV4T2YoXCIlXCIpPi0xP249YyhlLHQpOnQuaW5kZXhPZihcIjpcIik+LTE/bj1oKGUsdCk6bj1kKGUsdCk7cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQpe2lmKHQuaW5kZXhPZihcIjpcIik+LTEpZS5fbj1wKHQpO2Vsc2UgaWYodD09PWkpZS5fbj0wO2Vsc2V7dmFyIHM9dDtuW3JdLmRlbGltaXRlcnMuZGVjaW1hbCE9PVwiLlwiJiYodD10LnJlcGxhY2UoL1xcLi9nLFwiXCIpLnJlcGxhY2UobltyXS5kZWxpbWl0ZXJzLmRlY2ltYWwsXCIuXCIpKTt2YXIgbz1uZXcgUmVnRXhwKG5bcl0uYWJicmV2aWF0aW9ucy50aG91c2FuZCtcIig/OlxcXFwpfChcXFxcXCIrbltyXS5jdXJyZW5jeS5zeW1ib2wrXCIpPyg/OlxcXFwpKT8pPyRcIiksdT1uZXcgUmVnRXhwKG5bcl0uYWJicmV2aWF0aW9ucy5taWxsaW9uK1wiKD86XFxcXCl8KFxcXFxcIituW3JdLmN1cnJlbmN5LnN5bWJvbCtcIik/KD86XFxcXCkpPyk/JFwiKSxhPW5ldyBSZWdFeHAobltyXS5hYmJyZXZpYXRpb25zLmJpbGxpb24rXCIoPzpcXFxcKXwoXFxcXFwiK25bcl0uY3VycmVuY3kuc3ltYm9sK1wiKT8oPzpcXFxcKSk/KT8kXCIpLGY9bmV3IFJlZ0V4cChuW3JdLmFiYnJldmlhdGlvbnMudHJpbGxpb24rXCIoPzpcXFxcKXwoXFxcXFwiK25bcl0uY3VycmVuY3kuc3ltYm9sK1wiKT8oPzpcXFxcKSk/KT8kXCIpLGw9W1wiS0JcIixcIk1CXCIsXCJHQlwiLFwiVEJcIixcIlBCXCIsXCJFQlwiLFwiWkJcIixcIllCXCJdLGM9ITE7Zm9yKHZhciBoPTA7aDw9bC5sZW5ndGg7aCsrKXtjPXQuaW5kZXhPZihsW2hdKT4tMT9NYXRoLnBvdygxMDI0LGgrMSk6ITE7aWYoYylicmVha31lLl9uPShjP2M6MSkqKHMubWF0Y2gobyk/TWF0aC5wb3coMTAsMyk6MSkqKHMubWF0Y2godSk/TWF0aC5wb3coMTAsNik6MSkqKHMubWF0Y2goYSk/TWF0aC5wb3coMTAsOSk6MSkqKHMubWF0Y2goZik/TWF0aC5wb3coMTAsMTIpOjEpKih0LmluZGV4T2YoXCIlXCIpPi0xPy4wMToxKSpOdW1iZXIoKHQuaW5kZXhPZihcIihcIik+LTE/XCItXCI6XCJcIikrdC5yZXBsYWNlKC9bXjAtOVxcLictXSsvZyxcIlwiKSk7ZS5fbj1jP01hdGguY2VpbChlLl9uKTplLl9ufXJldHVybiBlLl9ufWZ1bmN0aW9uIGwoZSx0KXt2YXIgaT10LmluZGV4T2YoXCIkXCIpPD0xPyEwOiExLHM9XCJcIjtpZih0LmluZGV4T2YoXCIgJFwiKT4tMSl7cz1cIiBcIjt0PXQucmVwbGFjZShcIiAkXCIsXCJcIil9ZWxzZSBpZih0LmluZGV4T2YoXCIkIFwiKT4tMSl7cz1cIiBcIjt0PXQucmVwbGFjZShcIiQgXCIsXCJcIil9ZWxzZSB0PXQucmVwbGFjZShcIiRcIixcIlwiKTt2YXIgbz1hKGUsdCk7aWYoaSlpZihvLmluZGV4T2YoXCIoXCIpPi0xfHxvLmluZGV4T2YoXCItXCIpPi0xKXtvPW8uc3BsaXQoXCJcIik7by5zcGxpY2UoMSwwLG5bcl0uY3VycmVuY3kuc3ltYm9sK3MpO289by5qb2luKFwiXCIpfWVsc2Ugbz1uW3JdLmN1cnJlbmN5LnN5bWJvbCtzK287ZWxzZSBpZihvLmluZGV4T2YoXCIpXCIpPi0xKXtvPW8uc3BsaXQoXCJcIik7by5zcGxpY2UoLTEsMCxzK25bcl0uY3VycmVuY3kuc3ltYm9sKTtvPW8uam9pbihcIlwiKX1lbHNlIG89bytzK25bcl0uY3VycmVuY3kuc3ltYm9sO3JldHVybiBvfWZ1bmN0aW9uIGMoZSx0KXt2YXIgbj1cIlwiO2lmKHQuaW5kZXhPZihcIiAlXCIpPi0xKXtuPVwiIFwiO3Q9dC5yZXBsYWNlKFwiICVcIixcIlwiKX1lbHNlIHQ9dC5yZXBsYWNlKFwiJVwiLFwiXCIpO2UuX249ZS5fbioxMDA7dmFyIHI9YShlLHQpO2lmKHIuaW5kZXhPZihcIilcIik+LTEpe3I9ci5zcGxpdChcIlwiKTtyLnNwbGljZSgtMSwwLG4rXCIlXCIpO3I9ci5qb2luKFwiXCIpfWVsc2Ugcj1yK24rXCIlXCI7cmV0dXJuIHJ9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPU1hdGguZmxvb3IoZS5fbi82MC82MCkscj1NYXRoLmZsb29yKChlLl9uLW4qNjAqNjApLzYwKSxpPU1hdGgucm91bmQoZS5fbi1uKjYwKjYwLXIqNjApO3JldHVybiBuK1wiOlwiKyhyPDEwP1wiMFwiK3I6cikrXCI6XCIrKGk8MTA/XCIwXCIraTppKX1mdW5jdGlvbiBwKGUpe3ZhciB0PWUuc3BsaXQoXCI6XCIpLG49MDtpZih0Lmxlbmd0aD09PTMpe24rPU51bWJlcih0WzBdKSo2MCo2MDtuKz1OdW1iZXIodFsxXSkqNjA7bis9TnVtYmVyKHRbMl0pfWVsc2UgaWYodC5sZW5naHQ9PT0yKXtuKz1OdW1iZXIodFswXSkqNjA7bis9TnVtYmVyKHRbMV0pfXJldHVybiBOdW1iZXIobil9ZnVuY3Rpb24gZChlLHQpe3ZhciBzPSExLG89ITEsYT1cIlwiLGY9XCJcIixsPVwiXCIsYz1NYXRoLmFicyhlLl9uKTtpZihlLl9uPT09MCYmaSE9PW51bGwpcmV0dXJuIGk7aWYodC5pbmRleE9mKFwiKFwiKT4tMSl7cz0hMDt0PXQuc2xpY2UoMSwtMSl9aWYodC5pbmRleE9mKFwiYVwiKT4tMSl7aWYodC5pbmRleE9mKFwiIGFcIik+LTEpe2E9XCIgXCI7dD10LnJlcGxhY2UoXCIgYVwiLFwiXCIpfWVsc2UgdD10LnJlcGxhY2UoXCJhXCIsXCJcIik7aWYoYz49TWF0aC5wb3coMTAsMTIpKXthKz1uW3JdLmFiYnJldmlhdGlvbnMudGlsbGlvbjtlLl9uPWUuX24vTWF0aC5wb3coMTAsMTIpfWVsc2UgaWYoYzxNYXRoLnBvdygxMCwxMikmJmM+PU1hdGgucG93KDEwLDkpKXthKz1uW3JdLmFiYnJldmlhdGlvbnMuYmlsbGlvbjtlLl9uPWUuX24vTWF0aC5wb3coMTAsOSl9ZWxzZSBpZihjPE1hdGgucG93KDEwLDkpJiZjPj1NYXRoLnBvdygxMCw2KSl7YSs9bltyXS5hYmJyZXZpYXRpb25zLm1pbGxpb247ZS5fbj1lLl9uL01hdGgucG93KDEwLDYpfWVsc2UgaWYoYzxNYXRoLnBvdygxMCw2KSYmYz49TWF0aC5wb3coMTAsMykpe2ErPW5bcl0uYWJicmV2aWF0aW9ucy50aG91c2FuZDtlLl9uPWUuX24vTWF0aC5wb3coMTAsMyl9fWlmKHQuaW5kZXhPZihcImJcIik+LTEpe2lmKHQuaW5kZXhPZihcIiBiXCIpPi0xKXtmPVwiIFwiO3Q9dC5yZXBsYWNlKFwiIGJcIixcIlwiKX1lbHNlIHQ9dC5yZXBsYWNlKFwiYlwiLFwiXCIpO3ZhciBoPVtcIkJcIixcIktCXCIsXCJNQlwiLFwiR0JcIixcIlRCXCIsXCJQQlwiLFwiRUJcIixcIlpCXCIsXCJZQlwiXSxwLGQ7Zm9yKHZhciB2PTA7djw9aC5sZW5ndGg7disrKXtwPU1hdGgucG93KDEwMjQsdik7ZD1NYXRoLnBvdygxMDI0LHYrMSk7aWYoZS5fbj49cCYmZS5fbjxkKXtmKz1oW3ZdO3A+MCYmKGUuX249ZS5fbi9wKTticmVha319fWlmKHQuaW5kZXhPZihcIm9cIik+LTEpe2lmKHQuaW5kZXhPZihcIiBvXCIpPi0xKXtsPVwiIFwiO3Q9dC5yZXBsYWNlKFwiIG9cIixcIlwiKX1lbHNlIHQ9dC5yZXBsYWNlKFwib1wiLFwiXCIpO2wrPW5bcl0ub3JkaW5hbChlLl9uKX1pZih0LmluZGV4T2YoXCJbLl1cIik+LTEpe289ITA7dD10LnJlcGxhY2UoXCJbLl1cIixcIi5cIil9dmFyIG09ZS5fbi50b1N0cmluZygpLnNwbGl0KFwiLlwiKVswXSxnPXQuc3BsaXQoXCIuXCIpWzFdLHk9dC5pbmRleE9mKFwiLFwiKSxiPVwiXCIsdz0hMTtpZihnKXtpZihnLmluZGV4T2YoXCJbXCIpPi0xKXtnPWcucmVwbGFjZShcIl1cIixcIlwiKTtnPWcuc3BsaXQoXCJbXCIpO2I9dShlLl9uLGdbMF0ubGVuZ3RoK2dbMV0ubGVuZ3RoLGdbMV0ubGVuZ3RoKX1lbHNlIGI9dShlLl9uLGcubGVuZ3RoKTttPWIuc3BsaXQoXCIuXCIpWzBdO2Iuc3BsaXQoXCIuXCIpWzFdLmxlbmd0aD9iPW5bcl0uZGVsaW1pdGVycy5kZWNpbWFsK2Iuc3BsaXQoXCIuXCIpWzFdOmI9XCJcIjtvJiZOdW1iZXIoYik9PT0wJiYoYj1cIlwiKX1lbHNlIG09dShlLl9uLG51bGwpO2lmKG0uaW5kZXhPZihcIi1cIik+LTEpe209bS5zbGljZSgxKTt3PSEwfXk+LTEmJihtPW0udG9TdHJpbmcoKS5yZXBsYWNlKC8oXFxkKSg/PShcXGR7M30pKyg/IVxcZCkpL2csXCIkMVwiK25bcl0uZGVsaW1pdGVycy50aG91c2FuZHMpKTt0LmluZGV4T2YoXCIuXCIpPT09MCYmKG09XCJcIik7cmV0dXJuKHMmJnc/XCIoXCI6XCJcIikrKCFzJiZ3P1wiLVwiOlwiXCIpK20rYisobD9sOlwiXCIpKyhhP2E6XCJcIikrKGY/ZjpcIlwiKSsocyYmdz9cIilcIjpcIlwiKX1mdW5jdGlvbiB2KGUsdCl7bltlXT10fXZhciBlLHQ9XCIxLjQuNVwiLG49e30scj1cImVuXCIsaT1udWxsLHM9dHlwZW9mIG1vZHVsZSE9XCJ1bmRlZmluZWRcIiYmbW9kdWxlLmV4cG9ydHM7ZT1mdW5jdGlvbih0KXtlLmlzTnVtZXJhbCh0KT90PXQudmFsdWUoKTpOdW1iZXIodCl8fCh0PTApO3JldHVybiBuZXcgbyhOdW1iZXIodCkpfTtlLnZlcnNpb249dDtlLmlzTnVtZXJhbD1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIG99O2UubGFuZ3VhZ2U9ZnVuY3Rpb24odCxpKXtpZighdClyZXR1cm4gcjt0JiYhaSYmKHI9dCk7KGl8fCFuW3RdKSYmdih0LGkpO3JldHVybiBlfTtlLmxhbmd1YWdlKFwiZW5cIix7ZGVsaW1pdGVyczp7dGhvdXNhbmRzOlwiLFwiLGRlY2ltYWw6XCIuXCJ9LGFiYnJldmlhdGlvbnM6e3Rob3VzYW5kOlwia1wiLG1pbGxpb246XCJtXCIsYmlsbGlvbjpcImJcIix0cmlsbGlvbjpcInRcIn0sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwO3JldHVybn5+KGUlMTAwLzEwKT09PTE/XCJ0aFwiOnQ9PT0xP1wic3RcIjp0PT09Mj9cIm5kXCI6dD09PTM/XCJyZFwiOlwidGhcIn0sY3VycmVuY3k6e3N5bWJvbDpcIiRcIn19KTtlLnplcm9Gb3JtYXQ9ZnVuY3Rpb24oZSl7dHlwZW9mIGU9PVwic3RyaW5nXCI/aT1lOmk9bnVsbH07ZS5mbj1vLnByb3RvdHlwZT17Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKX0sZm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiBhKHRoaXMsdD90OmUuZGVmYXVsdEZvcm1hdCl9LHVuZm9ybWF0OmZ1bmN0aW9uKHQpe3JldHVybiBmKHRoaXMsdD90OmUuZGVmYXVsdEZvcm1hdCl9LHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX259LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX249TnVtYmVyKGUpO3JldHVybiB0aGlzfSxhZGQ6ZnVuY3Rpb24oZSl7dGhpcy5fbj10aGlzLl9uK051bWJlcihlKTtyZXR1cm4gdGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24oZSl7dGhpcy5fbj10aGlzLl9uLU51bWJlcihlKTtyZXR1cm4gdGhpc30sbXVsdGlwbHk6ZnVuY3Rpb24oZSl7dGhpcy5fbj10aGlzLl9uKk51bWJlcihlKTtyZXR1cm4gdGhpc30sZGl2aWRlOmZ1bmN0aW9uKGUpe3RoaXMuX249dGhpcy5fbi9OdW1iZXIoZSk7cmV0dXJuIHRoaXN9LGRpZmZlcmVuY2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbi1OdW1iZXIoZSk7dDwwJiYodD0tdCk7cmV0dXJuIHR9fTtzJiYobW9kdWxlLmV4cG9ydHM9ZSk7dHlwZW9mIGVuZGVyPT1cInVuZGVmaW5lZFwiJiYodGhpcy5udW1lcmFsPWUpO3R5cGVvZiBkZWZpbmU9PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCYmZGVmaW5lKFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGV9KX0pLmNhbGwodGhpcyk7IiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuLy8gQnJvd3NlciBSZXF1ZXN0XG4vL1xuLy8gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbi8vIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbi8vIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuLy9cbi8vICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbi8vXG4vLyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4vLyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4vLyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbi8vIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbi8vIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuXG4vLyBVTUQgSEVBREVSIFNUQVJUIFxuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXG4gICAgICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgICAgIC8vIG9ubHkgQ29tbW9uSlMtbGlrZSBlbnZpcm9tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgICAgIC8vIGxpa2UgTm9kZS5cbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICAgICAgcm9vdC5yZXR1cm5FeHBvcnRzID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbi8vIFVNRCBIRUFERVIgRU5EXG5cbnZhciBYSFIgPSBYTUxIdHRwUmVxdWVzdFxuaWYgKCFYSFIpIHRocm93IG5ldyBFcnJvcignbWlzc2luZyBYTUxIdHRwUmVxdWVzdCcpXG5yZXF1ZXN0LmxvZyA9IHtcbiAgJ3RyYWNlJzogbm9vcCwgJ2RlYnVnJzogbm9vcCwgJ2luZm8nOiBub29wLCAnd2Fybic6IG5vb3AsICdlcnJvcic6IG5vb3Bcbn1cblxudmFyIERFRkFVTFRfVElNRU9VVCA9IDMgKiA2MCAqIDEwMDAgLy8gMyBtaW51dGVzXG5cbi8vXG4vLyByZXF1ZXN0XG4vL1xuXG5mdW5jdGlvbiByZXF1ZXN0KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIC8vIFRoZSBlbnRyeS1wb2ludCB0byB0aGUgQVBJOiBwcmVwIHRoZSBvcHRpb25zIG9iamVjdCBhbmQgcGFzcyB0aGUgcmVhbCB3b3JrIHRvIHJ1bl94aHIuXG4gIGlmKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBjYWxsYmFjayBnaXZlbjogJyArIGNhbGxiYWNrKVxuXG4gIGlmKCFvcHRpb25zKVxuICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9ucyBnaXZlbicpXG5cbiAgdmFyIG9wdGlvbnNfb25SZXNwb25zZSA9IG9wdGlvbnMub25SZXNwb25zZTsgLy8gU2F2ZSB0aGlzIGZvciBsYXRlci5cblxuICBpZih0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpXG4gICAgb3B0aW9ucyA9IHsndXJpJzpvcHRpb25zfTtcbiAgZWxzZVxuICAgIG9wdGlvbnMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMpKTsgLy8gVXNlIGEgZHVwbGljYXRlIGZvciBtdXRhdGluZy5cblxuICBvcHRpb25zLm9uUmVzcG9uc2UgPSBvcHRpb25zX29uUmVzcG9uc2UgLy8gQW5kIHB1dCBpdCBiYWNrLlxuXG4gIGlmIChvcHRpb25zLnZlcmJvc2UpIHJlcXVlc3QubG9nID0gZ2V0TG9nZ2VyKCk7XG5cbiAgaWYob3B0aW9ucy51cmwpIHtcbiAgICBvcHRpb25zLnVyaSA9IG9wdGlvbnMudXJsO1xuICAgIGRlbGV0ZSBvcHRpb25zLnVybDtcbiAgfVxuXG4gIGlmKCFvcHRpb25zLnVyaSAmJiBvcHRpb25zLnVyaSAhPT0gXCJcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLnVyaSBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50XCIpO1xuXG4gIGlmKHR5cGVvZiBvcHRpb25zLnVyaSAhPSBcInN0cmluZ1wiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIm9wdGlvbnMudXJpIG11c3QgYmUgYSBzdHJpbmdcIik7XG5cbiAgdmFyIHVuc3VwcG9ydGVkX29wdGlvbnMgPSBbJ3Byb3h5JywgJ19yZWRpcmVjdHNGb2xsb3dlZCcsICdtYXhSZWRpcmVjdHMnLCAnZm9sbG93UmVkaXJlY3QnXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHVuc3VwcG9ydGVkX29wdGlvbnMubGVuZ3RoOyBpKyspXG4gICAgaWYob3B0aW9uc1sgdW5zdXBwb3J0ZWRfb3B0aW9uc1tpXSBdKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwib3B0aW9ucy5cIiArIHVuc3VwcG9ydGVkX29wdGlvbnNbaV0gKyBcIiBpcyBub3Qgc3VwcG9ydGVkXCIpXG5cbiAgb3B0aW9ucy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gIG9wdGlvbnMubWV0aG9kID0gb3B0aW9ucy5tZXRob2QgfHwgJ0dFVCc7XG4gIG9wdGlvbnMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcbiAgb3B0aW9ucy5ib2R5ICAgID0gb3B0aW9ucy5ib2R5IHx8IG51bGxcbiAgb3B0aW9ucy50aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0IHx8IHJlcXVlc3QuREVGQVVMVF9USU1FT1VUXG5cbiAgaWYob3B0aW9ucy5oZWFkZXJzLmhvc3QpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiT3B0aW9ucy5oZWFkZXJzLmhvc3QgaXMgbm90IHN1cHBvcnRlZFwiKTtcblxuICBpZihvcHRpb25zLmpzb24pIHtcbiAgICBvcHRpb25zLmhlYWRlcnMuYWNjZXB0ID0gb3B0aW9ucy5oZWFkZXJzLmFjY2VwdCB8fCAnYXBwbGljYXRpb24vanNvbidcbiAgICBpZihvcHRpb25zLm1ldGhvZCAhPT0gJ0dFVCcpXG4gICAgICBvcHRpb25zLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nXG5cbiAgICBpZih0eXBlb2Ygb3B0aW9ucy5qc29uICE9PSAnYm9vbGVhbicpXG4gICAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmpzb24pXG4gICAgZWxzZSBpZih0eXBlb2Ygb3B0aW9ucy5ib2R5ICE9PSAnc3RyaW5nJylcbiAgICAgIG9wdGlvbnMuYm9keSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSlcbiAgfVxuICBcbiAgLy9CRUdJTiBRUyBIYWNrXG4gIHZhciBzZXJpYWxpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgc3RyID0gW107XG4gICAgZm9yKHZhciBwIGluIG9iailcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgc3RyLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHApICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQob2JqW3BdKSk7XG4gICAgICB9XG4gICAgcmV0dXJuIHN0ci5qb2luKFwiJlwiKTtcbiAgfVxuICBcbiAgaWYob3B0aW9ucy5xcyl7XG4gICAgdmFyIHFzID0gKHR5cGVvZiBvcHRpb25zLnFzID09ICdzdHJpbmcnKT8gb3B0aW9ucy5xcyA6IHNlcmlhbGl6ZShvcHRpb25zLnFzKTtcbiAgICBpZihvcHRpb25zLnVyaS5pbmRleE9mKCc/JykgIT09IC0xKXsgLy9ubyBnZXQgcGFyYW1zXG4gICAgICAgIG9wdGlvbnMudXJpID0gb3B0aW9ucy51cmkrJyYnK3FzO1xuICAgIH1lbHNleyAvL2V4aXN0aW5nIGdldCBwYXJhbXNcbiAgICAgICAgb3B0aW9ucy51cmkgPSBvcHRpb25zLnVyaSsnPycrcXM7XG4gICAgfVxuICB9XG4gIC8vRU5EIFFTIEhhY2tcbiAgXG4gIC8vQkVHSU4gRk9STSBIYWNrXG4gIHZhciBtdWx0aXBhcnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICAvL3RvZG86IHN1cHBvcnQgZmlsZSB0eXBlICh1c2VmdWw/KVxuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICByZXN1bHQuYm91bmRyeSA9ICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJytNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMDAwMDAwMCk7XG4gICAgdmFyIGxpbmVzID0gW107XG4gICAgZm9yKHZhciBwIGluIG9iail7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXG4gICAgICAgICAgICAgICAgJy0tJytyZXN1bHQuYm91bmRyeStcIlxcblwiK1xuICAgICAgICAgICAgICAgICdDb250ZW50LURpc3Bvc2l0aW9uOiBmb3JtLWRhdGE7IG5hbWU9XCInK3ArJ1wiJytcIlxcblwiK1xuICAgICAgICAgICAgICAgIFwiXFxuXCIrXG4gICAgICAgICAgICAgICAgb2JqW3BdK1wiXFxuXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGluZXMucHVzaCggJy0tJytyZXN1bHQuYm91bmRyeSsnLS0nICk7XG4gICAgcmVzdWx0LmJvZHkgPSBsaW5lcy5qb2luKCcnKTtcbiAgICByZXN1bHQubGVuZ3RoID0gcmVzdWx0LmJvZHkubGVuZ3RoO1xuICAgIHJlc3VsdC50eXBlID0gJ211bHRpcGFydC9mb3JtLWRhdGE7IGJvdW5kYXJ5PScrcmVzdWx0LmJvdW5kcnk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBcbiAgaWYob3B0aW9ucy5mb3JtKXtcbiAgICBpZih0eXBlb2Ygb3B0aW9ucy5mb3JtID09ICdzdHJpbmcnKSB0aHJvdygnZm9ybSBuYW1lIHVuc3VwcG9ydGVkJyk7XG4gICAgaWYob3B0aW9ucy5tZXRob2QgPT09ICdQT1NUJyl7XG4gICAgICAgIHZhciBlbmNvZGluZyA9IChvcHRpb25zLmVuY29kaW5nIHx8ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBvcHRpb25zLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gZW5jb2Rpbmc7XG4gICAgICAgIHN3aXRjaChlbmNvZGluZyl7XG4gICAgICAgICAgICBjYXNlICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOlxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYm9keSA9IHNlcmlhbGl6ZShvcHRpb25zLmZvcm0pLnJlcGxhY2UoLyUyMC9nLCBcIitcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBhcnQvZm9ybS1kYXRhJzpcbiAgICAgICAgICAgICAgICB2YXIgbXVsdGkgPSBtdWx0aXBhcnQob3B0aW9ucy5mb3JtKTtcbiAgICAgICAgICAgICAgICAvL29wdGlvbnMuaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9IG11bHRpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBtdWx0aS5ib2R5O1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBtdWx0aS50eXBlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdCA6IHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgZW5jb2Rpbmc6JytlbmNvZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy9FTkQgRk9STSBIYWNrXG5cbiAgLy8gSWYgb25SZXNwb25zZSBpcyBib29sZWFuIHRydWUsIGNhbGwgYmFjayBpbW1lZGlhdGVseSB3aGVuIHRoZSByZXNwb25zZSBpcyBrbm93bixcbiAgLy8gbm90IHdoZW4gdGhlIGZ1bGwgcmVxdWVzdCBpcyBjb21wbGV0ZS5cbiAgb3B0aW9ucy5vblJlc3BvbnNlID0gb3B0aW9ucy5vblJlc3BvbnNlIHx8IG5vb3BcbiAgaWYob3B0aW9ucy5vblJlc3BvbnNlID09PSB0cnVlKSB7XG4gICAgb3B0aW9ucy5vblJlc3BvbnNlID0gY2FsbGJhY2tcbiAgICBvcHRpb25zLmNhbGxiYWNrID0gbm9vcFxuICB9XG5cbiAgLy8gWFhYIEJyb3dzZXJzIGRvIG5vdCBsaWtlIHRoaXMuXG4gIC8vaWYob3B0aW9ucy5ib2R5KVxuICAvLyAgb3B0aW9ucy5oZWFkZXJzWydjb250ZW50LWxlbmd0aCddID0gb3B0aW9ucy5ib2R5Lmxlbmd0aDtcblxuICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gIGlmKCFvcHRpb25zLmhlYWRlcnMuYXV0aG9yaXphdGlvbiAmJiBvcHRpb25zLmF1dGgpXG4gICAgb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGI2NF9lbmMob3B0aW9ucy5hdXRoLnVzZXJuYW1lICsgJzonICsgb3B0aW9ucy5hdXRoLnBhc3N3b3JkKTtcblxuICByZXR1cm4gcnVuX3hocihvcHRpb25zKVxufVxuXG52YXIgcmVxX3NlcSA9IDBcbmZ1bmN0aW9uIHJ1bl94aHIob3B0aW9ucykge1xuICB2YXIgeGhyID0gbmV3IFhIUlxuICAgICwgdGltZWRfb3V0ID0gZmFsc2VcbiAgICAsIGlzX2NvcnMgPSBpc19jcm9zc0RvbWFpbihvcHRpb25zLnVyaSlcbiAgICAsIHN1cHBvcnRzX2NvcnMgPSAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKVxuXG4gIHJlcV9zZXEgKz0gMVxuICB4aHIuc2VxX2lkID0gcmVxX3NlcVxuICB4aHIuaWQgPSByZXFfc2VxICsgJzogJyArIG9wdGlvbnMubWV0aG9kICsgJyAnICsgb3B0aW9ucy51cmlcbiAgeGhyLl9pZCA9IHhoci5pZCAvLyBJIGtub3cgSSB3aWxsIHR5cGUgXCJfaWRcIiBmcm9tIGhhYml0IGFsbCB0aGUgdGltZS5cblxuICBpZihpc19jb3JzICYmICFzdXBwb3J0c19jb3JzKSB7XG4gICAgdmFyIGNvcnNfZXJyID0gbmV3IEVycm9yKCdCcm93c2VyIGRvZXMgbm90IHN1cHBvcnQgY3Jvc3Mtb3JpZ2luIHJlcXVlc3Q6ICcgKyBvcHRpb25zLnVyaSlcbiAgICBjb3JzX2Vyci5jb3JzID0gJ3Vuc3VwcG9ydGVkJ1xuICAgIHJldHVybiBvcHRpb25zLmNhbGxiYWNrKGNvcnNfZXJyLCB4aHIpXG4gIH1cblxuICB4aHIudGltZW91dFRpbWVyID0gc2V0VGltZW91dCh0b29fbGF0ZSwgb3B0aW9ucy50aW1lb3V0KVxuICBmdW5jdGlvbiB0b29fbGF0ZSgpIHtcbiAgICB0aW1lZF9vdXQgPSB0cnVlXG4gICAgdmFyIGVyID0gbmV3IEVycm9yKCdFVElNRURPVVQnKVxuICAgIGVyLmNvZGUgPSAnRVRJTUVET1VUJ1xuICAgIGVyLmR1cmF0aW9uID0gb3B0aW9ucy50aW1lb3V0XG5cbiAgICByZXF1ZXN0LmxvZy5lcnJvcignVGltZW91dCcsIHsgJ2lkJzp4aHIuX2lkLCAnbWlsbGlzZWNvbmRzJzpvcHRpb25zLnRpbWVvdXQgfSlcbiAgICByZXR1cm4gb3B0aW9ucy5jYWxsYmFjayhlciwgeGhyKVxuICB9XG5cbiAgLy8gU29tZSBzdGF0ZXMgY2FuIGJlIHNraXBwZWQgb3Zlciwgc28gcmVtZW1iZXIgd2hhdCBpcyBzdGlsbCBpbmNvbXBsZXRlLlxuICB2YXIgZGlkID0geydyZXNwb25zZSc6ZmFsc2UsICdsb2FkaW5nJzpmYWxzZSwgJ2VuZCc6ZmFsc2V9XG5cbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG9uX3N0YXRlX2NoYW5nZVxuICB4aHIub3BlbihvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmksIHRydWUpIC8vIGFzeW5jaHJvbm91c1xuICBpZihpc19jb3JzKVxuICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSAhISBvcHRpb25zLndpdGhDcmVkZW50aWFsc1xuICB4aHIuc2VuZChvcHRpb25zLmJvZHkpXG4gIHJldHVybiB4aHJcblxuICBmdW5jdGlvbiBvbl9zdGF0ZV9jaGFuZ2UoZXZlbnQpIHtcbiAgICBpZih0aW1lZF9vdXQpXG4gICAgICByZXR1cm4gcmVxdWVzdC5sb2cuZGVidWcoJ0lnbm9yaW5nIHRpbWVkIG91dCBzdGF0ZSBjaGFuZ2UnLCB7J3N0YXRlJzp4aHIucmVhZHlTdGF0ZSwgJ2lkJzp4aHIuaWR9KVxuXG4gICAgcmVxdWVzdC5sb2cuZGVidWcoJ1N0YXRlIGNoYW5nZScsIHsnc3RhdGUnOnhoci5yZWFkeVN0YXRlLCAnaWQnOnhoci5pZCwgJ3RpbWVkX291dCc6dGltZWRfb3V0fSlcblxuICAgIGlmKHhoci5yZWFkeVN0YXRlID09PSBYSFIuT1BFTkVEKSB7XG4gICAgICByZXF1ZXN0LmxvZy5kZWJ1ZygnUmVxdWVzdCBzdGFydGVkJywgeydpZCc6eGhyLmlkfSlcbiAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zLmhlYWRlcnMpXG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgb3B0aW9ucy5oZWFkZXJzW2tleV0pXG4gICAgfVxuXG4gICAgZWxzZSBpZih4aHIucmVhZHlTdGF0ZSA9PT0gWEhSLkhFQURFUlNfUkVDRUlWRUQpXG4gICAgICBvbl9yZXNwb25zZSgpXG5cbiAgICBlbHNlIGlmKHhoci5yZWFkeVN0YXRlID09PSBYSFIuTE9BRElORykge1xuICAgICAgb25fcmVzcG9uc2UoKVxuICAgICAgb25fbG9hZGluZygpXG4gICAgfVxuXG4gICAgZWxzZSBpZih4aHIucmVhZHlTdGF0ZSA9PT0gWEhSLkRPTkUpIHtcbiAgICAgIG9uX3Jlc3BvbnNlKClcbiAgICAgIG9uX2xvYWRpbmcoKVxuICAgICAgb25fZW5kKClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbl9yZXNwb25zZSgpIHtcbiAgICBpZihkaWQucmVzcG9uc2UpXG4gICAgICByZXR1cm5cblxuICAgIGRpZC5yZXNwb25zZSA9IHRydWVcbiAgICByZXF1ZXN0LmxvZy5kZWJ1ZygnR290IHJlc3BvbnNlJywgeydpZCc6eGhyLmlkLCAnc3RhdHVzJzp4aHIuc3RhdHVzfSlcbiAgICBjbGVhclRpbWVvdXQoeGhyLnRpbWVvdXRUaW1lcilcbiAgICB4aHIuc3RhdHVzQ29kZSA9IHhoci5zdGF0dXMgLy8gTm9kZSByZXF1ZXN0IGNvbXBhdGliaWxpdHlcblxuICAgIC8vIERldGVjdCBmYWlsZWQgQ09SUyByZXF1ZXN0cy5cbiAgICBpZihpc19jb3JzICYmIHhoci5zdGF0dXNDb2RlID09IDApIHtcbiAgICAgIHZhciBjb3JzX2VyciA9IG5ldyBFcnJvcignQ09SUyByZXF1ZXN0IHJlamVjdGVkOiAnICsgb3B0aW9ucy51cmkpXG4gICAgICBjb3JzX2Vyci5jb3JzID0gJ3JlamVjdGVkJ1xuXG4gICAgICAvLyBEbyBub3QgcHJvY2VzcyB0aGlzIHJlcXVlc3QgZnVydGhlci5cbiAgICAgIGRpZC5sb2FkaW5nID0gdHJ1ZVxuICAgICAgZGlkLmVuZCA9IHRydWVcblxuICAgICAgcmV0dXJuIG9wdGlvbnMuY2FsbGJhY2soY29yc19lcnIsIHhocilcbiAgICB9XG5cbiAgICBvcHRpb25zLm9uUmVzcG9uc2UobnVsbCwgeGhyKVxuICB9XG5cbiAgZnVuY3Rpb24gb25fbG9hZGluZygpIHtcbiAgICBpZihkaWQubG9hZGluZylcbiAgICAgIHJldHVyblxuXG4gICAgZGlkLmxvYWRpbmcgPSB0cnVlXG4gICAgcmVxdWVzdC5sb2cuZGVidWcoJ1Jlc3BvbnNlIGJvZHkgbG9hZGluZycsIHsnaWQnOnhoci5pZH0pXG4gICAgLy8gVE9ETzogTWF5YmUgc2ltdWxhdGUgXCJkYXRhXCIgZXZlbnRzIGJ5IHdhdGNoaW5nIHhoci5yZXNwb25zZVRleHRcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uX2VuZCgpIHtcbiAgICBpZihkaWQuZW5kKVxuICAgICAgcmV0dXJuXG5cbiAgICBkaWQuZW5kID0gdHJ1ZVxuICAgIHJlcXVlc3QubG9nLmRlYnVnKCdSZXF1ZXN0IGRvbmUnLCB7J2lkJzp4aHIuaWR9KVxuXG4gICAgeGhyLmJvZHkgPSB4aHIucmVzcG9uc2VUZXh0XG4gICAgaWYob3B0aW9ucy5qc29uKSB7XG4gICAgICB0cnkgICAgICAgIHsgeGhyLmJvZHkgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpIH1cbiAgICAgIGNhdGNoIChlcikgeyByZXR1cm4gb3B0aW9ucy5jYWxsYmFjayhlciwgeGhyKSAgICAgICAgfVxuICAgIH1cblxuICAgIG9wdGlvbnMuY2FsbGJhY2sobnVsbCwgeGhyLCB4aHIuYm9keSlcbiAgfVxuXG59IC8vIHJlcXVlc3RcblxucmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSBmYWxzZTtcbnJlcXVlc3QuREVGQVVMVF9USU1FT1VUID0gREVGQVVMVF9USU1FT1VUO1xuXG4vL1xuLy8gZGVmYXVsdHNcbi8vXG5cbnJlcXVlc3QuZGVmYXVsdHMgPSBmdW5jdGlvbihvcHRpb25zLCByZXF1ZXN0ZXIpIHtcbiAgdmFyIGRlZiA9IGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgICB2YXIgZCA9IGZ1bmN0aW9uIChwYXJhbXMsIGNhbGxiYWNrKSB7XG4gICAgICBpZih0eXBlb2YgcGFyYW1zID09PSAnc3RyaW5nJylcbiAgICAgICAgcGFyYW1zID0geyd1cmknOiBwYXJhbXN9O1xuICAgICAgZWxzZSB7XG4gICAgICAgIHBhcmFtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHBhcmFtc1tpXSA9PT0gdW5kZWZpbmVkKSBwYXJhbXNbaV0gPSBvcHRpb25zW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gbWV0aG9kKHBhcmFtcywgY2FsbGJhY2spXG4gICAgfVxuICAgIHJldHVybiBkXG4gIH1cbiAgdmFyIGRlID0gZGVmKHJlcXVlc3QpXG4gIGRlLmdldCA9IGRlZihyZXF1ZXN0LmdldClcbiAgZGUucG9zdCA9IGRlZihyZXF1ZXN0LnBvc3QpXG4gIGRlLnB1dCA9IGRlZihyZXF1ZXN0LnB1dClcbiAgZGUuaGVhZCA9IGRlZihyZXF1ZXN0LmhlYWQpXG4gIHJldHVybiBkZVxufVxuXG4vL1xuLy8gSFRUUCBtZXRob2Qgc2hvcnRjdXRzXG4vL1xuXG52YXIgc2hvcnRjdXRzID0gWyAnZ2V0JywgJ3B1dCcsICdwb3N0JywgJ2hlYWQnIF07XG5zaG9ydGN1dHMuZm9yRWFjaChmdW5jdGlvbihzaG9ydGN1dCkge1xuICB2YXIgbWV0aG9kID0gc2hvcnRjdXQudG9VcHBlckNhc2UoKTtcbiAgdmFyIGZ1bmMgICA9IHNob3J0Y3V0LnRvTG93ZXJDYXNlKCk7XG5cbiAgcmVxdWVzdFtmdW5jXSA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBpZih0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpXG4gICAgICBvcHRzID0geydtZXRob2QnOm1ldGhvZCwgJ3VyaSc6b3B0c307XG4gICAgZWxzZSB7XG4gICAgICBvcHRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcHRzKSk7XG4gICAgICBvcHRzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICB9XG5cbiAgICB2YXIgYXJncyA9IFtvcHRzXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGFyZ3VtZW50cywgWzFdKSk7XG4gICAgcmV0dXJuIHJlcXVlc3QuYXBwbHkodGhpcywgYXJncyk7XG4gIH1cbn0pXG5cbi8vXG4vLyBDb3VjaERCIHNob3J0Y3V0XG4vL1xuXG5yZXF1ZXN0LmNvdWNoID0gZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgaWYodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKVxuICAgIG9wdGlvbnMgPSB7J3VyaSc6b3B0aW9uc31cblxuICAvLyBKdXN0IHVzZSB0aGUgcmVxdWVzdCBBUEkgdG8gZG8gSlNPTi5cbiAgb3B0aW9ucy5qc29uID0gdHJ1ZVxuICBpZihvcHRpb25zLmJvZHkpXG4gICAgb3B0aW9ucy5qc29uID0gb3B0aW9ucy5ib2R5XG4gIGRlbGV0ZSBvcHRpb25zLmJvZHlcblxuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IG5vb3BcblxuICB2YXIgeGhyID0gcmVxdWVzdChvcHRpb25zLCBjb3VjaF9oYW5kbGVyKVxuICByZXR1cm4geGhyXG5cbiAgZnVuY3Rpb24gY291Y2hfaGFuZGxlcihlciwgcmVzcCwgYm9keSkge1xuICAgIGlmKGVyKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKGVyLCByZXNwLCBib2R5KVxuXG4gICAgaWYoKHJlc3Auc3RhdHVzQ29kZSA8IDIwMCB8fCByZXNwLnN0YXR1c0NvZGUgPiAyOTkpICYmIGJvZHkuZXJyb3IpIHtcbiAgICAgIC8vIFRoZSBib2R5IGlzIGEgQ291Y2ggSlNPTiBvYmplY3QgaW5kaWNhdGluZyB0aGUgZXJyb3IuXG4gICAgICBlciA9IG5ldyBFcnJvcignQ291Y2hEQiBlcnJvcjogJyArIChib2R5LmVycm9yLnJlYXNvbiB8fCBib2R5LmVycm9yLmVycm9yKSlcbiAgICAgIGZvciAodmFyIGtleSBpbiBib2R5KVxuICAgICAgICBlcltrZXldID0gYm9keVtrZXldXG4gICAgICByZXR1cm4gY2FsbGJhY2soZXIsIHJlc3AsIGJvZHkpO1xuICAgIH1cblxuICAgIHJldHVybiBjYWxsYmFjayhlciwgcmVzcCwgYm9keSk7XG4gIH1cbn1cblxuLy9cbi8vIFV0aWxpdHlcbi8vXG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5mdW5jdGlvbiBnZXRMb2dnZXIoKSB7XG4gIHZhciBsb2dnZXIgPSB7fVxuICAgICwgbGV2ZWxzID0gWyd0cmFjZScsICdkZWJ1ZycsICdpbmZvJywgJ3dhcm4nLCAnZXJyb3InXVxuICAgICwgbGV2ZWwsIGlcblxuICBmb3IoaSA9IDA7IGkgPCBsZXZlbHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXZlbCA9IGxldmVsc1tpXVxuXG4gICAgbG9nZ2VyW2xldmVsXSA9IG5vb3BcbiAgICBpZih0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZSAmJiBjb25zb2xlW2xldmVsXSlcbiAgICAgIGxvZ2dlcltsZXZlbF0gPSBmb3JtYXR0ZWQoY29uc29sZSwgbGV2ZWwpXG4gIH1cblxuICByZXR1cm4gbG9nZ2VyXG59XG5cbmZ1bmN0aW9uIGZvcm1hdHRlZChvYmosIG1ldGhvZCkge1xuICByZXR1cm4gZm9ybWF0dGVkX2xvZ2dlclxuXG4gIGZ1bmN0aW9uIGZvcm1hdHRlZF9sb2dnZXIoc3RyLCBjb250ZXh0KSB7XG4gICAgaWYodHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKVxuICAgICAgc3RyICs9ICcgJyArIEpTT04uc3RyaW5naWZ5KGNvbnRleHQpXG5cbiAgICByZXR1cm4gb2JqW21ldGhvZF0uY2FsbChvYmosIHN0cilcbiAgfVxufVxuXG4vLyBSZXR1cm4gd2hldGhlciBhIFVSTCBpcyBhIGNyb3NzLWRvbWFpbiByZXF1ZXN0LlxuZnVuY3Rpb24gaXNfY3Jvc3NEb21haW4odXJsKSB7XG4gIHZhciBydXJsID0gL14oW1xcd1xcK1xcLlxcLV0rOikoPzpcXC9cXC8oW15cXC8/IzpdKikoPzo6KFxcZCspKT8pPy9cblxuICAvLyBqUXVlcnkgIzgxMzgsIElFIG1heSB0aHJvdyBhbiBleGNlcHRpb24gd2hlbiBhY2Nlc3NpbmdcbiAgLy8gYSBmaWVsZCBmcm9tIHdpbmRvdy5sb2NhdGlvbiBpZiBkb2N1bWVudC5kb21haW4gaGFzIGJlZW4gc2V0XG4gIHZhciBhamF4TG9jYXRpb25cbiAgdHJ5IHsgYWpheExvY2F0aW9uID0gbG9jYXRpb24uaHJlZiB9XG4gIGNhdGNoIChlKSB7XG4gICAgLy8gVXNlIHRoZSBocmVmIGF0dHJpYnV0ZSBvZiBhbiBBIGVsZW1lbnQgc2luY2UgSUUgd2lsbCBtb2RpZnkgaXQgZ2l2ZW4gZG9jdW1lbnQubG9jYXRpb25cbiAgICBhamF4TG9jYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuICAgIGFqYXhMb2NhdGlvbi5ocmVmID0gXCJcIjtcbiAgICBhamF4TG9jYXRpb24gPSBhamF4TG9jYXRpb24uaHJlZjtcbiAgfVxuXG4gIHZhciBhamF4TG9jUGFydHMgPSBydXJsLmV4ZWMoYWpheExvY2F0aW9uLnRvTG93ZXJDYXNlKCkpIHx8IFtdXG4gICAgLCBwYXJ0cyA9IHJ1cmwuZXhlYyh1cmwudG9Mb3dlckNhc2UoKSApXG5cbiAgdmFyIHJlc3VsdCA9ICEhKFxuICAgIHBhcnRzICYmXG4gICAgKCAgcGFydHNbMV0gIT0gYWpheExvY1BhcnRzWzFdXG4gICAgfHwgcGFydHNbMl0gIT0gYWpheExvY1BhcnRzWzJdXG4gICAgfHwgKHBhcnRzWzNdIHx8IChwYXJ0c1sxXSA9PT0gXCJodHRwOlwiID8gODAgOiA0NDMpKSAhPSAoYWpheExvY1BhcnRzWzNdIHx8IChhamF4TG9jUGFydHNbMV0gPT09IFwiaHR0cDpcIiA/IDgwIDogNDQzKSlcbiAgICApXG4gIClcblxuICAvL2NvbnNvbGUuZGVidWcoJ2lzX2Nyb3NzRG9tYWluKCcrdXJsKycpIC0+ICcgKyByZXN1bHQpXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gTUlUIExpY2Vuc2UgZnJvbSBodHRwOi8vcGhwanMub3JnL2Z1bmN0aW9ucy9iYXNlNjRfZW5jb2RlOjM1OFxuZnVuY3Rpb24gYjY0X2VuYyAoZGF0YSkge1xuICAgIC8vIEVuY29kZXMgc3RyaW5nIHVzaW5nIE1JTUUgYmFzZTY0IGFsZ29yaXRobVxuICAgIHZhciBiNjQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG4gICAgdmFyIG8xLCBvMiwgbzMsIGgxLCBoMiwgaDMsIGg0LCBiaXRzLCBpID0gMCwgYWMgPSAwLCBlbmM9XCJcIiwgdG1wX2FyciA9IFtdO1xuXG4gICAgaWYgKCFkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8vIGFzc3VtZSB1dGY4IGRhdGFcbiAgICAvLyBkYXRhID0gdGhpcy51dGY4X2VuY29kZShkYXRhKycnKTtcblxuICAgIGRvIHsgLy8gcGFjayB0aHJlZSBvY3RldHMgaW50byBmb3VyIGhleGV0c1xuICAgICAgICBvMSA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBvMiA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBvMyA9IGRhdGEuY2hhckNvZGVBdChpKyspO1xuXG4gICAgICAgIGJpdHMgPSBvMTw8MTYgfCBvMjw8OCB8IG8zO1xuXG4gICAgICAgIGgxID0gYml0cz4+MTggJiAweDNmO1xuICAgICAgICBoMiA9IGJpdHM+PjEyICYgMHgzZjtcbiAgICAgICAgaDMgPSBiaXRzPj42ICYgMHgzZjtcbiAgICAgICAgaDQgPSBiaXRzICYgMHgzZjtcblxuICAgICAgICAvLyB1c2UgaGV4ZXRzIHRvIGluZGV4IGludG8gYjY0LCBhbmQgYXBwZW5kIHJlc3VsdCB0byBlbmNvZGVkIHN0cmluZ1xuICAgICAgICB0bXBfYXJyW2FjKytdID0gYjY0LmNoYXJBdChoMSkgKyBiNjQuY2hhckF0KGgyKSArIGI2NC5jaGFyQXQoaDMpICsgYjY0LmNoYXJBdChoNCk7XG4gICAgfSB3aGlsZSAoaSA8IGRhdGEubGVuZ3RoKTtcblxuICAgIGVuYyA9IHRtcF9hcnIuam9pbignJyk7XG5cbiAgICBzd2l0Y2ggKGRhdGEubGVuZ3RoICUgMykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBlbmMgPSBlbmMuc2xpY2UoMCwgLTIpICsgJz09JztcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGVuYyA9IGVuYy5zbGljZSgwLCAtMSkgKyAnPSc7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiBlbmM7XG59XG4gICAgcmV0dXJuIHJlcXVlc3Q7XG4vL1VNRCBGT09URVIgU1RBUlRcbn0pKTtcbi8vVU1EIEZPT1RFUiBFTkRcblxufSx7fV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHJlcXVlc3QgPSByZXF1aXJlKCdicm93c2VyLXJlcXVlc3QnKTtcblxudmFyIHBvcGlseSA9IHdpbmRvdy5wb3BpbHkgfHwge307XG5cbnZhciBfZXJyb3IgPSBmdW5jdGlvbihtc2csIGVycm9yKSB7XG4gIHJldHVybiB7bXNnOiBtc2csIGVycm9yOiBlcnJvcn07XG59O1xuICBcbnZhciBfcmVxdWVzdCA9IGZ1bmN0aW9uKG1ldGhvZCwgcGF0aCwgZGF0YSwgY2FsbGJhY2spIHtcbiAgdmFyIERFRkFVTFRfVVJMID0gJ2h0dHBzOi8vcG9waWx5LmNvbSc7XG4gIHZhciBERUZBVUxUX0JBU0VfUEFUSCA9ICcvYXBpJztcblxuICB2YXIgYXBpVXJsID0gcG9waWx5LmFwaS5hcGlVcmw7XG4gIGlmKCFwb3BpbHkuYXBpLmFwaVVybCkge1xuICAgIGFwaVVybCA9IERFRkFVTFRfVVJMO1xuICB9IFxuICBhcGlVcmwgPSBhcGlVcmwgKyBERUZBVUxUX0JBU0VfUEFUSDtcblxuICB2YXIgcGFyYW1zID0ge1xuICAgIG1ldGhvZDogbWV0aG9kLFxuICAgIGhlYWRlcnM6IHsgXG4gICAgICAnQXV0aG9yaXphdGlvbic6ICdUb2tlbiAnICsgcG9waWx5LmFwaS50b2tlbixcbiAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgfSxcbiAgICB1cmw6IGFwaVVybCArIHBhdGgvLyArICc/Zm9ybWF0PWFwaSdcbiAgfTtcbiAgICAgIFxuICBpZigncXMnIGluIGRhdGEpIHtcbiAgICBwYXJhbXNbJ3FzJ10gPSBkYXRhWydxcyddO1xuICAgIHBhcmFtc1snanNvbiddID0gdHJ1ZTtcbiAgfVxuICBpZignanNvbicgaW4gZGF0YSkge1xuICAgIHBhcmFtc1snYm9keSddID0gZGF0YVsnanNvbiddO1xuICAgIHBhcmFtc1snanNvbiddID0gdHJ1ZTtcbiAgfVxuICBpZignZm9ybScgaW4gZGF0YSkge1xuICAgIHBhcmFtc1snZm9ybURhdGEnXSA9IGRhdGFbJ2Zvcm0nXTtcbiAgfVxuICBcbiAgcmVxdWVzdChwYXJhbXMsIGZ1bmN0aW9uKGVyciwgaHR0cFJlc3BvbnNlLCBib2R5KSB7XG4gICAgaWYoZXJyKVxuICAgICAgcmV0dXJuIGNhbGxiYWNrKF9lcnJvcignUmVxdWVzdCBlcnJvcicsIGVycikpO1xuICAgICAgXG4gICAgaWYoaHR0cFJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMSlcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0ludmFsaWQgQVBJIHRva2VuJykpO1xuXG4gICAgaWYoaHR0cFJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDQwMClcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0JhZCByZXF1ZXN0JywgYm9keSkpO1xuICAgICAgXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZXNwb25zZSA9IGJvZHk7XG4gICAgICBpZih0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjayhfZXJyb3IoJ0Vycm9yOiAnK2UsIGUpIClcbiAgICB9XG5cbiAgICBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG5cbiAgfSk7XG59O1xuXG52YXIgcGFja0NhbGN1bGF0aW9ucyA9IGZ1bmN0aW9uKGNhbGN1bGF0aW9ucykge1xuICB2YXIgcGFja2VkU3RyID0gJyc7XG4gIGNhbGN1bGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGYsIGkpIHtcbiAgICB2YXIgZmlsdGVyU3RyID0gJyc7XG4gICAgaWYoaSA+IDApXG4gICAgICBmaWx0ZXJTdHIgKz0gJ19fJztcblxuICAgIGZpbHRlclN0ciArPSBmWydjb2x1bW4nXSArICchJyArIGZbJ2NhbGN1bGF0aW9uJ107XG4gICAgcGFja2VkU3RyICs9IGZpbHRlclN0clxuICB9KTtcbiAgcmV0dXJuIHBhY2tlZFN0cjtcbn07ICAgICAgIFxuICAgICAgICBcbnBvcGlseS5hcGkgPSB7XG4gIGFkZFNvdXJjZTogZnVuY3Rpb24oc291cmNlRGF0YSwgY2IpIHtcbiAgICBcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIFsnY29sdW1ucycsICd0aXRsZScsICdkZXNjcmlwdGlvbiddLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZihrZXkgaW4gc291cmNlRGF0YSlcbiAgICAgICAgZGF0YVtrZXldID0gc291cmNlRGF0YVtrZXldO1xuICAgIH0pXG5cbiAgICBpZigndXJsJyBpbiBzb3VyY2VEYXRhKSB7XG4gICAgICBkYXRhWyd1cmwnXSA9IHNvdXJjZURhdGFbJ3VybCddXG4gICAgICBfcmVxdWVzdCgnUE9TVCcsICcvc291cmNlcy8nLCB7anNvbjogZGF0YX0sIGNiKTtcbiAgICB9XG5cbiAgICBlbHNlIGlmKCdjb25uZWN0aW9uX3N0cmluZycgaW4gc291cmNlRGF0YSApIHtcbiAgICAgIGRhdGFbJ2Nvbm5lY3Rpb25fc3RyaW5nJ10gPSBzb3VyY2VEYXRhWydjb25uZWN0aW9uX3N0cmluZyddXG4gICAgICBkYXRhWydxdWVyeSddID0gc291cmNlRGF0YVsncXVlcnknXVxuICAgICAgX3JlcXVlc3QoJ1BPU1QnLCAnL3NvdXJjZXMvJywge2pzb246IGRhdGF9LCBjYik7XG4gICAgfVxuICAgIFxuICAgIGVsc2VcbiAgICAgIGNiKCd1cmwgb3IgY29ubmVjdGlvbl9zdHJpbmcgaXMgcmVxdWlyZWQnKTtcbiAgfSxcblxuXG4gIGdldFNvdXJjZXM6IGZ1bmN0aW9uKGNiKSB7XG4gICAgX3JlcXVlc3QoJ0dFVCcsICcvc291cmNlcy8nLCB7fSwgY2IpO1xuICB9LFxuXG5cbiAgZ2V0U291cmNlOiBmdW5jdGlvbihzb3VyY2VJZCwgY2IpIHtcbiAgICBfcmVxdWVzdCgnR0VUJywgJy9zb3VyY2VzLycrc291cmNlSWQrJy8nLCB7fSwgY2IpO1xuICB9LFxuXG5cbiAgZ2V0SW5zaWdodHM6IGZ1bmN0aW9uKHNvdXJjZUlkLCBwYXJhbXMsIGNiKSB7XG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xuICAgIHZhciBwYXlsb2FkID0geydzb3VyY2UnOiBzb3VyY2VJZH07XG5cbiAgICBbJ2NvbHVtbnMnLCAnaW5zaWdodF90eXBlcycsICdpbnNpZ2h0X2FjdGlvbnMnXS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICAgaWYoa2V5IGluIHBhcmFtcylcbiAgICAgICAgcGF5bG9hZFtrZXldID0gcGFyYW1zW2tleV0uam9pbignLCcpXG4gICAgfSk7XG5cbiAgICBpZignc2luZ2xlJyBpbiBwYXJhbXMpIHtcbiAgICAgIHBheWxvYWRbJ3NpbmdsZSddID0gcGFyYW1zWydzaW5nbGUnXTtcbiAgICB9XG5cbiAgICBpZignY2FsY3VsYXRpb25zJyBpbiBwYXJhbXMpIHtcbiAgICAgIHBheWxvYWRbJ2NhbGN1bGF0aW9ucyddID0gcGFja0NhbGN1bGF0aW9ucyhwYXJhbXNbJ2NhbGN1bGF0aW9ucyddKTtcbiAgICB9XG5cbiAgICBfcmVxdWVzdCgnR0VUJywgJy9pbnNpZ2h0cy8nLCB7cXM6IHBheWxvYWR9LCBjYik7XG4gIH0sXG5cbiAgZ2V0SW5zaWdodDogZnVuY3Rpb24oaW5zaWdodElkLCBwYXJhbXMsIGNiKSB7XG4gICAgdmFyIHBheWxvYWQgPSB7fTsgICAgXG4gICAgX3JlcXVlc3QoJ0dFVCcsICcvaW5zaWdodHMvJyArIGluc2lnaHRJZCArICcvJywge3FzOiBwYXlsb2FkfSwgY2IpO1xuICB9LFxuXG4gIHNldFRva2VuOiBmdW5jdGlvbih0b2tlbikge1xuICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgfSxcblxuICBzZXRVUkw6IGZ1bmN0aW9uKGFwaVVybCkge1xuICAgIHRoaXMuYXBpVXJsID0gYXBpVXJsO1xuICB9XG59XG5cbndpbmRvdy5wb3BpbHkgPSBwb3BpbHk7XG5tb2R1bGUuZXhwb3J0cyA9IHBvcGlseTtcblxufSx7XCJicm93c2VyLXJlcXVlc3RcIjoxfV19LHt9LFsyXSlcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSnpiM1Z5WTJWeklqcGJJaTkyWVhJdmQzZDNMM0J2Y0dsc2VTOXdiM0JwYkhrdGFuTXZibTlrWlY5dGIyUjFiR1Z6TDJkMWJIQXRZbkp2ZDNObGNtbG1lUzl1YjJSbFgyMXZaSFZzWlhNdlluSnZkM05sY2kxd1lXTnJMMTl3Y21Wc2RXUmxMbXB6SWl3aUwzWmhjaTkzZDNjdmNHOXdhV3g1TDNCdmNHbHNlUzFxY3k5dWIyUmxYMjF2WkhWc1pYTXZZbkp2ZDNObGNpMXlaWEYxWlhOMEwybHVaR1Y0TG1weklpd2lMM1poY2k5M2QzY3ZjRzl3YVd4NUwzQnZjR2xzZVMxcWN5OXpjbU12Wm1GclpWODFOR1V4Tm1Wa05TNXFjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVR0QlEwRkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVRzN1FVTTVaVUU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJPMEZCUTBFN1FVRkRRVHRCUVVOQk8wRkJRMEU3UVVGRFFUdEJRVU5CTzBGQlEwRTdRVUZEUVR0QlFVTkJJaXdpWm1sc1pTSTZJbWRsYm1WeVlYUmxaQzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lJb1puVnVZM1JwYjI0Z1pTaDBMRzRzY2lsN1puVnVZM1JwYjI0Z2N5aHZMSFVwZTJsbUtDRnVXMjlkS1h0cFppZ2hkRnR2WFNsN2RtRnlJR0U5ZEhsd1pXOW1JSEpsY1hWcGNtVTlQVndpWm5WdVkzUnBiMjVjSWlZbWNtVnhkV2x5WlR0cFppZ2hkU1ltWVNseVpYUjFjbTRnWVNodkxDRXdLVHRwWmlocEtYSmxkSFZ5YmlCcEtHOHNJVEFwTzNSb2NtOTNJRzVsZHlCRmNuSnZjaWhjSWtOaGJtNXZkQ0JtYVc1a0lHMXZaSFZzWlNBblhDSXJieXRjSWlkY0lpbDlkbUZ5SUdZOWJsdHZYVDE3Wlhod2IzSjBjenA3ZlgwN2RGdHZYVnN3WFM1allXeHNLR1l1Wlhod2IzSjBjeXhtZFc1amRHbHZiaWhsS1h0MllYSWdiajEwVzI5ZFd6RmRXMlZkTzNKbGRIVnliaUJ6S0c0L2JqcGxLWDBzWml4bUxtVjRjRzl5ZEhNc1pTeDBMRzRzY2lsOWNtVjBkWEp1SUc1YmIxMHVaWGh3YjNKMGMzMTJZWElnYVQxMGVYQmxiMllnY21WeGRXbHlaVDA5WENKbWRXNWpkR2x2Ymx3aUppWnlaWEYxYVhKbE8yWnZjaWgyWVhJZ2J6MHdPMjg4Y2k1c1pXNW5kR2c3YnlzcktYTW9jbHR2WFNrN2NtVjBkWEp1SUhOOUtTSXNJaTh2SUVKeWIzZHpaWElnVW1WeGRXVnpkRnh1THk5Y2JpOHZJRXhwWTJWdWMyVmtJSFZ1WkdWeUlIUm9aU0JCY0dGamFHVWdUR2xqWlc1elpTd2dWbVZ5YzJsdmJpQXlMakFnS0hSb1pTQmNJa3hwWTJWdWMyVmNJaWs3WEc0dkx5QjViM1VnYldGNUlHNXZkQ0IxYzJVZ2RHaHBjeUJtYVd4bElHVjRZMlZ3ZENCcGJpQmpiMjF3YkdsaGJtTmxJSGRwZEdnZ2RHaGxJRXhwWTJWdWMyVXVYRzR2THlCWmIzVWdiV0Y1SUc5aWRHRnBiaUJoSUdOdmNIa2diMllnZEdobElFeHBZMlZ1YzJVZ1lYUmNiaTh2WEc0dkx5QWdJQ0FnYUhSMGNEb3ZMM2QzZHk1aGNHRmphR1V1YjNKbkwyeHBZMlZ1YzJWekwweEpRMFZPVTBVdE1pNHdYRzR2TDF4dUx5OGdWVzVzWlhOeklISmxjWFZwY21Wa0lHSjVJR0Z3Y0d4cFkyRmliR1VnYkdGM0lHOXlJR0ZuY21WbFpDQjBieUJwYmlCM2NtbDBhVzVuTENCemIyWjBkMkZ5WlZ4dUx5OGdaR2x6ZEhKcFluVjBaV1FnZFc1a1pYSWdkR2hsSUV4cFkyVnVjMlVnYVhNZ1pHbHpkSEpwWW5WMFpXUWdiMjRnWVc0Z1hDSkJVeUJKVTF3aUlFSkJVMGxUTEZ4dUx5OGdWMGxVU0U5VlZDQlhRVkpTUVU1VVNVVlRJRTlTSUVOUFRrUkpWRWxQVGxNZ1QwWWdRVTVaSUV0SlRrUXNJR1ZwZEdobGNpQmxlSEJ5WlhOeklHOXlJR2x0Y0d4cFpXUXVYRzR2THlCVFpXVWdkR2hsSUV4cFkyVnVjMlVnWm05eUlIUm9aU0J6Y0dWamFXWnBZeUJzWVc1bmRXRm5aU0JuYjNabGNtNXBibWNnY0dWeWJXbHpjMmx2Ym5NZ1lXNWtYRzR2THlCc2FXMXBkR0YwYVc5dWN5QjFibVJsY2lCMGFHVWdUR2xqWlc1elpTNWNibHh1THk4Z1ZVMUVJRWhGUVVSRlVpQlRWRUZTVkNCY2JpaG1kVzVqZEdsdmJpQW9jbTl2ZEN3Z1ptRmpkRzl5ZVNrZ2UxeHVJQ0FnSUdsbUlDaDBlWEJsYjJZZ1pHVm1hVzVsSUQwOVBTQW5ablZ1WTNScGIyNG5JQ1ltSUdSbFptbHVaUzVoYldRcElIdGNiaUFnSUNBZ0lDQWdMeThnUVUxRUxpQlNaV2RwYzNSbGNpQmhjeUJoYmlCaGJtOXVlVzF2ZFhNZ2JXOWtkV3hsTGx4dUlDQWdJQ0FnSUNCa1pXWnBibVVvVzEwc0lHWmhZM1J2Y25rcE8xeHVJQ0FnSUgwZ1pXeHpaU0JwWmlBb2RIbHdaVzltSUdWNGNHOXlkSE1nUFQwOUlDZHZZbXBsWTNRbktTQjdYRzRnSUNBZ0lDQWdJQzh2SUU1dlpHVXVJRVJ2WlhNZ2JtOTBJSGR2Y21zZ2QybDBhQ0J6ZEhKcFkzUWdRMjl0Ylc5dVNsTXNJR0oxZEZ4dUlDQWdJQ0FnSUNBdkx5QnZibXg1SUVOdmJXMXZia3BUTFd4cGEyVWdaVzUyYVhKdmJXVnVkSE1nZEdoaGRDQnpkWEJ3YjNKMElHMXZaSFZzWlM1bGVIQnZjblJ6TEZ4dUlDQWdJQ0FnSUNBdkx5QnNhV3RsSUU1dlpHVXVYRzRnSUNBZ0lDQWdJRzF2WkhWc1pTNWxlSEJ2Y25SeklEMGdabUZqZEc5eWVTZ3BPMXh1SUNBZ0lIMGdaV3h6WlNCN1hHNGdJQ0FnSUNBZ0lDOHZJRUp5YjNkelpYSWdaMnh2WW1Gc2N5QW9jbTl2ZENCcGN5QjNhVzVrYjNjcFhHNGdJQ0FnSUNBZ0lISnZiM1F1Y21WMGRYSnVSWGh3YjNKMGN5QTlJR1poWTNSdmNua29LVHRjYmlBZ2ZWeHVmU2gwYUdsekxDQm1kVzVqZEdsdmJpQW9LU0I3WEc0dkx5QlZUVVFnU0VWQlJFVlNJRVZPUkZ4dVhHNTJZWElnV0VoU0lEMGdXRTFNU0hSMGNGSmxjWFZsYzNSY2JtbG1JQ2doV0VoU0tTQjBhSEp2ZHlCdVpYY2dSWEp5YjNJb0oyMXBjM05wYm1jZ1dFMU1TSFIwY0ZKbGNYVmxjM1FuS1Z4dWNtVnhkV1Z6ZEM1c2IyY2dQU0I3WEc0Z0lDZDBjbUZqWlNjNklHNXZiM0FzSUNka1pXSjFaeWM2SUc1dmIzQXNJQ2RwYm1adkp6b2dibTl2Y0N3Z0ozZGhjbTRuT2lCdWIyOXdMQ0FuWlhKeWIzSW5PaUJ1YjI5d1hHNTlYRzVjYm5aaGNpQkVSVVpCVlV4VVgxUkpUVVZQVlZRZ1BTQXpJQ29nTmpBZ0tpQXhNREF3SUM4dklETWdiV2x1ZFhSbGMxeHVYRzR2TDF4dUx5OGdjbVZ4ZFdWemRGeHVMeTljYmx4dVpuVnVZM1JwYjI0Z2NtVnhkV1Z6ZENodmNIUnBiMjV6TENCallXeHNZbUZqYXlrZ2UxeHVJQ0F2THlCVWFHVWdaVzUwY25rdGNHOXBiblFnZEc4Z2RHaGxJRUZRU1RvZ2NISmxjQ0IwYUdVZ2IzQjBhVzl1Y3lCdlltcGxZM1FnWVc1a0lIQmhjM01nZEdobElISmxZV3dnZDI5eWF5QjBieUJ5ZFc1ZmVHaHlMbHh1SUNCcFppaDBlWEJsYjJZZ1kyRnNiR0poWTJzZ0lUMDlJQ2RtZFc1amRHbHZiaWNwWEc0Z0lDQWdkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZENZV1FnWTJGc2JHSmhZMnNnWjJsMlpXNDZJQ2NnS3lCallXeHNZbUZqYXlsY2JseHVJQ0JwWmlnaGIzQjBhVzl1Y3lsY2JpQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9KMDV2SUc5d2RHbHZibk1nWjJsMlpXNG5LVnh1WEc0Z0lIWmhjaUJ2Y0hScGIyNXpYMjl1VW1WemNHOXVjMlVnUFNCdmNIUnBiMjV6TG05dVVtVnpjRzl1YzJVN0lDOHZJRk5oZG1VZ2RHaHBjeUJtYjNJZ2JHRjBaWEl1WEc1Y2JpQWdhV1lvZEhsd1pXOW1JRzl3ZEdsdmJuTWdQVDA5SUNkemRISnBibWNuS1Z4dUlDQWdJRzl3ZEdsdmJuTWdQU0I3SjNWeWFTYzZiM0IwYVc5dWMzMDdYRzRnSUdWc2MyVmNiaUFnSUNCdmNIUnBiMjV6SUQwZ1NsTlBUaTV3WVhKelpTaEtVMDlPTG5OMGNtbHVaMmxtZVNodmNIUnBiMjV6S1NrN0lDOHZJRlZ6WlNCaElHUjFjR3hwWTJGMFpTQm1iM0lnYlhWMFlYUnBibWN1WEc1Y2JpQWdiM0IwYVc5dWN5NXZibEpsYzNCdmJuTmxJRDBnYjNCMGFXOXVjMTl2YmxKbGMzQnZibk5sSUM4dklFRnVaQ0J3ZFhRZ2FYUWdZbUZqYXk1Y2JseHVJQ0JwWmlBb2IzQjBhVzl1Y3k1MlpYSmliM05sS1NCeVpYRjFaWE4wTG14dlp5QTlJR2RsZEV4dloyZGxjaWdwTzF4dVhHNGdJR2xtS0c5d2RHbHZibk11ZFhKc0tTQjdYRzRnSUNBZ2IzQjBhVzl1Y3k1MWNta2dQU0J2Y0hScGIyNXpMblZ5YkR0Y2JpQWdJQ0JrWld4bGRHVWdiM0IwYVc5dWN5NTFjbXc3WEc0Z0lIMWNibHh1SUNCcFppZ2hiM0IwYVc5dWN5NTFjbWtnSmlZZ2IzQjBhVzl1Y3k1MWNta2dJVDA5SUZ3aVhDSXBYRzRnSUNBZ2RHaHliM2NnYm1WM0lFVnljbTl5S0Z3aWIzQjBhVzl1Y3k1MWNta2dhWE1nWVNCeVpYRjFhWEpsWkNCaGNtZDFiV1Z1ZEZ3aUtUdGNibHh1SUNCcFppaDBlWEJsYjJZZ2IzQjBhVzl1Y3k1MWNta2dJVDBnWENKemRISnBibWRjSWlsY2JpQWdJQ0IwYUhKdmR5QnVaWGNnUlhKeWIzSW9YQ0p2Y0hScGIyNXpMblZ5YVNCdGRYTjBJR0psSUdFZ2MzUnlhVzVuWENJcE8xeHVYRzRnSUhaaGNpQjFibk4xY0hCdmNuUmxaRjl2Y0hScGIyNXpJRDBnV3lkd2NtOTRlU2NzSUNkZmNtVmthWEpsWTNSelJtOXNiRzkzWldRbkxDQW5iV0Y0VW1Wa2FYSmxZM1J6Snl3Z0oyWnZiR3h2ZDFKbFpHbHlaV04wSjExY2JpQWdabTl5SUNoMllYSWdhU0E5SURBN0lHa2dQQ0IxYm5OMWNIQnZjblJsWkY5dmNIUnBiMjV6TG14bGJtZDBhRHNnYVNzcktWeHVJQ0FnSUdsbUtHOXdkR2x2Ym5OYklIVnVjM1Z3Y0c5eWRHVmtYMjl3ZEdsdmJuTmJhVjBnWFNsY2JpQWdJQ0FnSUhSb2NtOTNJRzVsZHlCRmNuSnZjaWhjSW05d2RHbHZibk11WENJZ0t5QjFibk4xY0hCdmNuUmxaRjl2Y0hScGIyNXpXMmxkSUNzZ1hDSWdhWE1nYm05MElITjFjSEJ2Y25SbFpGd2lLVnh1WEc0Z0lHOXdkR2x2Ym5NdVkyRnNiR0poWTJzZ1BTQmpZV3hzWW1GamExeHVJQ0J2Y0hScGIyNXpMbTFsZEdodlpDQTlJRzl3ZEdsdmJuTXViV1YwYUc5a0lIeDhJQ2RIUlZRbk8xeHVJQ0J2Y0hScGIyNXpMbWhsWVdSbGNuTWdQU0J2Y0hScGIyNXpMbWhsWVdSbGNuTWdmSHdnZTMwN1hHNGdJRzl3ZEdsdmJuTXVZbTlrZVNBZ0lDQTlJRzl3ZEdsdmJuTXVZbTlrZVNCOGZDQnVkV3hzWEc0Z0lHOXdkR2x2Ym5NdWRHbHRaVzkxZENBOUlHOXdkR2x2Ym5NdWRHbHRaVzkxZENCOGZDQnlaWEYxWlhOMExrUkZSa0ZWVEZSZlZFbE5SVTlWVkZ4dVhHNGdJR2xtS0c5d2RHbHZibk11YUdWaFpHVnljeTVvYjNOMEtWeHVJQ0FnSUhSb2NtOTNJRzVsZHlCRmNuSnZjaWhjSWs5d2RHbHZibk11YUdWaFpHVnljeTVvYjNOMElHbHpJRzV2ZENCemRYQndiM0owWldSY0lpazdYRzVjYmlBZ2FXWW9iM0IwYVc5dWN5NXFjMjl1S1NCN1hHNGdJQ0FnYjNCMGFXOXVjeTVvWldGa1pYSnpMbUZqWTJWd2RDQTlJRzl3ZEdsdmJuTXVhR1ZoWkdWeWN5NWhZMk5sY0hRZ2ZId2dKMkZ3Y0d4cFkyRjBhVzl1TDJwemIyNG5YRzRnSUNBZ2FXWW9iM0IwYVc5dWN5NXRaWFJvYjJRZ0lUMDlJQ2RIUlZRbktWeHVJQ0FnSUNBZ2IzQjBhVzl1Y3k1b1pXRmtaWEp6V3lkamIyNTBaVzUwTFhSNWNHVW5YU0E5SUNkaGNIQnNhV05oZEdsdmJpOXFjMjl1SjF4dVhHNGdJQ0FnYVdZb2RIbHdaVzltSUc5d2RHbHZibk11YW5OdmJpQWhQVDBnSjJKdmIyeGxZVzRuS1Z4dUlDQWdJQ0FnYjNCMGFXOXVjeTVpYjJSNUlEMGdTbE5QVGk1emRISnBibWRwWm5rb2IzQjBhVzl1Y3k1cWMyOXVLVnh1SUNBZ0lHVnNjMlVnYVdZb2RIbHdaVzltSUc5d2RHbHZibk11WW05a2VTQWhQVDBnSjNOMGNtbHVaeWNwWEc0Z0lDQWdJQ0J2Y0hScGIyNXpMbUp2WkhrZ1BTQktVMDlPTG5OMGNtbHVaMmxtZVNodmNIUnBiMjV6TG1KdlpIa3BYRzRnSUgxY2JpQWdYRzRnSUM4dlFrVkhTVTRnVVZNZ1NHRmphMXh1SUNCMllYSWdjMlZ5YVdGc2FYcGxJRDBnWm5WdVkzUnBiMjRvYjJKcUtTQjdYRzRnSUNBZ2RtRnlJSE4wY2lBOUlGdGRPMXh1SUNBZ0lHWnZjaWgyWVhJZ2NDQnBiaUJ2WW1vcFhHNGdJQ0FnSUNCcFppQW9iMkpxTG1oaGMwOTNibEJ5YjNCbGNuUjVLSEFwS1NCN1hHNGdJQ0FnSUNBZ0lITjBjaTV3ZFhOb0tHVnVZMjlrWlZWU1NVTnZiWEJ2Ym1WdWRDaHdLU0FySUZ3aVBWd2lJQ3NnWlc1amIyUmxWVkpKUTI5dGNHOXVaVzUwS0c5aWFsdHdYU2twTzF4dUlDQWdJQ0FnZlZ4dUlDQWdJSEpsZEhWeWJpQnpkSEl1YW05cGJpaGNJaVpjSWlrN1hHNGdJSDFjYmlBZ1hHNGdJR2xtS0c5d2RHbHZibk11Y1hNcGUxeHVJQ0FnSUhaaGNpQnhjeUE5SUNoMGVYQmxiMllnYjNCMGFXOXVjeTV4Y3lBOVBTQW5jM1J5YVc1bkp5ay9JRzl3ZEdsdmJuTXVjWE1nT2lCelpYSnBZV3hwZW1Vb2IzQjBhVzl1Y3k1eGN5azdYRzRnSUNBZ2FXWW9iM0IwYVc5dWN5NTFjbWt1YVc1a1pYaFBaaWduUHljcElDRTlQU0F0TVNsN0lDOHZibThnWjJWMElIQmhjbUZ0YzF4dUlDQWdJQ0FnSUNCdmNIUnBiMjV6TG5WeWFTQTlJRzl3ZEdsdmJuTXVkWEpwS3ljbUp5dHhjenRjYmlBZ0lDQjlaV3h6WlhzZ0x5OWxlR2x6ZEdsdVp5Qm5aWFFnY0dGeVlXMXpYRzRnSUNBZ0lDQWdJRzl3ZEdsdmJuTXVkWEpwSUQwZ2IzQjBhVzl1Y3k1MWNta3JKejhuSzNGek8xeHVJQ0FnSUgxY2JpQWdmVnh1SUNBdkwwVk9SQ0JSVXlCSVlXTnJYRzRnSUZ4dUlDQXZMMEpGUjBsT0lFWlBVazBnU0dGamExeHVJQ0IyWVhJZ2JYVnNkR2x3WVhKMElEMGdablZ1WTNScGIyNG9iMkpxS1NCN1hHNGdJQ0FnTHk5MGIyUnZPaUJ6ZFhCd2IzSjBJR1pwYkdVZ2RIbHdaU0FvZFhObFpuVnNQeWxjYmlBZ0lDQjJZWElnY21WemRXeDBJRDBnZTMwN1hHNGdJQ0FnY21WemRXeDBMbUp2ZFc1a2Nua2dQU0FuTFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTY3JUV0YwYUM1bWJHOXZjaWhOWVhSb0xuSmhibVJ2YlNncEtqRXdNREF3TURBd01EQXBPMXh1SUNBZ0lIWmhjaUJzYVc1bGN5QTlJRnRkTzF4dUlDQWdJR1p2Y2loMllYSWdjQ0JwYmlCdlltb3BlMXh1SUNBZ0lDQWdJQ0JwWmlBb2IySnFMbWhoYzA5M2JsQnliM0JsY25SNUtIQXBLU0I3WEc0Z0lDQWdJQ0FnSUNBZ0lDQnNhVzVsY3k1d2RYTm9LRnh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ2N0TFNjcmNtVnpkV3gwTG1KdmRXNWtjbmtyWENKY1hHNWNJaXRjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FuUTI5dWRHVnVkQzFFYVhOd2IzTnBkR2x2YmpvZ1ptOXliUzFrWVhSaE95QnVZVzFsUFZ3aUp5dHdLeWRjSWljclhDSmNYRzVjSWl0Y2JpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCY0lseGNibHdpSzF4dUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUc5aWFsdHdYU3RjSWx4Y2Jsd2lYRzRnSUNBZ0lDQWdJQ0FnSUNBcE8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ2ZWeHVJQ0FnSUd4cGJtVnpMbkIxYzJnb0lDY3RMU2NyY21WemRXeDBMbUp2ZFc1a2Nua3JKeTB0SnlBcE8xeHVJQ0FnSUhKbGMzVnNkQzVpYjJSNUlEMGdiR2x1WlhNdWFtOXBiaWduSnlrN1hHNGdJQ0FnY21WemRXeDBMbXhsYm1kMGFDQTlJSEpsYzNWc2RDNWliMlI1TG14bGJtZDBhRHRjYmlBZ0lDQnlaWE4xYkhRdWRIbHdaU0E5SUNkdGRXeDBhWEJoY25RdlptOXliUzFrWVhSaE95QmliM1Z1WkdGeWVUMG5LM0psYzNWc2RDNWliM1Z1WkhKNU8xeHVJQ0FnSUhKbGRIVnliaUJ5WlhOMWJIUTdYRzRnSUgxY2JpQWdYRzRnSUdsbUtHOXdkR2x2Ym5NdVptOXliU2w3WEc0Z0lDQWdhV1lvZEhsd1pXOW1JRzl3ZEdsdmJuTXVabTl5YlNBOVBTQW5jM1J5YVc1bkp5a2dkR2h5YjNjb0oyWnZjbTBnYm1GdFpTQjFibk4xY0hCdmNuUmxaQ2NwTzF4dUlDQWdJR2xtS0c5d2RHbHZibk11YldWMGFHOWtJRDA5UFNBblVFOVRWQ2NwZTF4dUlDQWdJQ0FnSUNCMllYSWdaVzVqYjJScGJtY2dQU0FvYjNCMGFXOXVjeTVsYm1OdlpHbHVaeUI4ZkNBbllYQndiR2xqWVhScGIyNHZlQzEzZDNjdFptOXliUzExY214bGJtTnZaR1ZrSnlrdWRHOU1iM2RsY2tOaGMyVW9LVHRjYmlBZ0lDQWdJQ0FnYjNCMGFXOXVjeTVvWldGa1pYSnpXeWRqYjI1MFpXNTBMWFI1Y0dVblhTQTlJR1Z1WTI5a2FXNW5PMXh1SUNBZ0lDQWdJQ0J6ZDJsMFkyZ29aVzVqYjJScGJtY3BlMXh1SUNBZ0lDQWdJQ0FnSUNBZ1kyRnpaU0FuWVhCd2JHbGpZWFJwYjI0dmVDMTNkM2N0Wm05eWJTMTFjbXhsYm1OdlpHVmtKenBjYmlBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0J2Y0hScGIyNXpMbUp2WkhrZ1BTQnpaWEpwWVd4cGVtVW9iM0IwYVc5dWN5NW1iM0p0S1M1eVpYQnNZV05sS0M4bE1qQXZaeXdnWENJclhDSXBPMXh1SUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJR0p5WldGck8xeHVJQ0FnSUNBZ0lDQWdJQ0FnWTJGelpTQW5iWFZzZEdsd1lYSjBMMlp2Y20wdFpHRjBZU2M2WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnZG1GeUlHMTFiSFJwSUQwZ2JYVnNkR2x3WVhKMEtHOXdkR2x2Ym5NdVptOXliU2s3WEc0Z0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnTHk5dmNIUnBiMjV6TG1obFlXUmxjbk5iSjJOdmJuUmxiblF0YkdWdVozUm9KMTBnUFNCdGRXeDBhUzVzWlc1bmRHZzdYRzRnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdiM0IwYVc5dWN5NWliMlI1SUQwZ2JYVnNkR2t1WW05a2VUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQnZjSFJwYjI1ekxtaGxZV1JsY25OYkoyTnZiblJsYm5RdGRIbHdaU2RkSUQwZ2JYVnNkR2t1ZEhsd1pUdGNiaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQmljbVZoYXp0Y2JpQWdJQ0FnSUNBZ0lDQWdJR1JsWm1GMWJIUWdPaUIwYUhKdmR5QnVaWGNnUlhKeWIzSW9KM1Z1YzNWd2NHOXlkR1ZrSUdWdVkyOWthVzVuT2ljclpXNWpiMlJwYm1jcE8xeHVJQ0FnSUNBZ0lDQjlYRzRnSUNBZ2ZWeHVJQ0I5WEc0Z0lDOHZSVTVFSUVaUFVrMGdTR0ZqYTF4dVhHNGdJQzh2SUVsbUlHOXVVbVZ6Y0c5dWMyVWdhWE1nWW05dmJHVmhiaUIwY25WbExDQmpZV3hzSUdKaFkyc2dhVzF0WldScFlYUmxiSGtnZDJobGJpQjBhR1VnY21WemNHOXVjMlVnYVhNZ2EyNXZkMjRzWEc0Z0lDOHZJRzV2ZENCM2FHVnVJSFJvWlNCbWRXeHNJSEpsY1hWbGMzUWdhWE1nWTI5dGNHeGxkR1V1WEc0Z0lHOXdkR2x2Ym5NdWIyNVNaWE53YjI1elpTQTlJRzl3ZEdsdmJuTXViMjVTWlhOd2IyNXpaU0I4ZkNCdWIyOXdYRzRnSUdsbUtHOXdkR2x2Ym5NdWIyNVNaWE53YjI1elpTQTlQVDBnZEhKMVpTa2dlMXh1SUNBZ0lHOXdkR2x2Ym5NdWIyNVNaWE53YjI1elpTQTlJR05oYkd4aVlXTnJYRzRnSUNBZ2IzQjBhVzl1Y3k1allXeHNZbUZqYXlBOUlHNXZiM0JjYmlBZ2ZWeHVYRzRnSUM4dklGaFlXQ0JDY205M2MyVnljeUJrYnlCdWIzUWdiR2xyWlNCMGFHbHpMbHh1SUNBdkwybG1LRzl3ZEdsdmJuTXVZbTlrZVNsY2JpQWdMeThnSUc5d2RHbHZibk11YUdWaFpHVnljMXNuWTI5dWRHVnVkQzFzWlc1bmRHZ25YU0E5SUc5d2RHbHZibk11WW05a2VTNXNaVzVuZEdnN1hHNWNiaUFnTHk4Z1NGUlVVQ0JpWVhOcFl5QmhkWFJvWlc1MGFXTmhkR2x2Ymx4dUlDQnBaaWdoYjNCMGFXOXVjeTVvWldGa1pYSnpMbUYxZEdodmNtbDZZWFJwYjI0Z0ppWWdiM0IwYVc5dWN5NWhkWFJvS1Z4dUlDQWdJRzl3ZEdsdmJuTXVhR1ZoWkdWeWN5NWhkWFJvYjNKcGVtRjBhVzl1SUQwZ0owSmhjMmxqSUNjZ0t5QmlOalJmWlc1aktHOXdkR2x2Ym5NdVlYVjBhQzUxYzJWeWJtRnRaU0FySUNjNkp5QXJJRzl3ZEdsdmJuTXVZWFYwYUM1d1lYTnpkMjl5WkNrN1hHNWNiaUFnY21WMGRYSnVJSEoxYmw5NGFISW9iM0IwYVc5dWN5bGNibjFjYmx4dWRtRnlJSEpsY1Y5elpYRWdQU0F3WEc1bWRXNWpkR2x2YmlCeWRXNWZlR2h5S0c5d2RHbHZibk1wSUh0Y2JpQWdkbUZ5SUhob2NpQTlJRzVsZHlCWVNGSmNiaUFnSUNBc0lIUnBiV1ZrWDI5MWRDQTlJR1poYkhObFhHNGdJQ0FnTENCcGMxOWpiM0p6SUQwZ2FYTmZZM0p2YzNORWIyMWhhVzRvYjNCMGFXOXVjeTUxY21rcFhHNGdJQ0FnTENCemRYQndiM0owYzE5amIzSnpJRDBnS0NkM2FYUm9RM0psWkdWdWRHbGhiSE1uSUdsdUlIaG9jaWxjYmx4dUlDQnlaWEZmYzJWeElDczlJREZjYmlBZ2VHaHlMbk5sY1Y5cFpDQTlJSEpsY1Y5elpYRmNiaUFnZUdoeUxtbGtJRDBnY21WeFgzTmxjU0FySUNjNklDY2dLeUJ2Y0hScGIyNXpMbTFsZEdodlpDQXJJQ2NnSnlBcklHOXdkR2x2Ym5NdWRYSnBYRzRnSUhob2NpNWZhV1FnUFNCNGFISXVhV1FnTHk4Z1NTQnJibTkzSUVrZ2QybHNiQ0IwZVhCbElGd2lYMmxrWENJZ1puSnZiU0JvWVdKcGRDQmhiR3dnZEdobElIUnBiV1V1WEc1Y2JpQWdhV1lvYVhOZlkyOXljeUFtSmlBaGMzVndjRzl5ZEhOZlkyOXljeWtnZTF4dUlDQWdJSFpoY2lCamIzSnpYMlZ5Y2lBOUlHNWxkeUJGY25KdmNpZ25Rbkp2ZDNObGNpQmtiMlZ6SUc1dmRDQnpkWEJ3YjNKMElHTnliM056TFc5eWFXZHBiaUJ5WlhGMVpYTjBPaUFuSUNzZ2IzQjBhVzl1Y3k1MWNta3BYRzRnSUNBZ1kyOXljMTlsY25JdVkyOXljeUE5SUNkMWJuTjFjSEJ2Y25SbFpDZGNiaUFnSUNCeVpYUjFjbTRnYjNCMGFXOXVjeTVqWVd4c1ltRmpheWhqYjNKelgyVnljaXdnZUdoeUtWeHVJQ0I5WEc1Y2JpQWdlR2h5TG5ScGJXVnZkWFJVYVcxbGNpQTlJSE5sZEZScGJXVnZkWFFvZEc5dlgyeGhkR1VzSUc5d2RHbHZibk11ZEdsdFpXOTFkQ2xjYmlBZ1puVnVZM1JwYjI0Z2RHOXZYMnhoZEdVb0tTQjdYRzRnSUNBZ2RHbHRaV1JmYjNWMElEMGdkSEoxWlZ4dUlDQWdJSFpoY2lCbGNpQTlJRzVsZHlCRmNuSnZjaWduUlZSSlRVVkVUMVZVSnlsY2JpQWdJQ0JsY2k1amIyUmxJRDBnSjBWVVNVMUZSRTlWVkNkY2JpQWdJQ0JsY2k1a2RYSmhkR2x2YmlBOUlHOXdkR2x2Ym5NdWRHbHRaVzkxZEZ4dVhHNGdJQ0FnY21WeGRXVnpkQzVzYjJjdVpYSnliM0lvSjFScGJXVnZkWFFuTENCN0lDZHBaQ2M2ZUdoeUxsOXBaQ3dnSjIxcGJHeHBjMlZqYjI1a2N5YzZiM0IwYVc5dWN5NTBhVzFsYjNWMElIMHBYRzRnSUNBZ2NtVjBkWEp1SUc5d2RHbHZibk11WTJGc2JHSmhZMnNvWlhJc0lIaG9jaWxjYmlBZ2ZWeHVYRzRnSUM4dklGTnZiV1VnYzNSaGRHVnpJR05oYmlCaVpTQnphMmx3Y0dWa0lHOTJaWElzSUhOdklISmxiV1Z0WW1WeUlIZG9ZWFFnYVhNZ2MzUnBiR3dnYVc1amIyMXdiR1YwWlM1Y2JpQWdkbUZ5SUdScFpDQTlJSHNuY21WemNHOXVjMlVuT21aaGJITmxMQ0FuYkc5aFpHbHVaeWM2Wm1Gc2MyVXNJQ2RsYm1Rbk9tWmhiSE5sZlZ4dVhHNGdJSGhvY2k1dmJuSmxZV1I1YzNSaGRHVmphR0Z1WjJVZ1BTQnZibDl6ZEdGMFpWOWphR0Z1WjJWY2JpQWdlR2h5TG05d1pXNG9iM0IwYVc5dWN5NXRaWFJvYjJRc0lHOXdkR2x2Ym5NdWRYSnBMQ0IwY25WbEtTQXZMeUJoYzNsdVkyaHliMjV2ZFhOY2JpQWdhV1lvYVhOZlkyOXljeWxjYmlBZ0lDQjRhSEl1ZDJsMGFFTnlaV1JsYm5ScFlXeHpJRDBnSVNFZ2IzQjBhVzl1Y3k1M2FYUm9RM0psWkdWdWRHbGhiSE5jYmlBZ2VHaHlMbk5sYm1Rb2IzQjBhVzl1Y3k1aWIyUjVLVnh1SUNCeVpYUjFjbTRnZUdoeVhHNWNiaUFnWm5WdVkzUnBiMjRnYjI1ZmMzUmhkR1ZmWTJoaGJtZGxLR1YyWlc1MEtTQjdYRzRnSUNBZ2FXWW9kR2x0WldSZmIzVjBLVnh1SUNBZ0lDQWdjbVYwZFhKdUlISmxjWFZsYzNRdWJHOW5MbVJsWW5WbktDZEpaMjV2Y21sdVp5QjBhVzFsWkNCdmRYUWdjM1JoZEdVZ1kyaGhibWRsSnl3Z2V5ZHpkR0YwWlNjNmVHaHlMbkpsWVdSNVUzUmhkR1VzSUNkcFpDYzZlR2h5TG1sa2ZTbGNibHh1SUNBZ0lISmxjWFZsYzNRdWJHOW5MbVJsWW5WbktDZFRkR0YwWlNCamFHRnVaMlVuTENCN0ozTjBZWFJsSnpwNGFISXVjbVZoWkhsVGRHRjBaU3dnSjJsa0p6cDRhSEl1YVdRc0lDZDBhVzFsWkY5dmRYUW5PblJwYldWa1gyOTFkSDBwWEc1Y2JpQWdJQ0JwWmloNGFISXVjbVZoWkhsVGRHRjBaU0E5UFQwZ1dFaFNMazlRUlU1RlJDa2dlMXh1SUNBZ0lDQWdjbVZ4ZFdWemRDNXNiMmN1WkdWaWRXY29KMUpsY1hWbGMzUWdjM1JoY25SbFpDY3NJSHNuYVdRbk9uaG9jaTVwWkgwcFhHNGdJQ0FnSUNCbWIzSWdLSFpoY2lCclpYa2dhVzRnYjNCMGFXOXVjeTVvWldGa1pYSnpLVnh1SUNBZ0lDQWdJQ0I0YUhJdWMyVjBVbVZ4ZFdWemRFaGxZV1JsY2loclpYa3NJRzl3ZEdsdmJuTXVhR1ZoWkdWeWMxdHJaWGxkS1Z4dUlDQWdJSDFjYmx4dUlDQWdJR1ZzYzJVZ2FXWW9lR2h5TG5KbFlXUjVVM1JoZEdVZ1BUMDlJRmhJVWk1SVJVRkVSVkpUWDFKRlEwVkpWa1ZFS1Z4dUlDQWdJQ0FnYjI1ZmNtVnpjRzl1YzJVb0tWeHVYRzRnSUNBZ1pXeHpaU0JwWmloNGFISXVjbVZoWkhsVGRHRjBaU0E5UFQwZ1dFaFNMa3hQUVVSSlRrY3BJSHRjYmlBZ0lDQWdJRzl1WDNKbGMzQnZibk5sS0NsY2JpQWdJQ0FnSUc5dVgyeHZZV1JwYm1jb0tWeHVJQ0FnSUgxY2JseHVJQ0FnSUdWc2MyVWdhV1lvZUdoeUxuSmxZV1I1VTNSaGRHVWdQVDA5SUZoSVVpNUVUMDVGS1NCN1hHNGdJQ0FnSUNCdmJsOXlaWE53YjI1elpTZ3BYRzRnSUNBZ0lDQnZibDlzYjJGa2FXNW5LQ2xjYmlBZ0lDQWdJRzl1WDJWdVpDZ3BYRzRnSUNBZ2ZWeHVJQ0I5WEc1Y2JpQWdablZ1WTNScGIyNGdiMjVmY21WemNHOXVjMlVvS1NCN1hHNGdJQ0FnYVdZb1pHbGtMbkpsYzNCdmJuTmxLVnh1SUNBZ0lDQWdjbVYwZFhKdVhHNWNiaUFnSUNCa2FXUXVjbVZ6Y0c5dWMyVWdQU0IwY25WbFhHNGdJQ0FnY21WeGRXVnpkQzVzYjJjdVpHVmlkV2NvSjBkdmRDQnlaWE53YjI1elpTY3NJSHNuYVdRbk9uaG9jaTVwWkN3Z0ozTjBZWFIxY3ljNmVHaHlMbk4wWVhSMWMzMHBYRzRnSUNBZ1kyeGxZWEpVYVcxbGIzVjBLSGhvY2k1MGFXMWxiM1YwVkdsdFpYSXBYRzRnSUNBZ2VHaHlMbk4wWVhSMWMwTnZaR1VnUFNCNGFISXVjM1JoZEhWeklDOHZJRTV2WkdVZ2NtVnhkV1Z6ZENCamIyMXdZWFJwWW1sc2FYUjVYRzVjYmlBZ0lDQXZMeUJFWlhSbFkzUWdabUZwYkdWa0lFTlBVbE1nY21WeGRXVnpkSE11WEc0Z0lDQWdhV1lvYVhOZlkyOXljeUFtSmlCNGFISXVjM1JoZEhWelEyOWtaU0E5UFNBd0tTQjdYRzRnSUNBZ0lDQjJZWElnWTI5eWMxOWxjbklnUFNCdVpYY2dSWEp5YjNJb0owTlBVbE1nY21WeGRXVnpkQ0J5WldwbFkzUmxaRG9nSnlBcklHOXdkR2x2Ym5NdWRYSnBLVnh1SUNBZ0lDQWdZMjl5YzE5bGNuSXVZMjl5Y3lBOUlDZHlaV3BsWTNSbFpDZGNibHh1SUNBZ0lDQWdMeThnUkc4Z2JtOTBJSEJ5YjJObGMzTWdkR2hwY3lCeVpYRjFaWE4wSUdaMWNuUm9aWEl1WEc0Z0lDQWdJQ0JrYVdRdWJHOWhaR2x1WnlBOUlIUnlkV1ZjYmlBZ0lDQWdJR1JwWkM1bGJtUWdQU0IwY25WbFhHNWNiaUFnSUNBZ0lISmxkSFZ5YmlCdmNIUnBiMjV6TG1OaGJHeGlZV05yS0dOdmNuTmZaWEp5TENCNGFISXBYRzRnSUNBZ2ZWeHVYRzRnSUNBZ2IzQjBhVzl1Y3k1dmJsSmxjM0J2Ym5ObEtHNTFiR3dzSUhob2NpbGNiaUFnZlZ4dVhHNGdJR1oxYm1OMGFXOXVJRzl1WDJ4dllXUnBibWNvS1NCN1hHNGdJQ0FnYVdZb1pHbGtMbXh2WVdScGJtY3BYRzRnSUNBZ0lDQnlaWFIxY201Y2JseHVJQ0FnSUdScFpDNXNiMkZrYVc1bklEMGdkSEoxWlZ4dUlDQWdJSEpsY1hWbGMzUXViRzluTG1SbFluVm5LQ2RTWlhOd2IyNXpaU0JpYjJSNUlHeHZZV1JwYm1jbkxDQjdKMmxrSnpwNGFISXVhV1I5S1Z4dUlDQWdJQzh2SUZSUFJFODZJRTFoZVdKbElITnBiWFZzWVhSbElGd2laR0YwWVZ3aUlHVjJaVzUwY3lCaWVTQjNZWFJqYUdsdVp5QjRhSEl1Y21WemNHOXVjMlZVWlhoMFhHNGdJSDFjYmx4dUlDQm1kVzVqZEdsdmJpQnZibDlsYm1Rb0tTQjdYRzRnSUNBZ2FXWW9aR2xrTG1WdVpDbGNiaUFnSUNBZ0lISmxkSFZ5Ymx4dVhHNGdJQ0FnWkdsa0xtVnVaQ0E5SUhSeWRXVmNiaUFnSUNCeVpYRjFaWE4wTG14dlp5NWtaV0oxWnlnblVtVnhkV1Z6ZENCa2IyNWxKeXdnZXlkcFpDYzZlR2h5TG1sa2ZTbGNibHh1SUNBZ0lIaG9jaTVpYjJSNUlEMGdlR2h5TG5KbGMzQnZibk5sVkdWNGRGeHVJQ0FnSUdsbUtHOXdkR2x2Ym5NdWFuTnZiaWtnZTF4dUlDQWdJQ0FnZEhKNUlDQWdJQ0FnSUNCN0lIaG9jaTVpYjJSNUlEMGdTbE5QVGk1d1lYSnpaU2g0YUhJdWNtVnpjRzl1YzJWVVpYaDBLU0I5WEc0Z0lDQWdJQ0JqWVhSamFDQW9aWElwSUhzZ2NtVjBkWEp1SUc5d2RHbHZibk11WTJGc2JHSmhZMnNvWlhJc0lIaG9jaWtnSUNBZ0lDQWdJSDFjYmlBZ0lDQjlYRzVjYmlBZ0lDQnZjSFJwYjI1ekxtTmhiR3hpWVdOcktHNTFiR3dzSUhob2Npd2dlR2h5TG1KdlpIa3BYRzRnSUgxY2JseHVmU0F2THlCeVpYRjFaWE4wWEc1Y2JuSmxjWFZsYzNRdWQybDBhRU55WldSbGJuUnBZV3h6SUQwZ1ptRnNjMlU3WEc1eVpYRjFaWE4wTGtSRlJrRlZURlJmVkVsTlJVOVZWQ0E5SUVSRlJrRlZURlJmVkVsTlJVOVZWRHRjYmx4dUx5OWNiaTh2SUdSbFptRjFiSFJ6WEc0dkwxeHVYRzV5WlhGMVpYTjBMbVJsWm1GMWJIUnpJRDBnWm5WdVkzUnBiMjRvYjNCMGFXOXVjeXdnY21WeGRXVnpkR1Z5S1NCN1hHNGdJSFpoY2lCa1pXWWdQU0JtZFc1amRHbHZiaUFvYldWMGFHOWtLU0I3WEc0Z0lDQWdkbUZ5SUdRZ1BTQm1kVzVqZEdsdmJpQW9jR0Z5WVcxekxDQmpZV3hzWW1GamF5a2dlMXh1SUNBZ0lDQWdhV1lvZEhsd1pXOW1JSEJoY21GdGN5QTlQVDBnSjNOMGNtbHVaeWNwWEc0Z0lDQWdJQ0FnSUhCaGNtRnRjeUE5SUhzbmRYSnBKem9nY0dGeVlXMXpmVHRjYmlBZ0lDQWdJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ0lDQndZWEpoYlhNZ1BTQktVMDlPTG5CaGNuTmxLRXBUVDA0dWMzUnlhVzVuYVdaNUtIQmhjbUZ0Y3lrcE8xeHVJQ0FnSUNBZ2ZWeHVJQ0FnSUNBZ1ptOXlJQ2gyWVhJZ2FTQnBiaUJ2Y0hScGIyNXpLU0I3WEc0Z0lDQWdJQ0FnSUdsbUlDaHdZWEpoYlhOYmFWMGdQVDA5SUhWdVpHVm1hVzVsWkNrZ2NHRnlZVzF6VzJsZElEMGdiM0IwYVc5dWMxdHBYVnh1SUNBZ0lDQWdmVnh1SUNBZ0lDQWdjbVYwZFhKdUlHMWxkR2h2WkNod1lYSmhiWE1zSUdOaGJHeGlZV05yS1Z4dUlDQWdJSDFjYmlBZ0lDQnlaWFIxY200Z1pGeHVJQ0I5WEc0Z0lIWmhjaUJrWlNBOUlHUmxaaWh5WlhGMVpYTjBLVnh1SUNCa1pTNW5aWFFnUFNCa1pXWW9jbVZ4ZFdWemRDNW5aWFFwWEc0Z0lHUmxMbkJ2YzNRZ1BTQmtaV1lvY21WeGRXVnpkQzV3YjNOMEtWeHVJQ0JrWlM1d2RYUWdQU0JrWldZb2NtVnhkV1Z6ZEM1d2RYUXBYRzRnSUdSbExtaGxZV1FnUFNCa1pXWW9jbVZ4ZFdWemRDNW9aV0ZrS1Z4dUlDQnlaWFIxY200Z1pHVmNibjFjYmx4dUx5OWNiaTh2SUVoVVZGQWdiV1YwYUc5a0lITm9iM0owWTNWMGMxeHVMeTljYmx4dWRtRnlJSE5vYjNKMFkzVjBjeUE5SUZzZ0oyZGxkQ2NzSUNkd2RYUW5MQ0FuY0c5emRDY3NJQ2RvWldGa0p5QmRPMXh1YzJodmNuUmpkWFJ6TG1admNrVmhZMmdvWm5WdVkzUnBiMjRvYzJodmNuUmpkWFFwSUh0Y2JpQWdkbUZ5SUcxbGRHaHZaQ0E5SUhOb2IzSjBZM1YwTG5SdlZYQndaWEpEWVhObEtDazdYRzRnSUhaaGNpQm1kVzVqSUNBZ1BTQnphRzl5ZEdOMWRDNTBiMHh2ZDJWeVEyRnpaU2dwTzF4dVhHNGdJSEpsY1hWbGMzUmJablZ1WTEwZ1BTQm1kVzVqZEdsdmJpaHZjSFJ6S1NCN1hHNGdJQ0FnYVdZb2RIbHdaVzltSUc5d2RITWdQVDA5SUNkemRISnBibWNuS1Z4dUlDQWdJQ0FnYjNCMGN5QTlJSHNuYldWMGFHOWtKenB0WlhSb2IyUXNJQ2QxY21rbk9tOXdkSE45TzF4dUlDQWdJR1ZzYzJVZ2UxeHVJQ0FnSUNBZ2IzQjBjeUE5SUVwVFQwNHVjR0Z5YzJVb1NsTlBUaTV6ZEhKcGJtZHBabmtvYjNCMGN5a3BPMXh1SUNBZ0lDQWdiM0IwY3k1dFpYUm9iMlFnUFNCdFpYUm9iMlE3WEc0Z0lDQWdmVnh1WEc0Z0lDQWdkbUZ5SUdGeVozTWdQU0JiYjNCMGMxMHVZMjl1WTJGMEtFRnljbUY1TG5CeWIzUnZkSGx3WlM1emJHbGpaUzVoY0hCc2VTaGhjbWQxYldWdWRITXNJRnN4WFNrcE8xeHVJQ0FnSUhKbGRIVnliaUJ5WlhGMVpYTjBMbUZ3Y0d4NUtIUm9hWE1zSUdGeVozTXBPMXh1SUNCOVhHNTlLVnh1WEc0dkwxeHVMeThnUTI5MVkyaEVRaUJ6YUc5eWRHTjFkRnh1THk5Y2JseHVjbVZ4ZFdWemRDNWpiM1ZqYUNBOUlHWjFibU4wYVc5dUtHOXdkR2x2Ym5Nc0lHTmhiR3hpWVdOcktTQjdYRzRnSUdsbUtIUjVjR1Z2WmlCdmNIUnBiMjV6SUQwOVBTQW5jM1J5YVc1bkp5bGNiaUFnSUNCdmNIUnBiMjV6SUQwZ2V5ZDFjbWtuT205d2RHbHZibk45WEc1Y2JpQWdMeThnU25WemRDQjFjMlVnZEdobElISmxjWFZsYzNRZ1FWQkpJSFJ2SUdSdklFcFRUMDR1WEc0Z0lHOXdkR2x2Ym5NdWFuTnZiaUE5SUhSeWRXVmNiaUFnYVdZb2IzQjBhVzl1Y3k1aWIyUjVLVnh1SUNBZ0lHOXdkR2x2Ym5NdWFuTnZiaUE5SUc5d2RHbHZibk11WW05a2VWeHVJQ0JrWld4bGRHVWdiM0IwYVc5dWN5NWliMlI1WEc1Y2JpQWdZMkZzYkdKaFkyc2dQU0JqWVd4c1ltRmpheUI4ZkNCdWIyOXdYRzVjYmlBZ2RtRnlJSGhvY2lBOUlISmxjWFZsYzNRb2IzQjBhVzl1Y3l3Z1kyOTFZMmhmYUdGdVpHeGxjaWxjYmlBZ2NtVjBkWEp1SUhob2NseHVYRzRnSUdaMWJtTjBhVzl1SUdOdmRXTm9YMmhoYm1Sc1pYSW9aWElzSUhKbGMzQXNJR0p2WkhrcElIdGNiaUFnSUNCcFppaGxjaWxjYmlBZ0lDQWdJSEpsZEhWeWJpQmpZV3hzWW1GamF5aGxjaXdnY21WemNDd2dZbTlrZVNsY2JseHVJQ0FnSUdsbUtDaHlaWE53TG5OMFlYUjFjME52WkdVZ1BDQXlNREFnZkh3Z2NtVnpjQzV6ZEdGMGRYTkRiMlJsSUQ0Z01qazVLU0FtSmlCaWIyUjVMbVZ5Y205eUtTQjdYRzRnSUNBZ0lDQXZMeUJVYUdVZ1ltOWtlU0JwY3lCaElFTnZkV05vSUVwVFQwNGdiMkpxWldOMElHbHVaR2xqWVhScGJtY2dkR2hsSUdWeWNtOXlMbHh1SUNBZ0lDQWdaWElnUFNCdVpYY2dSWEp5YjNJb0owTnZkV05vUkVJZ1pYSnliM0k2SUNjZ0t5QW9ZbTlrZVM1bGNuSnZjaTV5WldGemIyNGdmSHdnWW05a2VTNWxjbkp2Y2k1bGNuSnZjaWtwWEc0Z0lDQWdJQ0JtYjNJZ0tIWmhjaUJyWlhrZ2FXNGdZbTlrZVNsY2JpQWdJQ0FnSUNBZ1pYSmJhMlY1WFNBOUlHSnZaSGxiYTJWNVhWeHVJQ0FnSUNBZ2NtVjBkWEp1SUdOaGJHeGlZV05yS0dWeUxDQnlaWE53TENCaWIyUjVLVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQnlaWFIxY200Z1kyRnNiR0poWTJzb1pYSXNJSEpsYzNBc0lHSnZaSGtwTzF4dUlDQjlYRzU5WEc1Y2JpOHZYRzR2THlCVmRHbHNhWFI1WEc0dkwxeHVYRzVtZFc1amRHbHZiaUJ1YjI5d0tDa2dlMzFjYmx4dVpuVnVZM1JwYjI0Z1oyVjBURzluWjJWeUtDa2dlMXh1SUNCMllYSWdiRzluWjJWeUlEMGdlMzFjYmlBZ0lDQXNJR3hsZG1Wc2N5QTlJRnNuZEhKaFkyVW5MQ0FuWkdWaWRXY25MQ0FuYVc1bWJ5Y3NJQ2QzWVhKdUp5d2dKMlZ5Y205eUoxMWNiaUFnSUNBc0lHeGxkbVZzTENCcFhHNWNiaUFnWm05eUtHa2dQU0F3T3lCcElEd2diR1YyWld4ekxteGxibWQwYURzZ2FTc3JLU0I3WEc0Z0lDQWdiR1YyWld3Z1BTQnNaWFpsYkhOYmFWMWNibHh1SUNBZ0lHeHZaMmRsY2x0c1pYWmxiRjBnUFNCdWIyOXdYRzRnSUNBZ2FXWW9kSGx3Wlc5bUlHTnZibk52YkdVZ0lUMDlJQ2QxYm1SbFptbHVaV1FuSUNZbUlHTnZibk52YkdVZ0ppWWdZMjl1YzI5c1pWdHNaWFpsYkYwcFhHNGdJQ0FnSUNCc2IyZG5aWEpiYkdWMlpXeGRJRDBnWm05eWJXRjBkR1ZrS0dOdmJuTnZiR1VzSUd4bGRtVnNLVnh1SUNCOVhHNWNiaUFnY21WMGRYSnVJR3h2WjJkbGNseHVmVnh1WEc1bWRXNWpkR2x2YmlCbWIzSnRZWFIwWldRb2IySnFMQ0J0WlhSb2IyUXBJSHRjYmlBZ2NtVjBkWEp1SUdadmNtMWhkSFJsWkY5c2IyZG5aWEpjYmx4dUlDQm1kVzVqZEdsdmJpQm1iM0p0WVhSMFpXUmZiRzluWjJWeUtITjBjaXdnWTI5dWRHVjRkQ2tnZTF4dUlDQWdJR2xtS0hSNWNHVnZaaUJqYjI1MFpYaDBJRDA5UFNBbmIySnFaV04wSnlsY2JpQWdJQ0FnSUhOMGNpQXJQU0FuSUNjZ0t5QktVMDlPTG5OMGNtbHVaMmxtZVNoamIyNTBaWGgwS1Z4dVhHNGdJQ0FnY21WMGRYSnVJRzlpYWx0dFpYUm9iMlJkTG1OaGJHd29iMkpxTENCemRISXBYRzRnSUgxY2JuMWNibHh1THk4Z1VtVjBkWEp1SUhkb1pYUm9aWElnWVNCVlVrd2dhWE1nWVNCamNtOXpjeTFrYjIxaGFXNGdjbVZ4ZFdWemRDNWNibVoxYm1OMGFXOXVJR2x6WDJOeWIzTnpSRzl0WVdsdUtIVnliQ2tnZTF4dUlDQjJZWElnY25WeWJDQTlJQzllS0Z0Y1hIZGNYQ3RjWEM1Y1hDMWRLem9wS0Q4NlhGd3ZYRnd2S0Z0ZVhGd3ZQeU02WFNvcEtEODZPaWhjWEdRcktTay9LVDh2WEc1Y2JpQWdMeThnYWxGMVpYSjVJQ000TVRNNExDQkpSU0J0WVhrZ2RHaHliM2NnWVc0Z1pYaGpaWEIwYVc5dUlIZG9aVzRnWVdOalpYTnphVzVuWEc0Z0lDOHZJR0VnWm1sbGJHUWdabkp2YlNCM2FXNWtiM2N1Ykc5allYUnBiMjRnYVdZZ1pHOWpkVzFsYm5RdVpHOXRZV2x1SUdoaGN5QmlaV1Z1SUhObGRGeHVJQ0IyWVhJZ1lXcGhlRXh2WTJGMGFXOXVYRzRnSUhSeWVTQjdJR0ZxWVhoTWIyTmhkR2x2YmlBOUlHeHZZMkYwYVc5dUxtaHlaV1lnZlZ4dUlDQmpZWFJqYUNBb1pTa2dlMXh1SUNBZ0lDOHZJRlZ6WlNCMGFHVWdhSEpsWmlCaGRIUnlhV0oxZEdVZ2IyWWdZVzRnUVNCbGJHVnRaVzUwSUhOcGJtTmxJRWxGSUhkcGJHd2diVzlrYVdaNUlHbDBJR2RwZG1WdUlHUnZZM1Z0Wlc1MExteHZZMkYwYVc5dVhHNGdJQ0FnWVdwaGVFeHZZMkYwYVc5dUlEMGdaRzlqZFcxbGJuUXVZM0psWVhSbFJXeGxiV1Z1ZENnZ1hDSmhYQ0lnS1R0Y2JpQWdJQ0JoYW1GNFRHOWpZWFJwYjI0dWFISmxaaUE5SUZ3aVhDSTdYRzRnSUNBZ1lXcGhlRXh2WTJGMGFXOXVJRDBnWVdwaGVFeHZZMkYwYVc5dUxtaHlaV1k3WEc0Z0lIMWNibHh1SUNCMllYSWdZV3BoZUV4dlkxQmhjblJ6SUQwZ2NuVnliQzVsZUdWaktHRnFZWGhNYjJOaGRHbHZiaTUwYjB4dmQyVnlRMkZ6WlNncEtTQjhmQ0JiWFZ4dUlDQWdJQ3dnY0dGeWRITWdQU0J5ZFhKc0xtVjRaV01vZFhKc0xuUnZURzkzWlhKRFlYTmxLQ2tnS1Z4dVhHNGdJSFpoY2lCeVpYTjFiSFFnUFNBaElTaGNiaUFnSUNCd1lYSjBjeUFtSmx4dUlDQWdJQ2dnSUhCaGNuUnpXekZkSUNFOUlHRnFZWGhNYjJOUVlYSjBjMXN4WFZ4dUlDQWdJSHg4SUhCaGNuUnpXekpkSUNFOUlHRnFZWGhNYjJOUVlYSjBjMXN5WFZ4dUlDQWdJSHg4SUNod1lYSjBjMXN6WFNCOGZDQW9jR0Z5ZEhOYk1WMGdQVDA5SUZ3aWFIUjBjRHBjSWlBL0lEZ3dJRG9nTkRRektTa2dJVDBnS0dGcVlYaE1iMk5RWVhKMGMxc3pYU0I4ZkNBb1lXcGhlRXh2WTFCaGNuUnpXekZkSUQwOVBTQmNJbWgwZEhBNlhDSWdQeUE0TUNBNklEUTBNeWtwWEc0Z0lDQWdLVnh1SUNBcFhHNWNiaUFnTHk5amIyNXpiMnhsTG1SbFluVm5LQ2RwYzE5amNtOXpjMFJ2YldGcGJpZ25LM1Z5YkNzbktTQXRQaUFuSUNzZ2NtVnpkV3gwS1Z4dUlDQnlaWFIxY200Z2NtVnpkV3gwWEc1OVhHNWNiaTh2SUUxSlZDQk1hV05sYm5ObElHWnliMjBnYUhSMGNEb3ZMM0JvY0dwekxtOXlaeTltZFc1amRHbHZibk12WW1GelpUWTBYMlZ1WTI5a1pUb3pOVGhjYm1aMWJtTjBhVzl1SUdJMk5GOWxibU1nS0dSaGRHRXBJSHRjYmlBZ0lDQXZMeUJGYm1OdlpHVnpJSE4wY21sdVp5QjFjMmx1WnlCTlNVMUZJR0poYzJVMk5DQmhiR2R2Y21sMGFHMWNiaUFnSUNCMllYSWdZalkwSUQwZ1hDSkJRa05FUlVaSFNFbEtTMHhOVGs5UVVWSlRWRlZXVjFoWldtRmlZMlJsWm1kb2FXcHJiRzF1YjNCeGNuTjBkWFozZUhsNk1ERXlNelExTmpjNE9Tc3ZQVndpTzF4dUlDQWdJSFpoY2lCdk1Td2dieklzSUc4ekxDQm9NU3dnYURJc0lHZ3pMQ0JvTkN3Z1ltbDBjeXdnYVNBOUlEQXNJR0ZqSUQwZ01Dd2daVzVqUFZ3aVhDSXNJSFJ0Y0Y5aGNuSWdQU0JiWFR0Y2JseHVJQ0FnSUdsbUlDZ2haR0YwWVNrZ2UxeHVJQ0FnSUNBZ0lDQnlaWFIxY200Z1pHRjBZVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQXZMeUJoYzNOMWJXVWdkWFJtT0NCa1lYUmhYRzRnSUNBZ0x5OGdaR0YwWVNBOUlIUm9hWE11ZFhSbU9GOWxibU52WkdVb1pHRjBZU3NuSnlrN1hHNWNiaUFnSUNCa2J5QjdJQzh2SUhCaFkyc2dkR2h5WldVZ2IyTjBaWFJ6SUdsdWRHOGdabTkxY2lCb1pYaGxkSE5jYmlBZ0lDQWdJQ0FnYnpFZ1BTQmtZWFJoTG1Ob1lYSkRiMlJsUVhRb2FTc3JLVHRjYmlBZ0lDQWdJQ0FnYnpJZ1BTQmtZWFJoTG1Ob1lYSkRiMlJsUVhRb2FTc3JLVHRjYmlBZ0lDQWdJQ0FnYnpNZ1BTQmtZWFJoTG1Ob1lYSkRiMlJsUVhRb2FTc3JLVHRjYmx4dUlDQWdJQ0FnSUNCaWFYUnpJRDBnYnpFOFBERTJJSHdnYnpJOFBEZ2dmQ0J2TXp0Y2JseHVJQ0FnSUNBZ0lDQm9NU0E5SUdKcGRITStQakU0SUNZZ01IZ3paanRjYmlBZ0lDQWdJQ0FnYURJZ1BTQmlhWFJ6UGo0eE1pQW1JREI0TTJZN1hHNGdJQ0FnSUNBZ0lHZ3pJRDBnWW1sMGN6NCtOaUFtSURCNE0yWTdYRzRnSUNBZ0lDQWdJR2cwSUQwZ1ltbDBjeUFtSURCNE0yWTdYRzVjYmlBZ0lDQWdJQ0FnTHk4Z2RYTmxJR2hsZUdWMGN5QjBieUJwYm1SbGVDQnBiblJ2SUdJMk5Dd2dZVzVrSUdGd2NHVnVaQ0J5WlhOMWJIUWdkRzhnWlc1amIyUmxaQ0J6ZEhKcGJtZGNiaUFnSUNBZ0lDQWdkRzF3WDJGeWNsdGhZeXNyWFNBOUlHSTJOQzVqYUdGeVFYUW9hREVwSUNzZ1lqWTBMbU5vWVhKQmRDaG9NaWtnS3lCaU5qUXVZMmhoY2tGMEtHZ3pLU0FySUdJMk5DNWphR0Z5UVhRb2FEUXBPMXh1SUNBZ0lIMGdkMmhwYkdVZ0tHa2dQQ0JrWVhSaExteGxibWQwYUNrN1hHNWNiaUFnSUNCbGJtTWdQU0IwYlhCZllYSnlMbXB2YVc0b0p5Y3BPMXh1WEc0Z0lDQWdjM2RwZEdOb0lDaGtZWFJoTG14bGJtZDBhQ0FsSURNcElIdGNiaUFnSUNBZ0lDQWdZMkZ6WlNBeE9seHVJQ0FnSUNBZ0lDQWdJQ0FnWlc1aklEMGdaVzVqTG5Oc2FXTmxLREFzSUMweUtTQXJJQ2M5UFNjN1hHNGdJQ0FnSUNBZ0lHSnlaV0ZyTzF4dUlDQWdJQ0FnSUNCallYTmxJREk2WEc0Z0lDQWdJQ0FnSUNBZ0lDQmxibU1nUFNCbGJtTXVjMnhwWTJVb01Dd2dMVEVwSUNzZ0p6MG5PMXh1SUNBZ0lDQWdJQ0JpY21WaGF6dGNiaUFnSUNCOVhHNWNiaUFnSUNCeVpYUjFjbTRnWlc1ak8xeHVmVnh1SUNBZ0lISmxkSFZ5YmlCeVpYRjFaWE4wTzF4dUx5OVZUVVFnUms5UFZFVlNJRk5VUVZKVVhHNTlLU2s3WEc0dkwxVk5SQ0JHVDA5VVJWSWdSVTVFWEc0aUxDSW5kWE5sSUhOMGNtbGpkQ2M3WEc1Y2JseHVkbUZ5SUhKbGNYVmxjM1FnUFNCeVpYRjFhWEpsS0NkaWNtOTNjMlZ5TFhKbGNYVmxjM1FuS1R0Y2JseHVkbUZ5SUhCdmNHbHNlU0E5SUhkcGJtUnZkeTV3YjNCcGJIa2dmSHdnZTMwN1hHNWNiblpoY2lCZlpYSnliM0lnUFNCbWRXNWpkR2x2YmlodGMyY3NJR1Z5Y205eUtTQjdYRzRnSUhKbGRIVnliaUI3YlhObk9pQnRjMmNzSUdWeWNtOXlPaUJsY25KdmNuMDdYRzU5TzF4dUlDQmNiblpoY2lCZmNtVnhkV1Z6ZENBOUlHWjFibU4wYVc5dUtHMWxkR2h2WkN3Z2NHRjBhQ3dnWkdGMFlTd2dZMkZzYkdKaFkyc3BJSHRjYmlBZ2RtRnlJRVJGUmtGVlRGUmZWVkpNSUQwZ0oyaDBkSEJ6T2k4dmNHOXdhV3g1TG1OdmJTYzdYRzRnSUhaaGNpQkVSVVpCVlV4VVgwSkJVMFZmVUVGVVNDQTlJQ2N2WVhCcEp6dGNibHh1SUNCMllYSWdZWEJwVlhKc0lEMGdjRzl3YVd4NUxtRndhUzVoY0dsVmNtdzdYRzRnSUdsbUtDRndiM0JwYkhrdVlYQnBMbUZ3YVZWeWJDa2dlMXh1SUNBZ0lHRndhVlZ5YkNBOUlFUkZSa0ZWVEZSZlZWSk1PMXh1SUNCOUlGeHVJQ0JoY0dsVmNtd2dQU0JoY0dsVmNtd2dLeUJFUlVaQlZVeFVYMEpCVTBWZlVFRlVTRHRjYmx4dUlDQjJZWElnY0dGeVlXMXpJRDBnZTF4dUlDQWdJRzFsZEdodlpEb2diV1YwYUc5a0xGeHVJQ0FnSUdobFlXUmxjbk02SUhzZ1hHNGdJQ0FnSUNBblFYVjBhRzl5YVhwaGRHbHZiaWM2SUNkVWIydGxiaUFuSUNzZ2NHOXdhV3g1TG1Gd2FTNTBiMnRsYml4Y2JpQWdJQ0FnSUNkQlkyTmxjSFFuT2lBbllYQndiR2xqWVhScGIyNHZhbk52Ymljc1hHNGdJQ0FnZlN4Y2JpQWdJQ0IxY213NklHRndhVlZ5YkNBcklIQmhkR2d2THlBcklDYy9abTl5YldGMFBXRndhU2RjYmlBZ2ZUdGNiaUFnSUNBZ0lGeHVJQ0JwWmlnbmNYTW5JR2x1SUdSaGRHRXBJSHRjYmlBZ0lDQndZWEpoYlhOYkozRnpKMTBnUFNCa1lYUmhXeWR4Y3lkZE8xeHVJQ0FnSUhCaGNtRnRjMXNuYW5OdmJpZGRJRDBnZEhKMVpUdGNiaUFnZlZ4dUlDQnBaaWduYW5OdmJpY2dhVzRnWkdGMFlTa2dlMXh1SUNBZ0lIQmhjbUZ0YzFzblltOWtlU2RkSUQwZ1pHRjBZVnNuYW5OdmJpZGRPMXh1SUNBZ0lIQmhjbUZ0YzFzbmFuTnZiaWRkSUQwZ2RISjFaVHRjYmlBZ2ZWeHVJQ0JwWmlnblptOXliU2NnYVc0Z1pHRjBZU2tnZTF4dUlDQWdJSEJoY21GdGMxc25abTl5YlVSaGRHRW5YU0E5SUdSaGRHRmJKMlp2Y20wblhUdGNiaUFnZlZ4dUlDQmNiaUFnY21WeGRXVnpkQ2h3WVhKaGJYTXNJR1oxYm1OMGFXOXVLR1Z5Y2l3Z2FIUjBjRkpsYzNCdmJuTmxMQ0JpYjJSNUtTQjdYRzRnSUNBZ2FXWW9aWEp5S1Z4dUlDQWdJQ0FnY21WMGRYSnVJR05oYkd4aVlXTnJLRjlsY25KdmNpZ25VbVZ4ZFdWemRDQmxjbkp2Y2ljc0lHVnljaWtwTzF4dUlDQWdJQ0FnWEc0Z0lDQWdhV1lvYUhSMGNGSmxjM0J2Ym5ObExuTjBZWFIxYzBOdlpHVWdQVDA5SURRd01TbGNiaUFnSUNBZ0lISmxkSFZ5YmlCallXeHNZbUZqYXloZlpYSnliM0lvSjBsdWRtRnNhV1FnUVZCSklIUnZhMlZ1SnlrcE8xeHVYRzRnSUNBZ2FXWW9hSFIwY0ZKbGMzQnZibk5sTG5OMFlYUjFjME52WkdVZ1BUMDlJRFF3TUNsY2JpQWdJQ0FnSUhKbGRIVnliaUJqWVd4c1ltRmpheWhmWlhKeWIzSW9KMEpoWkNCeVpYRjFaWE4wSnl3Z1ltOWtlU2twTzF4dUlDQWdJQ0FnWEc0Z0lDQWdkSEo1SUh0Y2JpQWdJQ0FnSUhaaGNpQnlaWE53YjI1elpTQTlJR0p2WkhrN1hHNGdJQ0FnSUNCcFppaDBlWEJsYjJZZ1ltOWtlU0E5UFQwZ0ozTjBjbWx1WnljcFhHNGdJQ0FnSUNBZ0lISmxjM0J2Ym5ObElEMGdTbE5QVGk1d1lYSnpaU2hpYjJSNUtUdGNiaUFnSUNCOUlHTmhkR05vS0dVcElIdGNiaUFnSUNBZ0lISmxkSFZ5YmlCallXeHNZbUZqYXloZlpYSnliM0lvSjBWeWNtOXlPaUFuSzJVc0lHVXBJQ2xjYmlBZ0lDQjlYRzVjYmlBZ0lDQmpZV3hzWW1GamF5aHVkV3hzTENCeVpYTndiMjV6WlNrN1hHNWNiaUFnZlNrN1hHNTlPMXh1WEc1MllYSWdjR0ZqYTBOaGJHTjFiR0YwYVc5dWN5QTlJR1oxYm1OMGFXOXVLR05oYkdOMWJHRjBhVzl1Y3lrZ2UxeHVJQ0IyWVhJZ2NHRmphMlZrVTNSeUlEMGdKeWM3WEc0Z0lHTmhiR04xYkdGMGFXOXVjeTVtYjNKRllXTm9LR1oxYm1OMGFXOXVLR1lzSUdrcElIdGNiaUFnSUNCMllYSWdabWxzZEdWeVUzUnlJRDBnSnljN1hHNGdJQ0FnYVdZb2FTQStJREFwWEc0Z0lDQWdJQ0JtYVd4MFpYSlRkSElnS3owZ0oxOWZKenRjYmx4dUlDQWdJR1pwYkhSbGNsTjBjaUFyUFNCbVd5ZGpiMngxYlc0blhTQXJJQ2NoSnlBcklHWmJKMk5oYkdOMWJHRjBhVzl1SjEwN1hHNGdJQ0FnY0dGamEyVmtVM1J5SUNzOUlHWnBiSFJsY2xOMGNseHVJQ0I5S1R0Y2JpQWdjbVYwZFhKdUlIQmhZMnRsWkZOMGNqdGNibjA3SUNBZ0lDQWdJRnh1SUNBZ0lDQWdJQ0JjYm5CdmNHbHNlUzVoY0drZ1BTQjdYRzRnSUdGa1pGTnZkWEpqWlRvZ1puVnVZM1JwYjI0b2MyOTFjbU5sUkdGMFlTd2dZMklwSUh0Y2JpQWdJQ0JjYmlBZ0lDQjJZWElnWkdGMFlTQTlJSHQ5TzF4dUlDQWdJRnNuWTI5c2RXMXVjeWNzSUNkMGFYUnNaU2NzSUNka1pYTmpjbWx3ZEdsdmJpZGRMbVp2Y2tWaFkyZ29ablZ1WTNScGIyNG9hMlY1S1NCN1hHNGdJQ0FnSUNCcFppaHJaWGtnYVc0Z2MyOTFjbU5sUkdGMFlTbGNiaUFnSUNBZ0lDQWdaR0YwWVZ0clpYbGRJRDBnYzI5MWNtTmxSR0YwWVZ0clpYbGRPMXh1SUNBZ0lIMHBYRzVjYmlBZ0lDQnBaaWduZFhKc0p5QnBiaUJ6YjNWeVkyVkVZWFJoS1NCN1hHNGdJQ0FnSUNCa1lYUmhXeWQxY213blhTQTlJSE52ZFhKalpVUmhkR0ZiSjNWeWJDZGRYRzRnSUNBZ0lDQmZjbVZ4ZFdWemRDZ25VRTlUVkNjc0lDY3ZjMjkxY21ObGN5OG5MQ0I3YW5OdmJqb2daR0YwWVgwc0lHTmlLVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQmxiSE5sSUdsbUtDZGpiMjV1WldOMGFXOXVYM04wY21sdVp5Y2dhVzRnYzI5MWNtTmxSR0YwWVNBcElIdGNiaUFnSUNBZ0lHUmhkR0ZiSjJOdmJtNWxZM1JwYjI1ZmMzUnlhVzVuSjEwZ1BTQnpiM1Z5WTJWRVlYUmhXeWRqYjI1dVpXTjBhVzl1WDNOMGNtbHVaeWRkWEc0Z0lDQWdJQ0JrWVhSaFd5ZHhkV1Z5ZVNkZElEMGdjMjkxY21ObFJHRjBZVnNuY1hWbGNua25YVnh1SUNBZ0lDQWdYM0psY1hWbGMzUW9KMUJQVTFRbkxDQW5MM052ZFhKalpYTXZKeXdnZTJwemIyNDZJR1JoZEdGOUxDQmpZaWs3WEc0Z0lDQWdmVnh1SUNBZ0lGeHVJQ0FnSUdWc2MyVmNiaUFnSUNBZ0lHTmlLQ2QxY213Z2IzSWdZMjl1Ym1WamRHbHZibDl6ZEhKcGJtY2dhWE1nY21WeGRXbHlaV1FuS1R0Y2JpQWdmU3hjYmx4dVhHNGdJR2RsZEZOdmRYSmpaWE02SUdaMWJtTjBhVzl1S0dOaUtTQjdYRzRnSUNBZ1gzSmxjWFZsYzNRb0owZEZWQ2NzSUNjdmMyOTFjbU5sY3k4bkxDQjdmU3dnWTJJcE8xeHVJQ0I5TEZ4dVhHNWNiaUFnWjJWMFUyOTFjbU5sT2lCbWRXNWpkR2x2YmloemIzVnlZMlZKWkN3Z1kySXBJSHRjYmlBZ0lDQmZjbVZ4ZFdWemRDZ25SMFZVSnl3Z0p5OXpiM1Z5WTJWekx5Y3JjMjkxY21ObFNXUXJKeThuTENCN2ZTd2dZMklwTzF4dUlDQjlMRnh1WEc1Y2JpQWdaMlYwU1c1emFXZG9kSE02SUdaMWJtTjBhVzl1S0hOdmRYSmpaVWxrTENCd1lYSmhiWE1zSUdOaUtTQjdYRzRnSUNBZ2NHRnlZVzF6SUQwZ2NHRnlZVzF6SUh4OElIdDlPMXh1SUNBZ0lIWmhjaUJ3WVhsc2IyRmtJRDBnZXlkemIzVnlZMlVuT2lCemIzVnlZMlZKWkgwN1hHNWNiaUFnSUNCYkoyTnZiSFZ0Ym5NbkxDQW5hVzV6YVdkb2RGOTBlWEJsY3ljc0lDZHBibk5wWjJoMFgyRmpkR2x2Ym5NblhTNW1iM0pGWVdOb0tHWjFibU4wYVc5dUtHdGxlU2tnZTF4dUlDQWdJQ0FnYVdZb2EyVjVJR2x1SUhCaGNtRnRjeWxjYmlBZ0lDQWdJQ0FnY0dGNWJHOWhaRnRyWlhsZElEMGdjR0Z5WVcxelcydGxlVjB1YW05cGJpZ25MQ2NwWEc0Z0lDQWdmU2s3WEc1Y2JpQWdJQ0JwWmlnbmMybHVaMnhsSnlCcGJpQndZWEpoYlhNcElIdGNiaUFnSUNBZ0lIQmhlV3h2WVdSYkozTnBibWRzWlNkZElEMGdjR0Z5WVcxeld5ZHphVzVuYkdVblhUdGNiaUFnSUNCOVhHNWNiaUFnSUNCcFppZ25ZMkZzWTNWc1lYUnBiMjV6SnlCcGJpQndZWEpoYlhNcElIdGNiaUFnSUNBZ0lIQmhlV3h2WVdSYkoyTmhiR04xYkdGMGFXOXVjeWRkSUQwZ2NHRmphME5oYkdOMWJHRjBhVzl1Y3lod1lYSmhiWE5iSjJOaGJHTjFiR0YwYVc5dWN5ZGRLVHRjYmlBZ0lDQjlYRzVjYmlBZ0lDQmZjbVZ4ZFdWemRDZ25SMFZVSnl3Z0p5OXBibk5wWjJoMGN5OG5MQ0I3Y1hNNklIQmhlV3h2WVdSOUxDQmpZaWs3WEc0Z0lIMHNYRzVjYmlBZ1oyVjBTVzV6YVdkb2REb2dablZ1WTNScGIyNG9hVzV6YVdkb2RFbGtMQ0J3WVhKaGJYTXNJR05pS1NCN1hHNGdJQ0FnZG1GeUlIQmhlV3h2WVdRZ1BTQjdmVHNnSUNBZ1hHNGdJQ0FnWDNKbGNYVmxjM1FvSjBkRlZDY3NJQ2N2YVc1emFXZG9kSE12SnlBcklHbHVjMmxuYUhSSlpDQXJJQ2N2Snl3Z2UzRnpPaUJ3WVhsc2IyRmtmU3dnWTJJcE8xeHVJQ0I5TEZ4dVhHNGdJSE5sZEZSdmEyVnVPaUJtZFc1amRHbHZiaWgwYjJ0bGJpa2dlMXh1SUNBZ0lIUm9hWE11ZEc5clpXNGdQU0IwYjJ0bGJqdGNiaUFnZlN4Y2JseHVJQ0J6WlhSVlVrdzZJR1oxYm1OMGFXOXVLR0Z3YVZWeWJDa2dlMXh1SUNBZ0lIUm9hWE11WVhCcFZYSnNJRDBnWVhCcFZYSnNPMXh1SUNCOVhHNTlYRzVjYm5kcGJtUnZkeTV3YjNCcGJIa2dQU0J3YjNCcGJIazdYRzV0YjJSMWJHVXVaWGh3YjNKMGN5QTlJSEJ2Y0dsc2VUdGNiaUpkZlE9PVxuIiwiJ3VzZSBzdHJpY3QnO1xuICAgIFxuKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5ID0gd2luZG93LnBvcGlseSB8fCB7fTtcbiAgcG9waWx5LmNoYXJ0ID0ge307XG4gIHBvcGlseS5jaGFydC5jaGFydFR5cGVzID0ge307XG4gIHBvcGlseS5jaGFydC5iYXNlQ2hhcnQgPSB7XG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgIHN0eWxlOiAnZGV0YWlsJyxcbiAgICAgICAgICByb3RhdGVkOiBmYWxzZSxcbiAgICAgICAgICByZWRyYXdPblJlc2l6ZTogdHJ1ZSxcbiAgICAgICAgICBjb2xvcnM6IFtcbiAgICAgICAgICAgICcjNTRDODhBJywgJyNCQkQ0NDInLCAnIzg1QzRFRCcsICcjRkZDNTlDJywgJyM0RkIyN0EnLCAnIzc0MTY5OScsICcjRkY3MzY0JyxcbiAgICAgICAgICAgICcjRjFDNDBGJywgJyNEQzgzNDUnLCAnI0U3NEMzQycsICcjMDk2QzM0JywgJyM0RDE1NjcnLCAnIzk4NDYwQycsICcjREFGMTZCJyxcbiAgICAgICAgICAgICcjRjlENTQzJywgJyM5NDc3MDAnLCAnIzE4ODg0OScsICcjQ0MzQTdGJywgJyNBMDE1MDcnLCAnI0Y5RDU0MycsICcjREI1Qzk4JyxcbiAgICAgICAgICAgICcjMzQ5OURCJywgJyNGRjk4OEUnLCAnIzMxOUQ2MCcsICcjQkM5ODA1JywgJyNFOUY5OTgnLCAnIzYyOEUwQicsICcjMUU0QzdDJyxcbiAgICAgICAgICAgICcjN0VDRUExJywgJyM0Rjc4QTMnLCAnI0MwMTQ2NScsICcjRjFDNDBGJywgJyMwRjg1RDEnLCAnIzlBNTFCNycsICcjN0RBMEM0JyxcbiAgICAgICAgICAgICcjQkI3RkQyJywgJyMzNDYxOEYnLCAnIzk0NzcwMCcsICcjRkZFMjZDJywgJyM5MjA5NEEnLCAnI0JGNjMyMicsICcjNThBREUzJyxcbiAgICAgICAgICAgICcjOUZCOTIxJywgJyMwNjY1QTInLCAnIzgzMzNBMicsICcjMEYzODYzJywgJyNCQzk4MDUnLCAnI0ZGRTI2QycsICcjRTk4OUI2JyxcbiAgICAgICAgICAgICcjQzkyOTE4JywgJyNGQUE5NkYnXG4gICAgICAgICAgXSxcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBmYWxzZSxcbiAgICAgICAgICB4QXhpczogdHJ1ZSxcbiAgICAgICAgICB5QXhpczogdHJ1ZSxcbiAgICAgICAgICBmb3JtYXR0ZXJzOiBbXVxuICAgICAgfSxcbiAgICAgIGNhdGVnb3J5TGltaXQ6IDUwMCxcbiAgICAgIGJhckJ1YmJsZUN1dG9mZjogMzAsXG4gICAgICBjaGFydFBhZGRpbmc6IGZ1bmN0aW9uKCkgeyByZXR1cm4ge2xlZnJpZ2h0OiAwLCB0b3A6IDAgfTsgfVxuICAgIH0sXG4gICAgcmVzaXplOiBmdW5jdGlvbihjaGFydE9iaiwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgLy9jb25zb2xlLmxvZygxKTtcbiAgICAgIGNoYXJ0T2JqLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9LFxuICAgIGZvcm1hdENoYXJ0RGF0YTogZnVuY3Rpb24oYXhpc0Fzc2lnbm1lbnRzLCBhcGlSZXNwb25zZSwgY2hhcnRhYmxlQ29sdW1ucykge1xuICAgICAgdmFyIG5ld0RhdGEgPSB7fTtcbiAgICAgIHZhciBwb3NzaWJsZUF4aXMgPSBbJ3gnLCd5JywneiddO1xuXG4gICAgICBuZXdEYXRhLmNoYXJ0RGF0YSA9IHt9O1xuICAgICAgbmV3RGF0YS5jaGFydERhdGEubWV0YWRhdGEgPSB7fTtcbiAgICAgIG5ld0RhdGEuY2hhcnREYXRhLmRlZmF1bHRWYXJpYXRpb24gPSBhcGlSZXNwb25zZS5kZWZhdWx0X3ZhcmlhdGlvbjtcbiAgICAgIG5ld0RhdGEuY2hhcnREYXRhLmNhbGN1bGF0aW9uID0gYXBpUmVzcG9uc2UuY2FsY3VsYXRpb247XG5cbiAgICAgIF8uZWFjaChwb3NzaWJsZUF4aXMsIGZ1bmN0aW9uKGF4aXMpIHtcbiAgICAgICAgaWYoYXhpc0Fzc2lnbm1lbnRzLmhhc093blByb3BlcnR5KGF4aXMpKSB7XG4gICAgICAgICAgdmFyIHZhbHVlcyA9IGF4aXNBc3NpZ25tZW50c1theGlzXS52YWx1ZXM7XG4gICAgICAgICAgaWYoYXhpc0Fzc2lnbm1lbnRzW2F4aXNdLmRhdGFfdHlwZSA9PT0gJ2Nvb3JkaW5hdGUnKSB7XG4gICAgICAgICAgICB2YWx1ZXMgPSBfLm1hcCh2YWx1ZXMsIEpTT04ucGFyc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ld0RhdGEuY2hhcnREYXRhW2F4aXNdID0ge1xuICAgICAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgICAgICBsYWJlbDogYXhpc0Fzc2lnbm1lbnRzW2F4aXNdLmNvbHVtbl9oZWFkZXIsXG4gICAgICAgICAgICBkYXRhVHlwZTogYXhpc0Fzc2lnbm1lbnRzW2F4aXNdLmRhdGFfdHlwZSxcbiAgICAgICAgICAgIHBvc3NpYmxlRGF0YVR5cGVzOiBheGlzQXNzaWdubWVudHNbYXhpc10ucG9zc2libGVfZGF0YV90eXBlc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG5ld0RhdGEuY2hhcnREYXRhLmNvbHVtbnMgPSBfLm1hcChjaGFydGFibGVDb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZXM6IGNvbHVtbi52YWx1ZXMsXG4gICAgICAgICAgbGFiZWw6IGNvbHVtbi5jb2x1bW5faGVhZGVyLFxuICAgICAgICAgIGRhdGFUeXBlOiBjb2x1bW4uZGF0YV90eXBlLFxuICAgICAgICAgIHBvc3NpYmxlRGF0YVR5cGVzOiBjb2x1bW4ucG9zc2libGVfZGF0YV90eXBlc1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYoYXBpUmVzcG9uc2UuaW5zaWdodF9tZXRhZGF0YSkge1xuICAgICAgICBuZXdEYXRhLmNoYXJ0RGF0YS5tZXRhZGF0YSA9IGFwaVJlc3BvbnNlLmluc2lnaHRfbWV0YWRhdGE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXdEYXRhO1xuICAgIH0sXG4gICAgY2hhcnRhYmxlQ29sdW1uczogZnVuY3Rpb24oY29sdW1ucyx2YWx1ZUZpbHRlcnMsaGlkZUNvbHVtbnMpIHtcbiAgICAgIHZhciBmaWx0ZXJlZCA9IF8ua2V5cyh2YWx1ZUZpbHRlcnMpO1xuICAgICAgdmFyIGNoYXJ0YWJsZXMgPSBfLmZpbHRlcihjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICBcbiAgICAgICAgICBpZihfLmNvbnRhaW5zKGhpZGVDb2x1bW5zLGNvbHVtbi5jb2x1bW5faGVhZGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZighXy5jb250YWlucyhmaWx0ZXJlZCxjb2x1bW4uY29sdW1uX2hlYWRlcikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKF8uaXNBcnJheSh2YWx1ZUZpbHRlcnNbY29sdW1uLmNvbHVtbl9oZWFkZXJdKSAmJiB2YWx1ZUZpbHRlcnNbY29sdW1uLmNvbHVtbl9oZWFkZXJdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNoYXJ0YWJsZXM7XG4gICAgfSxcbiAgICB2YWx1ZUZpbHRlcnM6IGZ1bmN0aW9uKHRyYW5zZm9ybWF0aW9ucykge1xuICAgICAgaWYoXy5pc1VuZGVmaW5lZCh0cmFuc2Zvcm1hdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIH1cblxuICAgICAgdmFyIGZpbHRlcnMgPSB7fTtcbiAgICAgIF8uZWFjaCh0cmFuc2Zvcm1hdGlvbnMsZnVuY3Rpb24odHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgaWYoXy5pc1VuZGVmaW5lZCh0cmFuc2Zvcm1hdGlvbi5vcCkgfHwgXyhbJ2VxJywnaW4nXSkuY29udGFpbnModHJhbnNmb3JtYXRpb24ub3ApKSB7XG4gICAgICAgICAgZmlsdGVyc1t0cmFuc2Zvcm1hdGlvbi5jb2x1bW5dID0gdHJhbnNmb3JtYXRpb24udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZmlsdGVycztcbiAgICB9XG4gIH07XG5cbiAgcG9waWx5LmNoYXJ0LmNyZWF0ZSA9IGZ1bmN0aW9uKGFwaVJlc3BvbnNlKSB7XG4gICAgd2luZG93LmFwaVJlc3BvbnNlID0gYXBpUmVzcG9uc2U7XG4gICAgdmFyIGRzID0gcG9waWx5LmRhdGFzZXQoYXBpUmVzcG9uc2UpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGFzZXQgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGRzO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgZHJhdzogZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xuICAgICAgICBcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICB2YXIgY2FsY3VsYXRpb24gPSBhcGlSZXNwb25zZS5jYWxjdWxhdGlvbjtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNoYXJ0IHR5cGUgYmFzZWQgb24gdGhlIGRhdGFcbiAgICAgICAgdmFyIHZhbHVlRmlsdGVycyA9IHBvcGlseS5jaGFydC5iYXNlQ2hhcnQudmFsdWVGaWx0ZXJzKG9wdGlvbnMudHJhbnNmb3JtYXRpb25zKTtcbiAgICAgICAgdmFyIGNoYXJ0YWJsZUNvbHVtbnMgPSBwb3BpbHkuY2hhcnQuYmFzZUNoYXJ0LmNoYXJ0YWJsZUNvbHVtbnMoZHMuZ2V0Q29sdW1ucygpLHZhbHVlRmlsdGVycyxvcHRpb25zLmhpZGVDb2x1bW5zfHxbXSk7XG4gICAgICAgIHZhciBjaGFydFR5cGUgPSBwb3BpbHkuY2hhcnQuYW5hbHl6ZS5jaGFydFR5cGVGb3JEYXRhKGNoYXJ0YWJsZUNvbHVtbnMsIGNhbGN1bGF0aW9uLCBvcHRpb25zKTtcbiAgICAgICAgdmFyIGNoYXJ0Q2xhc3MgPSBwb3BpbHkuY2hhcnQuY2hhcnRUeXBlc1tjaGFydFR5cGVdO1xuICAgICAgICBcbiAgICAgICAgLy8gQXNzaWduIHRoZSBkYXRhIHRvIGF4aXMgKHBvdGVudGlhbGx5IG1vZGlmeWluZyBpdHMgc3RydWN0dXJlKSBcbiAgICAgICAgLy8gYW5kIG1hbmlwdWxhdGUgdGhlIGZvcm1hdCBleHBlY3RlZCBieSBjaGFydGluZyBmdW5jdGlvbnNcbiAgICAgICAgdmFyIGF4aXNBc3NpZ25tZW50cyA9IGNoYXJ0Q2xhc3MuYXNzaWduQXhpcyhjaGFydGFibGVDb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucyk7XG4gICAgICAgIHZhciBmb3JtYXR0ZWREYXRhID0gcG9waWx5LmNoYXJ0LmJhc2VDaGFydC5mb3JtYXRDaGFydERhdGEoYXhpc0Fzc2lnbm1lbnRzLCBhcGlSZXNwb25zZSwgY2hhcnRhYmxlQ29sdW1ucyk7XG5cbiAgICAgICAgLy8gQnVpbGQgYSB0aXRsZVxuICAgICAgICB2YXIgbGFiZWxzID0gcG9waWx5LmNoYXJ0LmdlbmVyYXRlTGFiZWxzKGNhbGN1bGF0aW9uLCBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS5jb2x1bW5zLCBvcHRpb25zLnRyYW5zZm9ybWF0aW9ucyB8fCBbXSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY3VzdG9tIENTUyBpZiByZXF1ZXN0ZWQgYnkgdXNlclxuICAgICAgICB2YXIgZXh0cmFDc3MgPSAnJztcbiAgICAgICAgXG4gICAgICAgIF8uZWFjaChfLmtleXMocG9waWx5LmNoYXJ0LmJhc2VDaGFydC5kZWZhdWx0cy5vcHRpb25zKSwgZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgaWYoIShrZXkgaW4gb3B0aW9ucykpIHtcbiAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHBvcGlseS5jaGFydC5iYXNlQ2hhcnQuZGVmYXVsdHMub3B0aW9uc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9wdGlvbnMudW5pcXVlQ2xhc3NOYW1lID0gXy51bmlxdWVJZCgncG9waWx5LWlkLScpO1xuXG4gICAgICAgIGlmKHR5cGVvZiBlbGVtZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9waWx5Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25zLnVuaXF1ZUNsYXNzTmFtZSk7XG4gICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGlmKG9wdGlvbnMudGl0bGUpIHtcbiAgICAgICAgICB2YXIgdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICB0aXRsZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9waWx5LXRpdGxlJyk7XG4gICAgICAgICAgaWYob3B0aW9ucy50aXRsZSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHRpdGxlRWxlbWVudC5pbm5lckhUTUwgPSBsYWJlbHMudGl0bGU7XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGl0bGVFbGVtZW50LmlubmVySFRNTCA9IG9wdGlvbnMudGl0bGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRpdGxlRWxlbWVudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyIHRpdGxlQ3NzID0gJyc7XG4gICAgICAgICAgaWYob3B0aW9ucy50aXRsZUZvbnRTaXplKVxuICAgICAgICAgICAgdGl0bGVDc3MgKz0gJ2ZvbnQtc2l6ZTogJytvcHRpb25zLnRpdGxlRm9udFNpemUrJzsnO1xuICAgICAgICAgIGlmKG9wdGlvbnMudGl0bGVGb250RmFtaWx5KVxuICAgICAgICAgICAgdGl0bGVDc3MgKz0gJ2ZvbnQtZmFtaWx5OiAnK29wdGlvbnMudGl0bGVGb250RmFtaWx5Kyc7JztcbiAgICAgICAgICBpZihvcHRpb25zLnRpdGxlRm9udENvbG9yKVxuICAgICAgICAgICAgdGl0bGVDc3MgKz0gJ2NvbG9yOiAnK29wdGlvbnMudGl0bGVGb250Q29sb3IrJzsnO1xuICAgICAgICAgIGlmKHRpdGxlQ3NzKVxuICAgICAgICAgICAgZXh0cmFDc3MgKz0gJy4nK29wdGlvbnMudW5pcXVlQ2xhc3NOYW1lKyAnIC5wb3BpbHktdGl0bGUgeycrdGl0bGVDc3MrJ30nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB2YXIgY2hhcnRUZXh0Q3NzID0gJyc7XG4gICAgICAgIGlmKG9wdGlvbnMuY2hhcnRGb250U2l6ZSlcbiAgICAgICAgICBjaGFydFRleHRDc3MgKz0gJ2ZvbnQtc2l6ZTogJytvcHRpb25zLmNoYXJ0Rm9udFNpemUrJzsnO1xuICAgICAgICBpZihvcHRpb25zLmNoYXJ0Rm9udEZhbWlseSlcbiAgICAgICAgICBjaGFydFRleHRDc3MgKz0gJ2ZvbnQtZmFtaWx5OiAnK29wdGlvbnMuY2hhcnRGb250RmFtaWx5Kyc7JztcbiAgICAgICAgaWYob3B0aW9ucy5jaGFydEZvbnRDb2xvcilcbiAgICAgICAgICBjaGFydFRleHRDc3MgKz0gJ2ZpbGw6ICcrb3B0aW9ucy5jaGFydEZvbnRDb2xvcisnOyc7XG4gICAgICAgIGlmKGNoYXJ0VGV4dENzcylcbiAgICAgICAgICBleHRyYUNzcyArPSAnLicrb3B0aW9ucy51bmlxdWVDbGFzc05hbWUrICcgdGV4dCB7JytjaGFydFRleHRDc3MrJ30nO1xuXG4gICAgICAgIGlmKG9wdGlvbnMuY2FyZEJhY2tncm91bmRDb2xvcikge1xuICAgICAgICAgIGV4dHJhQ3NzICs9ICcuJytvcHRpb25zLnVuaXF1ZUNsYXNzTmFtZSsgJy5wb3BpbHkge2JhY2tncm91bmQtY29sb3I6ICcrb3B0aW9ucy5jYXJkQmFja2dyb3VuZENvbG9yKyd9JztcbiAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICBpZihleHRyYUNzcykge1xuICAgICAgICAgIHZhciBzdHlsZSA9IHBvcGlseS5jaGFydC51dGlscy5jcmVhdGVTdHlsZUVsZW1lbnQoZXh0cmFDc3MpO1xuICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgICB9XG4gIFxuICAgICAgICB2YXIgY2hhcnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY2hhcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcGlseS1jaGFydGFyZWEnKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjaGFydEVsZW1lbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVuZGVyIHRoZSBjaGFydFxuICAgICAgICB2YXIgY2hhcnQgPSBjaGFydENsYXNzLnJlbmRlcihjaGFydEVsZW1lbnQsIG9wdGlvbnMsIGZvcm1hdHRlZERhdGEpO1xuICAgICAgICByZXR1cm4gY2hhcnQ7XG4gICAgICAgIFxuICAgICAgfSxcbiAgICAgIFxuICAgIH1cbiAgXG4gIH0gXG5cbiAgcG9waWx5LmNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIGFwaVJlc3BvbnNlLCBvcHRpb25zKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIFxuICAgIGlmKG9wdGlvbnMuZmlsdGVycyAmJiAhb3B0aW9ucy50cmFuc2Zvcm1hdGlvbnMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdmaWx0ZXJzIHByb3BydHR5IGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSByZW5hbWUgaXQgdG8gdHJhbnNmb3JtYXRpb25zJylcbiAgICAgIG9wdGlvbnMudHJhbnNmb3JtYXRpb25zID0gb3B0aW9ucy5maWx0ZXJzO1xuICAgIH0gICAgICBcbiAgICB2YXIgY2hhcnQgPSBwb3BpbHkuY2hhcnQuY3JlYXRlKGFwaVJlc3BvbnNlKTtcbiAgICB2YXIgZHMgPSBjaGFydC5kYXRhc2V0KCk7XG5cbiAgICBpZihvcHRpb25zLnZhcmlhdGlvbikge1xuICAgICAgY29uc29sZS5sb2cob3B0aW9ucy52YXJpYXRpb24pO1xuICAgICAgZHMuYXNzaWduVmFyaWF0aW9uKG9wdGlvbnMudmFyaWF0aW9uKTtcbiAgICB9XG4gICAgXG4gICAgaWYob3B0aW9ucy50cmFuc2Zvcm1hdGlvbnMpIHtcbiAgICAgIHBvcGlseS5jaGFydC5hcHBseVRyYW5zZm9ybWF0aW9ucyhkcywgb3B0aW9ucyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjaGFydC5kcmF3KGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgIFxuICB9O1xuXG4gIHBvcGlseS5jaGFydC5sb2FkaW5nTWVzc2FnZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgICBpZih0eXBlb2YgZWxlbWVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7XG4gICAgfVxuICAgIHZhciBoZWlnaHQgPSAob3B0aW9ucy5oZWlnaHQgfHwgMzIwKTtcblxuICAgIHZhciBsb2FkZXJCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxvYWRlckJveC5jbGFzc0xpc3QuYWRkKCdwb3BpbHktbG9hZGluZycpO1xuICAgIGxvYWRlckJveC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDogJytoZWlnaHQrJ3B4OyBsaW5lLWhlaWdodDogJytoZWlnaHQrJ3B4JztcblxuXG4gICAgdmFyIGlubmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaW5uZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcGlseS1sb2FkaW5nLWlubmVyJyk7XG4gICAgXG4gICAgdmFyIHN2Z0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICBzdmdFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcGlseS1zcGlubmVyJyk7XG4gICAgc3ZnRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzY1cHgnKTtcbiAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzY1cHgnKTtcbiAgICBzdmdFbGVtZW50LnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgNjYgNjYnKTtcbiAgICBcbiAgICB2YXIgY2lyY2xlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwiY2lyY2xlXCIpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdwb3BpbHktc3Bpbm5lci1wYXRoJyk7XG4gICAgY2lyY2xlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnbm9uZScpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnNicpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHJva2UtbGluZWNhcCcsICdyb3VuZCcpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeCcsICczMycpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeScsICczMycpO1xuICAgIGNpcmNsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdyJywgJzMwJyk7XG4gICAgc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChjaXJjbGVFbGVtZW50KTtcbiAgICBpbm5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoc3ZnRWxlbWVudCk7XG4gICAgXG4gICAgaWYob3B0aW9ucy5wb2xsKSB7XG4gICAgICB2YXIgdGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgdGV4dEVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdwb3BpbHktbG9hZGluZy10ZXh0Jyk7XG4gICAgICB0ZXh0RWxlbWVudC5pbm5lckhUTUwgPSAnV2XigJlyZSBkb2luZyBzb21lIGNhbGN1bGF0aW9ucyB0byBtYWtlIHRoaXMgY2hhcnQgcG9zc2libGUuIE9uZSBtb21lbnQuLi4nO1xuICAgICAgaW5uZXJFbGVtZW50LmFwcGVuZENoaWxkKHRleHRFbGVtZW50KTtcbiAgICB9XG4gICAgICBcbiAgICBsb2FkZXJCb3guYXBwZW5kQ2hpbGQoaW5uZXJFbGVtZW50KTtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobG9hZGVyQm94KTtcbiAgfTtcblxuICB2YXIgZ2V0VGhlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgc2x1Zywgc2VydmVyT3B0aW9ucywgcG9sbCwgZWxlbWVudCwgY2FsbGJhY2spIHtcbiAgICAgIHBvcGlseS5hcGlbbWV0aG9kXShzbHVnLCBzZXJ2ZXJPcHRpb25zLCBmdW5jdGlvbihlcnIsIGFwaVJlc3BvbnNlKSB7XG4gICAgICAgIGlmKGFwaVJlc3BvbnNlLmhhc093blByb3BlcnR5KCdpbnNpZ2h0JykgJiYgYXBpUmVzcG9uc2UuaW5zaWdodCA9PT0gJ25vdCBmb3VuZCcpIHtcbiAgICAgICAgICBcbiAgICAgICAgICBpZihwb2xsICYmIGFwaVJlc3BvbnNlLmhhc093blByb3BlcnR5KCdzb3VyY2Vfc3RhdHVzJykgJiYgYXBpUmVzcG9uc2Uuc291cmNlX3N0YXR1cyAhPT0gJ2ZpbmlzaGVkJykge1xuICAgICAgICAgICAgLy8gYWRkIHdhaXRpbmcgdGV4dCB0byBlbGVtZW50XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vZ2V0VGhlbihtZXRob2QsIHNsdWcsIHNlcnZlck9wdGlvbnMsIHBvbGwsIGVsZW1lbnQsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0sMTAwMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdObyBpbnNpZ2h0IGZvdW5kIGZvciBwYXJhbXMgJyArIEpTT04uc3RyaW5naWZ5KHNlcnZlck9wdGlvbnMpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soZXJyLCBhcGlSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIHBvcGlseS5jaGFydC5nZXRBbmRSZW5kZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgdmFyIGNoYXJ0T3B0aW9ucyA9IHt9O1xuICAgIHZhciBzZXJ2ZXJPcHRpb25zID0ge307XG5cbiAgICB2YXIgYXZhaWxhYmxlQ2hhcnRPcHRpb25zID0ge1xuICAgICAgJ2NoYXJ0VHlwZSc6ICdjaGFydFR5cGUnLFxuICAgICAgJ2NvbG9ycyc6ICdjb2xvcnMnLFxuICAgICAgJ3RyYW5zZm9ybWF0aW9ucyc6ICd0cmFuc2Zvcm1hdGlvbnMnLFxuICAgICAgJ2ZpbHRlcnMnOiAndHJhbnNmb3JtYXRpb25zJyxcbiAgICAgICd4TGFiZWwnOiAneExhYmVsJyxcbiAgICAgICd5TGFiZWwnOiAneUxhYmVsJyxcbiAgICAgICd4Q29sdW1uJzogJ3hDb2x1bW4nLFxuICAgICAgJ2dyb3VwQnlDb2x1bW4nOiAnZ3JvdXBCeUNvbHVtbicsXG4gICAgICAnaGVpZ2h0JzogJ2hlaWdodCcsXG4gICAgICAnd2lkdGgnOiAnd2lkdGgnLFxuICAgICAgJ3JvdGF0ZWQnOiAncm90YXRlZCcsXG4gICAgICAndGl0bGUnOiAndGl0bGUnLFxuICAgICAgLy8neE9yZGVyJzogJ29yZGVyJyxcbiAgICAgICdiYXJTaXplJzogJ2JhclNpemUnLFxuICAgICAgJ2xpbmVTaXplJzogJ2xpbmVTaXplJyxcbiAgICAgICdwb2ludFNpemUnOiAncG9pbnRTaXplJyxcbiAgICAgICd0aXRsZUZvbnRGYW1pbHknOiAndGl0bGVGb250RmFtaWx5JyxcbiAgICAgICd0aXRsZUZvbnRTaXplJzogJ3RpdGxlRm9udFNpemUnLFxuICAgICAgJ3RpdGxlRm9udENvbG9yJzogJ3RpdGxlRm9udENvbG9yJyxcbiAgICAgICdjaGFydEZvbnRGYW1pbHknOiAnY2hhcnRGb250RmFtaWx5JyxcbiAgICAgICdjaGFydEZvbnRTaXplJzogJ2NoYXJ0Rm9udFNpemUnLFxuICAgICAgJ2NoYXJ0Rm9udENvbG9yJzogJ2NoYXJ0Rm9udENvbG9yJyxcbiAgICAgICdjaGFydEJhY2tncm91bmRDb2xvcic6ICdiYWNrZ3JvdW5kJyxcbiAgICAgICdjYXJkQmFja2dyb3VuZENvbG9yJzogJ2NhcmRCYWNrZ3JvdW5kQ29sb3InLFxuICAgICAgJ3hHcmlkJzogJ3hHcmlkJyxcbiAgICAgICd5R3JpZCc6ICd5R3JpZCcsXG4gICAgICAndGltZUludGVydmFsJzogJ3ZhcmlhdGlvbicsXG4gICAgICAndGltZV9pbnRlcnZhbCc6ICd2YXJpYXRpb24nLFxuICAgICAgJ3NraXBBbmltYXRpb24nOiAnc2tpcEFuaW1hdGlvbicsXG4gICAgICAnbGVnZW5kJzogJ2xlZ2VuZCcsXG4gICAgICAneFJvdGF0aW9uJzogJ3hSb3RhdGlvbicsXG4gICAgICAneVJvdGF0aW9uJzogJ3lSb3RhdGlvbicsXG4gICAgICAneEF4aXMnOiAneEF4aXMnLFxuICAgICAgJ3lBeGlzJzogJ3lBeGlzJyxcbiAgICAgICdmb3JtYXR0ZXJzJzogJ2Zvcm1hdHRlcnMnLFxuICAgICAgJ2hpZGVDb2x1bW5zJzogJ2hpZGVDb2x1bW5zJyxcbiAgICB9O1xuXG4gICAgdmFyIGF2YWlsYWJsZVNlcnZlck9wdGlvbnMgPSB7XG4gICAgICAnY29sdW1ucyc6ICdjb2x1bW5zJyxcbiAgICAgICdjYWxjdWxhdGlvbic6ICdpbnNpZ2h0X2FjdGlvbnMnLFxuICAgICAgJ3RpbWVJbnRlcnZhbCc6ICd0aW1lX2ludGVydmFsJyxcbiAgICAgICd0aW1lX2ludGVydmFsJzogJ3RpbWVfaW50ZXJ2YWwnLFxuICAgICAgJ2luc2lnaHRfYWN0aW9uJzogJ2luc2lnaHRfYWN0aW9ucycsXG4gICAgICAnYW5hbHlzaXNUeXBlJzogJ2luc2lnaHRfdHlwZXMnLFxuICAgICAgJ2NhbGN1bGF0aW9ucyc6ICdjYWxjdWxhdGlvbnMnXG4gICAgfTtcbiAgICBcbiAgICBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCd4T3JkZXInKSkge1xuICAgICAgY29uc29sZS5sb2coJ3hPcmRlciBwcm9wZXJ0eSBpcyBub3QgdmFsaWQgYW55IG1vcmUsIHBsZWFzZSB1c2UgdHJhbnNmb3JtYXRpb24gd2l0aCBvcCBcIm9yZGVyXCInKTtcbiAgICB9XG5cbiAgICBfLmVhY2goXy5rZXlzKGF2YWlsYWJsZUNoYXJ0T3B0aW9ucyksIGZ1bmN0aW9uKG9wdGlvbikge1xuICAgICAgaWYob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pKSB7XG4gICAgICAgIGNoYXJ0T3B0aW9uc1thdmFpbGFibGVDaGFydE9wdGlvbnNbb3B0aW9uXV0gPSBvcHRpb25zW29wdGlvbl07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBfLmVhY2goXy5rZXlzKGF2YWlsYWJsZVNlcnZlck9wdGlvbnMpLCBmdW5jdGlvbihvcHRpb24pIHtcbiAgICAgIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSkge1xuICAgICAgICBpZihbJ2NhbGN1bGF0aW9uJywgJ2luc2lnaHRfYWN0aW9uJywgJ2FuYWx5c2lzVHlwZSddLmluZGV4T2Yob3B0aW9uKSE9PS0xKVxuICAgICAgICAgIHNlcnZlck9wdGlvbnNbYXZhaWxhYmxlU2VydmVyT3B0aW9uc1tvcHRpb25dXSA9IFtvcHRpb25zW29wdGlvbl1dO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgc2VydmVyT3B0aW9uc1thdmFpbGFibGVTZXJ2ZXJPcHRpb25zW29wdGlvbl1dID0gb3B0aW9uc1tvcHRpb25dO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2VydmVyT3B0aW9ucy5mdWxsID0gdHJ1ZTtcbiAgICB2YXIgc2x1ZywgbWV0aG9kO1xuXG4gICAgaWYob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaW5zaWdodCcpKSB7XG4gICAgICBzbHVnID0gb3B0aW9ucy5pbnNpZ2h0O1xuICAgICAgbWV0aG9kID0gJ2dldEluc2lnaHQnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmKCFvcHRpb25zLmhhc093blByb3BlcnR5KCdzb3VyY2UnKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0VpdGhlciB0aGUgaW5zaWdodCBvciBzb3VyY2UgcHJvcGVydHkgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgc2VydmVyT3B0aW9ucy5zaW5nbGUgPSB0cnVlO1xuXG4gICAgICBzbHVnID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgICBtZXRob2QgPSAnZ2V0SW5zaWdodHMnO1xuICAgIH1cblxuICAgIHBvcGlseS5jaGFydC5sb2FkaW5nTWVzc2FnZShlbGVtZW50LCBvcHRpb25zKTtcbiAgICBcbiAgICBnZXRUaGVuKG1ldGhvZCwgc2x1Zywgc2VydmVyT3B0aW9ucywgb3B0aW9ucy5wb2xsLCBlbGVtZW50LCBmdW5jdGlvbihlcnIsIGFwaVJlc3BvbnNlKSB7XG4gICAgICAgIHBvcGlseS5jaGFydC5yZW5kZXIoZWxlbWVudCwgYXBpUmVzcG9uc2UsIGNoYXJ0T3B0aW9ucyk7XG4gICAgfSk7XG4gIH07XG5cbiAgcG9waWx5LmNoYXJ0LmFwcGx5VHJhbnNmb3JtYXRpb25zID0gZnVuY3Rpb24oZHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLnRyYW5zZm9ybWF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHRyYW5zZm9ybWF0aW9uKSB7XG4gICAgICBpZihbJ2NvdW50JywgJ2NvdW50VW5pcXVlJ10uaW5kZXhPZih0cmFuc2Zvcm1hdGlvbi5vcCkgIT09IC0xKSB7XG4gICAgICAgIHBvcGlseS5jaGFydC5hcHBseUdyb3VwRGF0YShkcywgdHJhbnNmb3JtYXRpb24pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZigncmVwbGFjZScgPT0gdHJhbnNmb3JtYXRpb24ub3ApIHtcbiAgICAgICAgZHMucmVwbGFjZVZhbHVlcyh0cmFuc2Zvcm1hdGlvbi5jb2x1bW4sIHRyYW5zZm9ybWF0aW9uLnJlcGxhY2VtZW50cyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKCdub3JtYWxpemUnID09IHRyYW5zZm9ybWF0aW9uLm9wKSB7XG4gICAgICAgIGRzLm5vcm1hbGl6ZSh0cmFuc2Zvcm1hdGlvbi5jb2x1bW4sIHRyYW5zZm9ybWF0aW9uLmNvbHVtbk5vcm1hbGl6ZWQpO1xuICAgICAgICBpZighb3B0aW9ucy5mb3JtYXR0ZXJzLmZpbmQoZnVuY3Rpb24oZikgeyByZXR1cm4gZi5jb2x1bW49PXRyYW5zZm9ybWF0aW9uLmNvbHVtbk5vcm1hbGl6ZWR9KSApXG4gICAgICAgICAgb3B0aW9ucy5mb3JtYXR0ZXJzLnB1c2goe1xuICAgICAgICAgICAgY29sdW1uOiB0cmFuc2Zvcm1hdGlvbi5jb2x1bW5Ob3JtYWxpemVkLFxuICAgICAgICAgICAgb3A6ICdzdWZpeCcsXG4gICAgICAgICAgICB2YWx1ZTogJyUnXG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKCdvcmRlcicgPT0gdHJhbnNmb3JtYXRpb24ub3ApIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdHJhbnNmb3JtYXRpb24udmFsdWUgfHwgdHJhbnNmb3JtYXRpb24udmFsdWVzO1xuICAgICAgICB2YXIgdHlwZSA9IHZhbHVlO1xuICAgICAgICBcbiAgICAgICAgaWYodHlwZSAmJiB0eXBlICE9ICdhc2MnICYmIHR5cGUgIT0gJ2Rlc2MnKVxuICAgICAgICAgIHR5cGUgPSBmdW5jdGlvbihlLCBpZHgpIHsgdmFyIGkgPSB2YWx1ZS5pbmRleE9mKGVbaWR4XSk7IHJldHVybiBpPj0wID8gaSA6IDk5OTk7IH1cbiAgICAgICAgZHMub3JkZXJCeSh0cmFuc2Zvcm1hdGlvbi5jb2x1bW4sIHR5cGUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHBvcGlseS5jaGFydC5hcHBseUZpbHRlcihkcywgdHJhbnNmb3JtYXRpb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qXG4gICAgZmlsdGVyID0gW3tcbiAgICAgIGNvbHVtbjogPGNvbHVtbi1uYW1lPixcbiAgICAgIG9wOiBub25lfGVxfG5vdGVxLFxuICAgICAgdmFsdWVzOiBbPGFycmF5LW9mLXZhbHVlc10+XG4gICAgfSwgLi4gXVxuICAqL1xuICBwb3BpbHkuY2hhcnQuYXBwbHlGaWx0ZXIgPSBmdW5jdGlvbihkcywgZmlsdGVyKSB7XG4gICAgXG4gICAgLy8gSSB0aGluayB0aGlzIGNvdW50VW5pcXVlIHNob3VsZCBub3QgYmUgaGVyZSFcbiAgICBpZihmaWx0ZXIub3AgPT0gJ2Rpc3RpbmN0JyB8fCBmaWx0ZXIub3AgPT0gJ2NvdW50VW5pcXVlJykge1xuICAgICAgY29uc29sZS5sb2coJ2ZpbHRlciBjb3VudFVuaXF1ZSBpcyBkZXByZWNhdGVkIHBsZWFzZSBkb250IHVzZSBpdCwgdXNlIFwiZ3JvdXBEYXRhXCIgaW5zdGVhZCEnKTtcbiAgICAgIGRzLmNvdW50VW5pcXVlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRzLmZpbHRlcihmaWx0ZXIuY29sdW1uLCBmaWx0ZXIub3AgfHwgJ2VxJywgZmlsdGVyLnZhbHVlIHx8IGZpbHRlci52YWx1ZXMpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZHM7XG4gIH07XG4gIFxuICBwb3BpbHkuY2hhcnQuYXBwbHlHcm91cERhdGEgPSBmdW5jdGlvbihkcywgZ3JvdXBEYXRhKSB7XG4gICAgXG4gICAgaWYoZ3JvdXBEYXRhLmN1c3RvbUZ1bmN0aW9uKSB7XG4gICAgICB2YXIgZ3JvdXBGdW5jID0gY3VzdG9tRnVuY3Rpb247XG4gICAgfVxuICAgIGVsc2UgaWYoWydjb3VudCcsICdjb3VudFVuaXF1ZSddLmluZGV4T2YoZ3JvdXBEYXRhLm9wKSAhPT0gLTEpIHtcbiAgICAgIHZhciBncm91cEZ1bmMgPSBwb3BpbHkuZGF0YXNldFtncm91cERhdGEub3BdXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignVW5yZWNvZ25pemVkIGdyb3VwaW5nIGZ1bmN0aW9uJyk7XG4gICAgICByZXR1cm4gZHM7XG4gICAgfVxuICAgIFxuICAgIGRzLmdyb3VwQnkoZ3JvdXBEYXRhLmNvbHVtbiwgZ3JvdXBGdW5jLCBncm91cERhdGEuY3VzdG9tRGF0YVR5cGUgfHwgZ3JvdXBGdW5jLmRhdGFUeXBlLCBncm91cERhdGEuZ3JvdXBJbnRvIHx8IGdyb3VwRnVuYy5jb2x1bW5MYWJlbCk7XG4gICAgXG4gICAgcmV0dXJuIGRzO1xuICB9O1xuXG5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgZGVmaW5lKFwicG9waWx5XCIsIFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiBjMzsgfSk7XG4gIH0gZWxzZSBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBleHBvcnRzICYmICd1bmRlZmluZWQnICE9PSB0eXBlb2YgbW9kdWxlKSB7XG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IHBvcGlseTtcbiAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5wb3BpbHkgPSBwb3BpbHk7XG4gIH1cbiAgICBcbn0pKHdpbmRvdyk7XG4iLCIvKipcbkFuYWx5emUgZGF0YSBmcm9tIHRoZSBQb3BpbHkgQVBJIGFuZCBwcmVwYXJlIGZvciByZW5kZXJpbmdcbiovXG5cbihmdW5jdGlvbih3aW5kb3cpIHtcblxuICAgIHZhciBfaGFzT25lID0gZnVuY3Rpb24oY29sdW1ucywgZGF0YVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIF8ud2hlcmUoY29sdW1ucyx7ZGF0YV90eXBlOmRhdGFUeXBlfSkubGVuZ3RoID09PSAxO1xuICAgIH07XG5cbiAgICB2YXIgX2hhc09ubHkgPSBmdW5jdGlvbihjb2x1bW5zLGRhdGFUeXBlcykge1xuICAgICAgICByZXR1cm4gXy5ldmVyeShjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHsgXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8oZGF0YVR5cGVzKS5jb250YWlucyhjb2x1bW4uZGF0YV90eXBlKTsgXG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIF9oYXNQb3NzaWJsZSA9IGZ1bmN0aW9uKGNvbHVtbnMsIGRhdGFUeXBlLCBwb3NzaWJsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIF8uc29tZShjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlICE9IGRhdGFUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKGNvbHVtbi5wb3NzaWJsZV9kYXRhX3R5cGVzLHBvc3NpYmxlVHlwZSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGdldENvbHVtbkZvclR5cGUgPSBmdW5jdGlvbihjb2x1bW5zLCBkYXRhVHlwZSkge1xuICAgICAgICByZXR1cm4gXy5maW5kV2hlcmUoY29sdW1ucywge2RhdGFfdHlwZTogZGF0YVR5cGV9KTtcbiAgICB9O1xuXG4gICAgdmFyIGdldFR5cGVQYXR0ZXJuID0gZnVuY3Rpb24oY29sdW1ucykge1xuICAgICAgICB2YXIgZGF0YVR5cGVzID0gXy5tYXAoY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7IHJldHVybiBjb2x1bW4uZGF0YV90eXBlIH0pO1xuICAgICAgICBkYXRhVHlwZXMuc29ydCgpO1xuICAgICAgICByZXR1cm4gZGF0YVR5cGVzLnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIHZhciBfYmVzdEZvclR3byA9IGZ1bmN0aW9uKGNvbHVtbnMsY2FsY3VsYXRpb24pIHtcbiAgICAgICAgdmFyIGJlc3RUeXBlO1xuICAgICAgICB2YXIgdHlwZVBhdHRlcm4gPSBnZXRUeXBlUGF0dGVybihjb2x1bW5zKTtcblxuICAgICAgICAvLyBBbnl0aGluZyB3aXRoIGNvb3JkaW5hdGVzIG5lZWRzIHRvIGJlIHZpZXdlZCBvbiBhIG1hcFxuICAgICAgICBpZihfaGFzT25lKGNvbHVtbnMsJ2Nvb3JkaW5hdGUnKSkge1xuICAgICAgICAgICAgYmVzdFR5cGUgPSAnaW50ZXJhY3RpdmVNYXAnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXZlcnl0aGluZyBpcyBudW1lcmljXG4gICAgICAgIGVsc2UgaWYodHlwZVBhdHRlcm4gPT09ICdudW1lcmljLG51bWVyaWMnKSB7XG4gICAgICAgICAgICAvLyBBbGwgdGhlIGNvbHVtbnMgaGF2ZSBvbmUgdmFsdWUuIFRoaXMgaXMgbGlrZSBhdmVyYWdlIFxuICAgICAgICAgICAgLy8gb2YgY29sdW1uIDEgYW5kIGF2ZXJhZ2Ugb2YgY29sdW1uIDIuIE5vdCBhIGdyZWF0IHdheSB0byBcbiAgICAgICAgICAgIC8vIHZpc3VhbGl6ZSB0aGlzLCBidXQgd2UnbGwgY2hvb3NlIGJhci5cbiAgICAgICAgICAgIGlmKF8uZXZlcnkoY29sdW1ucyxmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi52YWx1ZXMubGVuZ3RoID09PSAxIH0pKSB7XG4gICAgICAgICAgICAgICAgYmVzdFR5cGUgPSAnYmFyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ3NjYXR0ZXJwbG90JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERhdGVzIGFyZSBzaG93biBhcyB0aW1lIHNlcmllcyBieSBkZWZhdWx0XG4gICAgICAgIGVsc2UgaWYodHlwZVBhdHRlcm4gPT09ICdkYXRldGltZSxudW1lcmljJykge1xuICAgICAgICAgICAgYmVzdFR5cGUgPSAnbGluZSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhdGVnb3J5ICsgbnVtYmVyXG4gICAgICAgIGVsc2UgaWYodHlwZVBhdHRlcm4gPT09ICdjYXRlZ29yeSxudW1lcmljJykge1xuICAgICAgICAgICAgdmFyIGhhc1N0YXRlID0gX2hhc1Bvc3NpYmxlKGNvbHVtbnMsJ2NhdGVnb3J5Jywnc3RhdGUnKTtcbiAgICAgICAgICAgIHZhciBoYXNDb3VudHJ5ID0gX2hhc1Bvc3NpYmxlKGNvbHVtbnMsJ2NhdGVnb3J5JywnY291bnRyeScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgaGFzTmVnYXRpdmUgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bUNvbHVtbiA9IGdldENvbHVtbkZvclR5cGUoY29sdW1ucywnbnVtZXJpYycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfLnNvbWUobnVtQ29sdW1uLnZhbHVlcywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpIDwgMDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgLy8gRGVmYXVsdCB0byBjaG9yb3BsZXRoIG1hcHMgYmVjYXVzZSB0aG9zZSBhcmUgbmljZVxuICAgICAgICAgICAgaWYoaGFzU3RhdGUgfHwgaGFzQ291bnRyeSkge1xuICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ2Nob3JvcGxldGgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihjb2x1bW5zWzBdLnZhbHVlcy5sZW5ndGggPiAzNSAmJiAhaGFzTmVnYXRpdmUpIHtcbiAgICAgICAgICAgICAgICBiZXN0VHlwZSA9ICdidWJibGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmVzdFR5cGUgPSAnYmFyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBiZXN0VHlwZTtcbiAgICB9O1xuXG4gICAgdmFyIF9iZXN0Rm9yVGhyZWUgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbikge1xuICAgICAgICB2YXIgYmVzdFR5cGU7XG4gICAgICAgIHZhciB0eXBlUGF0dGVybiA9IGdldFR5cGVQYXR0ZXJuKGNvbHVtbnMpO1xuXG4gICAgICAgIC8vIGlmIGRhdGV0aW1lIGFuZCBjYXRlZ29yeSBhbmQgbnVtYmVyXG4gICAgICAgIGlmKHR5cGVQYXR0ZXJuID09PSAnY2F0ZWdvcnksZGF0ZXRpbWUsbnVtZXJpYycpIHtcbiAgICAgICAgICAgIC8vIGlmIGNhbGN1bGF0aW9uIGlzIHRvdGFsXG4gICAgICAgICAgICBpZihjYWxjdWxhdGlvbiA9PT0gJ3N1bScpIHtcbiAgICAgICAgICAgICAgICBiZXN0VHlwZSA9ICdzdGFja2VkQXJlYSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBiZXN0VHlwZSA9ICdtdWx0aUxpbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodHlwZVBhdHRlcm4gPT09ICdkYXRldGltZSxudW1lcmljLG51bWVyaWMnKSB7XG4gICAgICAgICAgICBiZXN0VHlwZSA9ICdtdWx0aUxpbmUnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodHlwZVBhdHRlcm4gPT09ICdjYXRlZ29yeSxjYXRlZ29yeSxudW1lcmljJykge1xuICAgICAgICAgICAgaWYoY2FsY3VsYXRpb24gPT09ICdhdmVyYWdlJykge1xuICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ2Jhckdyb3VwZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmVzdFR5cGUgPSAnYmFyU3RhY2tlZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0eXBlUGF0dGVybiA9PT0gJ2NhdGVnb3J5LG51bWVyaWMsbnVtZXJpYycpIHtcbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlIHZhbHVlL3JhbmdlIGNvdW50cyAoaGlzdG9ncmFtKSBmb3IgbXVsdGlwbGVcbiAgICAgICAgICAgIC8vIG51bWJlciBjb2x1bW5zXG4gICAgICAgICAgICBpZihjYWxjdWxhdGlvbiA9PT0gJ2NvdW50Jykge1xuICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ2Jhckdyb3VwZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmVzdFR5cGUgPSAnc2NhdHRlcnBsb3RDYXRlZ29yeSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZih0eXBlUGF0dGVybiA9PT0gJ2NhdGVnb3J5LGNvb3JkaW5hdGUsbnVtZXJpYycpIHtcbiAgICAgICAgICAgIGJlc3RUeXBlID0gJ2ludGVyYWN0aXZlTWFwJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKF9oYXNPbmx5KGNvbHVtbnMsWydudW1lcmljJ10pKSB7XG4gICAgICAgICAgICBpZihfLmV2ZXJ5KGNvbHVtbnMsZnVuY3Rpb24oY29sdW1uKSB7cmV0dXJuIGNvbHVtbi52YWx1ZXMubGVuZ3RoID09PSAxfSkpIHtcbiAgICAgICAgICAgICAgICBiZXN0VHlwZSA9ICdidWJibGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJlc3RUeXBlO1xuICAgIH07XG5cbiAgICB2YXIgY2hhcnRUeXBlRm9yRGF0YSA9IGZ1bmN0aW9uKGNvbHVtbnMsIGNhbGN1bGF0aW9uLCBvcHRpb25zKSB7XG4gICAgICAgIC8vIFRoZSBkYXRhX3R5cGUgZm9yIGFueSBjb2x1bW4gd2lsbCBiZSBvbmUgb2YgdGhlIGZvdXIgUG9waWx5XG4gICAgICAgIC8vIGJhc2ljIGRhdGEgdHlwZXM6IGNhdGVnb3J5LCBudW1lcmljLCBkYXRldGltZSwgY29vcmRpbmF0ZS4gXG4gICAgICAgIC8vIFRoZSBjb2x1bW4gd2lsbCBhbHNvIGhhdmUgYSBwb3NzaWJsZV9kYXRhX3R5cGVzIHByb3BlcnR5IHRoYXQgbWF5IFxuICAgICAgICAvLyBwcm92aWRlIGFkZGl0aW9uYWwgY29udGV4dC4gRm9yIGV4YW1wbGUgYSBkYXRhX3R5cGUgb2YgY2F0ZWdvcnkgXG4gICAgICAgIC8vIG1heSBhbHNvIGhhdmUgcG9zc2libGVfZGF0YV90eXBlcyBsaWtlIHN0YXRlIG9yIGNvdW50cnkuXG5cbiAgICAgICAgdmFyIGJlc3RUeXBlO1xuICAgICAgICB2YXIgdHlwZVBhdHRlcm4gPSBnZXRUeXBlUGF0dGVybihjb2x1bW5zKTtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgdmFyIHBvc3NpYmxlVHlwZXMgPSB7XG4gICAgICAgICAgICAnYmFyJzogWydwaWUnLCdidWJibGUnLCdidWJibGUyJywnbGluZSddLFxuICAgICAgICAgICAgJ3NjYXR0ZXJwbG90Q2F0ZWdvcnknOiBbJ2Jhckdyb3VwZWQnXSxcbiAgICAgICAgICAgICdiYXJHcm91cGVkJzogWydiYXJTdGFja2VkJ10sXG4gICAgICAgICAgICAnYmFyU3RhY2tlZCc6IFsnYmFyR3JvdXBlZCddLFxuICAgICAgICAgICAgJ2J1YmJsZSc6IFsnYmFyJywgJ2J1YmJsZTInXSxcbiAgICAgICAgICAgICdidWJibGUyJzogWydiYXInLCAnYnViYmxlJ10sXG4gICAgICAgICAgICAnbXVsdGlMaW5lJzogWydzdGFja2VkQXJlYScsJ2Jhckdyb3VwZWQnLCdiYXJTdGFja2VkJywgJ3JhZGFyJ10sXG4gICAgICAgICAgICAnc3RhY2tlZEFyZWEnOiBbJ211bHRpTGluZScsJ2Jhckdyb3VwZWQnLCdiYXJTdGFja2VkJywgJ3JhZGFyJ10sXG4gICAgICAgICAgICAnY2hvcm9wbGV0aCc6IFsnYmFyJywnYnViYmxlJywnYnViYmxlMiddLFxuICAgICAgICAgICAgJ2xpbmUnOiBbJ2JhciddXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYoY29sdW1ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGJlc3RUeXBlID0gJ3NlbnRlbmNlJztcbiAgICAgICAgfVxuICAgICAgICBpZihjb2x1bW5zLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgYmVzdFR5cGUgPSBfYmVzdEZvclR3byhjb2x1bW5zLGNhbGN1bGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGNvbHVtbnMubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICBiZXN0VHlwZSA9IF9iZXN0Rm9yVGhyZWUoY29sdW1ucyxjYWxjdWxhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZihfaGFzT25lKGNvbHVtbnMsJ2RhdGV0aW1lJykgJiYgX2hhc09ubHkoY29sdW1ucyxbJ2RhdGV0aW1lJywnbnVtZXJpYyddKSkge1xuICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ211bHRpTGluZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKF9oYXNPbmUoY29sdW1ucywnY2F0ZWdvcnknKSAmJiBfaGFzT25seShjb2x1bW5zLFsnY2F0ZWdvcnknLCdudW1lcmljJ10pKSB7XG4gICAgICAgICAgICAgICAgaWYoY2FsY3VsYXRpb24gPT09ICdzdW0nKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ2JhclN0YWNrZWQnO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gJ2Jhckdyb3VwZWQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoX2hhc09ubHkoY29sdW1ucyxbJ251bWVyaWMnXSkpIHtcbiAgICAgICAgICAgICAgICBpZihfLmV2ZXJ5KGNvbHVtbnMsZnVuY3Rpb24oY29sdW1uKSB7cmV0dXJuIGNvbHVtbi52YWx1ZXMubGVuZ3RoID09PSAxfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmVzdFR5cGUgPSAnYnViYmxlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmKF8uaXNVbmRlZmluZWQoYmVzdFR5cGUpKSB7XG4gICAgICAgICAgICBiZXN0VHlwZSA9ICd0YWJsZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZihvcHRpb25zLmhhc093blByb3BlcnR5KCdjaGFydFR5cGUnKSkge1xuICAgICAgICAgICAgaWYob3B0aW9ucy5jaGFydFR5cGUgPT09ICd0YWJsZScpIHtcbiAgICAgICAgICAgICAgICBiZXN0VHlwZSA9ICd0YWJsZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHBvc3NpYmxlVHlwZXMuaGFzT3duUHJvcGVydHkoYmVzdFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgaWYoXy5jb250YWlucyhwb3NzaWJsZVR5cGVzW2Jlc3RUeXBlXSwgb3B0aW9ucy5jaGFydFR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJlc3RUeXBlID0gb3B0aW9ucy5jaGFydFR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGJlc3RUeXBlO1xuXG4gICAgfTtcblxuICAgIHdpbmRvdy5wb3BpbHkuY2hhcnQuYW5hbHl6ZSA9IHtcbiAgICAgICAgY2hhcnRUeXBlRm9yRGF0YTogY2hhcnRUeXBlRm9yRGF0YSxcbiAgICAgICAgZ2V0VHlwZVBhdHRlcm46IGdldFR5cGVQYXR0ZXJuLFxuICAgICAgICBnZXRDb2x1bW5Gb3JUeXBlOiBnZXRDb2x1bW5Gb3JUeXBlXG4gICAgfVxufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcblxuICB2YXIgYzNpZnkgPSBmdW5jdGlvbih4VmFsdWVzLHlWYWx1ZXMselZhbHVlcykge1xuICAgICAgdmFyIGdyb3VwaW5ncyA9IFtdO1xuICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgIHZhciB4eXogPSBfLnppcCh4VmFsdWVzLHpWYWx1ZXMseVZhbHVlcyk7XG5cbiAgICAgIC8vY29uc29sZS5sb2coeVZhbHVlcyk7XG5cbiAgICAgIF8uZWFjaChfLnVuaXEoeFZhbHVlcyksZnVuY3Rpb24oeCkge1xuICAgICAgICAgIF8uZWFjaChfLnVuaXEoelZhbHVlcyksZnVuY3Rpb24oeikge1xuICAgICAgICAgICAgICBncm91cGluZ3MucHVzaChbeCx6LDBdKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cbiAgICAgIF8uZWFjaCh4eXosZnVuY3Rpb24oX3h5eikge1xuICAgICAgICAgIF8uZWFjaChncm91cGluZ3MsIGZ1bmN0aW9uKHBhaXIpIHtcbiAgICAgICAgICAgICAgaWYoX3h5elswXSA9PT0gcGFpclswXSAmJiBfeHl6WzFdID09PSBwYWlyWzFdKSB7XG4gICAgICAgICAgICAgICAgICBwYWlyWzJdID0gX3h5elsyXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBjYXRlZ29yaWVzID0gXy51bmlxKF8ubWFwKGdyb3VwaW5ncywgZnVuY3Rpb24oZ3JvdXApIHsgcmV0dXJuIGdyb3VwWzBdOyB9KSk7XG4gICAgICB2YXIgdmFsdWVQYWlycyA9IF8ubWFwKGdyb3VwaW5ncywgZnVuY3Rpb24oZ3JvdXApIHsgcmV0dXJuIFtncm91cFsxXSxncm91cFsyXV0gfSk7XG4gICAgICB2YXIgbGFiZWxzID0gXy51bmlxKF8ubWFwKGdyb3VwaW5ncywgZnVuY3Rpb24oZ3JvdXApIHsgcmV0dXJuIGdyb3VwWzFdIH0pKTtcbiAgICAgIHZhciB2YWx1ZXM7XG4gICAgICBfLmVhY2gobGFiZWxzLCBmdW5jdGlvbihsYWJlbCkge1xuICAgICAgICAgIHZhbHVlcyA9IF8ubWFwKF8uZmlsdGVyKHZhbHVlUGFpcnMsIGZ1bmN0aW9uKHZwKSB7XG4gICAgICAgICAgICAgIHJldHVybiB2cFswXSA9PSBsYWJlbH0pLGZ1bmN0aW9uKHZwKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdnBbMV07IH0pO1xuICAgICAgICAgIGNvbHVtbnMucHVzaChbbGFiZWxdLmNvbmNhdCh2YWx1ZXMpKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMsXG4gICAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgICBncm91cHM6IGxhYmVsc1xuICAgICAgfVxuICB9O1xuXG4gIHZhciBuYW5Ub1plcm8gPSBmdW5jdGlvbihudW0pIHtcbiAgICAgIGlmKG51bSA9PT0gJ25hbicgfHwgXy5pc05hTihudW0pKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVtO1xuICB9O1xuICB2YXIgY2xlYW5OYW5Ub1plcm8gPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIHZhbHVlcyA9IF8ubWFwKHZhbHVlcywgZnVuY3Rpb24odikge1xuICAgICAgICAgIHJldHVybiBuYW5Ub1plcm8odik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgdmFyIGRheUxpc3QgPSBbJ3N1bmRheScsJ21vbmRheScsJ3R1ZXNkYXknLCd3ZWRuZXNkYXknLCd0aHVyc2RheScsJ2ZyaWRheScsJ3NhdHVyZGF5J107XG4gIHZhciBkYXlMaXN0QWJiciA9IFsnc3VuJywnbW9uJywndHVlJywnd2VkJywndGh1JywnZnJpJywnc2F0J107XG4gIHZhciBtb250aExpc3QgPSBbJ2phbnVhcnknLCdmZWJydWFyeScsJ21hcmNoJywnYXByaWwnLCdtYXknLCdqdW5lJywnanVseScsJ2F1Z3VzdCcsJ3NlcHRlbWJlcicsJ29jdG9iZXInLCdub3ZlbWJlcicsJ2RlY2VtYmVyJ107XG4gIHZhciBtb250aExpc3RBYmJyID0gWydqYW4nLCdmZWInLCdtYXInLCdhcHInLCdtYXknLCdqdW4nLCdqdWwnLCdhdWcnLCdzZXAnLCdzZXB0Jywnb2N0Jywnbm92JywnZGVjJ107XG5cbiAgdmFyIGNhdGVnb3J5VHlwZSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgaWYoXy5ldmVyeSh2YWx1ZXMsIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8oZGF5TGlzdCkuY29udGFpbnModi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIH0pKSB7XG4gICAgICAgICAgcmV0dXJuICdkYXknO1xuICAgICAgfVxuXG4gICAgICBpZihfLmV2ZXJ5KHZhbHVlcywgZnVuY3Rpb24odikgeyByZXR1cm4gXyhkYXlMaXN0QWJicikuY29udGFpbnModi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIH0pKSB7XG4gICAgICAgICAgcmV0dXJuICdkYXlBYmJyJztcbiAgICAgIH1cblxuICAgICAgaWYoXy5ldmVyeSh2YWx1ZXMsIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8obW9udGhMaXN0KS5jb250YWlucyh2LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkgfSkpIHtcbiAgICAgICAgICByZXR1cm4gJ21vbnRoJztcbiAgICAgIH1cblxuICAgICAgaWYoXy5ldmVyeSh2YWx1ZXMsIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8obW9udGhMaXN0QWJicikuY29udGFpbnModi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIH0pKSB7XG4gICAgICAgICAgcmV0dXJuICdtb250aEFiYnInO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciBzb3J0RGF0YSA9IGZ1bmN0aW9uKHhZYWx1ZXMseVZhbHVlcyx6VmFsdWVzLGxpbWl0LG9yZGVyLHoyVmFsdWVzKSB7XG4gICAgICByZXR1cm4gW3hZYWx1ZXMseVZhbHVlcyx6VmFsdWVzLHoyVmFsdWVzXTtcbiAgICAgIFxuICAgICAgdmFyIHR1cGxlcyA9IF8uemlwKHhZYWx1ZXMseVZhbHVlcyx6VmFsdWVzLHoyVmFsdWVzKTtcbiAgICAgICAgICBcbiAgICAgIGlmKF8uZXZlcnkoeFlhbHVlcywgZnVuY3Rpb24oeCkgeyByZXR1cm4gIWlzTmFOKHgpOyB9KSkge1xuICAgICAgICAgIHZhciBzb3J0ZWQgPSBfLnNvcnRCeSh0dXBsZXMsIGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXG4gICAgICB9XG4gICAgICBlbHNlIGlmKF8uZXZlcnkoeFlhbHVlcywgZnVuY3Rpb24oeCkgeyByZXR1cm4gIWlzTmFOKHgudG9TdHJpbmcoKS5jaGFyQXQoMCkpOyB9KSkge1xuICAgICAgICAgIHZhciBzb3J0ZWQgPSBfLnNvcnRCeSh0dXBsZXMsIGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBjVHlwZSA9IGNhdGVnb3J5VHlwZSh4WWFsdWVzKTtcbiAgICAgICAgICBpZihjVHlwZSkge1xuICAgICAgICAgICAgICB2YXIgY29tcGFyZUxpc3QgPSBkYXlMaXN0O1xuICAgICAgICAgICAgICBpZihjVHlwZSA9PSAnZGF5QWJicicpIHtcbiAgICAgICAgICAgICAgICAgIGNvbXBhcmVMaXN0ID0gZGF5TGlzdEFiYnI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZihjVHlwZSA9PSAnbW9udGgnKSB7XG4gICAgICAgICAgICAgICAgICBjb21wYXJlTGlzdCA9IG1vbnRoTGlzdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIGlmKGNUeXBlID09ICdtb250aEFiYnInKSB7XG4gICAgICAgICAgICAgICAgICBjb21wYXJlTGlzdCA9IG1vbnRoTGlzdEFiYnI7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBTb3J0IGFzYyBieSB5XG4gICAgICAgICAgICAgIHZhciBzb3J0ZWQgPSBfLnNvcnRCeSh0dXBsZXMsIGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlTGlzdC5pbmRleE9mKHRbMF0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgIC8vIFNvcnQgYXNjIGJ5IHlcbiAgICAgICAgICAgICAgdmFyIHNvcnRlZCA9IF8uc29ydEJ5KHR1cGxlcywgZnVuY3Rpb24odCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMV0gKiAtMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmKGxpbWl0ICYmIF8uc2l6ZShzb3J0ZWQpPmxpbWl0ICkge1xuICAgICAgICAgIHZhciBpPTA7XG4gICAgICAgICAgdmFyIG50aCA9IE1hdGguZmxvb3IoXy5zaXplKHNvcnRlZCkgLyBsaW1pdCk7XG4gICAgICAgICAgc29ydGVkID0gXy5maWx0ZXIoc29ydGVkLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gaSAlIG50aCA9PSAwO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYob3JkZXI9PSdhc2MnIHx8IG9yZGVyPT0nZGVzYycpIHtcbiAgICAgICAgICB2YXIgZGVzY011bHRpcGx5ID0gKG9yZGVyPT0nZGVzYyc/LTE6MSlcbiAgICAgICAgICBzb3J0ZWQgPSBfLnNvcnRCeShzb3J0ZWQsIGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0WzFdICogZGVzY011bHRpcGx5O1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgfSBcbiAgICAgIGVsc2UgaWYob3JkZXI9PSdhLXonIHx8IG9yZGVyPT0nei1hJykge1xuICAgICAgICAgIGlmKF8uZXZlcnkoeFlhbHVlcywgZnVuY3Rpb24oeCkgeyByZXR1cm4gIWlzTmFOKHgpOyB9KSkge1xuICAgICAgICAgICAgICBzb3J0ZWQgPSBfLnNvcnRCeShzb3J0ZWQsIGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0WzBdKTtcbiAgICAgICAgICAgICAgICAgIH0pOyBcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNvcnRlZCA9IF8uc29ydEJ5KHNvcnRlZCwgZnVuY3Rpb24odCl7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbMF07XG4gICAgICAgICAgICAgICAgICB9KTsgXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKG9yZGVyPT0nei1hJylcbiAgICAgICAgICAgICAgc29ydGVkID0gc29ydGVkLnJldmVyc2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfLnVuemlwKHNvcnRlZCk7XG4gIH07XG5cbiAgdmFyIGNoZWNrSXNEYXRlU3RyID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgaWYgKCFpc05hTigobmV3IERhdGUoc3RyKS5nZXRUaW1lKCkpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB3aW5kb3cucG9waWx5LmNoYXJ0LmNoYXJ0RGF0YSA9IHsgICAgICAgIFxuICAgICAgc29ydERhdGE6IHNvcnREYXRhLFxuICAgICAgY2xlYW5OYW5Ub1plcm86IGNsZWFuTmFuVG9aZXJvLFxuICAgICAgYzNpZnk6IGMzaWZ5LFxuICAgICAgY2hlY2tJc0RhdGVTdHI6IGNoZWNrSXNEYXRlU3RyXG4gIH1cblxufSkod2luZG93KTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uKHdpbmRvdykge1xuXG5cbiAgd2luZG93LnBvcGlseS5kYXRhc2V0ID0gZnVuY3Rpb24oaW5zaWdodE9iamVjdCkge1xuXG4gICAgdmFyIGxhYmVscywgZGF0YVR5cGVzLCB0YWJsZSwgY29sdW1uc0NhY2hlLCB2YXJpYXRpb25zO1xuICAgIFxuICAgIHZhciBpbml0aWFsaXplID0gZnVuY3Rpb24oaW5zaWdodE9iamVjdCkge1xuICAgICAgbGFiZWxzID0gW107XG4gICAgICBkYXRhVHlwZXMgPSBbXTtcbiAgICAgIHBvc3NpYmxlRGF0YVR5cGVzID0gW107XG4gICAgICBjb2x1bW5zQ2FjaGUgPSBudWxsO1xuICAgICAgdmFyaWF0aW9ucyA9IGluc2lnaHRPYmplY3QudmFyaWF0aW9ucztcblxuICAgICAgaWYoaW5zaWdodE9iamVjdC5oYXNPd25Qcm9wZXJ0eSgnZGVmYXVsdF92YXJpYXRpb24nKSkge1xuICAgICAgICB2YXJpYXRpb25zW2luc2lnaHRPYmplY3QuZGVmYXVsdF92YXJpYXRpb25dID0gaW5zaWdodE9iamVjdC5jb2x1bW5zO1xuICAgICAgfVxuXG4gICAgICB0YWJsZSA9IHppcChpbnNpZ2h0T2JqZWN0LmNvbHVtbnMpO1xuICAgIH1cbiAgICBcbiAgICB2YXIgemlwID0gZnVuY3Rpb24oY29sdW1ucykge1xuICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgIFxuICAgICAgXy5lYWNoKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICBsYWJlbHMucHVzaChjb2x1bW4uY29sdW1uX2hlYWRlcik7XG4gICAgICAgIGRhdGFUeXBlcy5wdXNoKGNvbHVtbi5kYXRhX3R5cGUpO1xuICAgICAgICBwb3NzaWJsZURhdGFUeXBlcy5wdXNoKGNvbHVtbi5wb3NzaWJsZV9kYXRhX3R5cGVzKTtcbiAgICAgICAgaWYoY29sdW1uLmRhdGFfdHlwZSA9PSAnbnVtZXJpYycpXG4gICAgICAgICAgY29sdW1uLnZhbHVlcyA9IF8ubWFwKGNvbHVtbi52YWx1ZXMsIGZ1bmN0aW9uKHYpIHtyZXR1cm4gcGFyc2VGbG9hdCh2KX0pO1xuICAgICAgICBkYXRhLnB1c2goY29sdW1uLnZhbHVlcyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfLnppcC5hcHBseShudWxsLCBkYXRhKTtcbiAgICB9O1xuICAgIFxuICAgIHZhciB1bnppcCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHZhciBjb2x1bW5zID0gW107XG4gICAgICBfLnVuemlwKGRhdGEpLmZvckVhY2goZnVuY3Rpb24oYywgaSkge1xuICAgICAgICBjb2x1bW5zLnB1c2goe1xuICAgICAgICAgIGNvbHVtbl9oZWFkZXI6bGFiZWxzW2ldLFxuICAgICAgICAgIHZhbHVlczpjLFxuICAgICAgICAgIGRhdGFfdHlwZTpkYXRhVHlwZXNbaV0sXG4gICAgICAgICAgcG9zc2libGVfZGF0YV90eXBlczogcG9zc2libGVEYXRhVHlwZXNbaV1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb2x1bW5zO1xuICAgIH1cblxuICAgIHZhciBjb2x1bW5JZHggPSBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgIHZhciBpZHggPSBsYWJlbHMuaW5kZXhPZihjb2x1bW4pO1xuICAgICAgaWYoaWR4ID09IC0xKVxuICAgICAgICB0aHJvdyBFcnJvcignY29sdW1uICcrY29sdW1uKycgbm90IGZvdW5kIGluIGRhdGFzZXQnKTtcbiAgICAgIHJldHVybiBpZHg7XG4gICAgfTtcbiAgICBcbiAgICB2YXIgZGF0YUxpc3RlbmVycyA9IFtdXG4gICAgdmFyIGRhdGFDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICBjb2x1bW5zQ2FjaGUgPSBudWxsO1xuICAgICAgZGF0YUxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKGxpc3RuZXIpIHtcbiAgICAgICAgbGlzdG5lcigpO1xuICAgICAgfSlcbiAgICB9XG4gIFxuICAgIGluaXRpYWxpemUoaW5zaWdodE9iamVjdCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICBcbiAgICAgIG9yZGVyQnk6IGZ1bmN0aW9uKGNvbHVtbiwgdHlwZSkge1xuICAgICAgICB2YXIgaWR4ID0gY29sdW1uSWR4KGNvbHVtbik7XG4gICAgICAgIFxuICAgICAgICBpZighdHlwZSB8fCB0eXBlID09ICdhc2MnIHx8IHR5cGUgPT0gJ2Rlc2MnKVxuICAgICAgICAgIG9yZGVyVGVzdCA9IGZ1bmN0aW9uKGUsIGlkeCkgeyByZXR1cm4gZVtpZHhdOyB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBvcmRlclRlc3QgPSB0eXBlO1xuICAgICAgICBcbiAgICAgICAgdGFibGUgPSBfLnNvcnRCeSh0YWJsZSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHJldHVybiBvcmRlclRlc3QoZSwgaWR4KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmKHR5cGUgPT0gJ2Rlc2MnKVxuICAgICAgICAgIHRhYmxlLnJldmVyc2UoKTtcbiAgICAgICAgZGF0YUNoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgXG4gICAgICByZXZlcnNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGFibGUgPSB0YWJsZS5yZXZlcnNlKCk7XG4gICAgICAgIGRhdGFDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgZmlsdGVyOiBmdW5jdGlvbihjb2x1bW4sIG9wLCB2YWx1ZSkge1xuICAgICAgICBpZihfLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gb3A7XG4gICAgICAgICAgb3AgPSAnZXEnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZHggPSBjb2x1bW5JZHgoY29sdW1uKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGRhdGFUeXBlc1tpZHhdID09ICdkYXRldGltZScgJiYgIXZhbHVlIGluc3RhbmNlb2YgRGF0ZSlcbiAgICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBEYXRlKVxuICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9JU09TdHJpbmcoKS5yZXBsYWNlKCdUJywgMCkuc2xpY2UoMCwgMTkpO1xuICAgICAgICBcbiAgICAgICAgaWYob3AgPT0gJ2VxJylcbiAgICAgICAgICB2YXIgdGVzdEZ1bmMgPSBmdW5jdGlvbihlKSB7cmV0dXJuIHZhbHVlLmluZGV4T2YoZVtpZHhdKSE9PS0xfVxuICAgICAgICBlbHNlIGlmKG9wID09ICdub3RlcScpXG4gICAgICAgICAgdmFyIHRlc3RGdW5jID0gZnVuY3Rpb24oZSkge3JldHVybiB2YWx1ZS5pbmRleE9mKGVbaWR4XSk9PT0tMX1cbiAgICAgICAgZWxzZSBpZihvcCA9PSAnZ3QnKVxuICAgICAgICAgIHZhciB0ZXN0RnVuYyA9IGZ1bmN0aW9uKGUpIHtyZXR1cm4gZVtpZHhdID4gdmFsdWV9XG4gICAgICAgIGVsc2UgaWYob3AgPT0gJ2d0ZScpXG4gICAgICAgICAgdmFyIHRlc3RGdW5jID0gZnVuY3Rpb24oZSkge3JldHVybiBlW2lkeF0gPj0gdmFsdWV9XG4gICAgICAgIGVsc2UgaWYob3AgPT0gJ2x0JylcbiAgICAgICAgICB2YXIgdGVzdEZ1bmMgPSBmdW5jdGlvbihlKSB7cmV0dXJuIGVbaWR4XSA8IHZhbHVlfVxuICAgICAgICBlbHNlIGlmKG9wID09ICdsdGUnKVxuICAgICAgICAgIHZhciB0ZXN0RnVuYyA9IGZ1bmN0aW9uKGUpIHtyZXR1cm4gZVtpZHhdIDw9IHZhbHVlfVxuICAgICAgICBlbHNlIGlmKG9wID09PSAnaW4nKVxuICAgICAgICAgIHZhciB0ZXN0RnVuYyA9IGZ1bmN0aW9uKGUpIHsgcmV0dXJuIF8odmFsdWUpLmNvbnRhaW5zKGVbaWR4XSkgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbnJlY29nbml6ZWQgZmlsdGVyIG9wdGlvbjogJytvcCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7IFxuICAgICAgICB9XG4gICAgICAgIHRhYmxlID0gXy5maWx0ZXIodGFibGUsIHRlc3RGdW5jKTtcbiAgICAgICAgZGF0YUNoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBsaW1pdCA6IGZ1bmN0aW9uKG1heCkge1xuICAgICAgICBpZihtYXggJiYgXy5zaXplKHRhYmxlKT5tYXggKSB7XG4gICAgICAgICAgdmFyIGk9MDtcbiAgICAgICAgICB2YXIgbnRoID0gTWF0aC5mbG9vcihfLnNpemUoc29ydGVkKSAvIGxpbWl0KTtcbiAgICAgICAgICB0YWJsZSA9IF8uZmlsdGVyKHRhYmxlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHJldHVybiBpICUgbnRoID09IDA7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGF0YUNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGdyb3VwQnk6IGZ1bmN0aW9uKGNvbHVtbiwgZ3JvdXBpbmdGdW5jdGlvbiwgZ3JvdXBwZWREYXRhVHlwZSwgZ3JvdXBwZWRDb2x1bW5IZWFkZXIgKSB7XG4gICAgICAgIHZhciBpZHggPSBjb2x1bW5JZHgoY29sdW1uKTtcbiAgICAgICAgZ3JvdXBpbmdGdW5jdGlvbiA9IGdyb3VwaW5nRnVuY3Rpb24gfHwgZnVuY3Rpb24oZSkge3JldHVybiBlO307XG4gICAgICAgIGdyb3VwcGVkQ29sdW1uSGVhZGVyID0gZ3JvdXBwZWRDb2x1bW5IZWFkZXIgfHwgJ2dyb3VwcGVkJztcbiAgICAgICAgZ3JvdXBwZWREYXRhVHlwZSA9IGdyb3VwcGVkRGF0YVR5cGUgfHwgJ251bWVyaWMnO1xuXG4gICAgICAgIHZhciBncm91cHBlZCA9IF8uZ3JvdXBCeSh0YWJsZSwgZnVuY3Rpb24oZSl7IFxuICAgICAgICAgIHJldHVybiBlW2lkeF07IFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHZhciBrZXlzQ29sdW1uID0geyBcbiAgICAgICAgICBjb2x1bW5faGVhZGVyOiBsYWJlbHNbaWR4XSxcbiAgICAgICAgICBkYXRhX3R5cGU6IGRhdGFUeXBlc1tpZHhdLFxuICAgICAgICAgIHZhbHVlczogT2JqZWN0LmtleXMoZ3JvdXBwZWQpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB2YXIgdmFsdWVzID0gW11cbiAgICAgICAgXy5tYXAoa2V5c0NvbHVtbi52YWx1ZXMsIGZ1bmN0aW9uKGspIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChncm91cGluZ0Z1bmN0aW9uKGdyb3VwcGVkW2tdKSk7IFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHZhciBncm91cHBlZENvbHVtbiA9IHtcbiAgICAgICAgICBjb2x1bW5faGVhZGVyOiBncm91cHBlZENvbHVtbkhlYWRlcixcbiAgICAgICAgICBkYXRhX3R5cGU6IGdyb3VwcGVkRGF0YVR5cGUsXG4gICAgICAgICAgdmFsdWVzOiB2YWx1ZXNcbiAgICAgICAgfVxuICAgICAgICBpbml0aWFsaXplKFtrZXlzQ29sdW1uLCBncm91cHBlZENvbHVtbl0pO1xuICAgICAgICBkYXRhQ2hhbmdlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG5cbiAgICAgIGNvdW50VW5pcXVlOiBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgdmFyIGlkeCA9IGNvbHVtbklkeChjb2x1bW4pO1xuICAgICAgICB2YXIgY29sdW1uID0gdGhpcy5nZXRDb2x1bW5zKClbaWR4XTtcbiAgICAgICAgdmFyIGNvdW50cyA9IF8uY291bnRCeShjb2x1bW4udmFsdWVzLCBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbDsgfSk7XG4gICAgICAgIHZhciBuZXdDb2x1bW5zID0gW107XG5cbiAgICAgICAgdmFyIHZhbENvbHVtbiA9IHtcbiAgICAgICAgICBjb2x1bW5faGVhZGVyOiBjb2x1bW4uY29sdW1uX2hlYWRlcixcbiAgICAgICAgICBkYXRhX3R5cGU6IGNvbHVtbi5kYXRhX3R5cGUsXG4gICAgICAgICAgdmFsdWVzOiBfKGNvdW50cykua2V5cygpXG4gICAgICAgIH07XG4gICAgICAgIHZhciBjb3VudENvbHVtbiA9IHtcbiAgICAgICAgICBjb2x1bW5faGVhZGVyOiAnY291bnRfMCcsXG4gICAgICAgICAgZGF0YV90eXBlOiAnbnVtZXJpYycsXG4gICAgICAgICAgdmFsdWVzOiBfKGNvdW50cykudmFsdWVzKClcbiAgICAgICAgfTtcbiAgICAgICAgaW5pdGlhbGl6ZShbdmFsQ29sdW1uLGNvdW50Q29sdW1uXSk7XG4gICAgICAgIGRhdGFDaGFuZ2VkKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgcmVwbGFjZVZhbHVlczogZnVuY3Rpb24oY29sdW1uLCByZXBsYWNlbWVudHMpIHtcbiAgICAgICAgdmFyIGlkeCA9IGNvbHVtbklkeChjb2x1bW4pO1xuICAgICAgICBcbiAgICAgICAgXy5tYXAodGFibGUsIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgIGlmKHJvd1tpZHhdIGluIHJlcGxhY2VtZW50cylcbiAgICAgICAgICAgIHJvd1tpZHhdID0gcmVwbGFjZW1lbnRzW3Jvd1tpZHhdXTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBkYXRhQ2hhbmdlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24oY29sdW1uLCBjb2x1bW5Ob3JtYWxpemVkKSB7XG4gICAgICAgIHZhciBpZHggPSBjb2x1bW5JZHgoY29sdW1uKTtcbiAgICAgICAgdmFyIG5vcm1hbGl6ZWRJZHggPSBjb2x1bW5JZHgoY29sdW1uTm9ybWFsaXplZCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgZ3JvdXBwZWQgPSBfLmdyb3VwQnkodGFibGUsIGZ1bmN0aW9uKGUpeyBcbiAgICAgICAgICByZXR1cm4gZVtpZHhdOyBcbiAgICAgICAgfSlcbiAgICAgICAgXy5tYXAoZ3JvdXBwZWQsIGZ1bmN0aW9uKGdyb3VwKSB7XG4gICAgICAgICAgZ3JvdXAuc3VtID0gXy5yZWR1Y2UoZ3JvdXAsIGZ1bmN0aW9uKG1lbW8sIHJvdyl7IHJldHVybiBtZW1vK3Jvd1tub3JtYWxpemVkSWR4XTsgfSwgMClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGFibGUuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHBlZFtyb3dbaWR4XV07XG4gICAgICAgICAgcm93W25vcm1hbGl6ZWRJZHhdID0gMTAwKnJvd1tub3JtYWxpemVkSWR4XS9ncm91cC5zdW07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZGF0YUNoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBnZXRDb2x1bW5zOiBmdW5jdGlvbihjYikge1xuICAgICAgICBpZighY29sdW1uc0NhY2hlKVxuICAgICAgICAgIGNvbHVtbnNDYWNoZSA9IHVuemlwKHRhYmxlKTtcbiAgICAgICAgXG4gICAgICAgIGlmKGNiKSB7XG4gICAgICAgICAgY2IoY29sdW1uc0NhY2hlKTtcbiAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgcmV0dXJuIGNvbHVtbnNDYWNoZTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGdldENvbHVtbjogZnVuY3Rpb24oY29sdW1uLCBjYikge1xuICAgICAgICB2YXIgY29sdW1ucyA9IHRoaXMuZ2V0Q29sdW1ucygpO1xuICAgICAgICB2YXIgY29sdW1uID0gXy5maW5kKGNvbHVtbnMsIGZ1bmN0aW9uKGMpIHsgcmV0dXJuIGMuY29sdW1uX2hlYWRlciA9PT0gY29sdW1uIH0pO1xuICAgICAgICBpZihjYikge1xuICAgICAgICAgIGNiKGNvbHVtbik7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBjb2x1bW47XG4gICAgICB9LFxuXG4gICAgICBhc3NpZ25WYXJpYXRpb246IGZ1bmN0aW9uKHZhcmlhdGlvbikge1xuICAgICAgICBpZih2YXJpYXRpb25zLmhhc093blByb3BlcnR5KHZhcmlhdGlvbikpIHtcbiAgICAgICAgICBjb2x1bW5zQ2FjaGUgPSBudWxsO1xuICAgICAgICAgIHRhYmxlID0gemlwKHZhcmlhdGlvbnNbdmFyaWF0aW9uXSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbihjYikge1xuICAgICAgICBkYXRhTGlzdGVuZXJzLnB1c2goY2IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcG9waWx5LmRhdGFzZXQuY291bnQgPSBmdW5jdGlvbihhcnIpIHtcbiAgICByZXR1cm4gYXJyLmxlbmd0aDtcbiAgfVxuICBwb3BpbHkuZGF0YXNldC5jb3VudC5kYXRhVHlwZSA9ICdudW1lcmljJztcbiAgcG9waWx5LmRhdGFzZXQuY291bnQuY29sdW1uTGFiZWwgPSAnQ291bnQnO1xuICBcbiAgcG9waWx5LmRhdGFzZXQuY291bnRVbmlxdWUgPSBmdW5jdGlvbihhcnIpIHtcbiAgICByZXR1cm4gXy51bmlxKGFycikubGVuZ3RoO1xuICB9XG4gIHBvcGlseS5kYXRhc2V0LmNvdW50VW5pcXVlLmRhdGFUeXBlID0gJ251bWVyaWMnO1xuICBwb3BpbHkuZGF0YXNldC5jb3VudFVuaXF1ZS5jb2x1bW5MYWJlbCA9ICdDb3VudCB1bmlxdWUnO1xuXG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICAgIHZhciBuYW4gPSAtOTk5OTk7XG5cbiAgICB2YXIgZGF5c0RpZmYgPSBmdW5jdGlvbihkYXRlU3RyaW5ncykge1xuICAgICAgICB2YXIgZGF0ZXMgPSBfLm1hcChkYXRlU3RyaW5ncyxmdW5jdGlvbihkKSB7IHJldHVybiBuZXcgRGF0ZShkKTsgfSk7XG4gICAgICAgIHZhciBtaW5EYXRlID0gXy5taW4oZGF0ZXMpO1xuICAgICAgICB2YXIgbWF4RGF0ZSA9IF8ubWF4KGRhdGVzKTtcbiAgICAgICAgdmFyIGRhdGVEaWZmID0gbWF4RGF0ZSAtIG1pbkRhdGU7XG4gICAgICAgIHZhciBkYXlzRGlmZiA9IGRhdGVEaWZmIC8gMTAwMCAvIDYwIC8gNjAgLyAyNDtcblxuICAgICAgICByZXR1cm4gZGF5c0RpZmY7XG4gICAgfTtcblxuICAgIHZhciBmb3JtYXROdW1iZXJzID0gZnVuY3Rpb24obnVtYmVyTGlzdCwgZGVjaW1hbFBsYWNlcykge1xuICAgICAgICB2YXIgZm9ybWF0dGVkID0gXy5tYXAobnVtYmVyTGlzdCwgZnVuY3Rpb24obnVtKSB7XG4gICAgICAgICAgICBudW0gPSBwYXJzZUZsb2F0KG51bSk7XG5cbiAgICAgICAgICAgIHZhciBmb3JtYXRTdHIgPSAnMCc7XG4gICAgICAgICAgICBpZihfLmlzVW5kZWZpbmVkKGRlY2ltYWxQbGFjZXMpKSB7XG4gICAgICAgICAgICAgICAgZm9ybWF0U3RyICs9ICdbLjAwXSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1hdFN0ciArPSAnWy4nO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wO2k8ZGVjaW1hbFBsYWNlcy0xO2krKykge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXRTdHIgKz0gJzAnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3JtYXRTdHIgKz0gJ10nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihudW0gIT09IFwibmFuXCIgJiYgXy5pc051bWJlcihudW0pICYmICFfLmlzTmFOKG51bSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtZXJhbChudW0pLmZvcm1hdChmb3JtYXRTdHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICcwLjAwJztcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgfTtcblxuICAgIHZhciB0b051bWJlciA9IGZ1bmN0aW9uKHN0ckxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF8ubWFwKHN0ckxpc3QsIGZ1bmN0aW9uKHZhbCkgeyBcbiAgICAgICAgICAgICAgaWYodmFsLnRvU3RyaW5nKCkuaW5kZXhPZignLicpID4gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh2YWwsMTApIFxuICAgICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVzKHhWYWx1ZXMsIGludGVydmFsKSB7XG4gICAgICAgIHZhciBkYXlEaWZmID0gZGF5c0RpZmYoeFZhbHVlcyk7IFxuICAgICAgICB2YXIgdGlja0Zvcm1hdFN0ciA9IGZvcm1hdEZyb21EYXlEaWZmKGRheURpZmYpO1xuXG5cbiAgICAgICAgdmFyIGRhdGVGb3JtYXRTdHIgPSBmb3JtYXRGcm9tSW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBpZihfLmlzVW5kZWZpbmVkKGludGVydmFsKSkge1xuICAgICAgICAgICAgZGF0ZUZvcm1hdFN0ciA9IGZvcm1hdEZyb21JbnNwZWN0aW9uKHhWYWx1ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGVGb3JtYXQgPSBkMy50aW1lLmZvcm1hdChkYXRlRm9ybWF0U3RyKTtcbiAgICAgICAgdmFyIHRpY2tGb3JtYXQgPSBkMy50aW1lLmZvcm1hdCh0aWNrRm9ybWF0U3RyKTtcbiAgICAgICAgdmFyIGZ1bGxGb3JtYXQgPSBkMy50aW1lLmZvcm1hdCgnJVktJW0tJWQgJUg6JU06JVMnKTtcblxuICAgICAgICB2YXIgdGlja3NWYWx1ZXMgPSB0aWNrRm9ybWF0VmFsdWVzKHhWYWx1ZXMsIHRpY2tGb3JtYXRTdHIsIGRhdGVGb3JtYXQpO1xuXG4gICAgICAgIGlmKGRhdGVGb3JtYXQgIT0gZnVsbEZvcm1hdCkge1xuICAgICAgICAgICAgeFZhbHVlcyA9IF8ubWFwKHhWYWx1ZXMsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlRm9ybWF0KGZ1bGxGb3JtYXQucGFyc2UoZC5zcGxpdCgnLicpWzBdKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHhWYWx1ZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0RnJvbURheURpZmYoZGF5RGlmZikge1xuICAgICAgICBpZihkYXlEaWZmID4gMTAwMClcbiAgICAgICAgICAgIHJldHVybiAnJVknO1xuICAgICAgICBpZihkYXlEaWZmID4gOTApXG4gICAgICAgICAgICByZXR1cm4gJyVZICVCJztcbiAgICAgICAgaWYoZGF5RGlmZiA+IDMpXG4gICAgICAgICAgICByZXR1cm4gJyVZLSVtLSVkJztcbiAgICAgICAgcmV0dXJuICclWS0lbS0lZCAlSDolTTolUyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZm9ybWF0RnJvbUluc3BlY3Rpb24oeFZhbHVlcykge1xuICAgICAgICB2YXIgdGltZXMgPSBfLm1hcCh4VmFsdWVzLCBmdW5jdGlvbih4VmFsdWUpIHsgcmV0dXJuIHhWYWx1ZS5zcGxpdCgnICcpWzFdIH0pO1xuICAgICAgICBpZihfLmV2ZXJ5KHRpbWVzLCBmdW5jdGlvbih0aW1lKSB7IHJldHVybiB0aW1lID09ICcwMDowMDowMCcgfSkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJVktJW0tJWQnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnJVktJW0tJWQgJUg6JU06JVMnO1xuICAgIH1cbiAgICAgICAgXG4gICAgZnVuY3Rpb24gZm9ybWF0RnJvbUludGVydmFsKGludGVydmFsKSB7XG4gICAgICAgIGlmKGludGVydmFsID09ICd5ZWFyJylcbiAgICAgICAgICAgIHJldHVybiAnJVknO1xuICAgICAgICBpZihpbnRlcnZhbCA9PSAnbW9udGgnKVxuICAgICAgICAgICAgcmV0dXJuICclWSAlQic7XG4gICAgICAgIGlmKGludGVydmFsID09ICd3ZWVrJylcbiAgICAgICAgICAgIHJldHVybiAnJVktJW0tJWQnO1xuICAgICAgICBpZihpbnRlcnZhbCA9PSAnZGF5JylcbiAgICAgICAgICAgIHJldHVybiAgJyVZLSVtLSVkJztcbiAgICAgICAgcmV0dXJuICclWS0lbS0lZCAlSDolTTolUyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RlcEludGVydmFsKGludGVydmFsKSB7XG4gICAgICAgIGlmKGludGVydmFsPT0nJVknKSByZXR1cm4gZnVuY3Rpb24oZCwgc3RlcCkge2Quc2V0RnVsbFllYXIoZC5nZXRGdWxsWWVhcigpK3N0ZXApOyByZXR1cm4gZDt9O1xuICAgICAgICBpZihpbnRlcnZhbD09JyVZICVCJykgcmV0dXJuIGZ1bmN0aW9uKGQsIHN0ZXApIHtkLnNldE1vbnRoKGQuZ2V0TW9udGgoKStzdGVwKTsgcmV0dXJuIGQ7fTtcbiAgICAgICAgaWYoaW50ZXJ2YWw9PSclWS0lbS0lZCcpIHJldHVybiBmdW5jdGlvbihkLCBzdGVwKSB7ZC5zZXREYXRlKGQuZ2V0RGF0ZSgpK3N0ZXApOyByZXR1cm4gZDt9O1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdGlja0Zvcm1hdFZhbHVlcyhjYXRlZ29yaWVzLCB0aWNrRm9ybWF0U3RyLCBkYXRlRm9ybWF0KSB7XG4gICAgICAgIHZhciBzdGVwRnVuYyA9IHN0ZXBJbnRlcnZhbCh0aWNrRm9ybWF0U3RyKTtcbiAgICAgICAgaWYoIXN0ZXBGdW5jKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIFxuICAgICAgICB2YXIgZGF0ZXMgPSBfLm1hcChjYXRlZ29yaWVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBuZXcgRGF0ZShkKTsgfSk7XG4gICAgICAgIHZhciBtaW5EYXRlID0gXy5taW4oZGF0ZXMpO1xuICAgICAgICB2YXIgbWF4RGF0ZSA9IF8ubWF4KGRhdGVzKTtcbiAgICAgICAgdmFyIGRhdGVEaWZmID0gbWF4RGF0ZSAtIG1pbkRhdGU7XG4gICAgICAgIHZhciBtYXhTdGVwcyA9IDEwO1xuXG4gICAgICAgIHZhciBzdGVwRElmZiA9IHN0ZXBGdW5jKG5ldyBEYXRlKDE5ODApLCAxKSAtIG5ldyBEYXRlKDE5ODApO1xuICAgICAgICB2YXIgc3RlcCA9IDE7XG4gICAgICAgIHZhciBzdGVwcyA9IGRhdGVEaWZmL3N0ZXBESWZmO1xuICAgICAgICBpZihzdGVwcyA+IG1heFN0ZXBzKVxuICAgICAgICAgICAgc3RlcCA9IE1hdGguZmxvb3Ioc3RlcHMvbWF4U3RlcHMpO1xuICAgICAgICBcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKG1pbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgICAgZm9yKDsgZGF0ZTw9bWF4RGF0ZTsgZGF0ZSA9IHN0ZXBGdW5jKGRhdGUsIHN0ZXApKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChkYXRlRm9ybWF0KGRhdGUpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgLy8gQ3JlZGl0OiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9tYXRoZXdieXJuZS8xMjgwMjg2XG4gICAgZnVuY3Rpb24gc2x1Z2lmeSh0ZXh0KSB7XG4gICAgICByZXR1cm4gdGV4dC50b1N0cmluZygpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJy0nKSAgICAgICAgICAgLy8gUmVwbGFjZSBzcGFjZXMgd2l0aCAtXG4gICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcLV0rL2csICcnKSAgICAgICAvLyBSZW1vdmUgYWxsIG5vbi13b3JkIGNoYXJzXG4gICAgICAgIC5yZXBsYWNlKC9cXC1cXC0rL2csICctJykgICAgICAgICAvLyBSZXBsYWNlIG11bHRpcGxlIC0gd2l0aCBzaW5nbGUgLVxuICAgICAgICAucmVwbGFjZSgvXi0rLywgJycpICAgICAgICAgICAgIC8vIFRyaW0gLSBmcm9tIHN0YXJ0IG9mIHRleHRcbiAgICAgICAgLnJlcGxhY2UoLy0rJC8sICcnKTsgICAgICAgICAgICAvLyBUcmltIC0gZnJvbSBlbmQgb2YgdGV4dFxuICAgIH1cblxuXG4gICAgICB2YXIgam9pbldpdGggPSBmdW5jdGlvbihhcnIsIHdvcmQpIHtcbiAgICAgICAgaWYoYXJyLmxlbmd0aCA8IDIpXG4gICAgICAgICAgcmV0dXJuIGFyci5qb2luKCcnKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBbYXJyLnNsaWNlKDAsIC0xKS5qb2luKCcsICcpLCBhcnIuc2xpY2UoLTEpWzBdXS5qb2luKCcgJyArIHdvcmQgKyAnICcpO1xuICAgICAgfTtcblxuICAgICAgdmFyIHdyYXBMYWJlbCA9IGZ1bmN0aW9uKGxhYmVsKSB7XG4gICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCJwb3BpbHktdGl0bGUtdmFyaWFibGVcIiA+JysgbGFiZWwgKyAnPC9zcGFuPic7XG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FwaXRhbGl6ZSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICB9O1xuICAgICAgXG4gICAgdmFyIGZvcm1hdEF4aXMgPSBmdW5jdGlvbihheGlzLCBvcHRpb25zLCB2YWx1ZUZvcm1hdGVyKSB7XG5cbiAgICAgIHZhciBmb3JtYXR0ZXJzID0gW107XG4gICAgICAob3B0aW9uc1snZm9ybWF0dGVycyddfHxbXSkuZm9yRWFjaChmdW5jdGlvbihmKSB7XG4gICAgICAgIGlmKGYuY29sdW1uID09IGF4aXMubGFiZWwpXG4gICAgICAgICAgZm9ybWF0dGVycy5wdXNoKGYpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHZhciBvcHRpb25zRm9ybWF0ZXIgPSBmdW5jdGlvbih2KSB7IFxuICAgICAgICBmb3JtYXR0ZXJzLmZvckVhY2goZnVuY3Rpb24oZikge1xuICAgICAgICAgIGlmKGYub3AgPT0gJ3ByZWZpeCcpXG4gICAgICAgICAgICB2ID0gZi52YWx1ZSArIHY7XG4gICAgICAgICAgZWxzZSBpZihmLm9wID09ICdzdWZpeCcpXG4gICAgICAgICAgICB2ID0gdiArIGYudmFsdWU7XG4gICAgICAgICAgZWxzZSBpZihmLmZ1bmMpXG4gICAgICAgICAgICB2ID0gZi5mdW5jKHYpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHY7XG4gICAgICB9O1xuICAgICAgICAgICAgICBcbiAgICAgIHJldHVybiBmdW5jdGlvbih2KSB7XG4gICAgICAgIHZhciAkJCA9IHRoaXMsIGNvbmZpZyA9ICQkLmNvbmZpZztcbiAgICAgICAgaWYoIXZhbHVlRm9ybWF0ZXIpIHtcbiAgICAgICAgICB2YWx1ZUZvcm1hdGVyID0gJCQuaXNUaW1lU2VyaWVzKCkgPyAkJC5kZWZhdWx0QXhpc1RpbWVGb3JtYXQgOiAkJC5pc0NhdGVnb3JpemVkKCkgPyAkJC5jYXRlZ29yeU5hbWUgOiBmdW5jdGlvbiAodikgeyByZXR1cm4gdiA8IDAgPyB2LnRvRml4ZWQoMCkgOiB2OyB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAob3B0aW9uc1theGlzKydQcmVmaXgnXXx8XCJcIikgKyBvcHRpb25zRm9ybWF0ZXIodmFsdWVGb3JtYXRlci5jYWxsKCQkLCB2KSkgKyAob3B0aW9uc1theGlzKydTdWZpeCddfHxcIlwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwb3BpbHkuY2hhcnQuZm9ybWF0ID0ge1xuICAgICAgICBmb3JtYXROdW1iZXJzOiBmb3JtYXROdW1iZXJzLFxuICAgICAgICB0b051bWJlcjogdG9OdW1iZXIsXG4gICAgICAgIGRheXNEaWZmOiBkYXlzRGlmZixcbiAgICAgICAgZm9ybWF0RnJvbURheURpZmY6IGZvcm1hdEZyb21EYXlEaWZmLFxuICAgICAgICBmb3JtYXRGcm9tSW50ZXJ2YWw6IGZvcm1hdEZyb21JbnRlcnZhbCxcbiAgICAgICAgZm9ybWF0RnJvbUluc3BlY3Rpb246IGZvcm1hdEZyb21JbnNwZWN0aW9uLFxuICAgICAgICBmb3JtYXREYXRlczogZm9ybWF0RGF0ZXMsXG4gICAgICAgIHRpY2tGb3JtYXRWYWx1ZXM6IHRpY2tGb3JtYXRWYWx1ZXMsXG4gICAgICAgIHNsdWdpZnk6IHNsdWdpZnksXG4gICAgICAgIGpvaW5XaXRoOiBqb2luV2l0aCxcbiAgICAgICAgd3JhcExhYmVsOiB3cmFwTGFiZWwsXG4gICAgICAgIGNhcGl0YWxpemU6IGNhcGl0YWxpemUsXG4gICAgICAgIGZvcm1hdEF4aXM6IGZvcm1hdEF4aXNcbiAgICB9XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgY2hhcnRTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgdmFyIHdpZHRoID0gTWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsIDEwNTIpOyAvLyAxMDUyIGNvbnRhaW5lciBtYXgtd2lkdGhcbiAgICAgIHZhciBtcVRlc3QgPSB3aW5kb3cubWF0Y2hNZWRpYSggXCIobWluLXdpZHRoOiA0OGVtKVwiICk7XG4gICAgICBpZihtcVRlc3QpIHtcbiAgICAgICAgICBoZWlnaHQgPSBoZWlnaHQgLSA0NjA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhlaWdodCA9IGhlaWdodCAtIDE1MDtcbiAgICAgIH1cbiAgICAgIGlmIChoZWlnaHQgPiB3aWR0aClcbiAgICAgICAgICBoZWlnaHQgPSB3aWR0aDtcbiAgICAgIGVsc2UgaWYoaGVpZ2h0IDwgNDMwKVxuICAgICAgICAgIGhlaWdodCA9IDQzMDtcbiAgICAgIHJldHVybiB7J2hlaWdodCc6IGhlaWdodH07XG4gIH07XG5cbiAgdmFyIHVwZGF0ZUNoYXJ0ID0gZnVuY3Rpb24oZWxlbWVudCwgY2hhcnQsIGNoYXJ0RGF0YSwgY2hhcnRQYWRkaW5nLCByb3RhdGVkKSB7XG4gICAgICByZXR1cm4gY2hhcnQ7XG4gICAgICAvLyB4IGF4aXMgbGFiZWwgaGVpZ2h0XG4gICAgICB2YXIgeExhYmVsID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYzMtYXhpcy14LWxhYmVsJyk7XG4gICAgICB2YXIgeExhYmVsSGVpZ2h0ID0gTWF0aC5jZWlsKHhMYWJlbC5nZXRCQm94KCkuaGVpZ2h0KTtcbiAgICAgIC8vIHggYXhpcyBsYWJlbHMgYm94IHNpemVzXG4gICAgICB2YXIgeExhYmVsc0JveCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmMzLWF4aXMuYzMtYXhpcy14Jyk7XG4gICAgICB2YXIgeExhYmVsc0JveEhlaWdodCA9IE1hdGguY2VpbCh4TGFiZWxzQm94LmdldEJCb3goKS5oZWlnaHQpO1xuICAgICAgdmFyIHhMYWJlbHNCb3hXaWR0aCA9IE1hdGguY2VpbCh4TGFiZWxzQm94LmdldEJCb3goKS53aWR0aCk7XG4gICAgICAvLyB5IGF4aXMgbGFiZWxzIGJveCBzaXplc1xuICAgICAgdmFyIHlMYWJlbHNCb3ggPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jMy1heGlzLmMzLWF4aXMteScpO1xuICAgICAgdmFyIHlMYWJlbHNCb3hIZWlnaHQgPSBNYXRoLmNlaWwoeUxhYmVsc0JveC5nZXRCQm94KCkuaGVpZ2h0KTtcbiAgICAgIHZhciB5TGFiZWxzQm94V2lkdGggPSBNYXRoLmNlaWwoeUxhYmVsc0JveC5nZXRCQm94KCkud2lkdGgpO1xuICAgICAgLy8gbWFpbiBjaGFydCBzaXplc1xuICAgICAgdmFyIGNoYXJ0Qm94ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYzMtem9vbS1yZWN0Jyk7XG4gICAgICB2YXIgY2hhcnRCb3hIZWlnaHQgPSBNYXRoLmNlaWwoY2hhcnRCb3guZ2V0QkJveCgpLmhlaWdodCk7XG4gICAgICB2YXIgY2hhcnRCb3hXaWR0aCA9IE1hdGguY2VpbChjaGFydEJveC5nZXRCQm94KCkud2lkdGgpO1xuICAgICAgLy8gbWFpbiBzdmcgc2l6ZXNcbiAgICAgIHZhciBjaGFydEFyZWEgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xuICAgICAgaWYoIWNoYXJ0QXJlYSlcbiAgICAgICAgICB2YXIgY2hhcnRBcmVhID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcbiAgICAgIFxuICAgICAgdmFyIGNoYXJ0QXJlYVdpZHRoID0gY2hhcnRBcmVhLmNsaWVudFdpZHRoIHx8IGNoYXJ0QXJlYS5wYXJlbnROb2RlLmNsaWVudFdpZHRoO1xuICAgICAgdmFyIGNoYXJ0QXJlYUhlaWdodCA9IGNoYXJ0QXJlYS5jbGllbnRIZWlnaHQgfHwgY2hhcnRBcmVhLnBhcmVudE5vZGUuY2xpZW50SGVpZ2h0OztcblxuICAgICAgY2hhcnRQYWRkaW5nLmJvdHRvbSA9IHhMYWJlbEhlaWdodDsgICAgXG4gICAgICBcbiAgICAgIGlmICghY2hhcnQuaW50ZXJuYWwuY29uZmlnLmF4aXNfcm90YXRlZCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBwYWRkaW5nIGJvdHRvbSBpcyBuZWVkZWRcbiAgICAgICAgICAvLyBhZGQgcGFkZGluZyBib3R0b20gaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKGNoYXJ0Qm94SGVpZ2h0ICsgeExhYmVsc0JveEhlaWdodCArIGNoYXJ0UGFkZGluZy50b3AgPiBjaGFydEFyZWFIZWlnaHQpIHtcbiAgICAgICAgICAgICAgdmFyIHBhZGRpbmdCb3R0b20gPSBNYXRoLmFicyhjaGFydEFyZWFIZWlnaHQgLSAoY2hhcnRCb3hIZWlnaHQgKyB4TGFiZWxzQm94SGVpZ2h0ICsgY2hhcnRQYWRkaW5nLnRvcCkpO1xuICAgICAgICAgICAgICBjaGFydFBhZGRpbmcuYm90dG9tID0gcGFkZGluZ0JvdHRvbSArIHhMYWJlbEhlaWdodDtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBwYWRkaW5nIHJpZ2h0IGlzIG5lZWRlZFxuICAgICAgICAgIC8vIGFkZCBwYWRkaW5nIHJpZ2h0IGlmIG5lZWRlZFxuICAgICAgICAgIGlmICh4TGFiZWxzQm94V2lkdGggPiBjaGFydEJveFdpZHRoKSB7XG4gICAgICAgICAgICAgIHZhciBwYWRkaW5nUmlnaHQgPSBNYXRoLmFicyhjaGFydEJveFdpZHRoIC0geExhYmVsc0JveFdpZHRoKTtcbiAgICAgICAgICAgICAgY2hhcnRQYWRkaW5nLnJpZ2h0ID0gcGFkZGluZ1JpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjaGVjayB3aGV0aGVyIHBhZGRpbmcgbGVmdCBpcyBuZWVkZWRcbiAgICAgICAgICAvLyBhZGQgcGFkZGluZyBsZWZ0IGlmIG5lZWRlZFxuICAgICAgICAgIGlmIChjaGFydEJveFdpZHRoICsgeUxhYmVsc0JveFdpZHRoID4gY2hhcnRBcmVhV2lkdGgpIHtcbiAgICAgICAgICAgICAgdmFyIHBhZGRpbmdMZWZ0ID0gTWF0aC5hYnMoY2hhcnRBcmVhV2lkdGggLSAoY2hhcnRCb3hXaWR0aCArIHlMYWJlbHNCb3hXaWR0aCkpO1xuICAgICAgICAgICAgICBjaGFydFBhZGRpbmcubGVmdCA9IHBhZGRpbmdMZWZ0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFydFBhZGRpbmcubGVmdCA9IDUwMDtcbiAgICAgICAgICBjaGFydCA9IGNoYXJ0LmRlc3Ryb3koKTtcbiAgICAgICAgICBjaGFydCA9IGMzLmdlbmVyYXRlKGNoYXJ0RGF0YSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gbW92ZSB4IGF4aXMgbGFiZWwgb24gdGhlIGJvdHRvbSBvZiB0aGUgeCBheGlzIGxhYmVscyBib3ggICAgICAgIFxuICAgICAgICAgIHZhciBkeUF0dHIgPSB4TGFiZWwuZ2V0QXR0cmlidXRlKCdkeScpOyAgICAgICAgICAgXG4gICAgICAgICAgdmFyIGR5QXR0clZhbHVlID0gZHlBdHRyLnNsaWNlKDAsLTIpOyAgICAgICAgXG4gICAgICAgICAgZnVuY3Rpb24gZW1Ub1B4KGVtVmFsdWUpIHtcbiAgICAgICAgICAgICAgdmFyIGVtU2l6ZSA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykpLmdldFByb3BlcnR5VmFsdWUoJ2ZvbnQtc2l6ZScpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIChlbVNpemUgKiBlbVZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIHhMYWJlbFRvcCA9IE51bWJlcihlbVRvUHgoZHlBdHRyVmFsdWUpKTsgICAgICAgIFxuICAgICAgICAgIHZhciB4TGFiZWxUcmFuc2Zvcm0gPSB4TGFiZWxzQm94SGVpZ2h0IC0geExhYmVsVG9wIC0gNDsgICAgXG4gICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYzMtYXhpcy14LWxhYmVsJykuc2V0QXR0cmlidXRlKCd5JywgeExhYmVsVHJhbnNmb3JtKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgcGFkZGluZyBsZWZ0IGlzIG5lZWRlZFxuICAgICAgICAgIC8vIGFkZCBwYWRkaW5nIGxlZnQgaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKGNoYXJ0Qm94V2lkdGggKyB4TGFiZWxzQm94V2lkdGggPiBjaGFydEFyZWFXaWR0aCkge1xuICAgICAgICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBNYXRoLmFicyhjaGFydEFyZWFXaWR0aCAtIChjaGFydEJveFdpZHRoICsgeExhYmVsc0JveFdpZHRoKSk7XG4gICAgICAgICAgICAgIGNoYXJ0UGFkZGluZy5sZWZ0ID0gcGFkZGluZ0xlZnQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgcGFkZGluZyBib3R0b20gaXMgbmVlZGVkXG4gICAgICAgICAgLy8gYWRkIHBhZGRpbmcgYm90dG9tIGlmIG5lZWRlZFxuICAgICAgICAgIGlmICh4TGFiZWxzQm94SGVpZ2h0ID4gY2hhcnRCb3hIZWlnaHQpIHtcbiAgICAgICAgICAgICAgdmFyIHBhZGRpbmdCb3R0b20gPSBNYXRoLmFicyhjaGFydEJveEhlaWdodCAtIHhMYWJlbHNCb3hIZWlnaHQpOyAgIFxuICAgICAgICAgICAgICBjaGFydFBhZGRpbmcuYm90dG9tID0gcGFkZGluZ0JvdHRvbTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBwYWRkaW5nIHJpZ2h0IGlzIG5lZWRlZFxuICAgICAgICAgIC8vIGFkZCBwYWRkaW5nIHJpZ2h0IGlmIG5lZWRlZFxuICAgICAgICAgIGlmICh5TGFiZWxzQm94V2lkdGggPiBjaGFydEJveFdpZHRoKSB7XG4gICAgICAgICAgICAgIHZhciBwYWRkaW5nUmlnaHQgPSBNYXRoLmFicyhjaGFydEJveFdpZHRoIC0geUxhYmVsc0JveFdpZHRoKTtcbiAgICAgICAgICAgICAgY2hhcnRQYWRkaW5nLnJpZ2h0ID0gcGFkZGluZ1JpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFydC5kZXN0cm95KCk7XG4gICAgICAgICAgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoYXJ0O1xuICB9OyAgICBcbiAgXG4gIHZhciBjcmVhdGVTdHlsZUVsZW1lbnQgPSBmdW5jdGlvbihjc3MpIHtcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICAgIH1cbiAgICByZXR1cm4gc3R5bGU7XG4gIH1cbiAgXG4gIHZhciBpbml0aWFsQW5pbWF0aW9uID0gZnVuY3Rpb24oY2hhcnREYXRhLCBvcHRpb25zKSB7XG4gICAgdmFyIGVuZGluZ1ZhbHVlcyA9IGNoYXJ0RGF0YS5kYXRhLmNvbHVtbnM7XG4gICAgaWYoIW9wdGlvbnMuc2tpcEFuaW1hdGlvbikge1xuICAgICAgY2hhcnREYXRhLmRhdGEuY29sdW1ucyA9IFtdO1xuICAgICAgZW5kaW5nVmFsdWVzLmZvckVhY2goZnVuY3Rpb24oYykge1xuICAgICAgICBpZihjaGFydERhdGEuZGF0YS54cylcbiAgICAgICAgICBjaGFydERhdGEuZGF0YS5jb2x1bW5zLnB1c2goW2NbMF1dKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGNoYXJ0RGF0YS5kYXRhLmNvbHVtbnMucHVzaChjLnNsaWNlKDApLmZpbGwoMCwgMSkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogZnVuY3Rpb24oY2hhcnQsIGNiKSB7XG4gICAgICAgIGlmKCFvcHRpb25zLnNraXBBbmltYXRpb24pIHtcbiAgICAgICAgICBjYiA9IGNiIHx8IGZ1bmN0aW9uKCkge307XG4gICAgICAgICAgY2hhcnQubG9hZCh7XG4gICAgICAgICAgICBjb2x1bW5zOiBlbmRpbmdWYWx1ZXMsXG4gICAgICAgICAgICBkb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgc2V0VGltZW91dChjYiwgMzUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5wb3BpbHkuY2hhcnQudXRpbHMgPSB7XG4gICAgY2hhcnRTaXplOiBjaGFydFNpemUsXG4gICAgdXBkYXRlQ2hhcnQ6IHVwZGF0ZUNoYXJ0LFxuICAgIGNyZWF0ZVN0eWxlRWxlbWVudDogY3JlYXRlU3R5bGVFbGVtZW50LFxuICAgIGluaXRpYWxBbmltYXRpb246IGluaXRpYWxBbmltYXRpb24gfTtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG5cbiAgLy8gQXZlcmFnZSBudW1iZXIgMSBvZiBDYXRlZ29yeSAxIFxuICBcbiAgdmFyIGpvaW5XaXRoT3IgPSBmdW5jdGlvbihhcnIpIHtcbiAgICByZXR1cm4gcG9waWx5LmNoYXJ0LmZvcm1hdC5qb2luV2l0aChhcnIsJ29yJyk7XG4gIH07XG5cbiAgIHZhciBqb2luV2l0aEFuZCA9IGZ1bmN0aW9uKGFycikge1xuICAgIHJldHVybiBwb3BpbHkuY2hhcnQuZm9ybWF0LmpvaW5XaXRoKGFyciwnYW5kJyk7XG4gIH07XG4gIFxuICAgIFxuICB3aW5kb3cucG9waWx5LmNoYXJ0LmdlbmVyYXRlTGFiZWxzID0gZnVuY3Rpb24oY2FsY3VsYXRpb24sIGNvbHVtbnMsIHRyYW5zZm9ybWF0aW9ucykge1xuICAgIHZhciBtYWtlQ2xhdXNlID0gZnVuY3Rpb24odHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgdmFyIHQgPSB0cmFuc2Zvcm1hdGlvbjtcblxuICAgICAgICBpZih0Lm9wID09ICdpbicgJiYgdC52YWx1ZS5sZW5ndGggPCA0KSB7XG4gICAgICAgICAgcmV0dXJuICdpcyBlcXVhbCB0byAnKyBqb2luV2l0aE9yKHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodC5vcCA9PSAnZXEnIHx8IF8uaXNVbmRlZmluZWQodC5vcCkpXG4gICAgICAgICAgcmV0dXJuICdpcyBlcXVhbCB0byAnKyB0LnZhbHVlO1xuICAgICAgICBlbHNlIGlmKHQub3AgPT0gJ25vdGVxJylcbiAgICAgICAgICByZXR1cm4gJ2lzIG5vdCBlcXVhbCB0byAnKyB0LnZhbHVlO1xuICAgICAgICBlbHNlIGlmKHQub3AgPT0gJ2d0JylcbiAgICAgICAgICByZXR1cm4gJ2lzIGdyZWF0ZXIgdGhhbiAnKyB0LnZhbHVlO1xuICAgICAgICBlbHNlIGlmKHQub3AgPT0gJ2d0ZScpXG4gICAgICAgICAgcmV0dXJuICdpcyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJysgdC52YWx1ZTtcbiAgICAgICAgZWxzZSBpZih0Lm9wID09ICdsdCcpXG4gICAgICAgICAgcmV0dXJuICdpcyBsZXNzIHRoYW4gJysgdC52YWx1ZTtcbiAgICAgICAgZWxzZSBpZih0Lm9wID09ICdsdGUnKVxuICAgICAgICAgIHJldHVybiAnaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvJysgdC52YWx1ZTtcbiAgICB9O1xuXG4gICAgdmFyIG51bWJlcnMgPSBfLmZpbHRlcihjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi5kYXRhVHlwZSA9PT0gJ251bWVyaWMnfSk7XG4gICAgdmFyIGdyb3VwZXJzID0gXy5maWx0ZXIoY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7IHJldHVybiBjb2x1bW4uZGF0YVR5cGUgIT09ICdudW1lcmljJyB9KTtcbiAgICB2YXIgcHJlZml4LHN1ZmZpeCxjbGF1c2VzO1xuICAgIGlmKG51bWJlcnMubGVuZ3RoID09PSAxICYmIG51bWJlcnNbMF0ubGFiZWwgPT09ICdjb3VudF8wJykge1xuICAgICAgcHJlZml4ID0gJ051bWJlciBvZiAnO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHByZWZpeCA9IHBvcGlseS5jaGFydC5mb3JtYXQuY2FwaXRhbGl6ZShjYWxjdWxhdGlvbikgKyAnIG9mICcgKyBqb2luV2l0aEFuZChfLm1hcChfLnBsdWNrKG51bWJlcnMsJ2xhYmVsJykscG9waWx5LmNoYXJ0LmZvcm1hdC53cmFwTGFiZWwpKTtcbiAgICB9XG5cbiAgICBpZihncm91cGVycy5sZW5ndGggPiAwKSB7XG4gICAgICBzdWZmaXggPSAnIGdyb3VwZWQgYnkgJyArIGpvaW5XaXRoQW5kKF8ubWFwKF8ucGx1Y2soZ3JvdXBlcnMsJ2xhYmVsJykscG9waWx5LmNoYXJ0LmZvcm1hdC53cmFwTGFiZWwpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdWZmaXggPSAnJztcbiAgICB9XG5cbiAgICBpZih0cmFuc2Zvcm1hdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGNsYXVzZVBpZWNlcyA9IFtdO1xuICAgICAgXy5lYWNoKHRyYW5zZm9ybWF0aW9ucywgZnVuY3Rpb24odHJhbnNmb3JtYXRpb24pIHtcbiAgICAgICAgY2xhdXNlUGllY2VzLnB1c2gocG9waWx5LmNoYXJ0LmZvcm1hdC53cmFwTGFiZWwodHJhbnNmb3JtYXRpb24uY29sdW1uKSArICcgJyArIG1ha2VDbGF1c2UodHJhbnNmb3JtYXRpb24pKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZihjbGF1c2VQaWVjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjbGF1c2VzID0gJyB3aGVyZSAnICsgam9pbldpdGhBbmQoY2xhdXNlUGllY2VzKTtcbiAgICAgIH1cblxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNsYXVzZXMgPSAnJztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBwcmVmaXggKyBzdWZmaXggKyBjbGF1c2VzXG4gICAgfVxuICAgIFxuICB9XG5cbn0pKHdpbmRvdyk7XG4iLCIndXNlIHN0cmljdCc7XG4gICAgXG4oZnVuY3Rpb24od2luZG93KSB7XG5cbiAgZnVuY3Rpb24gYzNDdXN0b21pemF0aW9ucygpIHtcbiAgICBcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi5hZGRpdGlvbmFsQ29uZmlnID0ge1xuICAgICAgYXhpc194X3RpY2tfYXV0b3JvdGF0ZTogdHJ1ZSxcbiAgICAgIGF4aXNfeV90aWNrX3JvdGF0ZTogdHJ1ZSxcbiAgICAgIGdyaWRfYmFja2dyb3VuZDogZmFsc2UsXG4gICAgfVxuICAgIFxuICAgIGMzLmNoYXJ0LmludGVybmFsLmZuLm9sZEluaXQgPSBjMy5jaGFydC5pbnRlcm5hbC5mbi5pbml0O1xuICAgIFxuICAgIGMzLmNoYXJ0LmludGVybmFsLmZuLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMub2xkSW5pdCgpO1xuICAgICAgdmFyICQkID0gdGhpcztcbiAgICAgIFxuICAgICAgaWYoJCQuY29uZmlnLmdyaWRfYmFja2dyb3VuZCkge1xuICAgICAgICB2YXIgYmcgPSAkJC5tYWluLmluc2VydChcInJlY3RcIiwgXCJyZWN0XCIpO1xuICAgICAgICBiZy5jbGFzc2VkKCdwb3BpbHktYmFja2dyb3VuZCcsIHRydWUpXG4gICAgICAgICAgLmF0dHIoJ3dpZHRoJywgJCQud2lkdGgpXG4gICAgICAgICAgLmF0dHIoJ2hlaWdodCcsICQkLmhlaWdodClcbiAgICAgICAgICAuYXR0cignZmlsbCcsICQkLmNvbmZpZy5ncmlkX2JhY2tncm91bmQpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi51cGRhdGVTdmdTaXplT2xkID0gYzMuY2hhcnQuaW50ZXJuYWwuZm4udXBkYXRlU3ZnU2l6ZTtcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi51cGRhdGVTdmdTaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgJCQgPSB0aGlzO1xuICAgICAgJCQudXBkYXRlU3ZnU2l6ZU9sZCgpO1xuICAgICAgJCQuc3ZnLnNlbGVjdCgnLnBvcGlseS1iYWNrZ3JvdW5kJylcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJCQud2lkdGgpXG4gICAgICAgIC5hdHRyKCdoZWlnaHQnLCAkJC5oZWlnaHQpO1xuICAgIH1cbiAgICBcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi5vbGRHZXRIb3Jpem9udGFsQXhpc0hlaWdodCA9IGMzLmNoYXJ0LmludGVybmFsLmZuLmdldEhvcml6b250YWxBeGlzSGVpZ2h0O1xuICAgIGMzLmNoYXJ0LmludGVybmFsLmZuLmdldEhvcml6b250YWxBeGlzSGVpZ2h0ID0gZnVuY3Rpb24oYXhpc0lkKSB7XG4gICAgICB2YXIgJCQgPSB0aGlzLCBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgIFxuICAgICAgaWYoY29uZmlnLmF4aXNfeF90aWNrX2F1dG9yb3RhdGUgJiYgKChheGlzSWQgPT09ICd4JyAmJiAhY29uZmlnLmF4aXNfcm90YXRlZCkgfHwgKGF4aXNJZCA9PT0gJ3knICYmIGNvbmZpZy5heGlzX3JvdGF0ZWQpKSAmJiAoJCQuc3ZnICE9IGZhbHNlKSAgJiYgKCFfLmlzVW5kZWZpbmVkKCQkLngpKSkge1xuICAgICAgICBcbiAgICAgICAgdmFyIHRhcmdldHNUb1Nob3cgPSAkJC5maWx0ZXJUYXJnZXRzVG9TaG93KCQkLmRhdGEudGFyZ2V0cyk7XG4gICAgICAgIGlmKCFjb25maWcuYXhpc194X3RpY2tfcm90YXRlX29yaWdpbmFsKVxuICAgICAgICAgIGNvbmZpZy5heGlzX3hfdGlja19yb3RhdGVfb3JpZ2luYWwgPSBjb25maWcuYXhpc194X3RpY2tfcm90YXRlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgY29uZmlnLmF4aXNfeF90aWNrX3JvdGF0ZSA9IGNvbmZpZy5heGlzX3hfdGlja19yb3RhdGVfb3JpZ2luYWw7XG4gICAgICAgIFxuICAgICAgICB2YXIgd3RmLCBzY2FsZSwgdGVzdCA9IDEsIGF4aXMsIGc7XG4gICAgICAgIFxuICAgICAgICBpZihheGlzSWQgPT09ICd4Jykge1xuICAgICAgICAgIHd0ZiA9ICQkLmdldFhEb21haW4odGFyZ2V0c1RvU2hvdyk7XG4gICAgICAgICAgaWYoJCQuaXNDYXRlZ29yaXplZCgpKVxuICAgICAgICAgICAgd3RmWzFdICs9IDI7XG4gICAgICAgICAgc2NhbGUgPSAkJC54LmNvcHkoKS5kb21haW4od3RmKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB3dGYgPSAkJC5nZXRZRG9tYWluKHRhcmdldHNUb1Nob3csICd5Jyk7XG4gICAgICAgICAgc2NhbGUgPSAkJC55LmNvcHkoKS5kb21haW4od3RmKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyp2YXIgZHVtbXkgPSAkJC5kMy5zZWxlY3QoJ2JvZHknKS5hcHBlbmQoJ2RpdicpLmNsYXNzZWQoJ2MzJywgdHJ1ZSkuY2xhc3NlZCgncG9waWx5LWNoYXJ0YXJlYScsIHRydWUpO1xuICAgICAgICB2YXIgc3ZnID0gZHVtbXkuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAuc3R5bGUoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpXG4gICAgICAgICAgICAuc3R5bGUoJ3Bvc2l0aW9uJywgJ2ZpeGVkJylcbiAgICAgICAgICAgIC5zdHlsZSgndG9wJywgMCkuc3R5bGUoJ2xlZnQnLCAwKTsgKi9cbiAgICAgICAgXG4gICAgICAgIHdoaWxlKHRlc3QgJiYgdGVzdCA8IDEwKSB7XG4gICAgICAgICAgaWYoYXhpc0lkID09PSAneCcpIHtcbiAgICAgICAgICAgIGF4aXMgPSAkJC5heGlzLmdldFhBeGlzKHNjYWxlLCAkJC54T3JpZW50LCAkJC54QXhpc1RpY2tGb3JtYXQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJC54QXhpc1RpY2tWYWx1ZXMsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICAkJC5heGlzLnVwZGF0ZVhBeGlzVGlja1ZhbHVlcyh0YXJnZXRzVG9TaG93LCBheGlzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZihheGlzSWQgPT09ICd5Jykge1xuICAgICAgICAgICAgYXhpcyA9ICQkLmF4aXMuZ2V0WUF4aXMoc2NhbGUsICQkLnlPcmllbnQsIGNvbmZpZy5heGlzX3lfdGlja19mb3JtYXQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkJC55QXhpc1RpY2tWYWx1ZXMsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGcgPSAkJC5zdmcuYXBwZW5kKCdnJyk7XG4gICAgICAgICAgZy5jYWxsKGF4aXMpO1xuICAgICAgICAgIGlmKGF4aXNJZCA9PT0gJ3knKSB7XG4gICAgICAgICAgICB2YXIgdGV4dHMgPSBnLnNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3JvdGF0ZSgnK2NvbmZpZy5heGlzX3hfdGlja19yb3RhdGUrJykgdHJhbnNsYXRlKDEwLCAwKScpXG4gICAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsICdzdGFydCcpXG4gICAgICAgICAgICAgIC5hdHRyKFwieFwiLCAwKVxuICAgICAgICAgICAgICAuYXR0cihcInlcIiwgMTEuNSAtIDIuNSAqIChjb25maWcuYXhpc194X3RpY2tfcm90YXRlIC8gMTUpICogKGNvbmZpZy5heGlzX3hfdGlja19yb3RhdGUgPiAwID8gMSA6IC0xKSk7XG4gICAgICAgICAgICBnLnNlbGVjdChcInRleHRcIikucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBheGlzV2lkdGggPSBnWzBdWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgIHZhciBtYXhBeGlzV2lkdGggPSBnLnNlbGVjdCgncGF0aCcpWzBdWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICAgIC8vY29uc29sZS5sb2coYXhpc1dpZHRoKTtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKG1heEF4aXNXaWR0aCk7XG4gICAgICAgICAgaWYoYXhpc1dpZHRoID4gbWF4QXhpc1dpZHRoICsgMikge1xuICAgICAgICAgICAgY29uZmlnLmF4aXNfeF90aWNrX3JvdGF0ZSA9IE1hdGgubWluKGNvbmZpZy5heGlzX3hfdGlja19yb3RhdGUrMTAsIDkwKTtcbiAgICAgICAgICAgIHRlc3QgPSB0ZXN0ICsgMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGVzdCA9IDA7IFxuICAgICAgICAgIGcucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9kdW1teS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdmFyIGggPSAkJC5vbGRHZXRIb3Jpem9udGFsQXhpc0hlaWdodChheGlzSWQpO1xuICAgICAgXG4gICAgICBpZiAoYXhpc0lkID09PSAneScgJiYgY29uZmlnLmF4aXNfcm90YXRlZCAmJiBjb25maWcuYXhpc194X3RpY2tfcm90YXRlKSB7XG4gICAgICAgIGggPSAzMCArICQkLmF4aXMuZ2V0TWF4VGlja1dpZHRoKGF4aXNJZCkgKiBNYXRoLmNvcyhNYXRoLlBJICogKDkwIC0gY29uZmlnLmF4aXNfeF90aWNrX3JvdGF0ZSkgLyAxODApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gaDtcbiAgICB9XG4gICAgYzMuY2hhcnQuaW50ZXJuYWwuZm4ub2xkZ2V0QXhpc1dpZHRoQnlBeGlzSWQgPSBjMy5jaGFydC5pbnRlcm5hbC5mbi5nZXRBeGlzV2lkdGhCeUF4aXNJZDtcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi5nZXRBeGlzV2lkdGhCeUF4aXNJZCA9IGZ1bmN0aW9uKGlkLCB3aXRob3V0UmVjb21wdXRlKSB7XG4gICAgICB2YXIgJCQgPSB0aGlzLCBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgIHcgPSAkJC5vbGRnZXRBeGlzV2lkdGhCeUF4aXNJZChpZCwgd2l0aG91dFJlY29tcHV0ZSk7XG4gICAgICBcbiAgICAgIGlmIChpZCA9PT0gJ3knICYmIGNvbmZpZy5heGlzX3lfdGlja19yb3RhdGUpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gJCQuYXhpcy5nZXRMYWJlbFBvc2l0aW9uQnlJZChpZCk7XG4gICAgICAgIHcgPSAkJC5heGlzLmdldE1heFRpY2tXaWR0aChpZCwgd2l0aG91dFJlY29tcHV0ZSkgKiBNYXRoLnNpbihNYXRoLlBJICogKDkwIC0gY29uZmlnLmF4aXNfeV90aWNrX3JvdGF0ZSkgLyAxODApO1xuICAgICAgICB3ID0gdyArIChwb3NpdGlvbi5pc0lubmVyID8gMjAgOiA0MCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB3LTg7XG4gICAgfTtcbiAgICBcbiAgICBmb3IgKHZhciBrIGluIGMzLmNoYXJ0LmludGVybmFsLmZuLkNMQVNTKSB7XG4gICAgICBjMy5jaGFydC5pbnRlcm5hbC5mbi5DTEFTU1trXSA9IGMzLmNoYXJ0LmludGVybmFsLmZuLkNMQVNTW2tdLnJlcGxhY2UoJ2MzJywgJ3BvcGlseScpO1xuICAgIH07XG4gICAgXG4gICAgYzMuY2hhcnQuaW50ZXJuYWwuZm4uYWZ0ZXJJbml0ID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgfTtcbiAgICBcbiAgICBcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5heGlzLmZuLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZWRyYXdPbGQgPSBjMy5jaGFydC5pbnRlcm5hbC5heGlzLmZuLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5yZWRyYXc7XG4gICAgXG4gICAgYzMuY2hhcnQuaW50ZXJuYWwuYXhpcy5mbi5jb25zdHJ1Y3Rvci5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24gcmVkcmF3KHRyYW5zaXRpb25zLCBpc0hpZGRlbikge1xuICAgICAgdmFyICQkID0gdGhpcy5vd25lcjtcbiAgICAgIHRoaXMucmVkcmF3T2xkKHRyYW5zaXRpb25zLCBpc0hpZGRlbik7XG4gICAgICBpZigkJC5jb25maWcuYXhpc19yb3RhdGVkKSB7XG4gICAgICAgIHRyYW5zaXRpb25zLmF4aXNZLnNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCAncm90YXRlKCcrJCQuY29uZmlnLmF4aXNfeF90aWNrX3JvdGF0ZSsnKSB0cmFuc2xhdGUoMTAsIDApJylcbiAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCAnc3RhcnQnKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCAxMClcbiAgICAgICAgICAuYXR0cihcInlcIiwgMTEuNSAtIDIuNSAqICgkJC5jb25maWcuYXhpc194X3RpY2tfcm90YXRlIC8gMTUpICogKCQkLmNvbmZpZy5heGlzX3hfdGlja19yb3RhdGUgPiAwID8gMSA6IC0xKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmKCQkLmNvbmZpZy5heGlzX3lfdGlja19yb3RhdGUpIHtcbiAgICAgICAgdHJhbnNpdGlvbnMuYXhpc1kuc2VsZWN0QWxsKFwiLnRpY2sgdGV4dFwiKVxuICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsICdyb3RhdGUoJysoJCQuY29uZmlnLmF4aXNfeV90aWNrX3JvdGF0ZSotMSkrJykgdHJhbnNsYXRlKDAsIC0xMCknKVxuICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsICdlbmQnKVxuICAgICAgICAgIC5hdHRyKFwieFwiLCAxMClcbiAgICAgICAgICAuYXR0cihcInlcIiwgMTEuNSAtIDIuNSAqICgkJC5jb25maWcuYXhpc195X3RpY2tfcm90YXRlIC8gMTUpICogKCQkLmNvbmZpZy5heGlzX3lfdGlja19yb3RhdGUgPiAwID8gMSA6IC0xKSk7XG4gICAgICB9XG4gICAgICBcbiAgICB9O1xuICAgIFxuICAgIFxuICAgIGMzLmNoYXJ0LmludGVybmFsLmF4aXMuZm4uY29uc3RydWN0b3IucHJvdG90eXBlLm9sZER5Rm9yWUF4aXNMYWJlbCA9IGMzLmNoYXJ0LmludGVybmFsLmF4aXMuZm4uY29uc3RydWN0b3IucHJvdG90eXBlLmR5Rm9yWUF4aXNMYWJlbDtcbiAgICBjMy5jaGFydC5pbnRlcm5hbC5heGlzLmZuLmNvbnN0cnVjdG9yLnByb3RvdHlwZS5keUZvcllBeGlzTGFiZWwgPSBmdW5jdGlvbiBkeUZvcllBeGlzTGFiZWwoKSB7XG4gICAgICB2YXIgJCQgPSB0aGlzLm93bmVyLFxuICAgICAgICBwb3NpdGlvbiA9IHRoaXMuZ2V0WUF4aXNMYWJlbFBvc2l0aW9uKCk7XG4gICAgICBcbiAgICAgIGlmICgkJC5jb25maWcuYXhpc195X3RpY2tfcm90YXRlKSB7XG4gICAgICAgIHZhciB0aWNrV2lkdGggPSB0aGlzLmdldE1heFRpY2tXaWR0aCgneScpO1xuICAgICAgICByZXR1cm4gcG9zaXRpb24uaXNJbm5lciA/IFwiMS4yZW1cIiA6IC0xMCAtICgkJC5jb25maWcuYXhpc195X2lubmVyID8gMCA6ICh0aWNrV2lkdGgqTWF0aC5zaW4oTWF0aC5QSSAqICg5MCAtICQkLmNvbmZpZy5heGlzX3lfdGlja19yb3RhdGUpIC8gMTgwKSArIDEwKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGREeUZvcllBeGlzTGFiZWwoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICB9XG4gIFxuICBjM0N1c3RvbWl6YXRpb25zKCk7XG4gIFxufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIHBvcGlseUNoYXJ0ID0gd2luZG93LnBvcGlseS5jaGFydDtcbiAgXG4gIHZhciBiYXIgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG5cbiAgYmFyLmFzc2lnbkF4aXMgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGF4aXMgPSB7fTtcbiAgICAgIHZhciB0eXBlUGF0dGVybiA9IHBvcGlseUNoYXJ0LmFuYWx5emUuZ2V0VHlwZVBhdHRlcm4oY29sdW1ucyk7XG5cbiAgICAgIGlmKHR5cGVQYXR0ZXJuID09PSAnbnVtZXJpYyxudW1lcmljJykge1xuICAgICAgICBheGlzLnkgPSB7XG4gICAgICAgICAgICBjb2x1bW5faGVhZGVyOiBjYWxjdWxhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbGN1bGF0aW9uLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZhbHVlc1swXSB9KSxcbiAgICAgICAgICAgIGRhdGFfdHlwZTogJ251bWVyaWMnXG4gICAgICAgIH1cbiAgICAgICAgYXhpcy54ID0ge1xuICAgICAgICAgICAgY29sdW1uX2hlYWRlcjogJ0NvbHVtbnMnLFxuICAgICAgICAgICAgdmFsdWVzOiBfLm1hcChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi5jb2x1bW5faGVhZGVyIH0pLFxuICAgICAgICAgICAgZGF0YV90eXBlOiAnY2F0ZWdvcnknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfLmVhY2goY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnbnVtZXJpYycpIHtcbiAgICAgICAgICAgICAgYXhpcy55ID0gY29sdW1uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGF4aXMueCA9IGNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBheGlzO1xuICB9O1xuXG4gIGJhci5yZW5kZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zLCBmb3JtYXR0ZWREYXRhKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgcHJlcHBlZERhdGEgPSBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5wcmVwRGF0YShmb3JtYXR0ZWREYXRhLCBvcHRpb25zKTtcbiAgICAgIHZhciB4VmFsdWVzID0gcHJlcHBlZERhdGFbMF07XG4gICAgICB2YXIgeVZhbHVlcyA9IHByZXBwZWREYXRhWzFdO1xuXG4gICAgICB2YXIgY2hhcnQ7XG4gICAgICAgIFxuICAgICAgdmFyIHJvdGF0ZWQgPSBvcHRpb25zLnJvdGF0ZWQgfHwgZmFsc2U7XG4gICAgICAvL2lmKGluc2lnaHQub3B0aW9uc19yb3RhdGUpXG4gICAgICAvLyAgcm90YXRlZCA9IHRydWU7XG4gICAgICBpZih5VmFsdWVzLmxlbmd0aCA+IDQwKSB7XG4gICAgICAgIHJvdGF0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZihyb3RhdGVkID09IHRydWUpIHtcbiAgICAgICAgaWYoeVZhbHVlcy5sZW5ndGggPiA0MClcbiAgICAgICAgICBvcHRpb25zLmhlaWdodCA9ICh5VmFsdWVzLmxlbmd0aCAqIDkpICsgNDUwO1xuICAgICAgfVxuXG4gICAgICB2YXIgeUxhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueS5sYWJlbDtcbiAgICAgIHlWYWx1ZXMudW5zaGlmdCh5TGFiZWwpO1xuICAgICAgXG4gICAgICB2YXIgY2hhcnREYXRhID0ge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgY29sdW1uczogW3lWYWx1ZXNdLFxuICAgICAgICAgIHR5cGU6ICdiYXInXG4gICAgICAgIH0sXG4gICAgICAgIGJhcjoge1xuICAgICAgICAgIHdpZHRoOiB7XG4gICAgICAgICAgICByYXRpbzogKG9wdGlvbnMuYmFyU2l6ZSB8fCAwLjcpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwYWRkaW5nOiB0aGF0LmRlZmF1bHRzLmNoYXJ0UGFkZGluZygpLFxuICAgICAgICBheGlzOiB7XG4gICAgICAgICAgeDoge1xuICAgICAgICAgICAgc2hvdzogb3B0aW9ucy54QXhpcyxcbiAgICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsXG4gICAgICAgICAgICBjYXRlZ29yaWVzOiB4VmFsdWVzLFxuICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICBmb3JtYXQ6IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0QXhpcyhmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS54LCBvcHRpb25zKSxcbiAgICAgICAgICAgICAgcm90YXRlOiBvcHRpb25zLnhSb3RhdGlvbiB8fCAgNDUsXG4gICAgICAgICAgICAgIGF1dG9yb3RhdGU6ICFvcHRpb25zLnhSb3RhdGlvbixcbiAgICAgICAgICAgICAgbXVsdGlsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgZml0OiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgdGV4dDogb3B0aW9ucy54TGFiZWwgfHwgZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueC5sYWJlbCxcbiAgICAgICAgICAgICAgcG9zaXRpb246IHJvdGF0ZWQ/J291dGVyLW1pZGRsZSc6J2lubmVyLXJpZ2h0JyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgIHNob3c6IG9wdGlvbnMueUF4aXMsXG4gICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLnlMYWJlbCB8fCB5TGFiZWwsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiByb3RhdGVkPydpbm5lci1yaWdodCc6J291dGVyLW1pZGRsZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgIGZvcm1hdDogcG9waWx5LmNoYXJ0LmZvcm1hdC5mb3JtYXRBeGlzKGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLnksIG9wdGlvbnMsIGQzLmZvcm1hdChcIixcIikpLFxuICAgICAgICAgICAgICByb3RhdGU6IG9wdGlvbnMueVJvdGF0aW9uIHx8ICAwLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcm90YXRlZDogcm90YXRlZFxuICAgICAgICB9LFxuICAgICAgICBjb2xvcjogeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICBwYXR0ZXJuOiBvcHRpb25zLmNvbG9yc1xuICAgICAgICB9LCAgICAgICBcbiAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgc2hvdzogIV8uaXNVbmRlZmluZWQob3B0aW9ucy5sZWdlbmQpICYmIG9wdGlvbnMubGVnZW5kLFxuICAgICAgICB9LFxuICAgICAgICBzaXplOiB7XG4gICAgICAgICAgaGVpZ2h0OiBvcHRpb25zLmhlaWdodFxuICAgICAgICB9LFxuICAgICAgICBncmlkOiB7XG4gICAgICAgICAgeDoge1xuICAgICAgICAgICAgc2hvdzogXy5pc1VuZGVmaW5lZChvcHRpb25zLnhHcmlkKT9mYWxzZTpvcHRpb25zLnhHcmlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICB5OiB7XG4gICAgICAgICAgICBzaG93OiBfLmlzVW5kZWZpbmVkKG9wdGlvbnMueUdyaWQpP3RydWU6b3B0aW9ucy55R3JpZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYmFja2dyb3VuZDogb3B0aW9ucy5iYWNrZ3JvdW5kXG4gICAgICAgIH0sXG4gICAgICAgIHRvb2x0aXA6IChfLmlzVW5kZWZpbmVkKG9wdGlvbnMudG9vbHRpcCk/dHJ1ZTpvcHRpb25zLnRvb2x0aXApLFxuICAgICAgICBvbnJlc2l6ZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuYmFyQ29tbW9uLnVwZGF0ZVNwZWNpYWxzKGVsZW1lbnQsIHJvdGF0ZWQsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgICBjaGFydERhdGEuYmluZHRvID0gZWxlbWVudDtcbiAgICAgIHZhciBhbmltYXRpb24gPSBwb3BpbHkuY2hhcnQudXRpbHMuaW5pdGlhbEFuaW1hdGlvbihjaGFydERhdGEsIG9wdGlvbnMpO1xuICAgICAgXG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpO1xuXG4gICAgICBhbmltYXRpb24uc3RhcnQoY2hhcnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi51cGRhdGVTcGVjaWFscyhlbGVtZW50LCByb3RhdGVkLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gY2hhcnQ7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5iYXIgPSBiYXI7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuICBcbiAgdmFyIGNoYXJ0ID0gXy5jbG9uZShwb3BpbHlDaGFydC5iYXNlQ2hhcnQpO1xuXG4gIGNoYXJ0LmFzc2lnbkF4aXMgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGF4aXMgPSB7fTtcblxuICAgICAgXy5lYWNoKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICAgIGlmKGNvbHVtbi5kYXRhX3R5cGUgPT09ICdjYXRlZ29yeScpIHtcbiAgICAgICAgICAgIGF4aXMueiA9IGNvbHVtbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZighYXhpcy55KSB7XG4gICAgICAgICAgICBheGlzLnkgPSBjb2x1bW47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXhpcy54ID0gY29sdW1uO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gYXhpcztcbiAgfTtcblxuICBjaGFydC5wcmVwRGF0YSA9IGZ1bmN0aW9uKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGxpbWl0ID0gdGhhdC5kZWZhdWx0cy5jYXRlZ29yeUxpbWl0O1xuICAgIHZhciBjaGFydERhdGEgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YTtcbiAgICB2YXIgeFZhbHVlcyA9IGNoYXJ0RGF0YS54LnZhbHVlcztcbiAgICB2YXIgeVZhbHVlcyA9IGNoYXJ0RGF0YS55LnZhbHVlcztcbiAgICB2YXIgelZhbHVlcyA9IFtdO1xuXG4gICAgaWYoIV8uaXNVbmRlZmluZWQoY2hhcnREYXRhLnopKSB7XG4gICAgICB6VmFsdWVzID0gY2hhcnREYXRhLnoudmFsdWVzO1xuICAgIH1cblxuICAgIHZhciBvcmRlciA9IG9wdGlvbnMub3JkZXIgfHwgJ2F1dG8nO1xuICAgIGNsZWFuVmFsdWVzID0gXy51bnppcChfLnppcChbeFZhbHVlcyx5VmFsdWVzLHpWYWx1ZXNdKS5zbGljZSgwLDUwMDApKVswXTtcbiAgICB2YXIgY2xlYW5YVmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LnRvTnVtYmVyKGNsZWFuVmFsdWVzWzBdKTtcbiAgICB2YXIgY2xlYW5ZVmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LnRvTnVtYmVyKGNsZWFuVmFsdWVzWzFdKTtcblxuICAgIGNsZWFuWFZhbHVlcyA9IHBvcGlseUNoYXJ0LmZvcm1hdC5mb3JtYXROdW1iZXJzKGNsZWFuWFZhbHVlcyk7XG4gICAgY2xlYW5ZVmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LmZvcm1hdE51bWJlcnMoY2xlYW5ZVmFsdWVzKTtcbiAgICB2YXIgY2xlYW5aVmFsdWVzID0gY2xlYW5WYWx1ZXNbMl07XG4gICAgaWYoelZhbHVlcy5sZW5ndGggPT09IDAgJiYgY2hhcnREYXRhLm1ldGFkYXRhICYmIGNoYXJ0RGF0YS5tZXRhZGF0YS5yb3dsYWJlbHMpIHtcbiAgICAgIGNsZWFuWlZhbHVlcyA9IGNoYXJ0RGF0YS5tZXRhZGF0YS5yb3dsYWJlbHM7XG4gICAgfVxuICAgIHJldHVybiBbY2xlYW5YVmFsdWVzLCBjbGVhbllWYWx1ZXMsIGNsZWFuWlZhbHVlc107XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgY29sdW1ucywgeHMsIHhMYWJlbCwgeUxhYmVsLCB0b29sdGlwLCBmb3JtYXR0ZWREYXRhKSB7XG4gICAgICB2YXIgY2hhcnRQYWRkaW5nID0ge3JpZ2h0OiAxMCwgdG9wOiAxMH07XG5cbiAgICAgIHZhciBjaGFydERhdGEgPSB7XG4gICAgICAgICAgYmluZHRvOiBlbGVtZW50LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgeHM6IHhzLFxuICAgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuICAgICAgICAgICAgICB0eXBlOiAnc2NhdHRlcidcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhZGRpbmc6IHRoaXMuZGVmYXVsdHMuY2hhcnRQYWRkaW5nKCksXG4gICAgICAgICAgc2l6ZToge1xuICAgICAgICAgICAgICBoZWlnaHQ6IG9wdGlvbnMuaGVpZ2h0XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb2ludDoge1xuICAgICAgICAgICAgcjogKG9wdGlvbnMucG9pbnRTaXplIHx8IDQpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgIHNob3c6IG9wdGlvbnMueEF4aXMsXG4gICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbnMueExhYmVsIHx8IHhMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2lubmVyLXJpZ2h0JyxcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZml0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IG9wdGlvbnMueFJvdGF0aW9uIHx8ICA0NSxcbiAgICAgICAgICAgICAgICAgICAgICBhdXRvcm90YXRlOiAhb3B0aW9ucy54Um90YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBwb3BpbHkuY2hhcnQuZm9ybWF0LmZvcm1hdEF4aXMoZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueCwgb3B0aW9ucyksXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgIHNob3c6IG9wdGlvbnMueUF4aXMsXG4gICAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbnMueUxhYmVsIHx8IHlMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ291dGVyLW1pZGRsZSdcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBwb3BpbHkuY2hhcnQuZm9ybWF0LmZvcm1hdEF4aXMoZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueSwgb3B0aW9ucywgZDMuZm9ybWF0KFwiLFwiKSksXG4gICAgICAgICAgICAgICAgICAgICAgcm90YXRlOiBvcHRpb25zLnlSb3RhdGlvbiB8fCAgMCxcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICBzaG93OiBfLmlzVW5kZWZpbmVkKG9wdGlvbnMueEdyaWQpP3RydWU6b3B0aW9ucy54R3JpZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgc2hvdzogXy5pc1VuZGVmaW5lZChvcHRpb25zLnlHcmlkKT90cnVlOm9wdGlvbnMueUdyaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBvcHRpb25zLmJhY2tncm91bmRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IG9wdGlvbnMuY29sb3JzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgc2hvdzogXy5pc1VuZGVmaW5lZChvcHRpb25zLmxlZ2VuZCkgfHwgb3B0aW9ucy5sZWdlbmQsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAnb3V0ZXItYm90dG9tJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRvb2x0aXA6IHRvb2x0aXBcbiAgICAgIH07XG5cbiAgICAgIHZhciBhbmltYXRpb24gPSBwb3BpbHkuY2hhcnQudXRpbHMuaW5pdGlhbEFuaW1hdGlvbihjaGFydERhdGEsIG9wdGlvbnMpXG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpO1xuICAgICAgY2hhcnREYXRhLmJpbmR0byA9IGVsZW1lbnQ7XG4gICAgICBcbiAgICAgIGFuaW1hdGlvbi5zdGFydChjaGFydCk7XG4gICAgICBcbiAgICAgIHJldHVybiBjaGFydDtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmNvbXBhcmUgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcblxuICBjaGFydC5wcmVwRGF0YSA9IGZ1bmN0aW9uKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGxpbWl0ID0gdGhhdC5kZWZhdWx0cy5jYXRlZ29yeUxpbWl0O1xuICAgIHZhciBjaGFydERhdGEgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YTtcbiAgICB2YXIgeFZhbHVlcyA9IGNoYXJ0RGF0YS54LnZhbHVlcztcbiAgICB2YXIgeVZhbHVlcyA9IGNoYXJ0RGF0YS55LnZhbHVlcztcbiAgICB2YXIgelZhbHVlcyA9IFtdO1xuICAgIGlmKGNoYXJ0RGF0YS5oYXNPd25Qcm9wZXJ0eSgneicpKSB7XG4gICAgICAgIHpWYWx1ZXMgPSBjaGFydERhdGEuei52YWx1ZXM7XG4gICAgfVxuXG4gICAgeVZhbHVlcyA9IHBvcGlseS5jaGFydC5jaGFydERhdGEuY2xlYW5OYW5Ub1plcm8oeVZhbHVlcylcblxuICAgIHZhciBvcmRlciA9IG9wdGlvbnMub3JkZXIgfHwgJ2F1dG8nO1xuICAgIGNsZWFuVmFsdWVzID0gcG9waWx5Q2hhcnQuY2hhcnREYXRhLnNvcnREYXRhKHhWYWx1ZXMseVZhbHVlcyx6VmFsdWVzLDAsb3JkZXIpO1xuXG4gICAgdmFyIGNsZWFuWFZhbHVlcyA9IGNsZWFuVmFsdWVzWzBdO1xuICAgIHZhciBjbGVhbllWYWx1ZXMgPSBwb3BpbHlDaGFydC5mb3JtYXQuZm9ybWF0TnVtYmVycyhjbGVhblZhbHVlc1sxXSk7XG4gICAgdmFyIGNsZWFuWlZhbHVlcyA9IGNsZWFuVmFsdWVzWzJdO1xuXG4gICAgcmV0dXJuIFtjbGVhblhWYWx1ZXMsIGNsZWFuWVZhbHVlcywgY2xlYW5aVmFsdWVzXTtcbiAgfTtcblxuICBjaGFydC5nZXRZTWluID0gZnVuY3Rpb24oeVZhbHVlcykge1xuICAgIHZhciB5TWluID0gMDtcbiAgICB2YXIgbG93ZXN0WSA9IF8ubWluKHlWYWx1ZXMpO1xuICAgIGlmKGxvd2VzdFkgPCAwKSB7XG4gICAgICAgIHlNaW4gPSBsb3dlc3RZO1xuICAgIH1cblxuICAgIHJldHVybiB5TWluO1xuICB9O1xuXG4gIGNoYXJ0LmdldENoYXJ0T2JqZWN0ID0gZnVuY3Rpb24oa3dhcmdzKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBrd2FyZ3MuZWxlbWVudDtcbiAgICB2YXIgZGF0YSA9IGt3YXJncy5kYXRhO1xuICAgIHZhciB4TGFiZWwgPSBrd2FyZ3MueExhYmVsO1xuICAgIHZhciB5TGFiZWwgPSBrd2FyZ3MueUxhYmVsO1xuICAgIHZhciB5TWluID0ga3dhcmdzLnlNaW47XG4gICAgdmFyIG9wdGlvbnMgPSBrd2FyZ3Mub3B0aW9ucztcbiAgICB2YXIgZGF0ZUZvcm1hdFN0ciA9IGt3YXJncy5kYXRlRm9ybWF0U3RyO1xuICAgIHZhciBjaGFydFBhZGRpbmcgPSBrd2FyZ3MuY2hhcnRQYWRkaW5nO1xuICAgIHZhciB2YXJpYXRpb24gPSBrd2FyZ3MudmFyaWF0aW9uO1xuICAgIHZhciB0aWNrc1ZhbHVlcyA9IGt3YXJncy50aWNrc1ZhbHVlcztcbiAgICB2YXIgdGlja0Zvcm1hdFN0ciA9IGt3YXJncy50aWNrRm9ybWF0U3RyO1xuICAgIHZhciB0aWNrRm9ybWF0ID0gZDMudGltZS5mb3JtYXQodGlja0Zvcm1hdFN0cik7XG4gICAgdmFyIGZvcm1hdHRlZERhdGEgPSBrd2FyZ3MuZm9ybWF0dGVkRGF0YTtcbiAgICBcbiAgICB2YXIgY2hhcnREYXRhID0ge1xuICAgICAgICBiaW5kdG86IGVsZW1lbnQsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHg6ICd4JyxcbiAgICAgICAgICAgIGNvbHVtbnM6IGRhdGEuY29sdW1ucyxcbiAgICAgICAgICAgIHhGb3JtYXQ6IGRhdGVGb3JtYXRTdHJcbiAgICAgICAgfSxcbiAgICAgICAgcGFkZGluZzogY2hhcnRQYWRkaW5nLFxuICAgICAgICBheGlzOiB7XG4gICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgc2hvdzogb3B0aW9ucy54QXhpcyxcbiAgICAgICAgICAgICAgICB0eXBlOiAoIW9wdGlvbnMub3JkZXIgfHwgb3B0aW9ucy5vcmRlciA9PSAnYXV0bycgPyAndGltZXNlcmllcycgOiAnY2F0ZWdvcnknKSxcbiAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogcG9waWx5LmNoYXJ0LmZvcm1hdC5mb3JtYXRBeGlzKGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLngsIG9wdGlvbnMsIHRpY2tGb3JtYXQpLFxuICAgICAgICAgICAgICAgICAgICByb3RhdGU6IG9wdGlvbnMueFJvdGF0aW9uIHx8ICA0NSxcbiAgICAgICAgICAgICAgICAgICAgYXV0b3JvdGF0ZTogIW9wdGlvbnMueFJvdGF0aW9uLFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiAoIW9wdGlvbnMub3JkZXIgfHwgb3B0aW9ucy5vcmRlciA9PSAnYXV0bycgPyB0aWNrc1ZhbHVlcyA6IG51bGwpLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogdGlja3NWYWx1ZXMubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLnhMYWJlbCB8fCB4TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnaW5uZXItcmlnaHQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICBzaG93OiBvcHRpb25zLnlBeGlzLFxuICAgICAgICAgICAgICAgIG1pbjogeU1pbixcbiAgICAgICAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLnlMYWJlbCB8fCB5TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnb3V0ZXItbWlkZGxlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0QXhpcyhmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS55LCBvcHRpb25zLCBkMy5mb3JtYXQoXCIsXCIpKSxcbiAgICAgICAgICAgICAgICAgICAgcm90YXRlOiBvcHRpb25zLnlSb3RhdGlvbiB8fCAgMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IHt0b3A6MCwgYm90dG9tOjB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICB4OiB7XG4gICAgICAgICAgICBzaG93OiBfLmlzVW5kZWZpbmVkKG9wdGlvbnMueEdyaWQpP2ZhbHNlOm9wdGlvbnMueEdyaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgIHNob3c6IF8uaXNVbmRlZmluZWQob3B0aW9ucy55R3JpZCk/dHJ1ZTpvcHRpb25zLnlHcmlkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBiYWNrZ3JvdW5kOiBvcHRpb25zLmJhY2tncm91bmRcbiAgICAgICAgfSxcbiAgICAgICAgY29sb3I6IHtcbiAgICAgICAgICAgIHBhdHRlcm46IG9wdGlvbnMuY29sb3JzXG4gICAgICAgIH0sXG4gICAgICAgIHBvaW50OiB7XG4gICAgICAgICAgcjogKG9wdGlvbnMucG9pbnRTaXplIHx8IDIuNSlcbiAgICAgICAgfSxcbiAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScsXG4gICAgICAgICAgICBzaG93OiAhXy5pc1VuZGVmaW5lZChvcHRpb25zLmxlZ2VuZCkgJiYgb3B0aW9ucy5sZWdlbmRcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZToge1xuICAgICAgICAgICAgaGVpZ2h0OiBvcHRpb25zLmhlaWdodFxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHZhciB0b29sdGlwID0gKF8uaXNVbmRlZmluZWQob3B0aW9ucy50b29sdGlwKT90cnVlOm9wdGlvbnMudG9vbHRpcCk7XG4gICAgaWYodG9vbHRpcCAmJiAoIW9wdGlvbnMub3JkZXIgfHwgb3B0aW9ucy5vcmRlciA9PSAnYXV0bycpICkge1xuICAgICAgdmFyIGRhdGVGb3JtYXQgPSBkMy50aW1lLmZvcm1hdChkYXRlRm9ybWF0U3RyKTtcbiAgICAgIGNoYXJ0RGF0YS50b29sdGlwID0ge1xuICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICBmb3JtYXQ6IHtcbiAgICAgICAgICB0aXRsZTogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGVGb3JtYXQoZCk7XG4gICAgICAgICAgfSBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2hhcnREYXRhLmF4aXMueC50aWNrLnZhbHVlcyA9IHRpY2tzVmFsdWVzO1xuICAgIH1cblxuICAgIHJldHVybiBjaGFydERhdGE7XG4gIH07XG5cbiAgY2hhcnQuZm9ybWF0RGF0ZXMgPSBmdW5jdGlvbih4VmFsdWVzLCBkYXRhLCBvcHRpb25zKSB7XG4gICAgdmFyIGRheURpZmYgPSBwb3BpbHkuY2hhcnQuZm9ybWF0LmRheXNEaWZmKHhWYWx1ZXMpOyBcbiAgICB2YXIgdGlja0Zvcm1hdFN0ciA9IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0RnJvbURheURpZmYoZGF5RGlmZik7XG4gICAgXG4gICAgdmFyIHZhcmlhdGlvbiA9IG9wdGlvbnMudmFyaWF0aW9uO1xuXG4gICAgdmFyIGRhdGVGb3JtYXRTdHIgPSBwb3BpbHkuY2hhcnQuZm9ybWF0LmZvcm1hdEZyb21JbnRlcnZhbCh2YXJpYXRpb24pO1xuICAgIGlmKF8uaXNVbmRlZmluZWQodmFyaWF0aW9uKSkge1xuICAgICAgZGF0ZUZvcm1hdFN0ciA9IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0RnJvbUluc3BlY3Rpb24oeFZhbHVlcyk7XG4gICAgfVxuXG4gICAgdmFyIGRhdGVGb3JtYXQgPSBkMy50aW1lLmZvcm1hdChkYXRlRm9ybWF0U3RyKTtcbiAgICB2YXIgdGlja0Zvcm1hdCA9IGQzLnRpbWUuZm9ybWF0KHRpY2tGb3JtYXRTdHIpO1xuICAgIHZhciBmdWxsRm9ybWF0ID0gZDMudGltZS5mb3JtYXQoJyVZLSVtLSVkICVIOiVNOiVTJyk7XG5cbiAgICB2YXIgdGlja3NWYWx1ZXMgPSBwb3BpbHkuY2hhcnQuZm9ybWF0LnRpY2tGb3JtYXRWYWx1ZXMoeFZhbHVlcywgdGlja0Zvcm1hdFN0ciwgZGF0ZUZvcm1hdCk7XG4gICAgXG4gICAgaWYoZGF0ZUZvcm1hdCAhPSBmdWxsRm9ybWF0KVxuICAgICAgZGF0YS5jYXRlZ29yaWVzID0gXy5tYXAoZGF0YS5jYXRlZ29yaWVzLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGVGb3JtYXQoZnVsbEZvcm1hdC5wYXJzZShkLnNwbGl0KCcuJylbMF0pKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGVGb3JtYXRTdHI6IGRhdGVGb3JtYXRTdHIsXG4gICAgICB0aWNrRm9ybWF0U3RyOiB0aWNrRm9ybWF0U3RyLFxuICAgICAgdGlja3NWYWx1ZXM6IHRpY2tzVmFsdWVzXG4gICAgfVxuICB9O1xuXG4gIGNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIGZvcm1hdHRlZERhdGEsIGdyb3VwZWQpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBwcmVwcGVkRGF0YSA9IHRoYXQucHJlcERhdGEoZm9ybWF0dGVkRGF0YSwgb3B0aW9ucyk7XG4gICAgICB2YXIgeFZhbHVlcyA9IHByZXBwZWREYXRhWzBdO1xuICAgICAgdmFyIHlWYWx1ZXMgPSBwcmVwcGVkRGF0YVsxXTtcbiAgICAgIHZhciB6VmFsdWVzID0gcHJlcHBlZERhdGFbMl07XG4gICAgICB2YXIgeExhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueC5sYWJlbDtcbiAgICAgIHZhciB5TGFiZWwgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS55LmxhYmVsO1xuXG4gICAgICBvcHRpb25zLnZhcmlhdGlvbiA9IG9wdGlvbnMudmFyaWF0aW9uIHx8IGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLm1ldGFkYXRhLmludGVydmFsc1swXTtcbiAgICAgIHZhciB5TWluID0gdGhhdC5nZXRZTWluKHlWYWx1ZXMpO1xuICAgICAgICAgICAgXG4gICAgICB2YXIgZGF0YSA9IHBvcGlseUNoYXJ0LmNoYXJ0RGF0YS5jM2lmeSh4VmFsdWVzLHlWYWx1ZXMselZhbHVlcyk7XG4gICAgICB2YXIgZGF0ZURhdGEgPSB0aGF0LmZvcm1hdERhdGVzKHhWYWx1ZXMsIGRhdGEsIG9wdGlvbnMpO1xuXG4gICAgICBkYXRhLmNhdGVnb3JpZXMudW5zaGlmdCgneCcpO1xuICAgICAgZGF0YS5jb2x1bW5zLnVuc2hpZnQoZGF0YS5jYXRlZ29yaWVzKTsgXG4gICAgICB2YXIgY2hhcnRQYWRkaW5nID0gdGhhdC5kZWZhdWx0cy5jaGFydFBhZGRpbmc7XG4gICAgICB2YXIga3dhcmdzID0ge1xuICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICB4TGFiZWw6IHhMYWJlbCxcbiAgICAgICAgeUxhYmVsOiB5TGFiZWwsXG4gICAgICAgIHlNaW46IHlNaW4sXG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsIFxuICAgICAgICBkYXRlRm9ybWF0U3RyOiBkYXRlRGF0YS5kYXRlRm9ybWF0U3RyLFxuICAgICAgICBjaGFydFBhZGRpbmc6IGNoYXJ0UGFkZGluZyxcbiAgICAgICAgdGlja0Zvcm1hdFN0cjogZGF0ZURhdGEudGlja0Zvcm1hdFN0cixcbiAgICAgICAgdGlja3NWYWx1ZXM6IGRhdGVEYXRhLnRpY2tzVmFsdWVzLFxuICAgICAgICBmb3JtYXR0ZWREYXRhOiBmb3JtYXR0ZWREYXRhXG4gICAgICB9O1xuICAgICAgdmFyIGNoYXJ0RGF0YSA9IHRoYXQuZ2V0Q2hhcnRPYmplY3Qoa3dhcmdzKTtcbiAgICAgIGNoYXJ0RGF0YS50b29sdGlwLmdyb3VwZWQgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoXy51bmlxKHpWYWx1ZXMpLmxlbmd0aCA+IDIwKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgIH0pKCk7XG5cbiAgICAgIGlmKCFfLmlzVW5kZWZpbmVkKG9wdGlvbnMubGluZVNpemUpKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHBvcGlseS5jaGFydC51dGlscy5jcmVhdGVTdHlsZUVsZW1lbnQoJy4nK29wdGlvbnMudW5pcXVlQ2xhc3NOYW1lKycgLmMzLWxpbmUgeyBzdHJva2Utd2lkdGg6ICcrb3B0aW9ucy5saW5lU2l6ZSsncHg7IH0nKVxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgfVxuXG4gICAgICBpZihncm91cGVkKSB7XG4gICAgICAgIGNoYXJ0RGF0YS5kYXRhLnR5cGUgPSAnYXJlYSc7XG4gICAgICAgIGNoYXJ0RGF0YS5kYXRhLmdyb3VwcyA9IFtkYXRhLmdyb3Vwc107XG4gICAgICAgIGlmKGRhdGEuZ3JvdXBzLmxlbmd0aCA8IDUpXG4gICAgICAgICAgY2hhcnREYXRhLnRvb2x0aXAuZ3JvdXBlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIFxuICAgICAgYW5pbWF0aW9uID0gcG9waWx5LmNoYXJ0LnV0aWxzLmluaXRpYWxBbmltYXRpb24oY2hhcnREYXRhLCBvcHRpb25zKTtcbiAgICAgIHZhciBjaGFydCA9IGMzLmdlbmVyYXRlKGNoYXJ0RGF0YSk7XG4gICAgICBjaGFydCA9IHBvcGlseS5jaGFydC51dGlscy51cGRhdGVDaGFydChlbGVtZW50LCBjaGFydCwgY2hhcnREYXRhLCBjaGFydFBhZGRpbmcpO1xuICAgICAgXG4gICAgICBhbmltYXRpb24uc3RhcnQoY2hhcnQpO1xuICAgICAgXG4gICAgICByZXR1cm4gY2hhcnQ7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5saW5lYXIgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcblxuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5hc3NpZ25BeGlzKGNvbHVtbnMsY2FsY3VsYXRpb24sb3B0aW9ucyk7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgZm9ybWF0dGVkRGF0YSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIHByZXBwZWREYXRhID0gcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5iYXJDb21tb24ucHJlcERhdGEoZm9ybWF0dGVkRGF0YSwgb3B0aW9ucywgdHJ1ZSk7XG4gICAgICB2YXIgeFZhbHVlcyA9IHByZXBwZWREYXRhWzBdO1xuICAgICAgdmFyIHlWYWx1ZXMgPSBwcmVwcGVkRGF0YVsxXTtcbiAgICAgIHZhciB6VmFsdWVzID0gcHJlcHBlZERhdGFbMl07XG4gICAgICB2YXIgeExhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueC5sYWJlbDtcbiAgICAgIHZhciB5TGFiZWwgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS55LmxhYmVsO1xuXG4gICAgICB2YXIgZGF0YSA9IHBvcGlseUNoYXJ0LmNoYXJ0RGF0YS5jM2lmeSh4VmFsdWVzLHlWYWx1ZXMselZhbHVlcyk7XG4gICAgICB2YXIgcm90YXRlZCA9IGZhbHNlO1xuICAgICAgaWYoZGF0YS5jb2x1bW5zLmxlbmd0aCA+IDI1KSB7XG4gICAgICAgICAgcm90YXRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBrd2FyZ3MgPSB7XG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIHpWYWx1ZXM6IHpWYWx1ZXMsXG4gICAgICAgIHJvdGF0ZWQ6IHJvdGF0ZWQsXG4gICAgICAgIHhMYWJlbDogeExhYmVsLFxuICAgICAgICB5TGFiZWw6IHlMYWJlbCxcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgZm9ybWF0dGVkRGF0YTogZm9ybWF0dGVkRGF0YVxuICAgICAgfTtcbiAgICAgIHZhciBjaGFydERhdGEgPSBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5nZXRDaGFydE9iamVjdChrd2FyZ3MpO1xuICAgICAgY2hhcnREYXRhLm9ucmVzaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi51cGRhdGVTcGVjaWFscyhlbGVtZW50LCByb3RhdGVkLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBhbmltYXRpb24gPSBwb3BpbHkuY2hhcnQudXRpbHMuaW5pdGlhbEFuaW1hdGlvbihjaGFydERhdGEsIG9wdGlvbnMpO1xuXG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpO1xuXG4gICAgICBhbmltYXRpb24uc3RhcnQoY2hhcnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi51cGRhdGVTcGVjaWFscyhlbGVtZW50LCByb3RhdGVkLCBvcHRpb25zKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gY2hhcnQ7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5iYXJHcm91cGVkID0gY2hhcnQ7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuICB2YXIgY2hhcnQgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG5cbiAgY2hhcnQuYXNzaWduQXhpcyA9IGZ1bmN0aW9uKGNvbHVtbnMsIGNhbGN1bGF0aW9uLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5iYXJDb21tb24uYXNzaWduQXhpcyhjb2x1bW5zLGNhbGN1bGF0aW9uLG9wdGlvbnMpO1xuICB9O1xuXG4gIGNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIGZvcm1hdHRlZERhdGEpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHZhciBwcmVwcGVkRGF0YSA9IHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuYmFyQ29tbW9uLnByZXBEYXRhKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMsIHRydWUpO1xuICAgICAgdmFyIHhWYWx1ZXMgPSBwcmVwcGVkRGF0YVswXTtcbiAgICAgIHZhciB5VmFsdWVzID0gcHJlcHBlZERhdGFbMV07XG4gICAgICB2YXIgelZhbHVlcyA9IHByZXBwZWREYXRhWzJdO1xuICAgICAgdmFyIHhMYWJlbCA9IGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLngubGFiZWw7XG4gICAgICB2YXIgeUxhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueS5sYWJlbDtcblxuICAgICAgdmFyIGRhdGE7XG4gICAgICB2YXIgZ3JvdXBzO1xuICAgICAgZGF0YSA9IHBvcGlseUNoYXJ0LmNoYXJ0RGF0YS5jM2lmeSh4VmFsdWVzLHlWYWx1ZXMselZhbHVlcyk7XG4gICAgICBncm91cHMgPSBbZGF0YS5ncm91cHNdO1xuICAgICAgZGF0YS5jYXRlZ29yaWVzLnVuc2hpZnQoJ3gnKTtcbiAgICAgIGRhdGEuY29sdW1ucy51bnNoaWZ0KGRhdGEuY2F0ZWdvcmllcyk7XG4gICAgICB2YXIgcm90YXRlZCA9IGZhbHNlO1xuICAgICAgaWYoZGF0YS5jb2x1bW5zWzBdLmxlbmd0aCA+IDQwKSB7XG4gICAgICAgICAgcm90YXRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBrd2FyZ3MgPSB7XG4gICAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIHpWYWx1ZXM6IHpWYWx1ZXMsXG4gICAgICAgIHJvdGF0ZWQ6IHJvdGF0ZWQsXG4gICAgICAgIHhMYWJlbDogeExhYmVsLFxuICAgICAgICB5TGFiZWw6IHlMYWJlbCxcbiAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgZm9ybWF0dGVkRGF0YTogZm9ybWF0dGVkRGF0YVxuICAgICAgfTtcbiAgICAgIHZhciBjaGFydERhdGEgPSBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5nZXRDaGFydE9iamVjdChrd2FyZ3MpO1xuICAgICAgY2hhcnREYXRhLmRhdGEgPSB7XG4gICAgICAgICAgeDogJ3gnLFxuICAgICAgICAgIGNvbHVtbnM6IGRhdGEuY29sdW1ucyxcbiAgICAgICAgICB0eXBlOiAnYmFyJyxcbiAgICAgICAgICBncm91cHM6IGdyb3Vwc1xuICAgICAgfTtcblxuICAgICAgY2hhcnREYXRhLm9ucmVzaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi51cGRhdGVTcGVjaWFscyhlbGVtZW50LCByb3RhdGVkLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHZhciBhbmltYXRpb24gPSBwb3BpbHkuY2hhcnQudXRpbHMuaW5pdGlhbEFuaW1hdGlvbihjaGFydERhdGEsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNoYXJ0ID0gYzMuZ2VuZXJhdGUoY2hhcnREYXRhKTtcbiAgICAgIFxuICAgICAgYW5pbWF0aW9uLnN0YXJ0KGNoYXJ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5iYXJDb21tb24udXBkYXRlU3BlY2lhbHMoZWxlbWVudCwgcm90YXRlZCwgb3B0aW9ucyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGNoYXJ0O1xuICB9O1xuXG4gIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuYmFyU3RhY2tlZCA9IGNoYXJ0O1xufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIHBvcGlseUNoYXJ0ID0gd2luZG93LnBvcGlseS5jaGFydDtcbiAgXG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcblxuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBheGlzID0ge307XG4gICAgICB2YXIgdHlwZVBhdHRlcm4gPSBwb3BpbHlDaGFydC5hbmFseXplLmdldFR5cGVQYXR0ZXJuKGNvbHVtbnMpO1xuXG4gICAgICB2YXIgYWxsTnVtYmVycyA9IF8uZXZlcnkoY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uLmRhdGFfdHlwZSA9PT0gJ251bWVyaWMnOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICBpZihhbGxOdW1iZXJzKSB7XG4gICAgICAgIGF4aXMueSA9IHtcbiAgICAgICAgICAgIGNvbHVtbl9oZWFkZXI6IGNhbGN1bGF0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FsY3VsYXRpb24uc2xpY2UoMSkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgIHZhbHVlczogXy5tYXAoY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7IHJldHVybiBjb2x1bW4udmFsdWVzWzBdIH0pLFxuICAgICAgICAgICAgZGF0YV90eXBlOiAnbnVtZXJpYydcbiAgICAgICAgfVxuICAgICAgICBheGlzLnggPSB7XG4gICAgICAgICAgICBjb2x1bW5faGVhZGVyOiAnQ29sdW1ucycsXG4gICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLmxhYmVsIH0pLFxuICAgICAgICAgICAgZGF0YV90eXBlOiAnY2F0ZWdvcnknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfLmVhY2goY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnbnVtZXJpYycpIHtcbiAgICAgICAgICAgICAgYXhpcy55ID0gY29sdW1uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGF4aXMueCA9IGNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBheGlzO1xuICB9O1xuXG4gIGNoYXJ0LnByZXBEYXRhID0gZnVuY3Rpb24oZm9ybWF0dGVkRGF0YSwgb3B0aW9ucykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgbGltaXQgPSB0aGF0LmRlZmF1bHRzLmNhdGVnb3J5TGltaXQ7XG5cbiAgICB2YXIgY2hhcnREYXRhID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGE7XG4gICAgdmFyIHhWYWx1ZXMgPSBjaGFydERhdGEueC52YWx1ZXM7XG4gICAgdmFyIHlWYWx1ZXMgPSBjaGFydERhdGEueS52YWx1ZXM7XG5cbiAgICB5VmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LmZvcm1hdE51bWJlcnMoeVZhbHVlcyk7XG5cbiAgICByZXR1cm4gW3hWYWx1ZXMsIHlWYWx1ZXNdO1xuICB9O1xuXG4gIGNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIGZvcm1hdHRlZERhdGEpIHtcbiAgICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICBmb3JtYXQgPSBkMy5mb3JtYXQoXCIsZFwiKSxcbiAgICAgICAgLy9jb2xvciA9IGQzLnNjYWxlLmNhdGVnb3J5MjBjKCk7XG4gICAgICAgIGNvbG9yID0gZDMuc2NhbGUub3JkaW5hbCgpLnJhbmdlKG9wdGlvbnMuY29sb3JzKTtcbiAgICB2YXIgZGF0YSA9IHsnY2hpbGRyZW4nOiBbXG4gICAgICAgICAgICB7J25hbWUnOiAnbmVnYXRpdmUnLCAnY2hpbGRyZW4nOiBbXX0sXG4gICAgICAgICAgICB7J25hbWUnOiAncG9zaXRpdmUnLCAnY2hpbGRyZW4nOiBbXX0sXG4gICAgICAgIF19O1xuICAgICAgICBcbiAgICB2YXIgcHJlcHBlZERhdGEgPSB0aGlzLnByZXBEYXRhKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpO1xuICAgIHZhciB4VmFsdWVzID0gcHJlcHBlZERhdGFbMF07XG4gICAgdmFyIHlWYWx1ZXMgPSBwcmVwcGVkRGF0YVsxXTtcbiAgICB2YXIgeExhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueC5sYWJlbDtcbiAgICBcbiAgICBfLmVhY2goXy5maXJzdCh5VmFsdWVzLDIwMCksIGZ1bmN0aW9uKHlWYWx1ZSxpKSB7XG4gICAgICAgIGlmKHlWYWx1ZT4wKVxuICAgICAgICAgICAgZGF0YS5jaGlsZHJlblsxXS5jaGlsZHJlbi5wdXNoKHtjYXRlZ29yeTogeFZhbHVlc1tpXSwgY2xhc3NOYW1lOiAnZGF0YScsIHNob3dWYWx1ZTogeVZhbHVlLCB2YWx1ZTogcGFyc2VGbG9hdCh5VmFsdWUpIH0pO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBkYXRhLmNoaWxkcmVuWzBdLmNoaWxkcmVuLnB1c2goe2NhdGVnb3J5OiB5VmFsdWVzW2ldLCBjbGFzc05hbWU6ICdkYXRhJywgc2hvd1ZhbHVlOiB5VmFsdWUsIHZhbHVlOiAtMSpwYXJzZUZsb2F0KHlWYWx1ZSkgfSk7XG4gICAgfSk7XG5cbiAgICBpZih3aWR0aCA9PSAnMTAwJScpXG4gICAgICB3aWR0aCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgaWYoaGVpZ2h0ID09ICcxMDAlJylcbiAgICAgIHZhciBoZWlnaHQgPSBwb3BpbHlDaGFydC51dGlscy5jaGFydFNpemUoKVsnaGVpZ2h0J107XG4gICAgXG4gICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IDM1MDtcbiAgICBpZihvcHRpb25zLnNraXBBbmltYXRpb24pXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSAwO1xuXG4gICAgdmFyIGJ1YmJsZSA9IGQzLmxheW91dC5wYWNrKClcbiAgICAgICAgLnNvcnQobnVsbClcbiAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAucGFkZGluZyg0KTtcblxuICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoZWxlbWVudCkuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJ1YmJsZVwiKTtcblxuICAgIGlmKChfLmlzVW5kZWZpbmVkKG9wdGlvbnMudG9vbHRpcCk/dHJ1ZTpvcHRpb25zLnRvb2x0aXApKSB7XG4gICAgICAgIHZhciB0aXAgPSBkMy50aXAoKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3BvcGlseS10b29sdGlwLWNvbnRhaW5lcicpXG4gICAgICAgICAgICAub2Zmc2V0KFstNSwgMF0pXG4gICAgICAgICAgICAuaHRtbChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSBcIjx0YWJsZSBjbGFzcz0ncG9waWx5LXRvb2x0aXAnPjx0cj48dGggY29sc3Bhbj0nMic+XCIgKyBkLmNhdGVnb3J5ICsgXCI8L3RoPjwvdHI+XCI7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIjx0ciBjbGFzcz0ncG9waWx5LXRvb2x0aXAtbmFtZS0nPlwiO1xuICAgICAgICAgICAgICAgIHRleHQgKz0gXCI8dGQgY2xhc3M9J25hbWUnPjxzcGFuIHN0eWxlPSdiYWNrZ3JvdW5kLWNvbG9yOlwiICsgY29sb3IoZC5jYXRlZ29yeSkgKyBcIic+PC9zcGFuPiBcIiArIHhMYWJlbCArIFwiPC90ZD5cIjtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiPHRkIGNsYXNzPSd2YWx1ZSc+XCIgKyBkLnNob3dWYWx1ZSArIFwiPC90ZD5cIjtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiPC90cj5cIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dCArIFwiPC90YWJsZT5cIjsgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgc3ZnLmNhbGwodGlwKTtcbiAgICB9XG4gICAgXG4gICAgdmFyIG5vZGUgPSBzdmcuc2VsZWN0QWxsKFwiLm5vZGVcIilcbiAgICAgICAgLmRhdGEoXG4gICAgICAgICAgICBidWJibGUubm9kZXMoZGF0YSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICFkLmNoaWxkcmVufSlcbiAgICAgICAgKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2RlXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueCArIFwiLFwiICsgZC55ICsgXCIpXCI7IH0pXG4gICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdGlwLnNob3coZCwgZCk7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5jaGlsZE5vZGVzWzBdKVxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oNTApXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJyXCIsIGQucis1KVxuICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24oMTAwKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiclwiLCBkLnIrMylcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICB0aXAuaGlkZShkKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLmNoaWxkTm9kZXNbMF0pXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMClcbiAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgZC5yKVxuICAgICAgICB9KTtcbiAgXG4gICAgbm9kZS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb2xvcihkLmNhdGVnb3J5KTsgfSlcbiAgICAgICAgLmF0dHIoXCJyXCIsIDApXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5yOyB9KTtcbiAgICAgICAgXG4gICAgbm9kZS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuM2VtXCIpXG4gICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMClcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgaWYgKGQuciAvIDMgPiAzKSByZXR1cm4gZC5jYXRlZ29yeS5zdWJzdHJpbmcoMCwgZC5yIC8gMyk7IFxuICAgICAgICAgICAgZWxzZSByZXR1cm4gJyc7XG4gICAgICAgIH0pXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDEpXG4gICAgICAgIC5hdHRyKFwicG9pbnRlci1ldmVudHNcIiwgXCJub25lXCIpO1xuXG4gICAgdmFyIG9uUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKG9wdGlvbnMud2lkdGggPT0gJzEwMCUnKVxuICAgICAgICAgIHdpZHRoID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgaWYob3B0aW9ucy5oZWlnaHQgPT0gJzEwMCUnKVxuICAgICAgICAgIGhlaWdodCA9IHBvcGlseUNoYXJ0LnV0aWxzLmNoYXJ0U2l6ZSgpWydoZWlnaHQnXTtcbiAgICAgICAgXG4gICAgICAgIHN2Z1xuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG5cbiAgICAgICAgdmFyIGJ1YmJsZSA9IGQzLmxheW91dC5wYWNrKClcbiAgICAgICAgICAgIC5zb3J0KG51bGwpXG4gICAgICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgICAgICAucGFkZGluZyg0KTtcbiAgICAgICAgXG4gICAgICAgIHZhciBub2RlID0gc3ZnLnNlbGVjdEFsbChcIi5ub2RlXCIpXG4gICAgICAgICAgICAuZGF0YShcbiAgICAgICAgICAgICAgICBidWJibGUubm9kZXMoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGQpIHsgcmV0dXJuICFkLmNoaWxkcmVufSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIHN2Zy5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSk7XG4gICAgICAgIFxuICAgICAgICBzdmcuc2VsZWN0QWxsKFwiY2lyY2xlXCIpXG4gICAgICAgICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5yOyB9KTtcbiAgICAgICAgc3ZnLnNlbGVjdEFsbChcInRleHRcIilcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICAgICAgaWYgKGQuciAvIDMgPiAzKSByZXR1cm4gZC5jYXRlZ29yeS5zdWJzdHJpbmcoMCwgZC5yIC8gMyk7IFxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuICcnO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgXG4gICAgfTtcblxuICAgIGQzLnNlbGVjdCh3aW5kb3cpLm9uKCdyZXNpemUnLCBvblJlc2l6ZSk7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5idWJibGVTdGF0aWMgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG4gIFxuICB2YXIgY2hhcnQgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG5cbiAgY2hhcnQuYXNzaWduQXhpcyA9IGZ1bmN0aW9uKGNvbHVtbnMsIGNhbGN1bGF0aW9uLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXhpcyA9IHt9O1xuICAgICAgdmFyIHR5cGVQYXR0ZXJuID0gcG9waWx5Q2hhcnQuYW5hbHl6ZS5nZXRUeXBlUGF0dGVybihjb2x1bW5zKTtcblxuICAgICAgdmFyIGFsbE51bWJlcnMgPSBfLmV2ZXJ5KGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5kYXRhX3R5cGUgPT09ICdudW1lcmljJzsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgaWYoYWxsTnVtYmVycykge1xuICAgICAgICBheGlzLnkgPSB7XG4gICAgICAgICAgICBjb2x1bW5faGVhZGVyOiBjYWxjdWxhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbGN1bGF0aW9uLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZhbHVlc1swXSB9KSxcbiAgICAgICAgICAgIGRhdGFfdHlwZTogJ251bWVyaWMnXG4gICAgICAgIH1cbiAgICAgICAgYXhpcy54ID0ge1xuICAgICAgICAgICAgY29sdW1uX2hlYWRlcjogJ0NvbHVtbnMnLFxuICAgICAgICAgICAgdmFsdWVzOiBfLm1hcChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi5jb2x1bW5faGVhZGVyIH0pLFxuICAgICAgICAgICAgZGF0YV90eXBlOiAnY2F0ZWdvcnknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfLmVhY2goY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnbnVtZXJpYycpIHtcbiAgICAgICAgICAgICAgYXhpcy55ID0gY29sdW1uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGF4aXMueCA9IGNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBheGlzO1xuICB9O1xuXG4gIGNoYXJ0LnByZXBEYXRhID0gZnVuY3Rpb24oZm9ybWF0dGVkRGF0YSwgb3B0aW9ucykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgbGltaXQgPSB0aGF0LmRlZmF1bHRzLmNhdGVnb3J5TGltaXQ7XG5cbiAgICB2YXIgY2hhcnREYXRhID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGE7XG4gICAgdmFyIHhWYWx1ZXMgPSBjaGFydERhdGEueC52YWx1ZXM7XG4gICAgdmFyIHlWYWx1ZXMgPSBjaGFydERhdGEueS52YWx1ZXM7XG5cbiAgICB5VmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LmZvcm1hdE51bWJlcnMoeVZhbHVlcyk7XG5cbiAgICByZXR1cm4gW3hWYWx1ZXMsIHlWYWx1ZXNdO1xuICB9O1xuXG4gIGNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIGZvcm1hdHRlZERhdGEpIHtcbiAgICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGgsXG4gICAgICAgIGhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0LFxuICAgICAgICBmb3JtYXQgPSBkMy5mb3JtYXQoXCIsZFwiKSxcbiAgICAgICAgY29sb3IgPSBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2Uob3B0aW9ucy5jb2xvcnMpO1xuXG4gICAgaWYod2lkdGggPT0gJzEwMCUnKVxuICAgICAgd2lkdGggPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIGlmKGhlaWdodCA9PSAnMTAwJScpXG4gICAgICB2YXIgaGVpZ2h0ID0gcG9waWx5Q2hhcnQudXRpbHMuY2hhcnRTaXplKClbJ2hlaWdodCddO1xuICAgIFxuICAgIHZhciBwcmVwcGVkRGF0YSA9IHRoaXMucHJlcERhdGEoZm9ybWF0dGVkRGF0YSwgb3B0aW9ucyk7XG4gICAgdmFyIHhWYWx1ZXMgPSBwcmVwcGVkRGF0YVswXTtcbiAgICB2YXIgeVZhbHVlcyA9IHByZXBwZWREYXRhWzFdO1xuICAgIHZhciB4TGFiZWwgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS54LmxhYmVsO1xuICAgIFxuICAgIHlWYWx1ZXMgPSBfLmZpcnN0KHlWYWx1ZXMsMjAwKTtcbiAgICB5VmFsdWVzID0gXy5tYXAoeVZhbHVlcywgcGFyc2VGbG9hdCk7XG5cbiAgICB2YXIgbm9kZXMgPSBbXTtcbiAgICBfLmVhY2goeVZhbHVlcywgZnVuY3Rpb24oeVZhbHVlLGkpIHtcbiAgICAgIGlmKHlWYWx1ZT4wKSB7XG4gICAgICAgIHZhciBub2RlID0ge1xuICAgICAgICAgIGlkOiBpLFxuICAgICAgICAgIHZhbHVlOiB5VmFsdWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHlWYWx1ZSxcbiAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgIGdyb3VwOiB4VmFsdWVzW2ldLFxuICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiB3aWR0aCxcbiAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogaGVpZ2h0XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHZhciBtYXhWYWx1ZSA9IF8ubWF4KG5vZGVzLCBmdW5jdGlvbihkKXsgcmV0dXJuIGQudmFsdWU7IH0pLnZhbHVlO1xuICAgIHZhciBzdW1WYWx1ZSA9IF8ucmVkdWNlKG5vZGVzLCAoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSArIGIudmFsdWU7IH0pLCAwKTtcbiAgICB2YXIgYXZnVmFsdWUgPSBzdW1WYWx1ZS9ub2Rlcy5sZW5ndGg7XG4gICAgXG4gICAgdmFyIGNyZWF0ZVNjYWxlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmxhbmtTcGFjZUZhY3RvciA9IDIgKyAod2lkdGgraGVpZ2h0KS8yMDAwO1xuICAgICAgdmFyIG1lYW5SID0gTWF0aC5zcXJ0KCh3aWR0aCpoZWlnaHQpLyhNYXRoLlBJKnlWYWx1ZXMubGVuZ3RoKmJsYW5rU3BhY2VGYWN0b3IpKTtcbiAgICAgIHJNYXggPSBNYXRoLnNxcnQoTWF0aC5wb3cobWVhblIsMikgKiBtYXhWYWx1ZS9hdmdWYWx1ZSk7XG4gICAgICByZXR1cm4gZDMuc2NhbGUucG93KCkuZXhwb25lbnQoMC41KS5kb21haW4oWzAsIG1heFZhbHVlXSkucmFuZ2UoWzIsIHJNYXhdKTtcbiAgICB9XG4gICAgdmFyIHJhZGl1c1NjYWxlID0gY3JlYXRlU2NhbGUoKTtcbiAgICBcbiAgICB2YXIgY2VudGVyID0ge1xuICAgICAgeDogd2lkdGgvMixcbiAgICAgIHk6IGhlaWdodC8yLFxuICAgIH07XG4gICAgXG4gICAgdmFyIHRyYW5zaXRpb25EdXJhdGlvbiA9IDM1MDtcbiAgICBpZihvcHRpb25zLnNraXBBbmltYXRpb24pXG4gICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSAwO1xuXG4gICAgdmFyIHN2ZyA9IGQzLnNlbGVjdChlbGVtZW50KS5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYnViYmxlMlwiKTtcbiAgICAgICAgXG4gICAgaWYoKF8uaXNVbmRlZmluZWQob3B0aW9ucy50b29sdGlwKT90cnVlOm9wdGlvbnMudG9vbHRpcCkpIHtcbiAgICAgICAgdmFyIHRpcCA9IGQzLnRpcCgpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAncG9waWx5LXRvb2x0aXAtY29udGFpbmVyJylcbiAgICAgICAgICAgIC5vZmZzZXQoWy01LCAwXSlcbiAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IFwiPHRhYmxlIGNsYXNzPSdwb3BpbHktdG9vbHRpcCc+PHRyPjx0aCBjb2xzcGFuPScyJz5cIiArIGQuZ3JvdXAgKyBcIjwvdGg+PC90cj5cIjtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiPHRyIGNsYXNzPSdwb3BpbHktdG9vbHRpcC1uYW1lLSc+XCI7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIjx0ZCBjbGFzcz0nbmFtZSc+PHNwYW4gc3R5bGU9J2JhY2tncm91bmQtY29sb3I6XCIgKyBjb2xvcihkLmdyb3VwKSArIFwiJz48L3NwYW4+IFwiICsgeExhYmVsICsgXCI8L3RkPlwiO1xuICAgICAgICAgICAgICAgIHRleHQgKz0gXCI8dGQgY2xhc3M9J3ZhbHVlJz5cIiArIGQuc2hvd1ZhbHVlICsgXCI8L3RkPlwiO1xuICAgICAgICAgICAgICAgIHRleHQgKz0gXCI8L3RyPlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0ICsgXCI8L3RhYmxlPlwiOyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBzdmcuY2FsbCh0aXApO1xuICAgIH1cbiAgICAgICAgXG4gICAgdmFyIGJ1YmJsZXMgPSBzdmcuc2VsZWN0QWxsKFwiLmJ1YmJsZVwiKS5kYXRhKG5vZGVzLCBmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4gZC5pZDtcbiAgICB9KTtcbiAgICBcbiAgICB2YXIgbm9kZSA9IGJ1YmJsZXMuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJidWJibGVcIilcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB0aXAuc2hvdyhkLCBkKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLmNoaWxkTm9kZXNbMF0pXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbig1MClcbiAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgcmFkaXVzU2NhbGUoZC52YWx1ZSkrNSlcbiAgICAgICAgICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKDEwMClcbiAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgcmFkaXVzU2NhbGUoZC52YWx1ZSkrMylcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpIHsgXG4gICAgICAgICAgICB0aXAuaGlkZShkKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLmNoaWxkTm9kZXNbMF0pXG4gICAgICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5kdXJhdGlvbigxMClcbiAgICAgICAgICAgICAgICAuYXR0cihcInJcIiwgcmFkaXVzU2NhbGUoZC52YWx1ZSkpXG4gICAgICAgIH0pO1xuICAgIFxuICAgIHZhciBjaXJjbGVzID0gbm9kZS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb2xvcihkLmdyb3VwKTsgfSlcbiAgICAgICAgLmF0dHIoXCJyXCIsIDApXG4gICAgICAgIC50cmFuc2l0aW9uKCkuZHVyYXRpb24odHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgICAgICAuYXR0cihcInJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gcmFkaXVzU2NhbGUoZC52YWx1ZSk7IH0pO1xuICAgIFxuICAgIHZhciB0ZXh0cyA9IG5vZGUuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjNlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHZhciByID0gcmFkaXVzU2NhbGUoZC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAociAvIDMgPiAzKSByZXR1cm4gZC5ncm91cC5zdWJzdHJpbmcoMCwgciAvIDMpOyBcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuICcnO1xuICAgICAgICB9KVxuICAgICAgICAudHJhbnNpdGlvbigpLmR1cmF0aW9uKHRyYW5zaXRpb25EdXJhdGlvbilcbiAgICAgICAgLnN0eWxlKFwib3BhY2l0eVwiLCAxKVxuICAgICAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwibm9uZVwiKTtcbiAgICBcbiAgICBcbiAgICB2YXIgY2hhcmdlRm4gPSBmdW5jdGlvbihkKSB7XG4gICAgICByZXR1cm4gLU1hdGgucG93KHJhZGl1c1NjYWxlKGQudmFsdWUpLCAyLjApKjEuNTtcbiAgICB9XG4gICAgXG4gICAgdmFyIGNlbnRlcmVkID0gZnVuY3Rpb24oYWxwaGEpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihkKSB7XG4gICAgICAgIGQueCA9IGQueCArIChjZW50ZXIueCAtIGQueCkgKiBNYXRoLm1heChoZWlnaHQvd2lkdGgsIDEpICogYWxwaGEgKiAwLjU7XG4gICAgICAgIGQueSA9IGQueSArIChjZW50ZXIueSAtIGQueSkgKiBNYXRoLm1heCh3aWR0aC9oZWlnaHQsIDEpICogYWxwaGEgKiAwLjU7XG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICB2YXIgZm9yY2UgPSBkMy5sYXlvdXQuZm9yY2UoKVxuICAgICAgICAuc2l6ZShbd2lkdGgsIGhlaWdodF0pXG4gICAgICAgIC5ub2Rlcyhub2RlcylcbiAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAuZ3Jhdml0eSgwLjIpXG4gICAgICAgIC5jaGFyZ2UoY2hhcmdlRm4pXG4gICAgICAgIC5mcmljdGlvbigwLjkpXG4gICAgICAgIC5vbihcInRpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHJldHVybiBidWJibGVzLmVhY2goY2VudGVyZWQoZS5hbHBoYSkpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIGZvcmNlLnN0YXJ0KCk7XG4gICAgICAgIFxuICAgIFxuICAgIGQzLnNlbGVjdCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbigpIHtcbiAgICAgIFxuICAgICAgaWYob3B0aW9ucy53aWR0aCA9PSAnMTAwJScpXG4gICAgICAgIHdpZHRoID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgIGlmKG9wdGlvbnMuaGVpZ2h0ID09ICcxMDAlJylcbiAgICAgICAgaGVpZ2h0ID0gcG9waWx5Q2hhcnQudXRpbHMuY2hhcnRTaXplKClbJ2hlaWdodCddO1xuICAgICAgXG4gICAgICBjZW50ZXIgPSB7XG4gICAgICAgIHg6IHdpZHRoLzIsXG4gICAgICAgIHk6IGhlaWdodC8yLFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgcmFkaXVzU2NhbGUgPSBjcmVhdGVTY2FsZSgpO1xuICAgICAgc3ZnXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCk7XG4gICAgICBcbiAgICAgIGJ1YmJsZXMuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHJhZGl1c1NjYWxlKGQudmFsdWUpOyB9KTtcbiAgICAgIGJ1YmJsZXMuc2VsZWN0QWxsKFwidGV4dFwiKS50ZXh0KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHZhciByID0gcmFkaXVzU2NhbGUoZC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAociAvIDMgPiAzKSByZXR1cm4gZC5ncm91cC5zdWJzdHJpbmcoMCwgciAvIDMpOyBcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuICcnO1xuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgZm9yY2VcbiAgICAgICAgLmNoYXJnZShjaGFyZ2VGbilcbiAgICAgICAgLnNpemUoW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAuc3RhcnQoKTtcbiAgICAgIFxuICAgIH0pOyBcbiAgICBcbiAgICBcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJ1YmJsZSA9IGNoYXJ0O1xufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIHBvcGlseUNoYXJ0ID0gd2luZG93LnBvcGlseS5jaGFydDtcbiAgXG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcbiAgY2hhcnQuZGVmYXVsdEZvciA9IFtcbiAgICAncmF0aW9fcGVyX2NhdGVnb3J5J1xuICBdO1xuICBjaGFydC5hY2NlcHRzID0gW107XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgcmF3RGF0YSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIHlWYWx1ZXMgPSByYXdEYXRhLmNoYXJ0RGF0YS55LnZhbHVlcztcblxuICAgICAgdmFyIGNoYXJ0RGF0YSA9IHtcbiAgICAgICAgICBiaW5kdG86IGVsZW1lbnQsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBjb2x1bW5zOiBbWydkYXRhJywgcGFyc2VGbG9hdCh5VmFsdWVzWzBdKSAqIDEwMF1dLFxuICAgICAgICAgICAgICB0eXBlOiAnZ2F1Z2UnXG4gICAgICAgICAgfSwgICAgICAgICAgICAgIFxuICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IG9wdGlvbnMuY29sb3JzXG4gICAgICAgICAgfSwgICAgICAgICAgICAgIFxuICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICBzaG93OiAhXy5pc1VuZGVmaW5lZChvcHRpb25zLmxlZ2VuZCkgJiYgb3B0aW9ucy5sZWdlbmRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgIGhlaWdodDogb3B0aW9ucy5oZWlnaHRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IG9wdGlvbnMuYmFja2dyb3VuZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgb25yZXNpemVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OCkge1xuICAgICAgICAgICAgICAgICAgY2hhcnQucmVzaXplKHtoZWlnaHQ6MjIwfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgIGNoYXJ0LnJlc2l6ZSh7aGVpZ2h0OjM0MH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHZhciBhbmltYXRpb24gPSBwb3BpbHkuY2hhcnQudXRpbHMuaW5pdGlhbEFuaW1hdGlvbihjaGFydERhdGEsIG9wdGlvbnMpXG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpOyBcbiAgICAgIGFuaW1hdGlvbi5zdGFydChjaGFydCk7XG5cbiAgICAgIHJldHVybiBjaGFydDtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmdhdWdlID0gY2hhcnQ7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuXG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcbiAgXG4gIGNoYXJ0LmFzc2lnbkF4aXMgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGF4aXMgPSB7fTtcbiAgICAgIHZhciB0eXBlUGF0dGVybiA9IHBvcGlseUNoYXJ0LmFuYWx5emUuZ2V0VHlwZVBhdHRlcm4oY29sdW1ucyk7XG5cbiAgICAgIGlmKHR5cGVQYXR0ZXJuID09PSAnbnVtZXJpYyxudW1lcmljJykge1xuICAgICAgICBheGlzLnkgPSB7XG4gICAgICAgICAgICBjb2x1bW5faGVhZGVyOiBjYWxjdWxhdGlvbi5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbGN1bGF0aW9uLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICB2YWx1ZXM6IF8ubWFwKGNvbHVtbnMsIGZ1bmN0aW9uKGNvbHVtbikgeyByZXR1cm4gY29sdW1uLnZhbHVlc1swXSB9KSxcbiAgICAgICAgICAgIGRhdGFfdHlwZTogJ251bWVyaWMnXG4gICAgICAgIH1cbiAgICAgICAgYXhpcy54ID0ge1xuICAgICAgICAgICAgY29sdW1uX2hlYWRlcjogJ0NvbHVtbnMnLFxuICAgICAgICAgICAgdmFsdWVzOiBfLm1hcChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuIGNvbHVtbi5jb2x1bW5faGVhZGVyIH0pLFxuICAgICAgICAgICAgZGF0YV90eXBlOiAnY2F0ZWdvcnknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfLmVhY2goY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnbnVtZXJpYycpIHtcbiAgICAgICAgICAgICAgYXhpcy55ID0gY29sdW1uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGF4aXMueCA9IGNvbHVtbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBheGlzO1xuICB9O1xuXG4gIGNoYXJ0LnByZXBEYXRhID0gZnVuY3Rpb24oZm9ybWF0dGVkRGF0YSwgb3B0aW9ucykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB2YXIgbGltaXQgPSB0aGF0LmRlZmF1bHRzLmNhdGVnb3J5TGltaXQ7XG4gICAgdmFyIGNoYXJ0RGF0YSA9IGZvcm1hdHRlZERhdGEuY2hhcnREYXRhO1xuICAgIHZhciB4VmFsdWVzID0gY2hhcnREYXRhLngudmFsdWVzO1xuICAgIHZhciB5VmFsdWVzID0gY2hhcnREYXRhLnkudmFsdWVzO1xuXG4gICAgdmFyIG9yZGVyID0gb3B0aW9ucy5vcmRlciB8fCAnYXV0byc7XG4gICAgc29ydGVkVmFsdWVzID0gcG9waWx5Q2hhcnQuY2hhcnREYXRhLnNvcnREYXRhKHhWYWx1ZXMseVZhbHVlcyxbXSxsaW1pdCxvcmRlcik7XG5cbiAgICB2YXIgY2xlYW5YVmFsdWVzID0gc29ydGVkVmFsdWVzWzBdO1xuICAgIHZhciBjbGVhbllWYWx1ZXMgPSBwb3BpbHlDaGFydC5mb3JtYXQuZm9ybWF0TnVtYmVycyhzb3J0ZWRWYWx1ZXNbMV0pO1xuXG4gICAgcmV0dXJuIFtjbGVhblhWYWx1ZXMsIGNsZWFuWVZhbHVlc107XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgZm9ybWF0dGVkRGF0YSkge1xuICAgICAgdmFyIHByZXBwZWREYXRhID0gdGhpcy5wcmVwRGF0YShmb3JtYXR0ZWREYXRhLCBvcHRpb25zKTtcbiAgICAgIHZhciB4VmFsdWVzID0gcHJlcHBlZERhdGFbMF07XG4gICAgICB2YXIgeVZhbHVlcyA9IHByZXBwZWREYXRhWzFdO1xuICAgICAgdmFyIHhMYWJlbCA9IGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLngubGFiZWw7XG4gICAgICB2YXIgeUxhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueS5sYWJlbDtcblxuICAgIFxuICAgICAgdmFyIHlNaW4gPSAwO1xuICAgICAgdmFyIGxvd2VzdFkgPSBfLm1pbih5VmFsdWVzKTtcbiAgICAgIGlmKGxvd2VzdFkgPCAwKSB7XG4gICAgICAgICAgeU1pbiA9IGxvd2VzdFk7XG4gICAgICB9XG5cbiAgICAgIHlWYWx1ZXMudW5zaGlmdCh5TGFiZWwpO1xuXG4gICAgICB2YXIgZGF5RGlmZiA9IHBvcGlseS5jaGFydC5mb3JtYXQuZGF5c0RpZmYoeFZhbHVlcyk7IFxuICAgICAgdmFyIHRpY2tGb3JtYXRTdHIgPSBwb3BpbHkuY2hhcnQuZm9ybWF0LmZvcm1hdEZyb21EYXlEaWZmKGRheURpZmYpO1xuICAgICAgXG4gICAgICB2YXIgdmFyaWF0aW9uID0gb3B0aW9ucy52YXJpYXRpb24gfHwgZm9ybWF0dGVkRGF0YS5jaGFydERhdGEubWV0YWRhdGEuaW50ZXJ2YWxzWzBdO1xuXG4gICAgICB2YXIgZGF0ZUZvcm1hdFN0ciA9IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0RnJvbUludGVydmFsKHZhcmlhdGlvbik7XG4gICAgICBpZihfLmlzVW5kZWZpbmVkKHZhcmlhdGlvbikpIHtcbiAgICAgICAgZGF0ZUZvcm1hdFN0ciA9IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0RnJvbUluc3BlY3Rpb24oeFZhbHVlcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciBkYXRlRm9ybWF0ID0gZDMudGltZS5mb3JtYXQoZGF0ZUZvcm1hdFN0cik7XG4gICAgICB2YXIgdGlja0Zvcm1hdCA9IGQzLnRpbWUuZm9ybWF0KHRpY2tGb3JtYXRTdHIpO1xuICAgICAgdmFyIGZ1bGxGb3JtYXQgPSBkMy50aW1lLmZvcm1hdCgnJVktJW0tJWQgJUg6JU06JVMnKTtcblxuICAgICAgdmFyIHRpY2tzVmFsdWVzID0gcG9waWx5LmNoYXJ0LmZvcm1hdC50aWNrRm9ybWF0VmFsdWVzKHhWYWx1ZXMsIHRpY2tGb3JtYXRTdHIsIGRhdGVGb3JtYXQpO1xuICAgICAgXG4gICAgICBpZihkYXRlRm9ybWF0ICE9IGZ1bGxGb3JtYXQpXG4gICAgICAgICAgeFZhbHVlcyA9IF8ubWFwKHhWYWx1ZXMsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlRm9ybWF0KGZ1bGxGb3JtYXQucGFyc2UoZC5zcGxpdCgnLicpWzBdKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgeFZhbHVlcy51bnNoaWZ0KCd4Jyk7XG5cbiAgICAgIGlmKCFfLmlzVW5kZWZpbmVkKG9wdGlvbnMubGluZVNpemUpKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHBvcGlseS5jaGFydC51dGlscy5jcmVhdGVTdHlsZUVsZW1lbnQoJy4nK29wdGlvbnMudW5pcXVlQ2xhc3NOYW1lKycgLmMzLWxpbmUgeyBzdHJva2Utd2lkdGg6ICcrb3B0aW9ucy5saW5lU2l6ZSsncHg7IH0nKVxuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdG9vbHRpcCA9IChfLmlzVW5kZWZpbmVkKG9wdGlvbnMudG9vbHRpcCk/dHJ1ZTpvcHRpb25zLnRvb2x0aXApO1xuICAgICAgaWYodG9vbHRpcCAmJiAoIW9wdGlvbnMub3JkZXIgfHwgb3B0aW9ucy5vcmRlciA9PSAnYXV0bycpICkge1xuICAgICAgICB0b29sdGlwID0ge1xuICAgICAgICAgIHRpdGxlOiBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGVGb3JtYXQoZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjaGFydERhdGEgPSB7XG4gICAgICAgICAgYmluZHRvOiBlbGVtZW50LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgeDogJ3gnLFxuICAgICAgICAgICAgICB4Rm9ybWF0OiBkYXRlRm9ybWF0U3RyLCAvLyAneEZvcm1hdCcgY2FuIGJlIHVzZWQgYXMgY3VzdG9tIGZvcm1hdCBvZiAneCdcbiAgICAgICAgICAgICAgY29sdW1uczogW3hWYWx1ZXMseVZhbHVlc11cbiAgICAgICAgICB9LFxuICAgICAgICAgIHBhZGRpbmc6IHRoaXMuZGVmYXVsdHMuY2hhcnRQYWRkaW5nKCksXG4gICAgICAgICAgYXhpczoge1xuICAgICAgICAgICAgICB4OiB7XG4gICAgICAgICAgICAgICAgICBzaG93OiBvcHRpb25zLnhBeGlzLFxuICAgICAgICAgICAgICAgICAgdHlwZTogKCFvcHRpb25zLm9yZGVyIHx8IG9wdGlvbnMub3JkZXIgPT0gJ2F1dG8nID8gJ3RpbWVzZXJpZXMnIDogJ2NhdGVnb3J5JyksXG4gICAgICAgICAgICAgICAgICB0aWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZml0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IHBvcGlseS5jaGFydC5mb3JtYXQuZm9ybWF0QXhpcyhmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS54LCBvcHRpb25zLCB0aWNrRm9ybWF0KSxcbiAgICAgICAgICAgICAgICAgICAgICByb3RhdGU6IG9wdGlvbnMueFJvdGF0aW9uIHx8ICA0NSxcbiAgICAgICAgICAgICAgICAgICAgICBhdXRvcm90YXRlOiAhb3B0aW9ucy54Um90YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgbXVsdGlsaW5lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAvL2hlaWdodDogMTMwLFxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlczogKCFvcHRpb25zLm9yZGVyIHx8IG9wdGlvbnMub3JkZXIgPT0gJ2F1dG8nID8gdGlja3NWYWx1ZXMgOiBudWxsKSxcbiAgICAgICAgICAgICAgICAgICAgICBjb3VudDogeFZhbHVlcy5sZW5ndGgtMVxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICB0ZXh0OiB4TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2lubmVyLXJpZ2h0J1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgICAgICBzaG93OiBvcHRpb25zLnlBeGlzLFxuICAgICAgICAgICAgICAgICAgbWluOiB5TWluLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB5TGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdvdXRlci1taWRkbGUnXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgdGljazoge1xuICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdDogcG9waWx5LmNoYXJ0LmZvcm1hdC5mb3JtYXRBeGlzKGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLnksIG9wdGlvbnMsIGQzLmZvcm1hdChcIixcIikpLFxuICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZTogb3B0aW9ucy55Um90YXRpb24gfHwgIDAsXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IG9wdGlvbnMuY29sb3JzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgc2hvdzogIV8uaXNVbmRlZmluZWQob3B0aW9ucy5sZWdlbmQpICYmIG9wdGlvbnMubGVnZW5kXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICAgIGhlaWdodDogb3B0aW9ucy5oZWlnaHRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxpbmU6IHtcbiAgICAgICAgICAgICAgY29ubmVjdE51bGw6IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvaW50OiB7XG4gICAgICAgICAgICByOiAob3B0aW9ucy5wb2ludFNpemUgfHwgMi41KVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgeDoge1xuICAgICAgICAgICAgICBzaG93OiBfLmlzVW5kZWZpbmVkKG9wdGlvbnMueEdyaWQpP2ZhbHNlOm9wdGlvbnMueEdyaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5OiB7XG4gICAgICAgICAgICAgIHNob3c6IF8uaXNVbmRlZmluZWQob3B0aW9ucy55R3JpZCk/dHJ1ZTpvcHRpb25zLnlHcmlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmFja2dyb3VuZDogb3B0aW9ucy5iYWNrZ3JvdW5kXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0b29sdGlwOiB0b29sdGlwXG4gICAgICB9XG4gICAgICBcbiAgICAgIHZhciB0b29sdGlwID0gKF8uaXNVbmRlZmluZWQob3B0aW9ucy50b29sdGlwKT90cnVlOm9wdGlvbnMudG9vbHRpcCk7XG4gICAgICBpZih0b29sdGlwICYmICghb3B0aW9ucy5vcmRlciB8fCBvcHRpb25zLm9yZGVyID09ICdhdXRvJykgKSB7XG4gICAgICAgIGNoYXJ0RGF0YS50b29sdGlwLmZvcm1hdCA9IHtcbiAgICAgICAgICB0aXRsZTogZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGVGb3JtYXQoZCk7XG4gICAgICAgICAgfSBcbiAgICAgICAgfVxuICAgICAgICBjaGFydERhdGEuYXhpcy54LnRpY2sudmFsdWVzID0gdGlja3NWYWx1ZXM7XG4gICAgICB9XG5cblxuICAgICAgdmFyIGFuaW1hdGlvbiA9IHBvcGlseS5jaGFydC51dGlscy5pbml0aWFsQW5pbWF0aW9uKGNoYXJ0RGF0YSwgb3B0aW9ucyk7XG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpO1xuXG4gICAgICBhbmltYXRpb24uc3RhcnQoY2hhcnQpO1xuICAgICAgXG4gICAgICByZXR1cm4gY2hhcnQ7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5saW5lID0gY2hhcnQ7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuXG4gIHZhciBjaGFydCA9IF8uY2xvbmUocG9waWx5Q2hhcnQuYmFzZUNoYXJ0KTtcblxuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5hc3NpZ25BeGlzKGNvbHVtbnMsY2FsY3VsYXRpb24sb3B0aW9ucyk7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgcmF3RGF0YSkge1xuICAgICAgcmV0dXJuIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMubGluZWFyLnJlbmRlcihlbGVtZW50LCBvcHRpb25zLCByYXdEYXRhKTtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLm11bHRpTGluZSA9IGNoYXJ0O1xufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIHBvcGlseUNoYXJ0ID0gd2luZG93LnBvcGlseS5jaGFydDtcbiAgXG4gIHZhciBwaWUgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG4gIHBpZS5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBheGlzID0ge307XG5cbiAgICAgIF8uZWFjaChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnbnVtZXJpYycpIHtcbiAgICAgICAgICAgIGF4aXMueSA9IGNvbHVtbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBheGlzLnggPSBjb2x1bW47XG4gICAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBheGlzO1xuICB9O1xuXG4gIHBpZS5wcmVwRGF0YSA9IGZ1bmN0aW9uKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdmFyIGxpbWl0ID0gdGhhdC5kZWZhdWx0cy5waWVMaW1pdDtcbiAgICB2YXIgY2hhcnREYXRhID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGE7XG4gICAgdmFyIHhWYWx1ZXMgPSBjaGFydERhdGEueC52YWx1ZXM7XG4gICAgdmFyIHlWYWx1ZXMgPSBjaGFydERhdGEueS52YWx1ZXM7XG4gICAgdmFyIG9yZGVyID0gb3B0aW9ucy5vcmRlciB8fCAnYXV0byc7XG5cbiAgICBjbGVhblZhbHVlcyA9IHBvcGlseUNoYXJ0LmNoYXJ0RGF0YS5zb3J0RGF0YSh4VmFsdWVzLHlWYWx1ZXMsW10sbGltaXQsb3JkZXIpO1xuXG4gICAgdmFyIGNsZWFuWFZhbHVlcyA9IGNsZWFuVmFsdWVzWzBdO1xuICAgIHZhciBjbGVhbllWYWx1ZXMgPSBwb3BpbHlDaGFydC5mb3JtYXQuZm9ybWF0TnVtYmVycyhwb3BpbHlDaGFydC5mb3JtYXQudG9OdW1iZXIoY2xlYW5WYWx1ZXNbMV0pKTtcblxuICAgIHJldHVybiBbY2xlYW5YVmFsdWVzLCBjbGVhbllWYWx1ZXNdO1xuICB9O1xuXG4gIHBpZS5yZW5kZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zLCBmb3JtYXR0ZWREYXRhKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgcHJlcHBlZERhdGEgPSB0aGlzLnByZXBEYXRhKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNvbHVtbnMgPSBfLnppcChwcmVwcGVkRGF0YVswXSxwcmVwcGVkRGF0YVsxXSk7XG5cbiAgICAgIHZhciBjaGFydERhdGEgPSB7XG4gICAgICAgICAgYmluZHRvOiBlbGVtZW50LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgY29sdW1uczogY29sdW1ucyxcbiAgICAgICAgICAgICAgdHlwZTogJ3BpZScsXG4gICAgICAgICAgICAgIG9yZGVyOm51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgIHBhdHRlcm46IG9wdGlvbnMuY29sb3JzXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20nLFxuICAgICAgICAgICAgICBzaG93OiBwcmVwcGVkRGF0YVswXS5sZW5ndGggPCAyMCA/IF8uaXNVbmRlZmluZWQob3B0aW9ucy5sZWdlbmQpIHx8IG9wdGlvbnMubGVnZW5kIDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpemU6IHtcbiAgICAgICAgICAgIGhlaWdodDogb3B0aW9ucy5oZWlnaHRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IG9wdGlvbnMuYmFja2dyb3VuZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdG9vbHRpcDogKF8uaXNVbmRlZmluZWQob3B0aW9ucy50b29sdGlwKT90cnVlOm9wdGlvbnMudG9vbHRpcClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIFxuICAgICAgdmFyIGFuaW1hdGlvbiA9IHBvcGlseS5jaGFydC51dGlscy5pbml0aWFsQW5pbWF0aW9uKGNoYXJ0RGF0YSwgb3B0aW9ucyk7XG4gICAgICB2YXIgY2hhcnQgPSBjMy5nZW5lcmF0ZShjaGFydERhdGEpOyBcbiAgICAgIGFuaW1hdGlvbi5zdGFydChjaGFydCk7XG5cbiAgICAgIHJldHVybiBjaGFydDtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLnBpZSA9IHBpZTtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG5cbiAgdmFyIGNoYXJ0ID0gXy5jbG9uZShwb3BpbHlDaGFydC5iYXNlQ2hhcnQpO1xuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmJhckNvbW1vbi5hc3NpZ25BeGlzKGNvbHVtbnMsY2FsY3VsYXRpb24sb3B0aW9ucyk7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgcmF3RGF0YSkge1xuICAgICAgcmV0dXJuIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMubGluZWFyLnJlbmRlcihlbGVtZW50LCBvcHRpb25zLCByYXdEYXRhLCB0cnVlKTtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLnJhZGFyID0gY2hhcnQ7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuICBcbiAgdmFyIGNoYXJ0ID0gXy5jbG9uZShwb3BpbHlDaGFydC5iYXNlQ2hhcnQpO1xuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBheGlzID0ge307XG5cbiAgICAgIF8uZWFjaChjb2x1bW5zLCBmdW5jdGlvbihjb2x1bW4pIHtcbiAgICAgICAgICBpZihjb2x1bW4uZGF0YV90eXBlID09PSAnY2F0ZWdvcnknKSB7XG4gICAgICAgICAgICBheGlzLnogPSBjb2x1bW47XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYoIWF4aXMueSkge1xuICAgICAgICAgICAgYXhpcy55ID0gY29sdW1uO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF4aXMueCA9IGNvbHVtbjtcbiAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGF4aXM7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgZm9ybWF0dGVkRGF0YSkge1xuICAgICAgdmFyIHByZXBwZWREYXRhID0gcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5jb21wYXJlLnByZXBEYXRhKGZvcm1hdHRlZERhdGEsIG9wdGlvbnMpO1xuICAgICAgdmFyIHhWYWx1ZXMgPSBwcmVwcGVkRGF0YVswXTtcbiAgICAgIHZhciB5VmFsdWVzID0gcHJlcHBlZERhdGFbMV07XG4gICAgICB2YXIgelZhbHVlcyA9IHByZXBwZWREYXRhWzJdO1xuICAgICAgdmFyIHhMYWJlbCA9IGZvcm1hdHRlZERhdGEuY2hhcnREYXRhLngubGFiZWw7XG4gICAgICB2YXIgeUxhYmVsID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEueS5sYWJlbDtcbiAgICAgIHZhciB6TGFiZWwgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS56LmxhYmVsOyAgICBcblxuICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgIHZhciB4cyA9IHt9O1xuICAgICAgdmFyIHpzID0ge307XG5cbiAgICAgIC8qXG4gICAgICBjb25zb2xlLmxvZyh4VmFsdWVzKTtcbiAgICAgIGNvbnNvbGUubG9nKHlWYWx1ZXMpO1xuICAgICAgY29uc29sZS5sb2coelZhbHVlcyk7XG4gICAgICAqL1xuICAgICAgXy5lYWNoKF8udW5pcSh6VmFsdWVzKSwgZnVuY3Rpb24oeikge1xuICAgICAgICAgIHpzW3pdID0ge3hzOltdLHlzOltdfTtcbiAgICAgIH0pO1xuXG4gICAgICBfLmVhY2goelZhbHVlcywgZnVuY3Rpb24oeixpKSB7XG4gICAgICAgICAgenNbel0ueXMucHVzaCh5VmFsdWVzW2ldKTtcbiAgICAgICAgICB6c1t6XS54cy5wdXNoKHhWYWx1ZXNbaV0pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIF8uZWFjaChfLmtleXMoenMpLCBmdW5jdGlvbih6KSB7XG4gICAgICAgICAgenNbel0ueHMudW5zaGlmdCh6KydfeCcpO1xuICAgICAgICAgIHpzW3pdLnlzLnVuc2hpZnQoeik7XG5cbiAgICAgICAgICB4c1t6XSA9IHorJ194JztcbiAgICAgICAgICBjb2x1bW5zLnB1c2goenNbel0ueHMpO1xuICAgICAgICAgIGNvbHVtbnMucHVzaCh6c1t6XS55cyk7XG4gICAgICB9KTtcblxuICAgICAgdmFyIHRvb2x0aXAgPSBvcHRpb25zLnRvb2x0aXAgfHwge1xuICAgICAgICAgIGNvbnRlbnRzOiBmdW5jdGlvbiAoZCwgZGVmYXVsdFRpdGxlRm9ybWF0LCBkZWZhdWx0VmFsdWVGb3JtYXQsIGNvbG9yKSB7XG4gICAgICAgICAgICAgIHZhciBtYXJrdXAgPSAnPHRhYmxlIGNsYXNzPVwicG9waWx5LXRvb2x0aXBcIj48dGJvZHk+JztcbiAgICAgICAgICAgICAgaWYoIV8uaXNVbmRlZmluZWQoelZhbHVlc1tkWzBdLmluZGV4XSkpXG4gICAgICAgICAgICAgICAgbWFya3VwICs9ICc8dHI+PHRoIGNvbHNwYW49XCIyXCI+PHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicrY29sb3IoZFswXS5pZCkrJ1wiPjwvc3Bhbj4gJyt6VmFsdWVzW2RbMF0uaW5kZXhdKyc8L3RoPjwvdHI+JztcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIG1hcmt1cCArPSAnPHRyIGNsYXNzPVwicG9waWx5LXRvb2x0aXAtbmFtZVwiPjx0ZCBjbGFzcz1cIm5hbWVcIj4nK3hMYWJlbCsnPC90ZD48dGQgY2xhc3M9XCJ2YWx1ZVwiPicrZFswXS54Kyc8L3RkPjwvdHI+JztcbiAgICAgICAgICAgICAgbWFya3VwICs9ICc8dHIgY2xhc3M9XCJwb3BpbHktdG9vbHRpcC1uYW1lXCI+PHRkIGNsYXNzPVwibmFtZVwiPicreUxhYmVsKyc8L3RkPjx0ZCBjbGFzcz1cInZhbHVlXCI+JytkWzBdLnZhbHVlKyc8L3RkPjwvdHI+JztcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIG1hcmt1cCArPSAnPC90Ym9keT48L3RhYmxlPidcbiAgICAgICAgICAgICAgcmV0dXJuIG1hcmt1cDtcbiAgICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgc2hvd0xlZ2VuZCA9IHRydWU7XG4gICAgICBpZihfLnVuaXF1ZSh6VmFsdWVzKS5sZW5ndGggPiAyNSkge1xuICAgICAgICAgIHNob3dMZWdlbmQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuY29tcGFyZS5yZW5kZXIoZWxlbWVudCwgb3B0aW9ucywgY29sdW1ucywgeHMsIHhMYWJlbCwgeUxhYmVsLCB0b29sdGlwLCBmb3JtYXR0ZWREYXRhKTtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLnNjYXR0ZXJwbG90Q2F0ZWdvcnkgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG4gIFxuICB2YXIgY2hhcnQgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG4gIFxuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBwb3BpbHlDaGFydC5jaGFydFR5cGVzLmNvbXBhcmUuYXNzaWduQXhpcyhjb2x1bW5zLGNhbGN1bGF0aW9uLG9wdGlvbnMpO1xuICB9O1xuXG4gIGNoYXJ0LnJlbmRlciA9IGZ1bmN0aW9uKGVsZW1lbnQsIG9wdGlvbnMsIHJhd0RhdGEpIHtcbiAgICAgIGZvcm1hdHRlZERhdGEgPSByYXdEYXRhO1xuICAgICAgdmFyIHByZXBwZWREYXRhID0gcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5jb21wYXJlLnByZXBEYXRhKHJhd0RhdGEsIG9wdGlvbnMpO1xuICAgICAgdmFyIHhWYWx1ZXMgPSBwcmVwcGVkRGF0YVswXTtcbiAgICAgIHZhciB5VmFsdWVzID0gcHJlcHBlZERhdGFbMV07XG4gICAgICB2YXIgelZhbHVlcyA9IHByZXBwZWREYXRhWzJdO1xuICAgICAgdmFyIHhMYWJlbCA9IHJhd0RhdGEuY2hhcnREYXRhLngubGFiZWw7XG4gICAgICB2YXIgeUxhYmVsID0gcmF3RGF0YS5jaGFydERhdGEueS5sYWJlbDsgICAgXG5cblxuICAgICAgdmFyIGNvbHVtbnMgPSBbXTtcbiAgICAgIHlWYWx1ZXMudW5zaGlmdCh5TGFiZWwpO1xuICAgICAgeFZhbHVlcy51bnNoaWZ0KHhMYWJlbCk7XG4gICAgICB2YXIgeHMgPSB7fTtcbiAgICAgIHhzW3lMYWJlbF0gPSB4TGFiZWw7XG4gICAgICBjb2x1bW5zLnB1c2goeFZhbHVlcyk7XG4gICAgICBjb2x1bW5zLnB1c2goeVZhbHVlcyk7XG5cbiAgICAgIHZhciB0b29sdGlwID0gb3B0aW9ucy50b29sdGlwIHx8IHtcbiAgICAgICAgICBjb250ZW50czogZnVuY3Rpb24gKGQsIGRlZmF1bHRUaXRsZUZvcm1hdCwgZGVmYXVsdFZhbHVlRm9ybWF0LCBjb2xvcikge1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgdmFyIG1hcmt1cCA9ICc8dGFibGUgY2xhc3M9XCJwb3BpbHktdG9vbHRpcFwiPjx0Ym9keT4nO1xuICAgICAgICAgICAgICBpZighXy5pc1VuZGVmaW5lZCh6VmFsdWVzW2RbMF0uaW5kZXhdKSlcbiAgICAgICAgICAgICAgICBtYXJrdXAgKz0gJzx0cj48dGggY29sc3Bhbj1cIjJcIj48c3BhbiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Jytjb2xvcihkWzBdLmlkKSsnXCI+PC9zcGFuPiAnK3pWYWx1ZXNbZFswXS5pbmRleF0rJzwvdGg+PC90cj4nO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbWFya3VwICs9ICc8dHIgY2xhc3M9XCJwb3BpbHktdG9vbHRpcC1uYW1lXCI+PHRkIGNsYXNzPVwibmFtZVwiPicreExhYmVsKyc8L3RkPjx0ZCBjbGFzcz1cInZhbHVlXCI+JytkWzBdLngrJzwvdGQ+PC90cj4nO1xuICAgICAgICAgICAgICBtYXJrdXAgKz0gJzx0ciBjbGFzcz1cInBvcGlseS10b29sdGlwLW5hbWVcIj48dGQgY2xhc3M9XCJuYW1lXCI+Jyt5TGFiZWwrJzwvdGQ+PHRkIGNsYXNzPVwidmFsdWVcIj4nK2RbMF0udmFsdWUrJzwvdGQ+PC90cj4nO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbWFya3VwICs9ICc8L3Rib2R5PjwvdGFibGU+J1xuICAgICAgICAgICAgICByZXR1cm4gbWFya3VwO1xuICAgICAgICAgIH1cbiAgICAgIH07XG4gICAgICAgIFxuICAgICAgcmV0dXJuIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuY29tcGFyZS5yZW5kZXIoZWxlbWVudCwgb3B0aW9ucywgY29sdW1ucywgeHMsIHhMYWJlbCwgeUxhYmVsLCB0b29sdGlwLCBmb3JtYXR0ZWREYXRhKTtcbiAgfTtcblxuICBwb3BpbHlDaGFydC5jaGFydFR5cGVzLnNjYXR0ZXJwbG90ID0gY2hhcnQ7XG59KSh3aW5kb3cpO1xuIiwiKGZ1bmN0aW9uKHdpbmRvdykge1xuICB2YXIgcG9waWx5Q2hhcnQgPSB3aW5kb3cucG9waWx5LmNoYXJ0O1xuICB2YXIgZm9ybWF0ID0gcG9waWx5Q2hhcnQuZm9ybWF0O1xuICBcbiAgdmFyIGNoYXJ0ID0gXy5jbG9uZShwb3BpbHlDaGFydC5iYXNlQ2hhcnQpO1xuICBjaGFydC5hc3NpZ25BeGlzID0gZnVuY3Rpb24oY29sdW1ucywgY2FsY3VsYXRpb24sIG9wdGlvbnMpIHtcbiAgICAgIHZhciBheGlzID0ge1xuICAgICAgICBjb2x1bW5zOiBjb2x1bW5zXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGF4aXM7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgZm9ybWF0dGVkRGF0YSkge1xuICAgICAgdmFyIGNvbHVtbnMgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS5jb2x1bW5zO1xuICAgICAgdmFyIGNhbGN1bGF0aW9uID0gZm9ybWF0dGVkRGF0YS5jaGFydERhdGEuY2FsY3VsYXRpb247XG4gICAgICB2YXIgaGVhZGVyID0gXy5wbHVjayhjb2x1bW5zLCdsYWJlbCcpWzBdO1xuICAgICAgdmFyIHZhbHVlID0gZm9ybWF0LmZvcm1hdE51bWJlcnMoXy5wbHVjayhjb2x1bW5zLCd2YWx1ZXMnKSlbMF07ICAgICAgXG4gICAgICB2YXIgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gJ1RoZSAnICsgZm9ybWF0LndyYXBMYWJlbChjYWxjdWxhdGlvbikgKyAnIG9mICcgKyBmb3JtYXQud3JhcExhYmVsKGhlYWRlcikgKyAnIGlzICcgKyBmb3JtYXQud3JhcExhYmVsKHZhbHVlKTtcblxuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgcmV0dXJuIHA7XG4gIH07XG5cbiAgcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5zZW50ZW5jZSA9IGNoYXJ0O1xufSkod2luZG93KTtcbiIsIihmdW5jdGlvbih3aW5kb3cpIHtcbiAgdmFyIHBvcGlseUNoYXJ0ID0gd2luZG93LnBvcGlseS5jaGFydDtcblxuICB2YXIgY2hhcnQgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG4gIGNoYXJ0LmFzc2lnbkF4aXMgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuYmFyQ29tbW9uLmFzc2lnbkF4aXMoY29sdW1ucyxjYWxjdWxhdGlvbixvcHRpb25zKTtcbiAgfTtcblxuICBjaGFydC5yZW5kZXIgPSBmdW5jdGlvbihlbGVtZW50LCBvcHRpb25zLCByYXdEYXRhKSB7XG4gICAgICByZXR1cm4gcG9waWx5Q2hhcnQuY2hhcnRUeXBlcy5saW5lYXIucmVuZGVyKGVsZW1lbnQsIG9wdGlvbnMsIHJhd0RhdGEsIHRydWUpO1xuICB9O1xuXG4gIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMuc3RhY2tlZEFyZWEgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iLCIoZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBwb3BpbHlDaGFydCA9IHdpbmRvdy5wb3BpbHkuY2hhcnQ7XG4gIFxuICB2YXIgY2hhcnQgPSBfLmNsb25lKHBvcGlseUNoYXJ0LmJhc2VDaGFydCk7XG4gIGNoYXJ0LmFzc2lnbkF4aXMgPSBmdW5jdGlvbihjb2x1bW5zLCBjYWxjdWxhdGlvbiwgb3B0aW9ucykge1xuICAgICAgdmFyIGF4aXMgPSB7XG4gICAgICAgIGNvbHVtbnM6IGNvbHVtbnNcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXhpcztcbiAgfTtcblxuXG4gIGNoYXJ0LnByZXBEYXRhID0gZnVuY3Rpb24oZm9ybWF0dGVkRGF0YSwgb3B0aW9ucykge1xuICAgICAgdmFyIGNvbHVtbnMgPSBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS5jb2x1bW5zO1xuICAgICAgdmFyIGludGVydmFsID0gb3B0aW9ucy5pbnRlcnZhbCB8fCBmb3JtYXR0ZWREYXRhLmNoYXJ0RGF0YS5kZWZhdWx0VmFyaWF0aW9uO1xuXG4gICAgICBfLmVhY2goY29sdW1ucywgZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgaWYoY29sdW1uLmRhdGFUeXBlID09PSAnZGF0ZXRpbWUnKSB7XG4gICAgICAgICAgICBjb2x1bW4udmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LmZvcm1hdERhdGVzKGNvbHVtbi52YWx1ZXMsaW50ZXJ2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmKGNvbHVtbi5kYXRhVHlwZSA9PT0gJ251bWVyaWMnKSB7XG4gICAgICAgICAgICBjb2x1bW4udmFsdWVzID0gcG9waWx5Q2hhcnQuZm9ybWF0LmZvcm1hdE51bWJlcnMoY29sdW1uLnZhbHVlcywyKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNvbHVtbnM7XG4gIH07XG5cbiAgY2hhcnQucmVuZGVyID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucywgZm9ybWF0dGVkRGF0YSkge1xuICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnByZXBEYXRhKGZvcm1hdHRlZERhdGEsb3B0aW9ucyk7XG4gICAgICB2YXIgaGVhZGVycyA9IF8ucGx1Y2soY29sdW1ucywnbGFiZWwnKTtcbiAgICAgIHZhciB2YWx1ZXMgPSBfLnBsdWNrKGNvbHVtbnMsJ3ZhbHVlcycpO1xuICAgICAgdmFyIHJvd3MgPSBfLnppcC5hcHBseShudWxsLCB2YWx1ZXMpO1xuXG4gICAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgdmFyIHRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICAgIHZhciB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICB2YXIgdGhlYWRyb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICBfLmVhY2goaGVhZGVycyxmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdmFyIHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgdGguaW5uZXJIVE1MID0gaGVhZGVyO1xuICAgICAgICB0aGVhZHJvdy5hcHBlbmRDaGlsZCh0aCk7XG4gICAgICB9KTtcblxuICAgICAgXy5lYWNoKHJvd3MsIGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICAgIHZhciB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgXy5lYWNoKGl0ZW1zLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICB2YXIgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgdGQuaW5uZXJIVE1MID0gaXRlbTtcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICB9KTtcblxuICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQodGhlYWRyb3cpO1xuICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuXG4gICAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcblxuICAgICAgcmV0dXJuIHRhYmxlO1xuICB9O1xuXG4gIHBvcGlseUNoYXJ0LmNoYXJ0VHlwZXMudGFibGUgPSBjaGFydDtcbn0pKHdpbmRvdyk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
