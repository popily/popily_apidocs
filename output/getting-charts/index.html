<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Popily API Documentation">
    <meta name="author" content="Popily">
    <link rel="icon" href="../favicon.ico">

    <title>Popily API Documentation</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="../theme/css/bootstrap.css" />

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link rel="stylesheet" type="text/css" href="../theme/css/ie10-viewport-bug-workaround.css" />
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="../theme/css/style.css" />

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700|Open+Sans+Condensed:300,700|Lato:400,700' rel='stylesheet' type='text/css'>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        

</head>

<body>
    <div class='bar'>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class='main-logo' href="http://popily.com/" title="Home"></a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="http://popily.com/about/"> About The Team </a></li>
                    <li><a href="http://developers.popily.com/"> API Docs </a></li>
                    <li><a href="http://blog.popily.com/"> Blog </a></li>
                    <li><a href="http://partiallyderivative.com"> Podcast </a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </nav>
        <div class="hero">
            <h1 class="post-title">Made For Developers With <span style='color:#e74c3c; font-size: 1.5em;position: relative; top: 8px;'>&hearts;</span></h1>
        </div>
    </div>
    <!-- end of header section -->
    <div class="container">
        <div class='row'>
            <div class='col-sm-3'>
<div class="sidebar panel-group">
    <h4>
        <a href="/">Get Started!</a>
    </h4>
    <h4>
        <a href="/data-analysis-101">Data Analysis 101</a>
    </h4>
    <h4>
        <a href="/authentication">Authentication</a>
    </h4>
    <h4>
        <a href="/adding-data">Adding Data</a>
    </h4>
    <h4>
        <a href="/getting-charts">Getting Charts</a>
    </h4>
    <h4>
        <a href="/transforming-chart-data">Transforming Chart Data</a>
    </h4>
    <h4>
        <a href="/customizing-chart-presentation">Customizing Chart Presentation</a>
    </h4>

</div>            </div>
            <div class='col-sm-9'>
<section id="content" class="body">
  <header>
    <h1>
      Getting Charts
    </h1>
  </header>
<p>Once you've added data to Popily, visualizing it is easy. Each visualization represents the relationship between two or more columns. We call these relationships <strong>Insights</strong>. So you ask the for the relationship you want, and you get Insights back. </p>
<h3>Table of Contents</h3>
<p><a name="getting-one-chart"></a>
<strong>Part 1</strong>: <a href="#getting-one-chart">Getting one chart</a></p>
<p><strong>Part 2</strong>: <a href="#getting-list-charts">Getting a list of charts</a></p>
<h2>Getting just one chart</h2>
<p>Most often you'll want a single Insight, which looks like this:</p>
<div class="highlight"><pre><span class="c1">// Get the relationship between favorite color and salary</span>
<span class="kd">var</span> <span class="nx">insightOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">source</span><span class="o">:</span> <span class="s1">&#39;my-employee-salary-source-slug&#39;</span><span class="p">,</span> 
    <span class="nx">columns</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;employees.favorite_color&#39;</span><span class="p">,</span> <span class="s1">&#39;salaries.amount&#39;</span><span class="p">]</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">chart</span><span class="p">.</span><span class="nx">getAndRender</span><span class="p">(</span><span class="s1">&#39;#some-element&#39;</span><span class="p">,</span> <span class="nx">insightOptions</span><span class="p">);</span>
</pre></div>


<p>In the above example, we're looking for the relationship between <code>employees.favorite_color</code> and <code>salaries.amount</code>, two columns in the Data Source identified by the slug <code>my-employee-salary-source-slug</code>. </p>
<p>By default Popily returns the chart that it thinks will be most interesting, but this won't always be exactly what you want. Let's say, for instance, that when you asked for an Insight about <code>employees.favorite_color</code> and <code>salaries.amount</code>, it returned the <em>total</em> salary for each favorite color, but you want the <em>average</em>. No problem! You can specifiy the calculation you want like this:</p>
<div class="highlight"><pre><span class="c1">// Get the relationship between favorite color and salary</span>
<span class="kd">var</span> <span class="nx">insightOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">source</span><span class="o">:</span> <span class="s1">&#39;my-employee-salary-source-slug&#39;</span><span class="p">,</span> 
    <span class="nx">columns</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;employees.favorite_color&#39;</span><span class="p">,</span> <span class="s1">&#39;salaries.amount&#39;</span><span class="p">],</span>
    <span class="nx">calculation</span><span class="o">:</span> <span class="s1">&#39;average&#39;</span>
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">chart</span><span class="p">.</span><span class="nx">getAndRender</span><span class="p">(</span><span class="s1">&#39;#some-element&#39;</span><span class="p">,</span> <span class="nx">insightOptions</span><span class="p">);</span>
</pre></div>


<p>The types of calculations Popily performs are: </p>
<table>
<thead>
<tr>
<th>Calculation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>average</td>
<td>Average of a number</td>
</tr>
<tr>
<td>sum</td>
<td>Total of a number</td>
</tr>
<tr>
<td>count</td>
<td>Number of rows, used for categories and dates</td>
</tr>
<tr>
<td>ratio</td>
<td>Percentage of rows, used for categories and dates</td>
</tr>
<tr>
<td>comparison</td>
<td>Compares two numbers, produces scatterplots</td>
</tr>
<tr>
<td>geo</td>
<td>Geospatial information, produces maps</td>
</tr>
</tbody>
</table>
<p>If you already know the slug or id of an individual Insight, for example the Insight that represents the average employee salary grouped by favorite color, you can request that Insight directly. For example:</p>
<p><a name="getting-list-charts"></a></p>
<div class="highlight"><pre><span class="c1">// Get the relationship between favorite color and salary</span>
<span class="kd">var</span> <span class="nx">insightOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">insight</span><span class="o">:</span> <span class="s1">&#39;employees-favorite-color-salaries-amount&#39;</span> 
<span class="p">};</span>

<span class="nx">popily</span><span class="p">.</span><span class="nx">chart</span><span class="p">.</span><span class="nx">getAndRender</span><span class="p">(</span><span class="s1">&#39;#some-element&#39;</span><span class="p">,</span> <span class="nx">insightOptions</span><span class="p">);</span>
</pre></div>


<h2>Getting a list of charts</h2>
<p>Throughout the documentation we make liberal use of the <code>getAndRender</code> method of the JavaScript browser client. This method always returns just one Insight, because that's what people normally want. However you can also return a filtered list of Insights. This can be useful if, like in Popily's user interface, you're helping a user to explore his or her data. </p>
<p>To do this we'll directly access the <code>getInsights</code> method of <code>popily.api</code> in the JavaScript browser client. This functionality is also exposed in the Node.js and Python clients.</p>
<p>The simplest way to return a list of Insights is by returning all of the Insights for a given Data Source. </p>
<div class="highlight"><pre><span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">&#39;some-source-slug&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">insights</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// insights</span>
<span class="p">});</span>
</pre></div>


<p>This could return a lot of Insights, so you'll need to paginate through the results. Here's an example response with the <code>count</code>, <code>next</code> and <code>previous</code> properties you'd use to work your way through the list of Insights.</p>
<div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="nt">&quot;previous&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;refresh_rate&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Number of number_3 Grouped by Value&quot;</span><span class="p">,</span>
        <span class="nt">&quot;calculation&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
        <span class="nt">&quot;slug&quot;</span><span class="p">:</span> <span class="s2">&quot;number-3-21&quot;</span><span class="p">,</span>
        <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="mi">336</span><span class="p">,</span>
        <span class="nt">&quot;insight_metadata&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">246367</span><span class="p">,</span>
        <span class="nt">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;5.207 to 6.0749&quot;</span><span class="p">,</span> <span class="s2">&quot;6.943 to 7.811&quot;</span><span class="p">,</span> <span class="s2">&quot;0.868 to 1.736&quot;</span><span class="p">,</span> <span class="s2">&quot;0.000227 to 0.868&quot;</span><span class="p">,</span> <span class="s2">&quot;6.0749 to 6.943&quot;</span><span class="p">,</span> <span class="s2">&quot;4.339 to 5.207&quot;</span><span class="p">,</span> <span class="s2">&quot;1.736 to 2.604&quot;</span><span class="p">,</span> <span class="s2">&quot;3.471 to 4.339&quot;</span><span class="p">,</span> <span class="s2">&quot;2.604 to 3.471&quot;</span><span class="p">],</span>
            <span class="nt">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;category&quot;</span><span class="p">,</span>
            <span class="nt">&quot;column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;number_3&quot;</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;102&quot;</span><span class="p">,</span> <span class="s2">&quot;51&quot;</span><span class="p">,</span> <span class="s2">&quot;204&quot;</span><span class="p">,</span> <span class="s2">&quot;254541&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;51&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">],</span>
            <span class="nt">&quot;data_type&quot;</span><span class="p">:</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span>
            <span class="nt">&quot;column_header&quot;</span><span class="p">:</span> <span class="s2">&quot;count_0&quot;</span>
        <span class="p">}]</span>
    <span class="p">}],</span>
    <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="s2">&quot;https://popily.com/api/insights/?source=336&amp;page=2&quot;</span>
<span class="p">}</span>
</pre></div>


<p>You can pass each item in the <code>results</code> array to the <code>render</code> method of Popily's browser client, which accepts all the same customization options as <code>getAndRender</code>.</p>
<div class="highlight"><pre><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">popily</span><span class="p">.</span><span class="nx">chart</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="s1">&#39;#chart-&#39;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p>If you're only looking for Insights about specific columns in a given Data Source, that's cool too. </p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;salaries.amount&#39;</span><span class="p">,</span> <span class="s1">&#39;employees.favorite_color&#39;</span><span class="p">];</span>
<span class="nx">popily</span><span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">getInsights</span><span class="p">(</span><span class="s1">&#39;my-employee-salary-source-slug&#39;</span><span class="p">,</span> 
                        <span class="p">{</span><span class="nx">columns</span><span class="o">:</span> <span class="nx">columns</span><span class="p">},</span> 
                        <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">apiResponse</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">apiResponse</span><span class="p">);</span>
                        <span class="p">});</span>
</pre></div>
</section>
            </div>
        </div>

    </div>
    <!-- start of footer section -->
    <footer class="footer">
        <div class="container">
            <p class="text-muted">
                <center>
                    &copy; <time datetime="2016">2016</time> Popily, LLC All rights reserved.
                </center>
            </p>
        </div>
    </footer>

    <!-- Google Analytics Code Start -->
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-61764668-3', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- Google Analytics Code End -->

    <!-- Loading mathjax macro -->
    <!-- Load mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], displayMath: [ ['$$','$$'], ["\\[","\\]"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to
        left justify single line equations in code cells. displayAlign: 'center', "HTML-CSS": { styles: {'.MathJax_Display': {"margin": 0}}, linebreaks: { automatic: true } } });
    </script>
    <!-- End of mathjax configuration -->

    <!-- Bootstrap core JavaScript
      ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="../theme/js/jquery.min.js"><\/script>')
    </script>
    <script src="../theme/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../theme/js/ie10-viewport-bug-workaround.js"></script>
</body>

</html>